function hy(l,i){for(var r=0;r<i.length;r++){const s=i[r];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in l)){const d=Object.getOwnPropertyDescriptor(s,c);d&&Object.defineProperty(l,c,d.get?d:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function r(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(c){if(c.ep)return;c.ep=!0;const d=r(c);fetch(c.href,d)}})();function Qu(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function Qg(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var i=l.default;if(typeof i=="function"){var r=function s(){var c=!1;try{c=this instanceof s}catch{}return c?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};r.prototype=i.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(l).forEach(function(s){var c=Object.getOwnPropertyDescriptor(l,s);Object.defineProperty(r,s,c.get?c:{enumerable:!0,get:function(){return l[s]}})}),r}var vu={exports:{}},ur={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg;function gy(){if(rg)return ur;rg=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(s,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var g in c)g!=="key"&&(d[g]=c[g])}else d=c;return c=d.ref,{$$typeof:l,type:s,key:f,ref:c!==void 0?c:null,props:d}}return ur.Fragment=i,ur.jsx=r,ur.jsxs=r,ur}var sg;function my(){return sg||(sg=1,vu.exports=gy()),vu.exports}var S=my(),bu={exports:{}},fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lg;function py(){if(lg)return fe;lg=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),R=Symbol.iterator;function A(y){return y===null||typeof y!="object"?null:(y=R&&y[R]||y["@@iterator"],typeof y=="function"?y:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,L={};function Y(y,_,O){this.props=y,this.context=_,this.refs=L,this.updater=O||x}Y.prototype.isReactComponent={},Y.prototype.setState=function(y,_){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,_,"setState")},Y.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function Q(){}Q.prototype=Y.prototype;function K(y,_,O){this.props=y,this.context=_,this.refs=L,this.updater=O||x}var P=K.prototype=new Q;P.constructor=K,k(P,Y.prototype),P.isPureReactComponent=!0;var ie=Array.isArray;function W(){}var N={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function se(y,_,O){var j=O.ref;return{$$typeof:l,type:y,key:_,ref:j!==void 0?j:null,props:O}}function ye(y,_){return se(y.type,_,y.props)}function Ce(y){return typeof y=="object"&&y!==null&&y.$$typeof===l}function ee(y){var _={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(O){return _[O]})}var de=/\/+/g;function Te(y,_){return typeof y=="object"&&y!==null&&y.key!=null?ee(""+y.key):_.toString(36)}function ve(y){switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:switch(typeof y.status=="string"?y.then(W,W):(y.status="pending",y.then(function(_){y.status==="pending"&&(y.status="fulfilled",y.value=_)},function(_){y.status==="pending"&&(y.status="rejected",y.reason=_)})),y.status){case"fulfilled":return y.value;case"rejected":throw y.reason}}throw y}function M(y,_,O,j,H){var Z=typeof y;(Z==="undefined"||Z==="boolean")&&(y=null);var ue=!1;if(y===null)ue=!0;else switch(Z){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(y.$$typeof){case l:case i:ue=!0;break;case b:return ue=y._init,M(ue(y._payload),_,O,j,H)}}if(ue)return H=H(y),ue=j===""?"."+Te(y,0):j,ie(H)?(O="",ue!=null&&(O=ue.replace(de,"$&/")+"/"),M(H,_,O,"",function(It){return It})):H!=null&&(Ce(H)&&(H=ye(H,O+(H.key==null||y&&y.key===H.key?"":(""+H.key).replace(de,"$&/")+"/")+ue)),_.push(H)),1;ue=0;var le=j===""?".":j+":";if(ie(y))for(var Ee=0;Ee<y.length;Ee++)j=y[Ee],Z=le+Te(j,Ee),ue+=M(j,_,O,Z,H);else if(Ee=A(y),typeof Ee=="function")for(y=Ee.call(y),Ee=0;!(j=y.next()).done;)j=j.value,Z=le+Te(j,Ee++),ue+=M(j,_,O,Z,H);else if(Z==="object"){if(typeof y.then=="function")return M(ve(y),_,O,j,H);throw _=String(y),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.")}return ue}function I(y,_,O){if(y==null)return y;var j=[],H=0;return M(y,j,"","",function(Z){return _.call(O,Z,H++)}),j}function ae(y){if(y._status===-1){var _=y._result;_=_(),_.then(function(O){(y._status===0||y._status===-1)&&(y._status=1,y._result=O)},function(O){(y._status===0||y._status===-1)&&(y._status=2,y._result=O)}),y._status===-1&&(y._status=0,y._result=_)}if(y._status===1)return y._result.default;throw y._result}var pe=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(_))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)},Ae={map:I,forEach:function(y,_,O){I(y,function(){_.apply(this,arguments)},O)},count:function(y){var _=0;return I(y,function(){_++}),_},toArray:function(y){return I(y,function(_){return _})||[]},only:function(y){if(!Ce(y))throw Error("React.Children.only expected to receive a single React element child.");return y}};return fe.Activity=w,fe.Children=Ae,fe.Component=Y,fe.Fragment=r,fe.Profiler=c,fe.PureComponent=K,fe.StrictMode=s,fe.Suspense=p,fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,fe.__COMPILER_RUNTIME={__proto__:null,c:function(y){return N.H.useMemoCache(y)}},fe.cache=function(y){return function(){return y.apply(null,arguments)}},fe.cacheSignal=function(){return null},fe.cloneElement=function(y,_,O){if(y==null)throw Error("The argument must be a React element, but you passed "+y+".");var j=k({},y.props),H=y.key;if(_!=null)for(Z in _.key!==void 0&&(H=""+_.key),_)!J.call(_,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&_.ref===void 0||(j[Z]=_[Z]);var Z=arguments.length-2;if(Z===1)j.children=O;else if(1<Z){for(var ue=Array(Z),le=0;le<Z;le++)ue[le]=arguments[le+2];j.children=ue}return se(y.type,H,j)},fe.createContext=function(y){return y={$$typeof:f,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null},y.Provider=y,y.Consumer={$$typeof:d,_context:y},y},fe.createElement=function(y,_,O){var j,H={},Z=null;if(_!=null)for(j in _.key!==void 0&&(Z=""+_.key),_)J.call(_,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(H[j]=_[j]);var ue=arguments.length-2;if(ue===1)H.children=O;else if(1<ue){for(var le=Array(ue),Ee=0;Ee<ue;Ee++)le[Ee]=arguments[Ee+2];H.children=le}if(y&&y.defaultProps)for(j in ue=y.defaultProps,ue)H[j]===void 0&&(H[j]=ue[j]);return se(y,Z,H)},fe.createRef=function(){return{current:null}},fe.forwardRef=function(y){return{$$typeof:g,render:y}},fe.isValidElement=Ce,fe.lazy=function(y){return{$$typeof:b,_payload:{_status:-1,_result:y},_init:ae}},fe.memo=function(y,_){return{$$typeof:m,type:y,compare:_===void 0?null:_}},fe.startTransition=function(y){var _=N.T,O={};N.T=O;try{var j=y(),H=N.S;H!==null&&H(O,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(W,pe)}catch(Z){pe(Z)}finally{_!==null&&O.types!==null&&(_.types=O.types),N.T=_}},fe.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},fe.use=function(y){return N.H.use(y)},fe.useActionState=function(y,_,O){return N.H.useActionState(y,_,O)},fe.useCallback=function(y,_){return N.H.useCallback(y,_)},fe.useContext=function(y){return N.H.useContext(y)},fe.useDebugValue=function(){},fe.useDeferredValue=function(y,_){return N.H.useDeferredValue(y,_)},fe.useEffect=function(y,_){return N.H.useEffect(y,_)},fe.useEffectEvent=function(y){return N.H.useEffectEvent(y)},fe.useId=function(){return N.H.useId()},fe.useImperativeHandle=function(y,_,O){return N.H.useImperativeHandle(y,_,O)},fe.useInsertionEffect=function(y,_){return N.H.useInsertionEffect(y,_)},fe.useLayoutEffect=function(y,_){return N.H.useLayoutEffect(y,_)},fe.useMemo=function(y,_){return N.H.useMemo(y,_)},fe.useOptimistic=function(y,_){return N.H.useOptimistic(y,_)},fe.useReducer=function(y,_,O){return N.H.useReducer(y,_,O)},fe.useRef=function(y){return N.H.useRef(y)},fe.useState=function(y){return N.H.useState(y)},fe.useSyncExternalStore=function(y,_,O){return N.H.useSyncExternalStore(y,_,O)},fe.useTransition=function(){return N.H.useTransition()},fe.version="19.2.0",fe}var og;function Xu(){return og||(og=1,bu.exports=py()),bu.exports}var B=Xu();const pr=Qu(B);var _u={exports:{}},cr={},wu={exports:{}},Su={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function yy(){return ug||(ug=1,(function(l){function i(M,I){var ae=M.length;M.push(I);e:for(;0<ae;){var pe=ae-1>>>1,Ae=M[pe];if(0<c(Ae,I))M[pe]=I,M[ae]=Ae,ae=pe;else break e}}function r(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var I=M[0],ae=M.pop();if(ae!==I){M[0]=ae;e:for(var pe=0,Ae=M.length,y=Ae>>>1;pe<y;){var _=2*(pe+1)-1,O=M[_],j=_+1,H=M[j];if(0>c(O,ae))j<Ae&&0>c(H,O)?(M[pe]=H,M[j]=ae,pe=j):(M[pe]=O,M[_]=ae,pe=_);else if(j<Ae&&0>c(H,ae))M[pe]=H,M[j]=ae,pe=j;else break e}}return I}function c(M,I){var ae=M.sortIndex-I.sortIndex;return ae!==0?ae:M.id-I.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var f=Date,g=f.now();l.unstable_now=function(){return f.now()-g}}var p=[],m=[],b=1,w=null,R=3,A=!1,x=!1,k=!1,L=!1,Y=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function P(M){for(var I=r(m);I!==null;){if(I.callback===null)s(m);else if(I.startTime<=M)s(m),I.sortIndex=I.expirationTime,i(p,I);else break;I=r(m)}}function ie(M){if(k=!1,P(M),!x)if(r(p)!==null)x=!0,W||(W=!0,ee());else{var I=r(m);I!==null&&ve(ie,I.startTime-M)}}var W=!1,N=-1,J=5,se=-1;function ye(){return L?!0:!(l.unstable_now()-se<J)}function Ce(){if(L=!1,W){var M=l.unstable_now();se=M;var I=!0;try{e:{x=!1,k&&(k=!1,Q(N),N=-1),A=!0;var ae=R;try{t:{for(P(M),w=r(p);w!==null&&!(w.expirationTime>M&&ye());){var pe=w.callback;if(typeof pe=="function"){w.callback=null,R=w.priorityLevel;var Ae=pe(w.expirationTime<=M);if(M=l.unstable_now(),typeof Ae=="function"){w.callback=Ae,P(M),I=!0;break t}w===r(p)&&s(p),P(M)}else s(p);w=r(p)}if(w!==null)I=!0;else{var y=r(m);y!==null&&ve(ie,y.startTime-M),I=!1}}break e}finally{w=null,R=ae,A=!1}I=void 0}}finally{I?ee():W=!1}}}var ee;if(typeof K=="function")ee=function(){K(Ce)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Te=de.port2;de.port1.onmessage=Ce,ee=function(){Te.postMessage(null)}}else ee=function(){Y(Ce,0)};function ve(M,I){N=Y(function(){M(l.unstable_now())},I)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(M){M.callback=null},l.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<M?Math.floor(1e3/M):5},l.unstable_getCurrentPriorityLevel=function(){return R},l.unstable_next=function(M){switch(R){case 1:case 2:case 3:var I=3;break;default:I=R}var ae=R;R=I;try{return M()}finally{R=ae}},l.unstable_requestPaint=function(){L=!0},l.unstable_runWithPriority=function(M,I){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ae=R;R=M;try{return I()}finally{R=ae}},l.unstable_scheduleCallback=function(M,I,ae){var pe=l.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?pe+ae:pe):ae=pe,M){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=ae+Ae,M={id:b++,callback:I,priorityLevel:M,startTime:ae,expirationTime:Ae,sortIndex:-1},ae>pe?(M.sortIndex=ae,i(m,M),r(p)===null&&M===r(m)&&(k?(Q(N),N=-1):k=!0,ve(ie,ae-pe))):(M.sortIndex=Ae,i(p,M),x||A||(x=!0,W||(W=!0,ee()))),M},l.unstable_shouldYield=ye,l.unstable_wrapCallback=function(M){var I=R;return function(){var ae=R;R=I;try{return M.apply(this,arguments)}finally{R=ae}}}})(Su)),Su}var cg;function vy(){return cg||(cg=1,wu.exports=yy()),wu.exports}var Eu={exports:{}},st={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function by(){if(dg)return st;dg=1;var l=Xu();function i(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(i(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(p,m,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:p,containerInfo:m,implementation:b}}var f=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return st.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,st.createPortal=function(p,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(i(299));return d(p,m,null,b)},st.flushSync=function(p){var m=f.T,b=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=m,s.p=b,s.d.f()}},st.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},st.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},st.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var b=m.as,w=g(b,m.crossOrigin),R=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;b==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:w,integrity:R,fetchPriority:A}):b==="script"&&s.d.X(p,{crossOrigin:w,integrity:R,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},st.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var b=g(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},st.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var b=m.as,w=g(b,m.crossOrigin);s.d.L(p,b,{crossOrigin:w,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},st.preloadModule=function(p,m){if(typeof p=="string")if(m){var b=g(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},st.requestFormReset=function(p){s.d.r(p)},st.unstable_batchedUpdates=function(p,m){return p(m)},st.useFormState=function(p,m,b){return f.H.useFormState(p,m,b)},st.useFormStatus=function(){return f.H.useHostTransitionStatus()},st.version="19.2.0",st}var fg;function _y(){if(fg)return Eu.exports;fg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),Eu.exports=by(),Eu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hg;function wy(){if(hg)return cr;hg=1;var l=vy(),i=Xu(),r=_y();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(s(188))}function m(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,a=t;;){var o=n.return;if(o===null)break;var u=o.alternate;if(u===null){if(a=o.return,a!==null){n=a;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===n)return p(o),e;if(u===a)return p(o),t;u=u.sibling}throw Error(s(188))}if(n.return!==a.return)n=o,a=u;else{for(var h=!1,v=o.child;v;){if(v===n){h=!0,n=o,a=u;break}if(v===a){h=!0,a=o,n=u;break}v=v.sibling}if(!h){for(v=u.child;v;){if(v===n){h=!0,n=u,a=o;break}if(v===a){h=!0,a=u,n=o;break}v=v.sibling}if(!h)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,R=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),K=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),ye=Symbol.for("react.memo_cache_sentinel"),Ce=Symbol.iterator;function ee(e){return e===null||typeof e!="object"?null:(e=Ce&&e[Ce]||e["@@iterator"],typeof e=="function"?e:null)}var de=Symbol.for("react.client.reference");function Te(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===de?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k:return"Fragment";case Y:return"Profiler";case L:return"StrictMode";case ie:return"Suspense";case W:return"SuspenseList";case se:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case x:return"Portal";case K:return e.displayName||"Context";case Q:return(e._context.displayName||"Context")+".Consumer";case P:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return t=e.displayName||null,t!==null?t:Te(e.type)||"Memo";case J:t=e._payload,e=e._init;try{return Te(e(t))}catch{}}return null}var ve=Array.isArray,M=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},pe=[],Ae=-1;function y(e){return{current:e}}function _(e){0>Ae||(e.current=pe[Ae],pe[Ae]=null,Ae--)}function O(e,t){Ae++,pe[Ae]=e.current,e.current=t}var j=y(null),H=y(null),Z=y(null),ue=y(null);function le(e,t){switch(O(Z,t),O(H,e),O(j,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Rh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Rh(t),e=jh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}_(j),O(j,e)}function Ee(){_(j),_(H),_(Z)}function It(e){e.memoizedState!==null&&O(ue,e);var t=j.current,n=jh(t,e.type);t!==n&&(O(H,e),O(j,n))}function vi(e){H.current===e&&(_(j),_(H)),ue.current===e&&(_(ue),rr._currentValue=ae)}var Zt,bi;function Qn(e){if(Zt===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Zt=t&&t[1]||"",bi=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zt+e+bi}var el=!1;function tl(e,t){if(!e||el)return"";el=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(q){var D=q}Reflect.construct(e,[],V)}else{try{V.call()}catch(q){D=q}e.call(V.prototype)}}else{try{throw Error()}catch(q){D=q}(V=e())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(q){if(q&&D&&typeof q.stack=="string")return[q.stack,D.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=a.DetermineComponentFrameRoot(),h=u[0],v=u[1];if(h&&v){var E=h.split(`
`),z=v.split(`
`);for(o=a=0;a<E.length&&!E[a].includes("DetermineComponentFrameRoot");)a++;for(;o<z.length&&!z[o].includes("DetermineComponentFrameRoot");)o++;if(a===E.length||o===z.length)for(a=E.length-1,o=z.length-1;1<=a&&0<=o&&E[a]!==z[o];)o--;for(;1<=a&&0<=o;a--,o--)if(E[a]!==z[o]){if(a!==1||o!==1)do if(a--,o--,0>o||E[a]!==z[o]){var $=`
`+E[a].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=a&&0<=o);break}}}finally{el=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Qn(n):""}function Ym(e,t){switch(e.tag){case 26:case 27:case 5:return Qn(e.type);case 16:return Qn("Lazy");case 13:return e.child!==t&&t!==null?Qn("Suspense Fallback"):Qn("Suspense");case 19:return Qn("SuspenseList");case 0:case 15:return tl(e.type,!1);case 11:return tl(e.type.render,!1);case 1:return tl(e.type,!0);case 31:return Qn("Activity");default:return""}}function ic(e){try{var t="",n=null;do t+=Ym(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var nl=Object.prototype.hasOwnProperty,il=l.unstable_scheduleCallback,al=l.unstable_cancelCallback,Km=l.unstable_shouldYield,Qm=l.unstable_requestPaint,pt=l.unstable_now,Xm=l.unstable_getCurrentPriorityLevel,ac=l.unstable_ImmediatePriority,rc=l.unstable_UserBlockingPriority,wr=l.unstable_NormalPriority,Jm=l.unstable_LowPriority,sc=l.unstable_IdlePriority,Im=l.log,Zm=l.unstable_setDisableYieldValue,ya=null,yt=null;function yn(e){if(typeof Im=="function"&&Zm(e),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(ya,e)}catch{}}var vt=Math.clz32?Math.clz32:Wm,Pm=Math.log,Fm=Math.LN2;function Wm(e){return e>>>=0,e===0?32:31-(Pm(e)/Fm|0)|0}var Sr=256,Er=262144,xr=4194304;function Xn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Tr(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var o=0,u=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var v=a&134217727;return v!==0?(a=v&~u,a!==0?o=Xn(a):(h&=v,h!==0?o=Xn(h):n||(n=v&~e,n!==0&&(o=Xn(n))))):(v=a&~u,v!==0?o=Xn(v):h!==0?o=Xn(h):n||(n=a&~e,n!==0&&(o=Xn(n)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,n=t&-t,u>=n||u===32&&(n&4194048)!==0)?t:o}function va(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ep(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lc(){var e=xr;return xr<<=1,(xr&62914560)===0&&(xr=4194304),e}function rl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ba(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function tp(e,t,n,a,o,u){var h=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var v=e.entanglements,E=e.expirationTimes,z=e.hiddenUpdates;for(n=h&~n;0<n;){var $=31-vt(n),V=1<<$;v[$]=0,E[$]=-1;var D=z[$];if(D!==null)for(z[$]=null,$=0;$<D.length;$++){var q=D[$];q!==null&&(q.lane&=-536870913)}n&=~V}a!==0&&oc(e,a,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(h&~t))}function oc(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-vt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function uc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-vt(n),o=1<<a;o&t|e[a]&t&&(e[a]|=t),n&=~o}}function cc(e,t){var n=t&-t;return n=(n&42)!==0?1:sl(n),(n&(e.suspendedLanes|t))!==0?0:n}function sl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ll(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function dc(){var e=I.p;return e!==0?e:(e=window.event,e===void 0?32:Fh(e.type))}function fc(e,t){var n=I.p;try{return I.p=e,t()}finally{I.p=n}}var vn=Math.random().toString(36).slice(2),tt="__reactFiber$"+vn,ut="__reactProps$"+vn,_i="__reactContainer$"+vn,ol="__reactEvents$"+vn,np="__reactListeners$"+vn,ip="__reactHandles$"+vn,hc="__reactResources$"+vn,_a="__reactMarker$"+vn;function ul(e){delete e[tt],delete e[ut],delete e[ol],delete e[np],delete e[ip]}function wi(e){var t=e[tt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_i]||n[tt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Mh(e);e!==null;){if(n=e[tt])return n;e=Mh(e)}return t}e=n,n=e.parentNode}return null}function Si(e){if(e=e[tt]||e[_i]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function wa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Ei(e){var t=e[hc];return t||(t=e[hc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[_a]=!0}var gc=new Set,mc={};function Jn(e,t){xi(e,t),xi(e+"Capture",t)}function xi(e,t){for(mc[e]=t,e=0;e<t.length;e++)gc.add(t[e])}var ap=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yc={},vc={};function rp(e){return nl.call(vc,e)?!0:nl.call(yc,e)?!1:ap.test(e)?vc[e]=!0:(yc[e]=!0,!1)}function Ar(e,t,n){if(rp(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Or(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Pt(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function jt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sp(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var o=a.get,u=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){n=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cl(e){if(!e._valueTracker){var t=bc(e)?"checked":"value";e._valueTracker=sp(e,t,""+e[t])}}function _c(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=bc(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Rr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var lp=/[\n"\\]/g;function Ct(e){return e.replace(lp,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function dl(e,t,n,a,o,u,h,v){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+jt(t)):e.value!==""+jt(t)&&(e.value=""+jt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?fl(e,h,jt(t)):n!=null?fl(e,h,jt(n)):a!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+jt(v):e.removeAttribute("name")}function wc(e,t,n,a,o,u,h,v){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||n!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){cl(e);return}n=n!=null?""+jt(n):"",t=t!=null?""+jt(t):n,v||t===e.value||(e.value=t),e.defaultValue=t}a=a??o,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=v?e.checked:!!a,e.defaultChecked=!!a,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),cl(e)}function fl(e,t,n){t==="number"&&Rr(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ti(e,t,n,a){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&a&&(e[n].defaultSelected=!0)}else{for(n=""+jt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,a&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Sc(e,t,n){if(t!=null&&(t=""+jt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+jt(n):""}function Ec(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(s(92));if(ve(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=jt(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),cl(e)}function Ai(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var op=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xc(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||op.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tc(e,t,n){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var o in t)a=t[o],t.hasOwnProperty(o)&&n[o]!==a&&xc(e,o,a)}else for(var u in t)t.hasOwnProperty(u)&&xc(e,u,t[u])}function hl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var up=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jr(e){return cp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ft(){}var gl=null;function ml(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Oi=null,Ri=null;function Ac(e){var t=Si(e);if(t&&(e=t.stateNode)){var n=e[ut]||null;e:switch(e=t.stateNode,t.type){case"input":if(dl(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ct(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var o=a[ut]||null;if(!o)throw Error(s(90));dl(a,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&_c(a)}break e;case"textarea":Sc(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ti(e,!!n.multiple,t,!1)}}}var pl=!1;function Oc(e,t,n){if(pl)return e(t,n);pl=!0;try{var a=e(t);return a}finally{if(pl=!1,(Oi!==null||Ri!==null)&&(ps(),Oi&&(t=Oi,e=Ri,Ri=Oi=null,Ac(t),e)))for(t=0;t<e.length;t++)Ac(e[t])}}function Sa(e,t){var n=e.stateNode;if(n===null)return null;var a=n[ut]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yl=!1;if(Wt)try{var Ea={};Object.defineProperty(Ea,"passive",{get:function(){yl=!0}}),window.addEventListener("test",Ea,Ea),window.removeEventListener("test",Ea,Ea)}catch{yl=!1}var bn=null,vl=null,Cr=null;function Rc(){if(Cr)return Cr;var e,t=vl,n=t.length,a,o="value"in bn?bn.value:bn.textContent,u=o.length;for(e=0;e<n&&t[e]===o[e];e++);var h=n-e;for(a=1;a<=h&&t[n-a]===o[u-a];a++);return Cr=o.slice(e,1<a?1-a:void 0)}function kr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ur(){return!0}function jc(){return!1}function ct(e){function t(n,a,o,u,h){this._reactName=n,this._targetInst=o,this.type=a,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(n=e[v],this[v]=n?n(u):u[v]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Ur:jc,this.isPropagationStopped=jc,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),t}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zr=ct(In),xa=w({},In,{view:0,detail:0}),dp=ct(xa),bl,_l,Ta,Dr=w({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ta&&(Ta&&e.type==="mousemove"?(bl=e.screenX-Ta.screenX,_l=e.screenY-Ta.screenY):_l=bl=0,Ta=e),bl)},movementY:function(e){return"movementY"in e?e.movementY:_l}}),Cc=ct(Dr),fp=w({},Dr,{dataTransfer:0}),hp=ct(fp),gp=w({},xa,{relatedTarget:0}),wl=ct(gp),mp=w({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),pp=ct(mp),yp=w({},In,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vp=ct(yp),bp=w({},In,{data:0}),kc=ct(bp),_p={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ep(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sp[e])?!!t[e]:!1}function Sl(){return Ep}var xp=w({},xa,{key:function(e){if(e.key){var t=_p[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sl,charCode:function(e){return e.type==="keypress"?kr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Tp=ct(xp),Ap=w({},Dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=ct(Ap),Op=w({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sl}),Rp=ct(Op),jp=w({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cp=ct(jp),kp=w({},Dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Up=ct(kp),zp=w({},In,{newState:0,oldState:0}),Dp=ct(zp),Np=[9,13,27,32],El=Wt&&"CompositionEvent"in window,Aa=null;Wt&&"documentMode"in document&&(Aa=document.documentMode);var Mp=Wt&&"TextEvent"in window&&!Aa,zc=Wt&&(!El||Aa&&8<Aa&&11>=Aa),Dc=" ",Nc=!1;function Mc(e,t){switch(e){case"keyup":return Np.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ji=!1;function Bp(e,t){switch(e){case"compositionend":return Bc(t);case"keypress":return t.which!==32?null:(Nc=!0,Dc);case"textInput":return e=t.data,e===Dc&&Nc?null:e;default:return null}}function qp(e,t){if(ji)return e==="compositionend"||!El&&Mc(e,t)?(e=Rc(),Cr=vl=bn=null,ji=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zc&&t.locale!=="ko"?null:t.data;default:return null}}var Lp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lp[e.type]:t==="textarea"}function Lc(e,t,n,a){Oi?Ri?Ri.push(a):Ri=[a]:Oi=a,t=Es(t,"onChange"),0<t.length&&(n=new zr("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Oa=null,Ra=null;function Hp(e){Sh(e,0)}function Nr(e){var t=wa(e);if(_c(t))return e}function Hc(e,t){if(e==="change")return t}var $c=!1;if(Wt){var xl;if(Wt){var Tl="oninput"in document;if(!Tl){var Gc=document.createElement("div");Gc.setAttribute("oninput","return;"),Tl=typeof Gc.oninput=="function"}xl=Tl}else xl=!1;$c=xl&&(!document.documentMode||9<document.documentMode)}function Vc(){Oa&&(Oa.detachEvent("onpropertychange",Yc),Ra=Oa=null)}function Yc(e){if(e.propertyName==="value"&&Nr(Ra)){var t=[];Lc(t,Ra,e,ml(e)),Oc(Hp,t)}}function $p(e,t,n){e==="focusin"?(Vc(),Oa=t,Ra=n,Oa.attachEvent("onpropertychange",Yc)):e==="focusout"&&Vc()}function Gp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nr(Ra)}function Vp(e,t){if(e==="click")return Nr(t)}function Yp(e,t){if(e==="input"||e==="change")return Nr(t)}function Kp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:Kp;function ja(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var o=n[a];if(!nl.call(t,o)||!bt(e[o],t[o]))return!1}return!0}function Kc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qc(e,t){var n=Kc(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kc(n)}}function Xc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Rr(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Rr(e.document)}return t}function Al(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Qp=Wt&&"documentMode"in document&&11>=document.documentMode,Ci=null,Ol=null,Ca=null,Rl=!1;function Ic(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rl||Ci==null||Ci!==Rr(a)||(a=Ci,"selectionStart"in a&&Al(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ca&&ja(Ca,a)||(Ca=a,a=Es(Ol,"onSelect"),0<a.length&&(t=new zr("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=Ci)))}function Zn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ki={animationend:Zn("Animation","AnimationEnd"),animationiteration:Zn("Animation","AnimationIteration"),animationstart:Zn("Animation","AnimationStart"),transitionrun:Zn("Transition","TransitionRun"),transitionstart:Zn("Transition","TransitionStart"),transitioncancel:Zn("Transition","TransitionCancel"),transitionend:Zn("Transition","TransitionEnd")},jl={},Zc={};Wt&&(Zc=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);function Pn(e){if(jl[e])return jl[e];if(!ki[e])return e;var t=ki[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Zc)return jl[e]=t[n];return e}var Pc=Pn("animationend"),Fc=Pn("animationiteration"),Wc=Pn("animationstart"),Xp=Pn("transitionrun"),Jp=Pn("transitionstart"),Ip=Pn("transitioncancel"),ed=Pn("transitionend"),td=new Map,Cl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cl.push("scrollEnd");function Lt(e,t){td.set(e,t),Jn(t,[e])}var Mr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},kt=[],Ui=0,kl=0;function Br(){for(var e=Ui,t=kl=Ui=0;t<e;){var n=kt[t];kt[t++]=null;var a=kt[t];kt[t++]=null;var o=kt[t];kt[t++]=null;var u=kt[t];if(kt[t++]=null,a!==null&&o!==null){var h=a.pending;h===null?o.next=o:(o.next=h.next,h.next=o),a.pending=o}u!==0&&nd(n,o,u)}}function qr(e,t,n,a){kt[Ui++]=e,kt[Ui++]=t,kt[Ui++]=n,kt[Ui++]=a,kl|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Ul(e,t,n,a){return qr(e,t,n,a),Lr(e)}function Fn(e,t){return qr(e,null,null,t),Lr(e)}function nd(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var o=!1,u=e.return;u!==null;)u.childLanes|=n,a=u.alternate,a!==null&&(a.childLanes|=n),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-vt(n),e=u.hiddenUpdates,a=e[o],a===null?e[o]=[t]:a.push(t),t.lane=n|536870912),u):null}function Lr(e){if(50<Fa)throw Fa=0,Go=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var zi={};function Zp(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,n,a){return new Zp(e,t,n,a)}function zl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function en(e,t){var n=e.alternate;return n===null?(n=_t(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function id(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hr(e,t,n,a,o,u){var h=0;if(a=e,typeof e=="function")zl(e)&&(h=1);else if(typeof e=="string")h=ty(e,n,j.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case se:return e=_t(31,n,t,o),e.elementType=se,e.lanes=u,e;case k:return Wn(n.children,o,u,t);case L:h=8,o|=24;break;case Y:return e=_t(12,n,t,o|2),e.elementType=Y,e.lanes=u,e;case ie:return e=_t(13,n,t,o),e.elementType=ie,e.lanes=u,e;case W:return e=_t(19,n,t,o),e.elementType=W,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K:h=10;break e;case Q:h=9;break e;case P:h=11;break e;case N:h=14;break e;case J:h=16,a=null;break e}h=29,n=Error(s(130,e===null?"null":typeof e,"")),a=null}return t=_t(h,n,t,o),t.elementType=e,t.type=a,t.lanes=u,t}function Wn(e,t,n,a){return e=_t(7,e,a,t),e.lanes=n,e}function Dl(e,t,n){return e=_t(6,e,null,t),e.lanes=n,e}function ad(e){var t=_t(18,null,null,0);return t.stateNode=e,t}function Nl(e,t,n){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var rd=new WeakMap;function Ut(e,t){if(typeof e=="object"&&e!==null){var n=rd.get(e);return n!==void 0?n:(t={value:e,source:t,stack:ic(t)},rd.set(e,t),t)}return{value:e,source:t,stack:ic(t)}}var Di=[],Ni=0,$r=null,ka=0,zt=[],Dt=0,_n=null,Kt=1,Qt="";function tn(e,t){Di[Ni++]=ka,Di[Ni++]=$r,$r=e,ka=t}function sd(e,t,n){zt[Dt++]=Kt,zt[Dt++]=Qt,zt[Dt++]=_n,_n=e;var a=Kt;e=Qt;var o=32-vt(a)-1;a&=~(1<<o),n+=1;var u=32-vt(t)+o;if(30<u){var h=o-o%5;u=(a&(1<<h)-1).toString(32),a>>=h,o-=h,Kt=1<<32-vt(t)+o|n<<o|a,Qt=u+e}else Kt=1<<u|n<<o|a,Qt=e}function Ml(e){e.return!==null&&(tn(e,1),sd(e,1,0))}function Bl(e){for(;e===$r;)$r=Di[--Ni],Di[Ni]=null,ka=Di[--Ni],Di[Ni]=null;for(;e===_n;)_n=zt[--Dt],zt[Dt]=null,Qt=zt[--Dt],zt[Dt]=null,Kt=zt[--Dt],zt[Dt]=null}function ld(e,t){zt[Dt++]=Kt,zt[Dt++]=Qt,zt[Dt++]=_n,Kt=t.id,Qt=t.overflow,_n=e}var nt=null,qe=null,xe=!1,wn=null,Nt=!1,ql=Error(s(519));function Sn(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ua(Ut(t,e)),ql}function od(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[tt]=e,t[ut]=a,n){case"dialog":_e("cancel",t),_e("close",t);break;case"iframe":case"object":case"embed":_e("load",t);break;case"video":case"audio":for(n=0;n<er.length;n++)_e(er[n],t);break;case"source":_e("error",t);break;case"img":case"image":case"link":_e("error",t),_e("load",t);break;case"details":_e("toggle",t);break;case"input":_e("invalid",t),wc(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":_e("invalid",t);break;case"textarea":_e("invalid",t),Ec(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||Ah(t.textContent,n)?(a.popover!=null&&(_e("beforetoggle",t),_e("toggle",t)),a.onScroll!=null&&_e("scroll",t),a.onScrollEnd!=null&&_e("scrollend",t),a.onClick!=null&&(t.onclick=Ft),t=!0):t=!1,t||Sn(e,!0)}function ud(e){for(nt=e.return;nt;)switch(nt.tag){case 5:case 31:case 13:Nt=!1;return;case 27:case 3:Nt=!0;return;default:nt=nt.return}}function Mi(e){if(e!==nt)return!1;if(!xe)return ud(e),xe=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||iu(e.type,e.memoizedProps)),n=!n),n&&qe&&Sn(e),ud(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));qe=Nh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));qe=Nh(e)}else t===27?(t=qe,Mn(e.type)?(e=ou,ou=null,qe=e):qe=t):qe=nt?Bt(e.stateNode.nextSibling):null;return!0}function ei(){qe=nt=null,xe=!1}function Ll(){var e=wn;return e!==null&&(gt===null?gt=e:gt.push.apply(gt,e),wn=null),e}function Ua(e){wn===null?wn=[e]:wn.push(e)}var Hl=y(null),ti=null,nn=null;function En(e,t,n){O(Hl,t._currentValue),t._currentValue=n}function an(e){e._currentValue=Hl.current,_(Hl)}function $l(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Gl(e,t,n,a){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var h=o.child;u=u.firstContext;e:for(;u!==null;){var v=u;u=o;for(var E=0;E<t.length;E++)if(v.context===t[E]){u.lanes|=n,v=u.alternate,v!==null&&(v.lanes|=n),$l(u.return,n,e),a||(h=null);break e}u=v.next}}else if(o.tag===18){if(h=o.return,h===null)throw Error(s(341));h.lanes|=n,u=h.alternate,u!==null&&(u.lanes|=n),$l(h,n,e),h=null}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===e){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}}function Bi(e,t,n,a){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var h=o.alternate;if(h===null)throw Error(s(387));if(h=h.memoizedProps,h!==null){var v=o.type;bt(o.pendingProps.value,h.value)||(e!==null?e.push(v):e=[v])}}else if(o===ue.current){if(h=o.alternate,h===null)throw Error(s(387));h.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(rr):e=[rr])}o=o.return}e!==null&&Gl(t,e,n,a),t.flags|=262144}function Gr(e){for(e=e.firstContext;e!==null;){if(!bt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ni(e){ti=e,nn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function it(e){return cd(ti,e)}function Vr(e,t){return ti===null&&ni(e),cd(e,t)}function cd(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},nn===null){if(e===null)throw Error(s(308));nn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else nn=nn.next=t;return n}var Pp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Fp=l.unstable_scheduleCallback,Wp=l.unstable_NormalPriority,Qe={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vl(){return{controller:new Pp,data:new Map,refCount:0}}function za(e){e.refCount--,e.refCount===0&&Fp(Wp,function(){e.controller.abort()})}var Da=null,Yl=0,qi=0,Li=null;function e0(e,t){if(Da===null){var n=Da=[];Yl=0,qi=Jo(),Li={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Yl++,t.then(dd,dd),t}function dd(){if(--Yl===0&&Da!==null){Li!==null&&(Li.status="fulfilled");var e=Da;Da=null,qi=0,Li=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function t0(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(a.status="rejected",a.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),a}var fd=M.S;M.S=function(e,t){Zf=pt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&e0(e,t),fd!==null&&fd(e,t)};var ii=y(null);function Kl(){var e=ii.current;return e!==null?e:Me.pooledCache}function Yr(e,t){t===null?O(ii,ii.current):O(ii,t.pool)}function hd(){var e=Kl();return e===null?null:{parent:Qe._currentValue,pool:e}}var Hi=Error(s(460)),Ql=Error(s(474)),Kr=Error(s(542)),Qr={then:function(){}};function gd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function md(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ft,Ft),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,yd(e),e;default:if(typeof t.status=="string")t.then(Ft,Ft);else{if(e=Me,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=a}},function(a){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,yd(e),e}throw ri=t,Hi}}function ai(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(ri=n,Hi):n}}var ri=null;function pd(){if(ri===null)throw Error(s(459));var e=ri;return ri=null,e}function yd(e){if(e===Hi||e===Kr)throw Error(s(483))}var $i=null,Na=0;function Xr(e){var t=Na;return Na+=1,$i===null&&($i=[]),md($i,e,t)}function Ma(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Jr(e,t){throw t.$$typeof===R?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function vd(e){function t(C,T){if(e){var U=C.deletions;U===null?(C.deletions=[T],C.flags|=16):U.push(T)}}function n(C,T){if(!e)return null;for(;T!==null;)t(C,T),T=T.sibling;return null}function a(C){for(var T=new Map;C!==null;)C.key!==null?T.set(C.key,C):T.set(C.index,C),C=C.sibling;return T}function o(C,T){return C=en(C,T),C.index=0,C.sibling=null,C}function u(C,T,U){return C.index=U,e?(U=C.alternate,U!==null?(U=U.index,U<T?(C.flags|=67108866,T):U):(C.flags|=67108866,T)):(C.flags|=1048576,T)}function h(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function v(C,T,U,G){return T===null||T.tag!==6?(T=Dl(U,C.mode,G),T.return=C,T):(T=o(T,U),T.return=C,T)}function E(C,T,U,G){var re=U.type;return re===k?$(C,T,U.props.children,G,U.key):T!==null&&(T.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===J&&ai(re)===T.type)?(T=o(T,U.props),Ma(T,U),T.return=C,T):(T=Hr(U.type,U.key,U.props,null,C.mode,G),Ma(T,U),T.return=C,T)}function z(C,T,U,G){return T===null||T.tag!==4||T.stateNode.containerInfo!==U.containerInfo||T.stateNode.implementation!==U.implementation?(T=Nl(U,C.mode,G),T.return=C,T):(T=o(T,U.children||[]),T.return=C,T)}function $(C,T,U,G,re){return T===null||T.tag!==7?(T=Wn(U,C.mode,G,re),T.return=C,T):(T=o(T,U),T.return=C,T)}function V(C,T,U){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Dl(""+T,C.mode,U),T.return=C,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case A:return U=Hr(T.type,T.key,T.props,null,C.mode,U),Ma(U,T),U.return=C,U;case x:return T=Nl(T,C.mode,U),T.return=C,T;case J:return T=ai(T),V(C,T,U)}if(ve(T)||ee(T))return T=Wn(T,C.mode,U,null),T.return=C,T;if(typeof T.then=="function")return V(C,Xr(T),U);if(T.$$typeof===K)return V(C,Vr(C,T),U);Jr(C,T)}return null}function D(C,T,U,G){var re=T!==null?T.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return re!==null?null:v(C,T,""+U,G);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return U.key===re?E(C,T,U,G):null;case x:return U.key===re?z(C,T,U,G):null;case J:return U=ai(U),D(C,T,U,G)}if(ve(U)||ee(U))return re!==null?null:$(C,T,U,G,null);if(typeof U.then=="function")return D(C,T,Xr(U),G);if(U.$$typeof===K)return D(C,T,Vr(C,U),G);Jr(C,U)}return null}function q(C,T,U,G,re){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return C=C.get(U)||null,v(T,C,""+G,re);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case A:return C=C.get(G.key===null?U:G.key)||null,E(T,C,G,re);case x:return C=C.get(G.key===null?U:G.key)||null,z(T,C,G,re);case J:return G=ai(G),q(C,T,U,G,re)}if(ve(G)||ee(G))return C=C.get(U)||null,$(T,C,G,re,null);if(typeof G.then=="function")return q(C,T,U,Xr(G),re);if(G.$$typeof===K)return q(C,T,U,Vr(T,G),re);Jr(T,G)}return null}function F(C,T,U,G){for(var re=null,Oe=null,te=T,me=T=0,Se=null;te!==null&&me<U.length;me++){te.index>me?(Se=te,te=null):Se=te.sibling;var Re=D(C,te,U[me],G);if(Re===null){te===null&&(te=Se);break}e&&te&&Re.alternate===null&&t(C,te),T=u(Re,T,me),Oe===null?re=Re:Oe.sibling=Re,Oe=Re,te=Se}if(me===U.length)return n(C,te),xe&&tn(C,me),re;if(te===null){for(;me<U.length;me++)te=V(C,U[me],G),te!==null&&(T=u(te,T,me),Oe===null?re=te:Oe.sibling=te,Oe=te);return xe&&tn(C,me),re}for(te=a(te);me<U.length;me++)Se=q(te,C,me,U[me],G),Se!==null&&(e&&Se.alternate!==null&&te.delete(Se.key===null?me:Se.key),T=u(Se,T,me),Oe===null?re=Se:Oe.sibling=Se,Oe=Se);return e&&te.forEach(function($n){return t(C,$n)}),xe&&tn(C,me),re}function ce(C,T,U,G){if(U==null)throw Error(s(151));for(var re=null,Oe=null,te=T,me=T=0,Se=null,Re=U.next();te!==null&&!Re.done;me++,Re=U.next()){te.index>me?(Se=te,te=null):Se=te.sibling;var $n=D(C,te,Re.value,G);if($n===null){te===null&&(te=Se);break}e&&te&&$n.alternate===null&&t(C,te),T=u($n,T,me),Oe===null?re=$n:Oe.sibling=$n,Oe=$n,te=Se}if(Re.done)return n(C,te),xe&&tn(C,me),re;if(te===null){for(;!Re.done;me++,Re=U.next())Re=V(C,Re.value,G),Re!==null&&(T=u(Re,T,me),Oe===null?re=Re:Oe.sibling=Re,Oe=Re);return xe&&tn(C,me),re}for(te=a(te);!Re.done;me++,Re=U.next())Re=q(te,C,me,Re.value,G),Re!==null&&(e&&Re.alternate!==null&&te.delete(Re.key===null?me:Re.key),T=u(Re,T,me),Oe===null?re=Re:Oe.sibling=Re,Oe=Re);return e&&te.forEach(function(fy){return t(C,fy)}),xe&&tn(C,me),re}function Ne(C,T,U,G){if(typeof U=="object"&&U!==null&&U.type===k&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case A:e:{for(var re=U.key;T!==null;){if(T.key===re){if(re=U.type,re===k){if(T.tag===7){n(C,T.sibling),G=o(T,U.props.children),G.return=C,C=G;break e}}else if(T.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===J&&ai(re)===T.type){n(C,T.sibling),G=o(T,U.props),Ma(G,U),G.return=C,C=G;break e}n(C,T);break}else t(C,T);T=T.sibling}U.type===k?(G=Wn(U.props.children,C.mode,G,U.key),G.return=C,C=G):(G=Hr(U.type,U.key,U.props,null,C.mode,G),Ma(G,U),G.return=C,C=G)}return h(C);case x:e:{for(re=U.key;T!==null;){if(T.key===re)if(T.tag===4&&T.stateNode.containerInfo===U.containerInfo&&T.stateNode.implementation===U.implementation){n(C,T.sibling),G=o(T,U.children||[]),G.return=C,C=G;break e}else{n(C,T);break}else t(C,T);T=T.sibling}G=Nl(U,C.mode,G),G.return=C,C=G}return h(C);case J:return U=ai(U),Ne(C,T,U,G)}if(ve(U))return F(C,T,U,G);if(ee(U)){if(re=ee(U),typeof re!="function")throw Error(s(150));return U=re.call(U),ce(C,T,U,G)}if(typeof U.then=="function")return Ne(C,T,Xr(U),G);if(U.$$typeof===K)return Ne(C,T,Vr(C,U),G);Jr(C,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,T!==null&&T.tag===6?(n(C,T.sibling),G=o(T,U),G.return=C,C=G):(n(C,T),G=Dl(U,C.mode,G),G.return=C,C=G),h(C)):n(C,T)}return function(C,T,U,G){try{Na=0;var re=Ne(C,T,U,G);return $i=null,re}catch(te){if(te===Hi||te===Kr)throw te;var Oe=_t(29,te,null,C.mode);return Oe.lanes=G,Oe.return=C,Oe}finally{}}}var si=vd(!0),bd=vd(!1),xn=!1;function Xl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Tn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function An(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(je&2)!==0){var o=a.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),a.pending=t,t=Lr(e),nd(e,null,n),t}return qr(e,a,t,n),Lr(e)}function Ba(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,uc(e,n)}}function Il(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var o=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};u===null?o=u=h:u=u.next=h,n=n.next}while(n!==null);u===null?o=u=t:u=u.next=t}else o=u=t;n={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Zl=!1;function qa(){if(Zl){var e=Li;if(e!==null)throw e}}function La(e,t,n,a){Zl=!1;var o=e.updateQueue;xn=!1;var u=o.firstBaseUpdate,h=o.lastBaseUpdate,v=o.shared.pending;if(v!==null){o.shared.pending=null;var E=v,z=E.next;E.next=null,h===null?u=z:h.next=z,h=E;var $=e.alternate;$!==null&&($=$.updateQueue,v=$.lastBaseUpdate,v!==h&&(v===null?$.firstBaseUpdate=z:v.next=z,$.lastBaseUpdate=E))}if(u!==null){var V=o.baseState;h=0,$=z=E=null,v=u;do{var D=v.lane&-536870913,q=D!==v.lane;if(q?(we&D)===D:(a&D)===D){D!==0&&D===qi&&(Zl=!0),$!==null&&($=$.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var F=e,ce=v;D=t;var Ne=n;switch(ce.tag){case 1:if(F=ce.payload,typeof F=="function"){V=F.call(Ne,V,D);break e}V=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=ce.payload,D=typeof F=="function"?F.call(Ne,V,D):F,D==null)break e;V=w({},V,D);break e;case 2:xn=!0}}D=v.callback,D!==null&&(e.flags|=64,q&&(e.flags|=8192),q=o.callbacks,q===null?o.callbacks=[D]:q.push(D))}else q={lane:D,tag:v.tag,payload:v.payload,callback:v.callback,next:null},$===null?(z=$=q,E=V):$=$.next=q,h|=D;if(v=v.next,v===null){if(v=o.shared.pending,v===null)break;q=v,v=q.next,q.next=null,o.lastBaseUpdate=q,o.shared.pending=null}}while(!0);$===null&&(E=V),o.baseState=E,o.firstBaseUpdate=z,o.lastBaseUpdate=$,u===null&&(o.shared.lanes=0),kn|=h,e.lanes=h,e.memoizedState=V}}function _d(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function wd(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)_d(n[e],t)}var Gi=y(null),Ir=y(0);function Sd(e,t){e=hn,O(Ir,e),O(Gi,t),hn=e|t.baseLanes}function Pl(){O(Ir,hn),O(Gi,Gi.current)}function Fl(){hn=Ir.current,_(Gi),_(Ir)}var wt=y(null),Mt=null;function On(e){var t=e.alternate;O(Ye,Ye.current&1),O(wt,e),Mt===null&&(t===null||Gi.current!==null||t.memoizedState!==null)&&(Mt=e)}function Wl(e){O(Ye,Ye.current),O(wt,e),Mt===null&&(Mt=e)}function Ed(e){e.tag===22?(O(Ye,Ye.current),O(wt,e),Mt===null&&(Mt=e)):Rn()}function Rn(){O(Ye,Ye.current),O(wt,wt.current)}function St(e){_(wt),Mt===e&&(Mt=null),_(Ye)}var Ye=y(0);function Zr(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||su(n)||lu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rn=0,ge=null,ze=null,Xe=null,Pr=!1,Vi=!1,li=!1,Fr=0,Ha=0,Yi=null,n0=0;function Ge(){throw Error(s(321))}function eo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bt(e[n],t[n]))return!1;return!0}function to(e,t,n,a,o,u){return rn=u,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=e===null||e.memoizedState===null?lf:yo,li=!1,u=n(a,o),li=!1,Vi&&(u=Td(t,n,a,o)),xd(e),u}function xd(e){M.H=Va;var t=ze!==null&&ze.next!==null;if(rn=0,Xe=ze=ge=null,Pr=!1,Ha=0,Yi=null,t)throw Error(s(300));e===null||Je||(e=e.dependencies,e!==null&&Gr(e)&&(Je=!0))}function Td(e,t,n,a){ge=e;var o=0;do{if(Vi&&(Yi=null),Ha=0,Vi=!1,25<=o)throw Error(s(301));if(o+=1,Xe=ze=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}M.H=of,u=t(n,a)}while(Vi);return u}function i0(){var e=M.H,t=e.useState()[0];return t=typeof t.then=="function"?$a(t):t,e=e.useState()[0],(ze!==null?ze.memoizedState:null)!==e&&(ge.flags|=1024),t}function no(){var e=Fr!==0;return Fr=0,e}function io(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ao(e){if(Pr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Pr=!1}rn=0,Xe=ze=ge=null,Vi=!1,Ha=Fr=0,Yi=null}function ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?ge.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Ke(){if(ze===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=Xe===null?ge.memoizedState:Xe.next;if(t!==null)Xe=t,ze=e;else{if(e===null)throw ge.alternate===null?Error(s(467)):Error(s(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Xe===null?ge.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function Wr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $a(e){var t=Ha;return Ha+=1,Yi===null&&(Yi=[]),e=md(Yi,e,t),t=ge,(Xe===null?t.memoizedState:Xe.next)===null&&(t=t.alternate,M.H=t===null||t.memoizedState===null?lf:yo),e}function es(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $a(e);if(e.$$typeof===K)return it(e)}throw Error(s(438,String(e)))}function ro(e){var t=null,n=ge.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=ge.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Wr(),ge.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=ye;return t.index++,n}function sn(e,t){return typeof t=="function"?t(e):t}function ts(e){var t=Ke();return so(t,ze,e)}function so(e,t,n){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var o=e.baseQueue,u=a.pending;if(u!==null){if(o!==null){var h=o.next;o.next=u.next,u.next=h}t.baseQueue=o=u,a.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var v=h=null,E=null,z=t,$=!1;do{var V=z.lane&-536870913;if(V!==z.lane?(we&V)===V:(rn&V)===V){var D=z.revertLane;if(D===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),V===qi&&($=!0);else if((rn&D)===D){z=z.next,D===qi&&($=!0);continue}else V={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},E===null?(v=E=V,h=u):E=E.next=V,ge.lanes|=D,kn|=D;V=z.action,li&&n(u,V),u=z.hasEagerState?z.eagerState:n(u,V)}else D={lane:V,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},E===null?(v=E=D,h=u):E=E.next=D,ge.lanes|=V,kn|=V;z=z.next}while(z!==null&&z!==t);if(E===null?h=u:E.next=v,!bt(u,e.memoizedState)&&(Je=!0,$&&(n=Li,n!==null)))throw n;e.memoizedState=u,e.baseState=h,e.baseQueue=E,a.lastRenderedState=u}return o===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function lo(e){var t=Ke(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,o=n.pending,u=t.memoizedState;if(o!==null){n.pending=null;var h=o=o.next;do u=e(u,h.action),h=h.next;while(h!==o);bt(u,t.memoizedState)||(Je=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,a]}function Ad(e,t,n){var a=ge,o=Ke(),u=xe;if(u){if(n===void 0)throw Error(s(407));n=n()}else n=t();var h=!bt((ze||o).memoizedState,n);if(h&&(o.memoizedState=n,Je=!0),o=o.queue,co(jd.bind(null,a,o,e),[e]),o.getSnapshot!==t||h||Xe!==null&&Xe.memoizedState.tag&1){if(a.flags|=2048,Ki(9,{destroy:void 0},Rd.bind(null,a,o,n,t),null),Me===null)throw Error(s(349));u||(rn&127)!==0||Od(a,t,n)}return n}function Od(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ge.updateQueue,t===null?(t=Wr(),ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Rd(e,t,n,a){t.value=n,t.getSnapshot=a,Cd(t)&&kd(e)}function jd(e,t,n){return n(function(){Cd(t)&&kd(e)})}function Cd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bt(e,n)}catch{return!0}}function kd(e){var t=Fn(e,2);t!==null&&mt(t,e,2)}function oo(e){var t=ot();if(typeof e=="function"){var n=e;if(e=n(),li){yn(!0);try{n()}finally{yn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:e},t}function Ud(e,t,n,a){return e.baseState=n,so(e,ze,typeof a=="function"?a:sn)}function a0(e,t,n,a,o){if(as(e))throw Error(s(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){u.listeners.push(h)}};M.T!==null?n(!0):u.isTransition=!1,a(u),n=t.pending,n===null?(u.next=t.pending=u,zd(t,u)):(u.next=n.next,t.pending=n.next=u)}}function zd(e,t){var n=t.action,a=t.payload,o=e.state;if(t.isTransition){var u=M.T,h={};M.T=h;try{var v=n(o,a),E=M.S;E!==null&&E(h,v),Dd(e,t,v)}catch(z){uo(e,t,z)}finally{u!==null&&h.types!==null&&(u.types=h.types),M.T=u}}else try{u=n(o,a),Dd(e,t,u)}catch(z){uo(e,t,z)}}function Dd(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Nd(e,t,a)},function(a){return uo(e,t,a)}):Nd(e,t,n)}function Nd(e,t,n){t.status="fulfilled",t.value=n,Md(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,zd(e,n)))}function uo(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,Md(t),t=t.next;while(t!==a)}e.action=null}function Md(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Bd(e,t){return t}function qd(e,t){if(xe){var n=Me.formState;if(n!==null){e:{var a=ge;if(xe){if(qe){t:{for(var o=qe,u=Nt;o.nodeType!==8;){if(!u){o=null;break t}if(o=Bt(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){qe=Bt(o.nextSibling),a=o.data==="F!";break e}}Sn(a)}a=!1}a&&(t=n[0])}}return n=ot(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bd,lastRenderedState:t},n.queue=a,n=af.bind(null,ge,a),a.dispatch=n,a=oo(!1),u=po.bind(null,ge,!1,a.queue),a=ot(),o={state:t,dispatch:null,action:e,pending:null},a.queue=o,n=a0.bind(null,ge,o,u,n),o.dispatch=n,a.memoizedState=e,[t,n,!1]}function Ld(e){var t=Ke();return Hd(t,ze,e)}function Hd(e,t,n){if(t=so(e,t,Bd)[0],e=ts(sn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=$a(t)}catch(h){throw h===Hi?Kr:h}else a=t;t=Ke();var o=t.queue,u=o.dispatch;return n!==t.memoizedState&&(ge.flags|=2048,Ki(9,{destroy:void 0},r0.bind(null,o,n),null)),[a,u,e]}function r0(e,t){e.action=t}function $d(e){var t=Ke(),n=ze;if(n!==null)return Hd(t,n,e);Ke(),t=t.memoizedState,n=Ke();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function Ki(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=ge.updateQueue,t===null&&(t=Wr(),ge.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Gd(){return Ke().memoizedState}function ns(e,t,n,a){var o=ot();ge.flags|=e,o.memoizedState=Ki(1|t,{destroy:void 0},n,a===void 0?null:a)}function is(e,t,n,a){var o=Ke();a=a===void 0?null:a;var u=o.memoizedState.inst;ze!==null&&a!==null&&eo(a,ze.memoizedState.deps)?o.memoizedState=Ki(t,u,n,a):(ge.flags|=e,o.memoizedState=Ki(1|t,u,n,a))}function Vd(e,t){ns(8390656,8,e,t)}function co(e,t){is(2048,8,e,t)}function s0(e){ge.flags|=4;var t=ge.updateQueue;if(t===null)t=Wr(),ge.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Yd(e){var t=Ke().memoizedState;return s0({ref:t,nextImpl:e}),function(){if((je&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Kd(e,t){return is(4,2,e,t)}function Qd(e,t){return is(4,4,e,t)}function Xd(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jd(e,t,n){n=n!=null?n.concat([e]):null,is(4,4,Xd.bind(null,t,e),n)}function fo(){}function Id(e,t){var n=Ke();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&eo(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Zd(e,t){var n=Ke();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&eo(t,a[1]))return a[0];if(a=e(),li){yn(!0);try{e()}finally{yn(!1)}}return n.memoizedState=[a,t],a}function ho(e,t,n){return n===void 0||(rn&1073741824)!==0&&(we&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Ff(),ge.lanes|=e,kn|=e,n)}function Pd(e,t,n,a){return bt(n,t)?n:Gi.current!==null?(e=ho(e,n,a),bt(e,t)||(Je=!0),e):(rn&42)===0||(rn&1073741824)!==0&&(we&261930)===0?(Je=!0,e.memoizedState=n):(e=Ff(),ge.lanes|=e,kn|=e,t)}function Fd(e,t,n,a,o){var u=I.p;I.p=u!==0&&8>u?u:8;var h=M.T,v={};M.T=v,po(e,!1,t,n);try{var E=o(),z=M.S;if(z!==null&&z(v,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var $=t0(E,a);Ga(e,t,$,Tt(e))}else Ga(e,t,a,Tt(e))}catch(V){Ga(e,t,{then:function(){},status:"rejected",reason:V},Tt())}finally{I.p=u,h!==null&&v.types!==null&&(h.types=v.types),M.T=h}}function l0(){}function go(e,t,n,a){if(e.tag!==5)throw Error(s(476));var o=Wd(e).queue;Fd(e,o,t,ae,n===null?l0:function(){return ef(e),n(a)})}function Wd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:ae},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ef(e){var t=Wd(e);t.next===null&&(t=e.alternate.memoizedState),Ga(e,t.next.queue,{},Tt())}function mo(){return it(rr)}function tf(){return Ke().memoizedState}function nf(){return Ke().memoizedState}function o0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Tt();e=Tn(n);var a=An(t,e,n);a!==null&&(mt(a,t,n),Ba(a,t,n)),t={cache:Vl()},e.payload=t;return}t=t.return}}function u0(e,t,n){var a=Tt();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},as(e)?rf(t,n):(n=Ul(e,t,n,a),n!==null&&(mt(n,e,a),sf(n,t,a)))}function af(e,t,n){var a=Tt();Ga(e,t,n,a)}function Ga(e,t,n,a){var o={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(as(e))rf(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,v=u(h,n);if(o.hasEagerState=!0,o.eagerState=v,bt(v,h))return qr(e,t,o,0),Me===null&&Br(),!1}catch{}finally{}if(n=Ul(e,t,o,a),n!==null)return mt(n,e,a),sf(n,t,a),!0}return!1}function po(e,t,n,a){if(a={lane:2,revertLane:Jo(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},as(e)){if(t)throw Error(s(479))}else t=Ul(e,n,a,2),t!==null&&mt(t,e,2)}function as(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function rf(e,t){Vi=Pr=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sf(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,uc(e,n)}}var Va={readContext:it,use:es,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge};Va.useEffectEvent=Ge;var lf={readContext:it,use:es,useCallback:function(e,t){return ot().memoizedState=[e,t===void 0?null:t],e},useContext:it,useEffect:Vd,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,ns(4194308,4,Xd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ns(4194308,4,e,t)},useInsertionEffect:function(e,t){ns(4,2,e,t)},useMemo:function(e,t){var n=ot();t=t===void 0?null:t;var a=e();if(li){yn(!0);try{e()}finally{yn(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=ot();if(n!==void 0){var o=n(t);if(li){yn(!0);try{n(t)}finally{yn(!1)}}}else o=t;return a.memoizedState=a.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},a.queue=e,e=e.dispatch=u0.bind(null,ge,e),[a.memoizedState,e]},useRef:function(e){var t=ot();return e={current:e},t.memoizedState=e},useState:function(e){e=oo(e);var t=e.queue,n=af.bind(null,ge,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:fo,useDeferredValue:function(e,t){var n=ot();return ho(n,e,t)},useTransition:function(){var e=oo(!1);return e=Fd.bind(null,ge,e.queue,!0,!1),ot().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=ge,o=ot();if(xe){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),Me===null)throw Error(s(349));(we&127)!==0||Od(a,t,n)}o.memoizedState=n;var u={value:n,getSnapshot:t};return o.queue=u,Vd(jd.bind(null,a,u,e),[e]),a.flags|=2048,Ki(9,{destroy:void 0},Rd.bind(null,a,u,n,t),null),n},useId:function(){var e=ot(),t=Me.identifierPrefix;if(xe){var n=Qt,a=Kt;n=(a&~(1<<32-vt(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Fr++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=n0++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:mo,useFormState:qd,useActionState:qd,useOptimistic:function(e){var t=ot();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=po.bind(null,ge,!0,n),n.dispatch=t,[e,t]},useMemoCache:ro,useCacheRefresh:function(){return ot().memoizedState=o0.bind(null,ge)},useEffectEvent:function(e){var t=ot(),n={impl:e};return t.memoizedState=n,function(){if((je&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},yo={readContext:it,use:es,useCallback:Id,useContext:it,useEffect:co,useImperativeHandle:Jd,useInsertionEffect:Kd,useLayoutEffect:Qd,useMemo:Zd,useReducer:ts,useRef:Gd,useState:function(){return ts(sn)},useDebugValue:fo,useDeferredValue:function(e,t){var n=Ke();return Pd(n,ze.memoizedState,e,t)},useTransition:function(){var e=ts(sn)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:$a(e),t]},useSyncExternalStore:Ad,useId:tf,useHostTransitionStatus:mo,useFormState:Ld,useActionState:Ld,useOptimistic:function(e,t){var n=Ke();return Ud(n,ze,e,t)},useMemoCache:ro,useCacheRefresh:nf};yo.useEffectEvent=Yd;var of={readContext:it,use:es,useCallback:Id,useContext:it,useEffect:co,useImperativeHandle:Jd,useInsertionEffect:Kd,useLayoutEffect:Qd,useMemo:Zd,useReducer:lo,useRef:Gd,useState:function(){return lo(sn)},useDebugValue:fo,useDeferredValue:function(e,t){var n=Ke();return ze===null?ho(n,e,t):Pd(n,ze.memoizedState,e,t)},useTransition:function(){var e=lo(sn)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:$a(e),t]},useSyncExternalStore:Ad,useId:tf,useHostTransitionStatus:mo,useFormState:$d,useActionState:$d,useOptimistic:function(e,t){var n=Ke();return ze!==null?Ud(n,ze,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ro,useCacheRefresh:nf};of.useEffectEvent=Yd;function vo(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:w({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bo={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Tt(),o=Tn(a);o.payload=t,n!=null&&(o.callback=n),t=An(e,o,a),t!==null&&(mt(t,e,a),Ba(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Tt(),o=Tn(a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=An(e,o,a),t!==null&&(mt(t,e,a),Ba(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Tt(),a=Tn(n);a.tag=2,t!=null&&(a.callback=t),t=An(e,a,n),t!==null&&(mt(t,e,n),Ba(t,e,n))}};function uf(e,t,n,a,o,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,u,h):t.prototype&&t.prototype.isPureReactComponent?!ja(n,a)||!ja(o,u):!0}function cf(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&bo.enqueueReplaceState(t,t.state,null)}function oi(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=w({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function df(e){Mr(e)}function ff(e){console.error(e)}function hf(e){Mr(e)}function rs(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function gf(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function _o(e,t,n){return n=Tn(n),n.tag=3,n.payload={element:null},n.callback=function(){rs(e,t)},n}function mf(e){return e=Tn(e),e.tag=3,e}function pf(e,t,n,a){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var u=a.value;e.payload=function(){return o(u)},e.callback=function(){gf(t,n,a)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){gf(t,n,a),typeof o!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var v=a.stack;this.componentDidCatch(a.value,{componentStack:v!==null?v:""})})}function c0(e,t,n,a,o){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&Bi(t,n,o,!0),n=wt.current,n!==null){switch(n.tag){case 31:case 13:return Mt===null?ys():n.alternate===null&&Ve===0&&(Ve=3),n.flags&=-257,n.flags|=65536,n.lanes=o,a===Qr?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Ko(e,a,o)),!1;case 22:return n.flags|=65536,a===Qr?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Ko(e,a,o)),!1}throw Error(s(435,n.tag))}return Ko(e,a,o),ys(),!1}if(xe)return t=wt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,a!==ql&&(e=Error(s(422),{cause:a}),Ua(Ut(e,n)))):(a!==ql&&(t=Error(s(423),{cause:a}),Ua(Ut(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,a=Ut(a,n),o=_o(e.stateNode,a,o),Il(e,o),Ve!==4&&(Ve=2)),!1;var u=Error(s(520),{cause:a});if(u=Ut(u,n),Pa===null?Pa=[u]:Pa.push(u),Ve!==4&&(Ve=2),t===null)return!0;a=Ut(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=_o(n.stateNode,a,e),Il(n,e),!1;case 1:if(t=n.type,u=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Un===null||!Un.has(u))))return n.flags|=65536,o&=-o,n.lanes|=o,o=mf(o),pf(o,e,n,a),Il(n,o),!1}n=n.return}while(n!==null);return!1}var wo=Error(s(461)),Je=!1;function at(e,t,n,a){t.child=e===null?bd(t,null,n,a):si(t,e.child,n,a)}function yf(e,t,n,a,o){n=n.render;var u=t.ref;if("ref"in a){var h={};for(var v in a)v!=="ref"&&(h[v]=a[v])}else h=a;return ni(t),a=to(e,t,n,h,u,o),v=no(),e!==null&&!Je?(io(e,t,o),ln(e,t,o)):(xe&&v&&Ml(t),t.flags|=1,at(e,t,a,o),t.child)}function vf(e,t,n,a,o){if(e===null){var u=n.type;return typeof u=="function"&&!zl(u)&&u.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=u,bf(e,t,u,a,o)):(e=Hr(n.type,null,a,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!jo(e,o)){var h=u.memoizedProps;if(n=n.compare,n=n!==null?n:ja,n(h,a)&&e.ref===t.ref)return ln(e,t,o)}return t.flags|=1,e=en(u,a),e.ref=t.ref,e.return=t,t.child=e}function bf(e,t,n,a,o){if(e!==null){var u=e.memoizedProps;if(ja(u,a)&&e.ref===t.ref)if(Je=!1,t.pendingProps=a=u,jo(e,o))(e.flags&131072)!==0&&(Je=!0);else return t.lanes=e.lanes,ln(e,t,o)}return So(e,t,n,a,o)}function _f(e,t,n,a){var o=a.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|n:n,e!==null){for(a=t.child=e.child,o=0;a!==null;)o=o|a.lanes|a.childLanes,a=a.sibling;a=o&~u}else a=0,t.child=null;return wf(e,t,u,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Yr(t,u!==null?u.cachePool:null),u!==null?Sd(t,u):Pl(),Ed(t);else return a=t.lanes=536870912,wf(e,t,u!==null?u.baseLanes|n:n,n,a)}else u!==null?(Yr(t,u.cachePool),Sd(t,u),Rn(),t.memoizedState=null):(e!==null&&Yr(t,null),Pl(),Rn());return at(e,t,o,n),t.child}function Ya(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function wf(e,t,n,a,o){var u=Kl();return u=u===null?null:{parent:Qe._currentValue,pool:u},t.memoizedState={baseLanes:n,cachePool:u},e!==null&&Yr(t,null),Pl(),Ed(t),e!==null&&Bi(e,t,a,!0),t.childLanes=o,null}function ss(e,t){return t=os({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Sf(e,t,n){return si(t,e.child,null,n),e=ss(t,t.pendingProps),e.flags|=2,St(t),t.memoizedState=null,e}function d0(e,t,n){var a=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(xe){if(a.mode==="hidden")return e=ss(t,a),t.lanes=536870912,Ya(null,e);if(Wl(t),(e=qe)?(e=Dh(e,Nt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:_n!==null?{id:Kt,overflow:Qt}:null,retryLane:536870912,hydrationErrors:null},n=ad(e),n.return=t,t.child=n,nt=t,qe=null)):e=null,e===null)throw Sn(t);return t.lanes=536870912,null}return ss(t,a)}var u=e.memoizedState;if(u!==null){var h=u.dehydrated;if(Wl(t),o)if(t.flags&256)t.flags&=-257,t=Sf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(Je||Bi(e,t,n,!1),o=(n&e.childLanes)!==0,Je||o){if(a=Me,a!==null&&(h=cc(a,n),h!==0&&h!==u.retryLane))throw u.retryLane=h,Fn(e,h),mt(a,e,h),wo;ys(),t=Sf(e,t,n)}else e=u.treeContext,qe=Bt(h.nextSibling),nt=t,xe=!0,wn=null,Nt=!1,e!==null&&ld(t,e),t=ss(t,a),t.flags|=4096;return t}return e=en(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ls(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function So(e,t,n,a,o){return ni(t),n=to(e,t,n,a,void 0,o),a=no(),e!==null&&!Je?(io(e,t,o),ln(e,t,o)):(xe&&a&&Ml(t),t.flags|=1,at(e,t,n,o),t.child)}function Ef(e,t,n,a,o,u){return ni(t),t.updateQueue=null,n=Td(t,a,n,o),xd(e),a=no(),e!==null&&!Je?(io(e,t,u),ln(e,t,u)):(xe&&a&&Ml(t),t.flags|=1,at(e,t,n,u),t.child)}function xf(e,t,n,a,o){if(ni(t),t.stateNode===null){var u=zi,h=n.contextType;typeof h=="object"&&h!==null&&(u=it(h)),u=new n(a,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=bo,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=a,u.state=t.memoizedState,u.refs={},Xl(t),h=n.contextType,u.context=typeof h=="object"&&h!==null?it(h):zi,u.state=t.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(vo(t,n,h,a),u.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(h=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),h!==u.state&&bo.enqueueReplaceState(u,u.state,null),La(t,a,u,o),qa(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){u=t.stateNode;var v=t.memoizedProps,E=oi(n,v);u.props=E;var z=u.context,$=n.contextType;h=zi,typeof $=="object"&&$!==null&&(h=it($));var V=n.getDerivedStateFromProps;$=typeof V=="function"||typeof u.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,$||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(v||z!==h)&&cf(t,u,a,h),xn=!1;var D=t.memoizedState;u.state=D,La(t,a,u,o),qa(),z=t.memoizedState,v||D!==z||xn?(typeof V=="function"&&(vo(t,n,V,a),z=t.memoizedState),(E=xn||uf(t,n,E,a,D,z,h))?($||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=z),u.props=a,u.state=z,u.context=h,a=E):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{u=t.stateNode,Jl(e,t),h=t.memoizedProps,$=oi(n,h),u.props=$,V=t.pendingProps,D=u.context,z=n.contextType,E=zi,typeof z=="object"&&z!==null&&(E=it(z)),v=n.getDerivedStateFromProps,(z=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==V||D!==E)&&cf(t,u,a,E),xn=!1,D=t.memoizedState,u.state=D,La(t,a,u,o),qa();var q=t.memoizedState;h!==V||D!==q||xn||e!==null&&e.dependencies!==null&&Gr(e.dependencies)?(typeof v=="function"&&(vo(t,n,v,a),q=t.memoizedState),($=xn||uf(t,n,$,a,D,q,E)||e!==null&&e.dependencies!==null&&Gr(e.dependencies))?(z||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(a,q,E),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(a,q,E)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=q),u.props=a,u.state=q,u.context=E,a=$):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),a=!1)}return u=a,ls(e,t),a=(t.flags&128)!==0,u||a?(u=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&a?(t.child=si(t,e.child,null,o),t.child=si(t,null,n,o)):at(e,t,n,o),t.memoizedState=u.state,e=t.child):e=ln(e,t,o),e}function Tf(e,t,n,a){return ei(),t.flags|=256,at(e,t,n,a),t.child}var Eo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xo(e){return{baseLanes:e,cachePool:hd()}}function To(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=xt),e}function Af(e,t,n){var a=t.pendingProps,o=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(Ye.current&2)!==0),h&&(o=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(xe){if(o?On(t):Rn(),(e=qe)?(e=Dh(e,Nt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:_n!==null?{id:Kt,overflow:Qt}:null,retryLane:536870912,hydrationErrors:null},n=ad(e),n.return=t,t.child=n,nt=t,qe=null)):e=null,e===null)throw Sn(t);return lu(e)?t.lanes=32:t.lanes=536870912,null}var v=a.children;return a=a.fallback,o?(Rn(),o=t.mode,v=os({mode:"hidden",children:v},o),a=Wn(a,o,n,null),v.return=t,a.return=t,v.sibling=a,t.child=v,a=t.child,a.memoizedState=xo(n),a.childLanes=To(e,h,n),t.memoizedState=Eo,Ya(null,a)):(On(t),Ao(t,v))}var E=e.memoizedState;if(E!==null&&(v=E.dehydrated,v!==null)){if(u)t.flags&256?(On(t),t.flags&=-257,t=Oo(e,t,n)):t.memoizedState!==null?(Rn(),t.child=e.child,t.flags|=128,t=null):(Rn(),v=a.fallback,o=t.mode,a=os({mode:"visible",children:a.children},o),v=Wn(v,o,n,null),v.flags|=2,a.return=t,v.return=t,a.sibling=v,t.child=a,si(t,e.child,null,n),a=t.child,a.memoizedState=xo(n),a.childLanes=To(e,h,n),t.memoizedState=Eo,t=Ya(null,a));else if(On(t),lu(v)){if(h=v.nextSibling&&v.nextSibling.dataset,h)var z=h.dgst;h=z,a=Error(s(419)),a.stack="",a.digest=h,Ua({value:a,source:null,stack:null}),t=Oo(e,t,n)}else if(Je||Bi(e,t,n,!1),h=(n&e.childLanes)!==0,Je||h){if(h=Me,h!==null&&(a=cc(h,n),a!==0&&a!==E.retryLane))throw E.retryLane=a,Fn(e,a),mt(h,e,a),wo;su(v)||ys(),t=Oo(e,t,n)}else su(v)?(t.flags|=192,t.child=e.child,t=null):(e=E.treeContext,qe=Bt(v.nextSibling),nt=t,xe=!0,wn=null,Nt=!1,e!==null&&ld(t,e),t=Ao(t,a.children),t.flags|=4096);return t}return o?(Rn(),v=a.fallback,o=t.mode,E=e.child,z=E.sibling,a=en(E,{mode:"hidden",children:a.children}),a.subtreeFlags=E.subtreeFlags&65011712,z!==null?v=en(z,v):(v=Wn(v,o,n,null),v.flags|=2),v.return=t,a.return=t,a.sibling=v,t.child=a,Ya(null,a),a=t.child,v=e.child.memoizedState,v===null?v=xo(n):(o=v.cachePool,o!==null?(E=Qe._currentValue,o=o.parent!==E?{parent:E,pool:E}:o):o=hd(),v={baseLanes:v.baseLanes|n,cachePool:o}),a.memoizedState=v,a.childLanes=To(e,h,n),t.memoizedState=Eo,Ya(e.child,a)):(On(t),n=e.child,e=n.sibling,n=en(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=n,t.memoizedState=null,n)}function Ao(e,t){return t=os({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function os(e,t){return e=_t(22,e,null,t),e.lanes=0,e}function Oo(e,t,n){return si(t,e.child,null,n),e=Ao(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Of(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),$l(e.return,t,n)}function Ro(e,t,n,a,o,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:o,treeForkCount:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=n,h.tailMode=o,h.treeForkCount=u)}function Rf(e,t,n){var a=t.pendingProps,o=a.revealOrder,u=a.tail;a=a.children;var h=Ye.current,v=(h&2)!==0;if(v?(h=h&1|2,t.flags|=128):h&=1,O(Ye,h),at(e,t,a,n),a=xe?ka:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Of(e,n,t);else if(e.tag===19)Of(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Zr(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ro(t,!1,o,n,u,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Zr(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ro(t,!0,n,null,u,a);break;case"together":Ro(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function ln(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),kn|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Bi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=en(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=en(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Gr(e)))}function f0(e,t,n){switch(t.tag){case 3:le(t,t.stateNode.containerInfo),En(t,Qe,e.memoizedState.cache),ei();break;case 27:case 5:It(t);break;case 4:le(t,t.stateNode.containerInfo);break;case 10:En(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Wl(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(On(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Af(e,t,n):(On(t),e=ln(e,t,n),e!==null?e.sibling:null);On(t);break;case 19:var o=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(Bi(e,t,n,!1),a=(n&t.childLanes)!==0),o){if(a)return Rf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),O(Ye,Ye.current),a)break;return null;case 22:return t.lanes=0,_f(e,t,n,t.pendingProps);case 24:En(t,Qe,e.memoizedState.cache)}return ln(e,t,n)}function jf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Je=!0;else{if(!jo(e,n)&&(t.flags&128)===0)return Je=!1,f0(e,t,n);Je=(e.flags&131072)!==0}else Je=!1,xe&&(t.flags&1048576)!==0&&sd(t,ka,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=ai(t.elementType),t.type=e,typeof e=="function")zl(e)?(a=oi(e,a),t.tag=1,t=xf(null,t,e,a,n)):(t.tag=0,t=So(null,t,e,a,n));else{if(e!=null){var o=e.$$typeof;if(o===P){t.tag=11,t=yf(null,t,e,a,n);break e}else if(o===N){t.tag=14,t=vf(null,t,e,a,n);break e}}throw t=Te(e)||e,Error(s(306,t,""))}}return t;case 0:return So(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,o=oi(a,t.pendingProps),xf(e,t,a,o,n);case 3:e:{if(le(t,t.stateNode.containerInfo),e===null)throw Error(s(387));a=t.pendingProps;var u=t.memoizedState;o=u.element,Jl(e,t),La(t,a,null,n);var h=t.memoizedState;if(a=h.cache,En(t,Qe,a),a!==u.cache&&Gl(t,[Qe],n,!0),qa(),a=h.element,u.isDehydrated)if(u={element:a,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Tf(e,t,a,n);break e}else if(a!==o){o=Ut(Error(s(424)),t),Ua(o),t=Tf(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qe=Bt(e.firstChild),nt=t,xe=!0,wn=null,Nt=!0,n=bd(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ei(),a===o){t=ln(e,t,n);break e}at(e,t,a,n)}t=t.child}return t;case 26:return ls(e,t),e===null?(n=Hh(t.type,null,t.pendingProps,null))?t.memoizedState=n:xe||(n=t.type,e=t.pendingProps,a=xs(Z.current).createElement(n),a[tt]=t,a[ut]=e,rt(a,n,e),We(a),t.stateNode=a):t.memoizedState=Hh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return It(t),e===null&&xe&&(a=t.stateNode=Bh(t.type,t.pendingProps,Z.current),nt=t,Nt=!0,o=qe,Mn(t.type)?(ou=o,qe=Bt(a.firstChild)):qe=o),at(e,t,t.pendingProps.children,n),ls(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&xe&&((o=a=qe)&&(a=G0(a,t.type,t.pendingProps,Nt),a!==null?(t.stateNode=a,nt=t,qe=Bt(a.firstChild),Nt=!1,o=!0):o=!1),o||Sn(t)),It(t),o=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,a=u.children,iu(o,u)?a=null:h!==null&&iu(o,h)&&(t.flags|=32),t.memoizedState!==null&&(o=to(e,t,i0,null,null,n),rr._currentValue=o),ls(e,t),at(e,t,a,n),t.child;case 6:return e===null&&xe&&((e=n=qe)&&(n=V0(n,t.pendingProps,Nt),n!==null?(t.stateNode=n,nt=t,qe=null,e=!0):e=!1),e||Sn(t)),null;case 13:return Af(e,t,n);case 4:return le(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=si(t,null,a,n):at(e,t,a,n),t.child;case 11:return yf(e,t,t.type,t.pendingProps,n);case 7:return at(e,t,t.pendingProps,n),t.child;case 8:return at(e,t,t.pendingProps.children,n),t.child;case 12:return at(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,En(t,t.type,a.value),at(e,t,a.children,n),t.child;case 9:return o=t.type._context,a=t.pendingProps.children,ni(t),o=it(o),a=a(o),t.flags|=1,at(e,t,a,n),t.child;case 14:return vf(e,t,t.type,t.pendingProps,n);case 15:return bf(e,t,t.type,t.pendingProps,n);case 19:return Rf(e,t,n);case 31:return d0(e,t,n);case 22:return _f(e,t,n,t.pendingProps);case 24:return ni(t),a=it(Qe),e===null?(o=Kl(),o===null&&(o=Me,u=Vl(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=n),o=u),t.memoizedState={parent:a,cache:o},Xl(t),En(t,Qe,o)):((e.lanes&n)!==0&&(Jl(e,t),La(t,null,null,n),qa()),o=e.memoizedState,u=t.memoizedState,o.parent!==a?(o={parent:a,cache:a},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),En(t,Qe,a)):(a=u.cache,En(t,Qe,a),a!==o.cache&&Gl(t,[Qe],n,!0))),at(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function on(e){e.flags|=4}function Co(e,t,n,a,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(nh())e.flags|=8192;else throw ri=Qr,Ql}else e.flags&=-16777217}function Cf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Kh(t))if(nh())e.flags|=8192;else throw ri=Qr,Ql}function us(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?lc():536870912,e.lanes|=t,Ii|=t)}function Ka(e,t){if(!xe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Le(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,a|=o.subtreeFlags&65011712,a|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function h0(e,t,n){var a=t.pendingProps;switch(Bl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(t),null;case 1:return Le(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),an(Qe),Ee(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Mi(t)?on(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ll())),Le(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(on(t),u!==null?(Le(t),Cf(t,u)):(Le(t),Co(t,o,null,a,n))):u?u!==e.memoizedState?(on(t),Le(t),Cf(t,u)):(Le(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&on(t),Le(t),Co(t,o,e,a,n)),null;case 27:if(vi(t),n=Z.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&on(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Le(t),null}e=j.current,Mi(t)?od(t):(e=Bh(o,a,n),t.stateNode=e,on(t))}return Le(t),null;case 5:if(vi(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&on(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Le(t),null}if(u=j.current,Mi(t))od(t);else{var h=xs(Z.current);switch(u){case 1:u=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=h.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof a.is=="string"?h.createElement("select",{is:a.is}):h.createElement("select"),a.multiple?u.multiple=!0:a.size&&(u.size=a.size);break;default:u=typeof a.is=="string"?h.createElement(o,{is:a.is}):h.createElement(o)}}u[tt]=t,u[ut]=a;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)u.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=u;e:switch(rt(u,o,a),o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&on(t)}}return Le(t),Co(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&on(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(e=Z.current,Mi(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,o=nt,o!==null)switch(o.tag){case 27:case 5:a=o.memoizedProps}e[tt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Ah(e.nodeValue,n)),e||Sn(t,!0)}else e=xs(e).createTextNode(a),e[tt]=t,t.stateNode=e}return Le(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=Mi(t),n!==null){if(e===null){if(!a)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[tt]=t}else ei(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Le(t),e=!1}else n=Ll(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(St(t),t):(St(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Le(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Mi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!o)throw Error(s(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));o[tt]=t}else ei(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Le(t),o=!1}else o=Ll(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(St(t),t):(St(t),null)}return St(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,o=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(o=a.alternate.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),us(t,t.updateQueue),Le(t),null);case 4:return Ee(),e===null&&Fo(t.stateNode.containerInfo),Le(t),null;case 10:return an(t.type),Le(t),null;case 19:if(_(Ye),a=t.memoizedState,a===null)return Le(t),null;if(o=(t.flags&128)!==0,u=a.rendering,u===null)if(o)Ka(a,!1);else{if(Ve!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Zr(e),u!==null){for(t.flags|=128,Ka(a,!1),e=u.updateQueue,t.updateQueue=e,us(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)id(n,e),n=n.sibling;return O(Ye,Ye.current&1|2),xe&&tn(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&pt()>gs&&(t.flags|=128,o=!0,Ka(a,!1),t.lanes=4194304)}else{if(!o)if(e=Zr(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,us(t,e),Ka(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!xe)return Le(t),null}else 2*pt()-a.renderingStartTime>gs&&n!==536870912&&(t.flags|=128,o=!0,Ka(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(e=a.last,e!==null?e.sibling=u:t.child=u,a.last=u)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=pt(),e.sibling=null,n=Ye.current,O(Ye,o?n&1|2:n&1),xe&&tn(t,a.treeForkCount),e):(Le(t),null);case 22:case 23:return St(t),Fl(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(Le(t),t.subtreeFlags&6&&(t.flags|=8192)):Le(t),n=t.updateQueue,n!==null&&us(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&_(ii),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),an(Qe),Le(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function g0(e,t){switch(Bl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return an(Qe),Ee(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return vi(t),null;case 31:if(t.memoizedState!==null){if(St(t),t.alternate===null)throw Error(s(340));ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(St(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _(Ye),null;case 4:return Ee(),null;case 10:return an(t.type),null;case 22:case 23:return St(t),Fl(),e!==null&&_(ii),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return an(Qe),null;case 25:return null;default:return null}}function kf(e,t){switch(Bl(t),t.tag){case 3:an(Qe),Ee();break;case 26:case 27:case 5:vi(t);break;case 4:Ee();break;case 31:t.memoizedState!==null&&St(t);break;case 13:St(t);break;case 19:_(Ye);break;case 10:an(t.type);break;case 22:case 23:St(t),Fl(),e!==null&&_(ii);break;case 24:an(Qe)}}function Qa(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var o=a.next;n=o;do{if((n.tag&e)===e){a=void 0;var u=n.create,h=n.inst;a=u(),h.destroy=a}n=n.next}while(n!==o)}}catch(v){Ue(t,t.return,v)}}function jn(e,t,n){try{var a=t.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var u=o.next;a=u;do{if((a.tag&e)===e){var h=a.inst,v=h.destroy;if(v!==void 0){h.destroy=void 0,o=t;var E=n,z=v;try{z()}catch($){Ue(o,E,$)}}}a=a.next}while(a!==u)}}catch($){Ue(t,t.return,$)}}function Uf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{wd(t,n)}catch(a){Ue(e,e.return,a)}}}function zf(e,t,n){n.props=oi(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Ue(e,t,a)}}function Xa(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(o){Ue(e,t,o)}}function Xt(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(o){Ue(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Ue(e,t,o)}else n.current=null}function Df(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(o){Ue(e,e.return,o)}}function ko(e,t,n){try{var a=e.stateNode;M0(a,e.type,n,t),a[ut]=t}catch(o){Ue(e,e.return,o)}}function Nf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Mn(e.type)||e.tag===4}function Uo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Mn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zo(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ft));else if(a!==4&&(a===27&&Mn(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(zo(e,t,n),e=e.sibling;e!==null;)zo(e,t,n),e=e.sibling}function cs(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&Mn(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(cs(e,t,n),e=e.sibling;e!==null;)cs(e,t,n),e=e.sibling}function Mf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);rt(t,a,n),t[tt]=e,t[ut]=n}catch(u){Ue(e,e.return,u)}}var un=!1,Ie=!1,Do=!1,Bf=typeof WeakSet=="function"?WeakSet:Set,et=null;function m0(e,t){if(e=e.containerInfo,tu=ks,e=Jc(e),Al(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var o=a.anchorOffset,u=a.focusNode;a=a.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var h=0,v=-1,E=-1,z=0,$=0,V=e,D=null;t:for(;;){for(var q;V!==n||o!==0&&V.nodeType!==3||(v=h+o),V!==u||a!==0&&V.nodeType!==3||(E=h+a),V.nodeType===3&&(h+=V.nodeValue.length),(q=V.firstChild)!==null;)D=V,V=q;for(;;){if(V===e)break t;if(D===n&&++z===o&&(v=h),D===u&&++$===a&&(E=h),(q=V.nextSibling)!==null)break;V=D,D=V.parentNode}V=q}n=v===-1||E===-1?null:{start:v,end:E}}else n=null}n=n||{start:0,end:0}}else n=null;for(nu={focusedElem:e,selectionRange:n},ks=!1,et=t;et!==null;)if(t=et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,et=e;else for(;et!==null;){switch(t=et,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,n=t,o=u.memoizedProps,u=u.memoizedState,a=n.stateNode;try{var F=oi(n.type,o);e=a.getSnapshotBeforeUpdate(F,u),a.__reactInternalSnapshotBeforeUpdate=e}catch(ce){Ue(n,n.return,ce)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ru(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ru(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,et=e;break}et=t.return}}function qf(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:dn(e,n),a&4&&Qa(5,n);break;case 1:if(dn(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(h){Ue(n,n.return,h)}else{var o=oi(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){Ue(n,n.return,h)}}a&64&&Uf(n),a&512&&Xa(n,n.return);break;case 3:if(dn(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{wd(e,t)}catch(h){Ue(n,n.return,h)}}break;case 27:t===null&&a&4&&Mf(n);case 26:case 5:dn(e,n),t===null&&a&4&&Df(n),a&512&&Xa(n,n.return);break;case 12:dn(e,n);break;case 31:dn(e,n),a&4&&$f(e,n);break;case 13:dn(e,n),a&4&&Gf(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=x0.bind(null,n),Y0(e,n))));break;case 22:if(a=n.memoizedState!==null||un,!a){t=t!==null&&t.memoizedState!==null||Ie,o=un;var u=Ie;un=a,(Ie=t)&&!u?fn(e,n,(n.subtreeFlags&8772)!==0):dn(e,n),un=o,Ie=u}break;case 30:break;default:dn(e,n)}}function Lf(e){var t=e.alternate;t!==null&&(e.alternate=null,Lf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ul(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var He=null,dt=!1;function cn(e,t,n){for(n=n.child;n!==null;)Hf(e,t,n),n=n.sibling}function Hf(e,t,n){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(ya,n)}catch{}switch(n.tag){case 26:Ie||Xt(n,t),cn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ie||Xt(n,t);var a=He,o=dt;Mn(n.type)&&(He=n.stateNode,dt=!1),cn(e,t,n),nr(n.stateNode),He=a,dt=o;break;case 5:Ie||Xt(n,t);case 6:if(a=He,o=dt,He=null,cn(e,t,n),He=a,dt=o,He!==null)if(dt)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(n.stateNode)}catch(u){Ue(n,t,u)}else try{He.removeChild(n.stateNode)}catch(u){Ue(n,t,u)}break;case 18:He!==null&&(dt?(e=He,Uh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ia(e)):Uh(He,n.stateNode));break;case 4:a=He,o=dt,He=n.stateNode.containerInfo,dt=!0,cn(e,t,n),He=a,dt=o;break;case 0:case 11:case 14:case 15:jn(2,n,t),Ie||jn(4,n,t),cn(e,t,n);break;case 1:Ie||(Xt(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&zf(n,t,a)),cn(e,t,n);break;case 21:cn(e,t,n);break;case 22:Ie=(a=Ie)||n.memoizedState!==null,cn(e,t,n),Ie=a;break;default:cn(e,t,n)}}function $f(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ia(e)}catch(n){Ue(t,t.return,n)}}}function Gf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ia(e)}catch(n){Ue(t,t.return,n)}}function p0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Bf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Bf),t;default:throw Error(s(435,e.tag))}}function ds(e,t){var n=p0(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var o=T0.bind(null,e,a);a.then(o,o)}})}function ft(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var o=n[a],u=e,h=t,v=h;e:for(;v!==null;){switch(v.tag){case 27:if(Mn(v.type)){He=v.stateNode,dt=!1;break e}break;case 5:He=v.stateNode,dt=!1;break e;case 3:case 4:He=v.stateNode.containerInfo,dt=!0;break e}v=v.return}if(He===null)throw Error(s(160));Hf(u,h,o),He=null,dt=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Vf(t,e),t=t.sibling}var Ht=null;function Vf(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ft(t,e),ht(e),a&4&&(jn(3,e,e.return),Qa(3,e),jn(5,e,e.return));break;case 1:ft(t,e),ht(e),a&512&&(Ie||n===null||Xt(n,n.return)),a&64&&un&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var o=Ht;if(ft(t,e),ht(e),a&512&&(Ie||n===null||Xt(n,n.return)),a&4){var u=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(a){case"title":u=o.getElementsByTagName("title")[0],(!u||u[_a]||u[tt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(a),o.head.insertBefore(u,o.querySelector("head > title"))),rt(u,a,n),u[tt]=e,We(u),a=u;break e;case"link":var h=Vh("link","href",o).get(a+(n.href||""));if(h){for(var v=0;v<h.length;v++)if(u=h[v],u.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&u.getAttribute("rel")===(n.rel==null?null:n.rel)&&u.getAttribute("title")===(n.title==null?null:n.title)&&u.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(v,1);break t}}u=o.createElement(a),rt(u,a,n),o.head.appendChild(u);break;case"meta":if(h=Vh("meta","content",o).get(a+(n.content||""))){for(v=0;v<h.length;v++)if(u=h[v],u.getAttribute("content")===(n.content==null?null:""+n.content)&&u.getAttribute("name")===(n.name==null?null:n.name)&&u.getAttribute("property")===(n.property==null?null:n.property)&&u.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&u.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(v,1);break t}}u=o.createElement(a),rt(u,a,n),o.head.appendChild(u);break;default:throw Error(s(468,a))}u[tt]=e,We(u),a=u}e.stateNode=a}else Yh(o,e.type,e.stateNode);else e.stateNode=Gh(o,a,e.memoizedProps);else u!==a?(u===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):u.count--,a===null?Yh(o,e.type,e.stateNode):Gh(o,a,e.memoizedProps)):a===null&&e.stateNode!==null&&ko(e,e.memoizedProps,n.memoizedProps)}break;case 27:ft(t,e),ht(e),a&512&&(Ie||n===null||Xt(n,n.return)),n!==null&&a&4&&ko(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ft(t,e),ht(e),a&512&&(Ie||n===null||Xt(n,n.return)),e.flags&32){o=e.stateNode;try{Ai(o,"")}catch(F){Ue(e,e.return,F)}}a&4&&e.stateNode!=null&&(o=e.memoizedProps,ko(e,o,n!==null?n.memoizedProps:o)),a&1024&&(Do=!0);break;case 6:if(ft(t,e),ht(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(F){Ue(e,e.return,F)}}break;case 3:if(Os=null,o=Ht,Ht=Ts(t.containerInfo),ft(t,e),Ht=o,ht(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{ia(t.containerInfo)}catch(F){Ue(e,e.return,F)}Do&&(Do=!1,Yf(e));break;case 4:a=Ht,Ht=Ts(e.stateNode.containerInfo),ft(t,e),ht(e),Ht=a;break;case 12:ft(t,e),ht(e);break;case 31:ft(t,e),ht(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ds(e,a)));break;case 13:ft(t,e),ht(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(hs=pt()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ds(e,a)));break;case 22:o=e.memoizedState!==null;var E=n!==null&&n.memoizedState!==null,z=un,$=Ie;if(un=z||o,Ie=$||E,ft(t,e),Ie=$,un=z,ht(e),a&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||E||un||Ie||ui(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){E=n=t;try{if(u=E.stateNode,o)h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{v=E.stateNode;var V=E.memoizedProps.style,D=V!=null&&V.hasOwnProperty("display")?V.display:null;v.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch(F){Ue(E,E.return,F)}}}else if(t.tag===6){if(n===null){E=t;try{E.stateNode.nodeValue=o?"":E.memoizedProps}catch(F){Ue(E,E.return,F)}}}else if(t.tag===18){if(n===null){E=t;try{var q=E.stateNode;o?zh(q,!0):zh(E.stateNode,!1)}catch(F){Ue(E,E.return,F)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,ds(e,n))));break;case 19:ft(t,e),ht(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ds(e,a)));break;case 30:break;case 21:break;default:ft(t,e),ht(e)}}function ht(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(Nf(a)){n=a;break}a=a.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var o=n.stateNode,u=Uo(e);cs(e,u,o);break;case 5:var h=n.stateNode;n.flags&32&&(Ai(h,""),n.flags&=-33);var v=Uo(e);cs(e,v,h);break;case 3:case 4:var E=n.stateNode.containerInfo,z=Uo(e);zo(e,z,E);break;default:throw Error(s(161))}}catch($){Ue(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Yf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function dn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)qf(e,t.alternate,t),t=t.sibling}function ui(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:jn(4,t,t.return),ui(t);break;case 1:Xt(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&zf(t,t.return,n),ui(t);break;case 27:nr(t.stateNode);case 26:case 5:Xt(t,t.return),ui(t);break;case 22:t.memoizedState===null&&ui(t);break;case 30:ui(t);break;default:ui(t)}e=e.sibling}}function fn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,o=e,u=t,h=u.flags;switch(u.tag){case 0:case 11:case 15:fn(o,u,n),Qa(4,u);break;case 1:if(fn(o,u,n),a=u,o=a.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(z){Ue(a,a.return,z)}if(a=u,o=a.updateQueue,o!==null){var v=a.stateNode;try{var E=o.shared.hiddenCallbacks;if(E!==null)for(o.shared.hiddenCallbacks=null,o=0;o<E.length;o++)_d(E[o],v)}catch(z){Ue(a,a.return,z)}}n&&h&64&&Uf(u),Xa(u,u.return);break;case 27:Mf(u);case 26:case 5:fn(o,u,n),n&&a===null&&h&4&&Df(u),Xa(u,u.return);break;case 12:fn(o,u,n);break;case 31:fn(o,u,n),n&&h&4&&$f(o,u);break;case 13:fn(o,u,n),n&&h&4&&Gf(o,u);break;case 22:u.memoizedState===null&&fn(o,u,n),Xa(u,u.return);break;case 30:break;default:fn(o,u,n)}t=t.sibling}}function No(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&za(n))}function Mo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&za(e))}function $t(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Kf(e,t,n,a),t=t.sibling}function Kf(e,t,n,a){var o=t.flags;switch(t.tag){case 0:case 11:case 15:$t(e,t,n,a),o&2048&&Qa(9,t);break;case 1:$t(e,t,n,a);break;case 3:$t(e,t,n,a),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&za(e)));break;case 12:if(o&2048){$t(e,t,n,a),e=t.stateNode;try{var u=t.memoizedProps,h=u.id,v=u.onPostCommit;typeof v=="function"&&v(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){Ue(t,t.return,E)}}else $t(e,t,n,a);break;case 31:$t(e,t,n,a);break;case 13:$t(e,t,n,a);break;case 23:break;case 22:u=t.stateNode,h=t.alternate,t.memoizedState!==null?u._visibility&2?$t(e,t,n,a):Ja(e,t):u._visibility&2?$t(e,t,n,a):(u._visibility|=2,Qi(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),o&2048&&No(h,t);break;case 24:$t(e,t,n,a),o&2048&&Mo(t.alternate,t);break;default:$t(e,t,n,a)}}function Qi(e,t,n,a,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,h=t,v=n,E=a,z=h.flags;switch(h.tag){case 0:case 11:case 15:Qi(u,h,v,E,o),Qa(8,h);break;case 23:break;case 22:var $=h.stateNode;h.memoizedState!==null?$._visibility&2?Qi(u,h,v,E,o):Ja(u,h):($._visibility|=2,Qi(u,h,v,E,o)),o&&z&2048&&No(h.alternate,h);break;case 24:Qi(u,h,v,E,o),o&&z&2048&&Mo(h.alternate,h);break;default:Qi(u,h,v,E,o)}t=t.sibling}}function Ja(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,o=a.flags;switch(a.tag){case 22:Ja(n,a),o&2048&&No(a.alternate,a);break;case 24:Ja(n,a),o&2048&&Mo(a.alternate,a);break;default:Ja(n,a)}t=t.sibling}}var Ia=8192;function Xi(e,t,n){if(e.subtreeFlags&Ia)for(e=e.child;e!==null;)Qf(e,t,n),e=e.sibling}function Qf(e,t,n){switch(e.tag){case 26:Xi(e,t,n),e.flags&Ia&&e.memoizedState!==null&&ny(n,Ht,e.memoizedState,e.memoizedProps);break;case 5:Xi(e,t,n);break;case 3:case 4:var a=Ht;Ht=Ts(e.stateNode.containerInfo),Xi(e,t,n),Ht=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Ia,Ia=16777216,Xi(e,t,n),Ia=a):Xi(e,t,n));break;default:Xi(e,t,n)}}function Xf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Za(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];et=a,If(a,e)}Xf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Jf(e),e=e.sibling}function Jf(e){switch(e.tag){case 0:case 11:case 15:Za(e),e.flags&2048&&jn(9,e,e.return);break;case 3:Za(e);break;case 12:Za(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,fs(e)):Za(e);break;default:Za(e)}}function fs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];et=a,If(a,e)}Xf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:jn(8,t,t.return),fs(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,fs(t));break;default:fs(t)}e=e.sibling}}function If(e,t){for(;et!==null;){var n=et;switch(n.tag){case 0:case 11:case 15:jn(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:za(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,et=a;else e:for(n=e;et!==null;){a=et;var o=a.sibling,u=a.return;if(Lf(a),a===n){et=null;break e}if(o!==null){o.return=u,et=o;break e}et=u}}}var y0={getCacheForType:function(e){var t=it(Qe),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return it(Qe).controller.signal}},v0=typeof WeakMap=="function"?WeakMap:Map,je=0,Me=null,be=null,we=0,ke=0,Et=null,Cn=!1,Ji=!1,Bo=!1,hn=0,Ve=0,kn=0,ci=0,qo=0,xt=0,Ii=0,Pa=null,gt=null,Lo=!1,hs=0,Zf=0,gs=1/0,ms=null,Un=null,Pe=0,zn=null,Zi=null,gn=0,Ho=0,$o=null,Pf=null,Fa=0,Go=null;function Tt(){return(je&2)!==0&&we!==0?we&-we:M.T!==null?Jo():dc()}function Ff(){if(xt===0)if((we&536870912)===0||xe){var e=Er;Er<<=1,(Er&3932160)===0&&(Er=262144),xt=e}else xt=536870912;return e=wt.current,e!==null&&(e.flags|=32),xt}function mt(e,t,n){(e===Me&&(ke===2||ke===9)||e.cancelPendingCommit!==null)&&(Pi(e,0),Dn(e,we,xt,!1)),ba(e,n),((je&2)===0||e!==Me)&&(e===Me&&((je&2)===0&&(ci|=n),Ve===4&&Dn(e,we,xt,!1)),Jt(e))}function Wf(e,t,n){if((je&6)!==0)throw Error(s(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||va(e,t),o=a?w0(e,t):Yo(e,t,!0),u=a;do{if(o===0){Ji&&!a&&Dn(e,t,0,!1);break}else{if(n=e.current.alternate,u&&!b0(n)){o=Yo(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var v=e;o=Pa;var E=v.current.memoizedState.isDehydrated;if(E&&(Pi(v,h).flags|=256),h=Yo(v,h,!1),h!==2){if(Bo&&!E){v.errorRecoveryDisabledLanes|=u,ci|=u,o=4;break e}u=gt,gt=o,u!==null&&(gt===null?gt=u:gt.push.apply(gt,u))}o=h}if(u=!1,o!==2)continue}}if(o===1){Pi(e,0),Dn(e,t,0,!0);break}e:{switch(a=e,u=o,u){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Dn(a,t,xt,!Cn);break e;case 2:gt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(o=hs+300-pt(),10<o)){if(Dn(a,t,xt,!Cn),Tr(a,0,!0)!==0)break e;gn=t,a.timeoutHandle=Ch(eh.bind(null,a,n,gt,ms,Lo,t,xt,ci,Ii,Cn,u,"Throttled",-0,0),o);break e}eh(a,n,gt,ms,Lo,t,xt,ci,Ii,Cn,u,null,-0,0)}}break}while(!0);Jt(e)}function eh(e,t,n,a,o,u,h,v,E,z,$,V,D,q){if(e.timeoutHandle=-1,V=t.subtreeFlags,V&8192||(V&16785408)===16785408){V={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ft},Qf(t,u,V);var F=(u&62914560)===u?hs-pt():(u&4194048)===u?Zf-pt():0;if(F=iy(V,F),F!==null){gn=u,e.cancelPendingCommit=F(oh.bind(null,e,t,u,n,a,o,h,v,E,$,V,null,D,q)),Dn(e,u,h,!z);return}}oh(e,t,u,n,a,o,h,v,E)}function b0(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var o=n[a],u=o.getSnapshot;o=o.value;try{if(!bt(u(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dn(e,t,n,a){t&=~qo,t&=~ci,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var o=t;0<o;){var u=31-vt(o),h=1<<u;a[u]=-1,o&=~h}n!==0&&oc(e,n,t)}function ps(){return(je&6)===0?(Wa(0),!1):!0}function Vo(){if(be!==null){if(ke===0)var e=be.return;else e=be,nn=ti=null,ao(e),$i=null,Na=0,e=be;for(;e!==null;)kf(e.alternate,e),e=e.return;be=null}}function Pi(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,L0(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),gn=0,Vo(),Me=e,be=n=en(e.current,null),we=t,ke=0,Et=null,Cn=!1,Ji=va(e,t),Bo=!1,Ii=xt=qo=ci=kn=Ve=0,gt=Pa=null,Lo=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var o=31-vt(a),u=1<<o;t|=e[o],a&=~u}return hn=t,Br(),n}function th(e,t){ge=null,M.H=Va,t===Hi||t===Kr?(t=pd(),ke=3):t===Ql?(t=pd(),ke=4):ke=t===wo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Et=t,be===null&&(Ve=1,rs(e,Ut(t,e.current)))}function nh(){var e=wt.current;return e===null?!0:(we&4194048)===we?Mt===null:(we&62914560)===we||(we&536870912)!==0?e===Mt:!1}function ih(){var e=M.H;return M.H=Va,e===null?Va:e}function ah(){var e=M.A;return M.A=y0,e}function ys(){Ve=4,Cn||(we&4194048)!==we&&wt.current!==null||(Ji=!0),(kn&134217727)===0&&(ci&134217727)===0||Me===null||Dn(Me,we,xt,!1)}function Yo(e,t,n){var a=je;je|=2;var o=ih(),u=ah();(Me!==e||we!==t)&&(ms=null,Pi(e,t)),t=!1;var h=Ve;e:do try{if(ke!==0&&be!==null){var v=be,E=Et;switch(ke){case 8:Vo(),h=6;break e;case 3:case 2:case 9:case 6:wt.current===null&&(t=!0);var z=ke;if(ke=0,Et=null,Fi(e,v,E,z),n&&Ji){h=0;break e}break;default:z=ke,ke=0,Et=null,Fi(e,v,E,z)}}_0(),h=Ve;break}catch($){th(e,$)}while(!0);return t&&e.shellSuspendCounter++,nn=ti=null,je=a,M.H=o,M.A=u,be===null&&(Me=null,we=0,Br()),h}function _0(){for(;be!==null;)rh(be)}function w0(e,t){var n=je;je|=2;var a=ih(),o=ah();Me!==e||we!==t?(ms=null,gs=pt()+500,Pi(e,t)):Ji=va(e,t);e:do try{if(ke!==0&&be!==null){t=be;var u=Et;t:switch(ke){case 1:ke=0,Et=null,Fi(e,t,u,1);break;case 2:case 9:if(gd(u)){ke=0,Et=null,sh(t);break}t=function(){ke!==2&&ke!==9||Me!==e||(ke=7),Jt(e)},u.then(t,t);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:gd(u)?(ke=0,Et=null,sh(t)):(ke=0,Et=null,Fi(e,t,u,7));break;case 5:var h=null;switch(be.tag){case 26:h=be.memoizedState;case 5:case 27:var v=be;if(h?Kh(h):v.stateNode.complete){ke=0,Et=null;var E=v.sibling;if(E!==null)be=E;else{var z=v.return;z!==null?(be=z,vs(z)):be=null}break t}}ke=0,Et=null,Fi(e,t,u,5);break;case 6:ke=0,Et=null,Fi(e,t,u,6);break;case 8:Vo(),Ve=6;break e;default:throw Error(s(462))}}S0();break}catch($){th(e,$)}while(!0);return nn=ti=null,M.H=a,M.A=o,je=n,be!==null?0:(Me=null,we=0,Br(),Ve)}function S0(){for(;be!==null&&!Km();)rh(be)}function rh(e){var t=jf(e.alternate,e,hn);e.memoizedProps=e.pendingProps,t===null?vs(e):be=t}function sh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ef(n,t,t.pendingProps,t.type,void 0,we);break;case 11:t=Ef(n,t,t.pendingProps,t.type.render,t.ref,we);break;case 5:ao(t);default:kf(n,t),t=be=id(t,hn),t=jf(n,t,hn)}e.memoizedProps=e.pendingProps,t===null?vs(e):be=t}function Fi(e,t,n,a){nn=ti=null,ao(t),$i=null,Na=0;var o=t.return;try{if(c0(e,o,t,n,we)){Ve=1,rs(e,Ut(n,e.current)),be=null;return}}catch(u){if(o!==null)throw be=o,u;Ve=1,rs(e,Ut(n,e.current)),be=null;return}t.flags&32768?(xe||a===1?e=!0:Ji||(we&536870912)!==0?e=!1:(Cn=e=!0,(a===2||a===9||a===3||a===6)&&(a=wt.current,a!==null&&a.tag===13&&(a.flags|=16384))),lh(t,e)):vs(t)}function vs(e){var t=e;do{if((t.flags&32768)!==0){lh(t,Cn);return}e=t.return;var n=h0(t.alternate,t,hn);if(n!==null){be=n;return}if(t=t.sibling,t!==null){be=t;return}be=t=e}while(t!==null);Ve===0&&(Ve=5)}function lh(e,t){do{var n=g0(e.alternate,e);if(n!==null){n.flags&=32767,be=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){be=e;return}be=e=n}while(e!==null);Ve=6,be=null}function oh(e,t,n,a,o,u,h,v,E){e.cancelPendingCommit=null;do bs();while(Pe!==0);if((je&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(u=t.lanes|t.childLanes,u|=kl,tp(e,n,u,h,v,E),e===Me&&(be=Me=null,we=0),Zi=t,zn=e,gn=n,Ho=u,$o=o,Pf=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,A0(wr,function(){return hh(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=M.T,M.T=null,o=I.p,I.p=2,h=je,je|=4;try{m0(e,t,n)}finally{je=h,I.p=o,M.T=a}}Pe=1,uh(),ch(),dh()}}function uh(){if(Pe===1){Pe=0;var e=zn,t=Zi,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=M.T,M.T=null;var a=I.p;I.p=2;var o=je;je|=4;try{Vf(t,e);var u=nu,h=Jc(e.containerInfo),v=u.focusedElem,E=u.selectionRange;if(h!==v&&v&&v.ownerDocument&&Xc(v.ownerDocument.documentElement,v)){if(E!==null&&Al(v)){var z=E.start,$=E.end;if($===void 0&&($=z),"selectionStart"in v)v.selectionStart=z,v.selectionEnd=Math.min($,v.value.length);else{var V=v.ownerDocument||document,D=V&&V.defaultView||window;if(D.getSelection){var q=D.getSelection(),F=v.textContent.length,ce=Math.min(E.start,F),Ne=E.end===void 0?ce:Math.min(E.end,F);!q.extend&&ce>Ne&&(h=Ne,Ne=ce,ce=h);var C=Qc(v,ce),T=Qc(v,Ne);if(C&&T&&(q.rangeCount!==1||q.anchorNode!==C.node||q.anchorOffset!==C.offset||q.focusNode!==T.node||q.focusOffset!==T.offset)){var U=V.createRange();U.setStart(C.node,C.offset),q.removeAllRanges(),ce>Ne?(q.addRange(U),q.extend(T.node,T.offset)):(U.setEnd(T.node,T.offset),q.addRange(U))}}}}for(V=[],q=v;q=q.parentNode;)q.nodeType===1&&V.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<V.length;v++){var G=V[v];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}ks=!!tu,nu=tu=null}finally{je=o,I.p=a,M.T=n}}e.current=t,Pe=2}}function ch(){if(Pe===2){Pe=0;var e=zn,t=Zi,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=M.T,M.T=null;var a=I.p;I.p=2;var o=je;je|=4;try{qf(e,t.alternate,t)}finally{je=o,I.p=a,M.T=n}}Pe=3}}function dh(){if(Pe===4||Pe===3){Pe=0,Qm();var e=zn,t=Zi,n=gn,a=Pf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Pe=5:(Pe=0,Zi=zn=null,fh(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Un=null),ll(n),t=t.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(ya,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=M.T,o=I.p,I.p=2,M.T=null;try{for(var u=e.onRecoverableError,h=0;h<a.length;h++){var v=a[h];u(v.value,{componentStack:v.stack})}}finally{M.T=t,I.p=o}}(gn&3)!==0&&bs(),Jt(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===Go?Fa++:(Fa=0,Go=e):Fa=0,Wa(0)}}function fh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,za(t)))}function bs(){return uh(),ch(),dh(),hh()}function hh(){if(Pe!==5)return!1;var e=zn,t=Ho;Ho=0;var n=ll(gn),a=M.T,o=I.p;try{I.p=32>n?32:n,M.T=null,n=$o,$o=null;var u=zn,h=gn;if(Pe=0,Zi=zn=null,gn=0,(je&6)!==0)throw Error(s(331));var v=je;if(je|=4,Jf(u.current),Kf(u,u.current,h,n),je=v,Wa(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(ya,u)}catch{}return!0}finally{I.p=o,M.T=a,fh(e,t)}}function gh(e,t,n){t=Ut(n,t),t=_o(e.stateNode,t,2),e=An(e,t,2),e!==null&&(ba(e,2),Jt(e))}function Ue(e,t,n){if(e.tag===3)gh(e,e,n);else for(;t!==null;){if(t.tag===3){gh(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Un===null||!Un.has(a))){e=Ut(n,e),n=mf(2),a=An(t,n,2),a!==null&&(pf(n,a,t,e),ba(a,2),Jt(a));break}}t=t.return}}function Ko(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new v0;var o=new Set;a.set(t,o)}else o=a.get(t),o===void 0&&(o=new Set,a.set(t,o));o.has(n)||(Bo=!0,o.add(n),e=E0.bind(null,e,t,n),t.then(e,e))}function E0(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Me===e&&(we&n)===n&&(Ve===4||Ve===3&&(we&62914560)===we&&300>pt()-hs?(je&2)===0&&Pi(e,0):qo|=n,Ii===we&&(Ii=0)),Jt(e)}function mh(e,t){t===0&&(t=lc()),e=Fn(e,t),e!==null&&(ba(e,t),Jt(e))}function x0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mh(e,n)}function T0(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(t),mh(e,n)}function A0(e,t){return il(e,t)}var _s=null,Wi=null,Qo=!1,ws=!1,Xo=!1,Nn=0;function Jt(e){e!==Wi&&e.next===null&&(Wi===null?_s=Wi=e:Wi=Wi.next=e),ws=!0,Qo||(Qo=!0,R0())}function Wa(e,t){if(!Xo&&ws){Xo=!0;do for(var n=!1,a=_s;a!==null;){if(e!==0){var o=a.pendingLanes;if(o===0)var u=0;else{var h=a.suspendedLanes,v=a.pingedLanes;u=(1<<31-vt(42|e)+1)-1,u&=o&~(h&~v),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(n=!0,bh(a,u))}else u=we,u=Tr(a,a===Me?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(u&3)===0||va(a,u)||(n=!0,bh(a,u));a=a.next}while(n);Xo=!1}}function O0(){ph()}function ph(){ws=Qo=!1;var e=0;Nn!==0&&q0()&&(e=Nn);for(var t=pt(),n=null,a=_s;a!==null;){var o=a.next,u=yh(a,t);u===0?(a.next=null,n===null?_s=o:n.next=o,o===null&&(Wi=n)):(n=a,(e!==0||(u&3)!==0)&&(ws=!0)),a=o}Pe!==0&&Pe!==5||Wa(e),Nn!==0&&(Nn=0)}function yh(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var h=31-vt(u),v=1<<h,E=o[h];E===-1?((v&n)===0||(v&a)!==0)&&(o[h]=ep(v,t)):E<=t&&(e.expiredLanes|=v),u&=~v}if(t=Me,n=we,n=Tr(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(ke===2||ke===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&al(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||va(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&al(a),ll(n)){case 2:case 8:n=rc;break;case 32:n=wr;break;case 268435456:n=sc;break;default:n=wr}return a=vh.bind(null,e),n=il(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&al(a),e.callbackPriority=2,e.callbackNode=null,2}function vh(e,t){if(Pe!==0&&Pe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bs()&&e.callbackNode!==n)return null;var a=we;return a=Tr(e,e===Me?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Wf(e,a,t),yh(e,pt()),e.callbackNode!=null&&e.callbackNode===n?vh.bind(null,e):null)}function bh(e,t){if(bs())return null;Wf(e,t,!0)}function R0(){H0(function(){(je&6)!==0?il(ac,O0):ph()})}function Jo(){if(Nn===0){var e=qi;e===0&&(e=Sr,Sr<<=1,(Sr&261888)===0&&(Sr=256)),Nn=e}return Nn}function _h(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:jr(""+e)}function wh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function j0(e,t,n,a,o){if(t==="submit"&&n&&n.stateNode===o){var u=_h((o[ut]||null).action),h=a.submitter;h&&(t=(t=h[ut]||null)?_h(t.formAction):h.getAttribute("formAction"),t!==null&&(u=t,h=null));var v=new zr("action","action",null,a,o);e.push({event:v,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Nn!==0){var E=h?wh(o,h):new FormData(o);go(n,{pending:!0,data:E,method:o.method,action:u},null,E)}}else typeof u=="function"&&(v.preventDefault(),E=h?wh(o,h):new FormData(o),go(n,{pending:!0,data:E,method:o.method,action:u},u,E))},currentTarget:o}]})}}for(var Io=0;Io<Cl.length;Io++){var Zo=Cl[Io],C0=Zo.toLowerCase(),k0=Zo[0].toUpperCase()+Zo.slice(1);Lt(C0,"on"+k0)}Lt(Pc,"onAnimationEnd"),Lt(Fc,"onAnimationIteration"),Lt(Wc,"onAnimationStart"),Lt("dblclick","onDoubleClick"),Lt("focusin","onFocus"),Lt("focusout","onBlur"),Lt(Xp,"onTransitionRun"),Lt(Jp,"onTransitionStart"),Lt(Ip,"onTransitionCancel"),Lt(ed,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(er));function Sh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],o=a.event;a=a.listeners;e:{var u=void 0;if(t)for(var h=a.length-1;0<=h;h--){var v=a[h],E=v.instance,z=v.currentTarget;if(v=v.listener,E!==u&&o.isPropagationStopped())break e;u=v,o.currentTarget=z;try{u(o)}catch($){Mr($)}o.currentTarget=null,u=E}else for(h=0;h<a.length;h++){if(v=a[h],E=v.instance,z=v.currentTarget,v=v.listener,E!==u&&o.isPropagationStopped())break e;u=v,o.currentTarget=z;try{u(o)}catch($){Mr($)}o.currentTarget=null,u=E}}}}function _e(e,t){var n=t[ol];n===void 0&&(n=t[ol]=new Set);var a=e+"__bubble";n.has(a)||(Eh(t,e,2,!1),n.add(a))}function Po(e,t,n){var a=0;t&&(a|=4),Eh(n,e,a,t)}var Ss="_reactListening"+Math.random().toString(36).slice(2);function Fo(e){if(!e[Ss]){e[Ss]=!0,gc.forEach(function(n){n!=="selectionchange"&&(U0.has(n)||Po(n,!1,e),Po(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ss]||(t[Ss]=!0,Po("selectionchange",!1,t))}}function Eh(e,t,n,a){switch(Fh(t)){case 2:var o=sy;break;case 8:o=ly;break;default:o=hu}n=o.bind(null,t,n,e),o=void 0,!yl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),a?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Wo(e,t,n,a,o){var u=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var h=a.tag;if(h===3||h===4){var v=a.stateNode.containerInfo;if(v===o)break;if(h===4)for(h=a.return;h!==null;){var E=h.tag;if((E===3||E===4)&&h.stateNode.containerInfo===o)return;h=h.return}for(;v!==null;){if(h=wi(v),h===null)return;if(E=h.tag,E===5||E===6||E===26||E===27){a=u=h;continue e}v=v.parentNode}}a=a.return}Oc(function(){var z=u,$=ml(n),V=[];e:{var D=td.get(e);if(D!==void 0){var q=zr,F=e;switch(e){case"keypress":if(kr(n)===0)break e;case"keydown":case"keyup":q=Tp;break;case"focusin":F="focus",q=wl;break;case"focusout":F="blur",q=wl;break;case"beforeblur":case"afterblur":q=wl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=hp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Rp;break;case Pc:case Fc:case Wc:q=pp;break;case ed:q=Cp;break;case"scroll":case"scrollend":q=dp;break;case"wheel":q=Up;break;case"copy":case"cut":case"paste":q=vp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Uc;break;case"toggle":case"beforetoggle":q=Dp}var ce=(t&4)!==0,Ne=!ce&&(e==="scroll"||e==="scrollend"),C=ce?D!==null?D+"Capture":null:D;ce=[];for(var T=z,U;T!==null;){var G=T;if(U=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||U===null||C===null||(G=Sa(T,C),G!=null&&ce.push(tr(T,G,U))),Ne)break;T=T.return}0<ce.length&&(D=new q(D,F,null,n,$),V.push({event:D,listeners:ce}))}}if((t&7)===0){e:{if(D=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",D&&n!==gl&&(F=n.relatedTarget||n.fromElement)&&(wi(F)||F[_i]))break e;if((q||D)&&(D=$.window===$?$:(D=$.ownerDocument)?D.defaultView||D.parentWindow:window,q?(F=n.relatedTarget||n.toElement,q=z,F=F?wi(F):null,F!==null&&(Ne=d(F),ce=F.tag,F!==Ne||ce!==5&&ce!==27&&ce!==6)&&(F=null)):(q=null,F=z),q!==F)){if(ce=Cc,G="onMouseLeave",C="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(ce=Uc,G="onPointerLeave",C="onPointerEnter",T="pointer"),Ne=q==null?D:wa(q),U=F==null?D:wa(F),D=new ce(G,T+"leave",q,n,$),D.target=Ne,D.relatedTarget=U,G=null,wi($)===z&&(ce=new ce(C,T+"enter",F,n,$),ce.target=U,ce.relatedTarget=Ne,G=ce),Ne=G,q&&F)t:{for(ce=z0,C=q,T=F,U=0,G=C;G;G=ce(G))U++;G=0;for(var re=T;re;re=ce(re))G++;for(;0<U-G;)C=ce(C),U--;for(;0<G-U;)T=ce(T),G--;for(;U--;){if(C===T||T!==null&&C===T.alternate){ce=C;break t}C=ce(C),T=ce(T)}ce=null}else ce=null;q!==null&&xh(V,D,q,ce,!1),F!==null&&Ne!==null&&xh(V,Ne,F,ce,!0)}}e:{if(D=z?wa(z):window,q=D.nodeName&&D.nodeName.toLowerCase(),q==="select"||q==="input"&&D.type==="file")var Oe=Hc;else if(qc(D))if($c)Oe=Yp;else{Oe=Gp;var te=$p}else q=D.nodeName,!q||q.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?z&&hl(z.elementType)&&(Oe=Hc):Oe=Vp;if(Oe&&(Oe=Oe(e,z))){Lc(V,Oe,n,$);break e}te&&te(e,D,z),e==="focusout"&&z&&D.type==="number"&&z.memoizedProps.value!=null&&fl(D,"number",D.value)}switch(te=z?wa(z):window,e){case"focusin":(qc(te)||te.contentEditable==="true")&&(Ci=te,Ol=z,Ca=null);break;case"focusout":Ca=Ol=Ci=null;break;case"mousedown":Rl=!0;break;case"contextmenu":case"mouseup":case"dragend":Rl=!1,Ic(V,n,$);break;case"selectionchange":if(Qp)break;case"keydown":case"keyup":Ic(V,n,$)}var me;if(El)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else ji?Mc(e,n)&&(Se="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Se="onCompositionStart");Se&&(zc&&n.locale!=="ko"&&(ji||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&ji&&(me=Rc()):(bn=$,vl="value"in bn?bn.value:bn.textContent,ji=!0)),te=Es(z,Se),0<te.length&&(Se=new kc(Se,e,null,n,$),V.push({event:Se,listeners:te}),me?Se.data=me:(me=Bc(n),me!==null&&(Se.data=me)))),(me=Mp?Bp(e,n):qp(e,n))&&(Se=Es(z,"onBeforeInput"),0<Se.length&&(te=new kc("onBeforeInput","beforeinput",null,n,$),V.push({event:te,listeners:Se}),te.data=me)),j0(V,e,z,n,$)}Sh(V,t)})}function tr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Es(e,t){for(var n=t+"Capture",a=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=Sa(e,n),o!=null&&a.unshift(tr(e,o,u)),o=Sa(e,t),o!=null&&a.push(tr(e,o,u))),e.tag===3)return a;e=e.return}return[]}function z0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function xh(e,t,n,a,o){for(var u=t._reactName,h=[];n!==null&&n!==a;){var v=n,E=v.alternate,z=v.stateNode;if(v=v.tag,E!==null&&E===a)break;v!==5&&v!==26&&v!==27||z===null||(E=z,o?(z=Sa(n,u),z!=null&&h.unshift(tr(n,z,E))):o||(z=Sa(n,u),z!=null&&h.push(tr(n,z,E)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var D0=/\r\n?/g,N0=/\u0000|\uFFFD/g;function Th(e){return(typeof e=="string"?e:""+e).replace(D0,`
`).replace(N0,"")}function Ah(e,t){return t=Th(t),Th(e)===t}function De(e,t,n,a,o,u){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Ai(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Ai(e,""+a);break;case"className":Or(e,"class",a);break;case"tabIndex":Or(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Or(e,n,a);break;case"style":Tc(e,a,u);break;case"data":if(t!=="object"){Or(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=jr(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(n==="formAction"?(t!=="input"&&De(e,t,"name",o.name,o,null),De(e,t,"formEncType",o.formEncType,o,null),De(e,t,"formMethod",o.formMethod,o,null),De(e,t,"formTarget",o.formTarget,o,null)):(De(e,t,"encType",o.encType,o,null),De(e,t,"method",o.method,o,null),De(e,t,"target",o.target,o,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=jr(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Ft);break;case"onScroll":a!=null&&_e("scroll",e);break;case"onScrollEnd":a!=null&&_e("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(o.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=jr(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":_e("beforetoggle",e),_e("toggle",e),Ar(e,"popover",a);break;case"xlinkActuate":Pt(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Pt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Pt(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Pt(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Pt(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Pt(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Ar(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=up.get(n)||n,Ar(e,n,a))}}function eu(e,t,n,a,o,u){switch(n){case"style":Tc(e,a,u);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(o.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"children":typeof a=="string"?Ai(e,a):(typeof a=="number"||typeof a=="bigint")&&Ai(e,""+a);break;case"onScroll":a!=null&&_e("scroll",e);break;case"onScrollEnd":a!=null&&_e("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Ft);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mc.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),u=e[ut]||null,u=u!=null?u[n]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof a=="function")){typeof u!="function"&&u!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,o);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):Ar(e,n,a)}}}function rt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",e),_e("load",e);var a=!1,o=!1,u;for(u in n)if(n.hasOwnProperty(u)){var h=n[u];if(h!=null)switch(u){case"src":a=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:De(e,t,u,h,n,null)}}o&&De(e,t,"srcSet",n.srcSet,n,null),a&&De(e,t,"src",n.src,n,null);return;case"input":_e("invalid",e);var v=u=h=o=null,E=null,z=null;for(a in n)if(n.hasOwnProperty(a)){var $=n[a];if($!=null)switch(a){case"name":o=$;break;case"type":h=$;break;case"checked":E=$;break;case"defaultChecked":z=$;break;case"value":u=$;break;case"defaultValue":v=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,t));break;default:De(e,t,a,$,n,null)}}wc(e,u,v,E,z,h,o,!1);return;case"select":_e("invalid",e),a=h=u=null;for(o in n)if(n.hasOwnProperty(o)&&(v=n[o],v!=null))switch(o){case"value":u=v;break;case"defaultValue":h=v;break;case"multiple":a=v;default:De(e,t,o,v,n,null)}t=u,n=h,e.multiple=!!a,t!=null?Ti(e,!!a,t,!1):n!=null&&Ti(e,!!a,n,!0);return;case"textarea":_e("invalid",e),u=o=a=null;for(h in n)if(n.hasOwnProperty(h)&&(v=n[h],v!=null))switch(h){case"value":a=v;break;case"defaultValue":o=v;break;case"children":u=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:De(e,t,h,v,n,null)}Ec(e,a,o,u);return;case"option":for(E in n)if(n.hasOwnProperty(E)&&(a=n[E],a!=null))switch(E){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:De(e,t,E,a,n,null)}return;case"dialog":_e("beforetoggle",e),_e("toggle",e),_e("cancel",e),_e("close",e);break;case"iframe":case"object":_e("load",e);break;case"video":case"audio":for(a=0;a<er.length;a++)_e(er[a],e);break;case"image":_e("error",e),_e("load",e);break;case"details":_e("toggle",e);break;case"embed":case"source":case"link":_e("error",e),_e("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in n)if(n.hasOwnProperty(z)&&(a=n[z],a!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:De(e,t,z,a,n,null)}return;default:if(hl(t)){for($ in n)n.hasOwnProperty($)&&(a=n[$],a!==void 0&&eu(e,t,$,a,n,void 0));return}}for(v in n)n.hasOwnProperty(v)&&(a=n[v],a!=null&&De(e,t,v,a,n,null))}function M0(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,h=null,v=null,E=null,z=null,$=null;for(q in n){var V=n[q];if(n.hasOwnProperty(q)&&V!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":E=V;default:a.hasOwnProperty(q)||De(e,t,q,null,a,V)}}for(var D in a){var q=a[D];if(V=n[D],a.hasOwnProperty(D)&&(q!=null||V!=null))switch(D){case"type":u=q;break;case"name":o=q;break;case"checked":z=q;break;case"defaultChecked":$=q;break;case"value":h=q;break;case"defaultValue":v=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,t));break;default:q!==V&&De(e,t,D,q,a,V)}}dl(e,h,v,E,z,$,u,o);return;case"select":q=h=v=D=null;for(u in n)if(E=n[u],n.hasOwnProperty(u)&&E!=null)switch(u){case"value":break;case"multiple":q=E;default:a.hasOwnProperty(u)||De(e,t,u,null,a,E)}for(o in a)if(u=a[o],E=n[o],a.hasOwnProperty(o)&&(u!=null||E!=null))switch(o){case"value":D=u;break;case"defaultValue":v=u;break;case"multiple":h=u;default:u!==E&&De(e,t,o,u,a,E)}t=v,n=h,a=q,D!=null?Ti(e,!!n,D,!1):!!a!=!!n&&(t!=null?Ti(e,!!n,t,!0):Ti(e,!!n,n?[]:"",!1));return;case"textarea":q=D=null;for(v in n)if(o=n[v],n.hasOwnProperty(v)&&o!=null&&!a.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:De(e,t,v,null,a,o)}for(h in a)if(o=a[h],u=n[h],a.hasOwnProperty(h)&&(o!=null||u!=null))switch(h){case"value":D=o;break;case"defaultValue":q=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(s(91));break;default:o!==u&&De(e,t,h,o,a,u)}Sc(e,D,q);return;case"option":for(var F in n)if(D=n[F],n.hasOwnProperty(F)&&D!=null&&!a.hasOwnProperty(F))switch(F){case"selected":e.selected=!1;break;default:De(e,t,F,null,a,D)}for(E in a)if(D=a[E],q=n[E],a.hasOwnProperty(E)&&D!==q&&(D!=null||q!=null))switch(E){case"selected":e.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:De(e,t,E,D,a,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in n)D=n[ce],n.hasOwnProperty(ce)&&D!=null&&!a.hasOwnProperty(ce)&&De(e,t,ce,null,a,D);for(z in a)if(D=a[z],q=n[z],a.hasOwnProperty(z)&&D!==q&&(D!=null||q!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(137,t));break;default:De(e,t,z,D,a,q)}return;default:if(hl(t)){for(var Ne in n)D=n[Ne],n.hasOwnProperty(Ne)&&D!==void 0&&!a.hasOwnProperty(Ne)&&eu(e,t,Ne,void 0,a,D);for($ in a)D=a[$],q=n[$],!a.hasOwnProperty($)||D===q||D===void 0&&q===void 0||eu(e,t,$,D,a,q);return}}for(var C in n)D=n[C],n.hasOwnProperty(C)&&D!=null&&!a.hasOwnProperty(C)&&De(e,t,C,null,a,D);for(V in a)D=a[V],q=n[V],!a.hasOwnProperty(V)||D===q||D==null&&q==null||De(e,t,V,D,a,q)}function Oh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function B0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var o=n[a],u=o.transferSize,h=o.initiatorType,v=o.duration;if(u&&v&&Oh(h)){for(h=0,v=o.responseEnd,a+=1;a<n.length;a++){var E=n[a],z=E.startTime;if(z>v)break;var $=E.transferSize,V=E.initiatorType;$&&Oh(V)&&(E=E.responseEnd,h+=$*(E<v?1:(v-z)/(E-z)))}if(--a,t+=8*(u+h)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var tu=null,nu=null;function xs(e){return e.nodeType===9?e:e.ownerDocument}function Rh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function iu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var au=null;function q0(){var e=window.event;return e&&e.type==="popstate"?e===au?!1:(au=e,!0):(au=null,!1)}var Ch=typeof setTimeout=="function"?setTimeout:void 0,L0=typeof clearTimeout=="function"?clearTimeout:void 0,kh=typeof Promise=="function"?Promise:void 0,H0=typeof queueMicrotask=="function"?queueMicrotask:typeof kh<"u"?function(e){return kh.resolve(null).then(e).catch($0)}:Ch;function $0(e){setTimeout(function(){throw e})}function Mn(e){return e==="head"}function Uh(e,t){var n=t,a=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(o),ia(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")nr(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,nr(n);for(var u=n.firstChild;u;){var h=u.nextSibling,v=u.nodeName;u[_a]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&u.rel.toLowerCase()==="stylesheet"||n.removeChild(u),u=h}}else n==="body"&&nr(e.ownerDocument.body);n=o}while(n);ia(t)}function zh(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function ru(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ru(n),ul(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function G0(e,t,n,a){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[_a])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Bt(e.nextSibling),e===null)break}return null}function V0(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Bt(e.nextSibling),e===null))return null;return e}function Dh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Bt(e.nextSibling),e===null))return null;return e}function su(e){return e.data==="$?"||e.data==="$~"}function lu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Y0(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Bt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ou=null;function Nh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Bt(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Mh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Bh(e,t,n){switch(t=xs(n),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function nr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ul(e)}var qt=new Map,qh=new Set;function Ts(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var mn=I.d;I.d={f:K0,r:Q0,D:X0,C:J0,L:I0,m:Z0,X:F0,S:P0,M:W0};function K0(){var e=mn.f(),t=ps();return e||t}function Q0(e){var t=Si(e);t!==null&&t.tag===5&&t.type==="form"?ef(t):mn.r(e)}var ea=typeof document>"u"?null:document;function Lh(e,t,n){var a=ea;if(a&&typeof t=="string"&&t){var o=Ct(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),qh.has(o)||(qh.add(o),e={rel:e,crossOrigin:n,href:t},a.querySelector(o)===null&&(t=a.createElement("link"),rt(t,"link",e),We(t),a.head.appendChild(t)))}}function X0(e){mn.D(e),Lh("dns-prefetch",e,null)}function J0(e,t){mn.C(e,t),Lh("preconnect",e,t)}function I0(e,t,n){mn.L(e,t,n);var a=ea;if(a&&e&&t){var o='link[rel="preload"][as="'+Ct(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Ct(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Ct(n.imageSizes)+'"]')):o+='[href="'+Ct(e)+'"]';var u=o;switch(t){case"style":u=ta(e);break;case"script":u=na(e)}qt.has(u)||(e=w({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),qt.set(u,e),a.querySelector(o)!==null||t==="style"&&a.querySelector(ir(u))||t==="script"&&a.querySelector(ar(u))||(t=a.createElement("link"),rt(t,"link",e),We(t),a.head.appendChild(t)))}}function Z0(e,t){mn.m(e,t);var n=ea;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Ct(a)+'"][href="'+Ct(e)+'"]',u=o;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=na(e)}if(!qt.has(u)&&(e=w({rel:"modulepreload",href:e},t),qt.set(u,e),n.querySelector(o)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ar(u)))return}a=n.createElement("link"),rt(a,"link",e),We(a),n.head.appendChild(a)}}}function P0(e,t,n){mn.S(e,t,n);var a=ea;if(a&&e){var o=Ei(a).hoistableStyles,u=ta(e);t=t||"default";var h=o.get(u);if(!h){var v={loading:0,preload:null};if(h=a.querySelector(ir(u)))v.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},n),(n=qt.get(u))&&uu(e,n);var E=h=a.createElement("link");We(E),rt(E,"link",e),E._p=new Promise(function(z,$){E.onload=z,E.onerror=$}),E.addEventListener("load",function(){v.loading|=1}),E.addEventListener("error",function(){v.loading|=2}),v.loading|=4,As(h,t,a)}h={type:"stylesheet",instance:h,count:1,state:v},o.set(u,h)}}}function F0(e,t){mn.X(e,t);var n=ea;if(n&&e){var a=Ei(n).hoistableScripts,o=na(e),u=a.get(o);u||(u=n.querySelector(ar(o)),u||(e=w({src:e,async:!0},t),(t=qt.get(o))&&cu(e,t),u=n.createElement("script"),We(u),rt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},a.set(o,u))}}function W0(e,t){mn.M(e,t);var n=ea;if(n&&e){var a=Ei(n).hoistableScripts,o=na(e),u=a.get(o);u||(u=n.querySelector(ar(o)),u||(e=w({src:e,async:!0,type:"module"},t),(t=qt.get(o))&&cu(e,t),u=n.createElement("script"),We(u),rt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},a.set(o,u))}}function Hh(e,t,n,a){var o=(o=Z.current)?Ts(o):null;if(!o)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ta(n.href),n=Ei(o).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ta(n.href);var u=Ei(o).hoistableStyles,h=u.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=o.querySelector(ir(e)))&&!u._p&&(h.instance=u,h.state.loading=5),qt.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},qt.set(e,n),u||ey(o,e,n,h.state))),t&&a===null)throw Error(s(528,""));return h}if(t&&a!==null)throw Error(s(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=na(n),n=Ei(o).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ta(e){return'href="'+Ct(e)+'"'}function ir(e){return'link[rel="stylesheet"]['+e+"]"}function $h(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function ey(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),rt(t,"link",n),We(t),e.head.appendChild(t))}function na(e){return'[src="'+Ct(e)+'"]'}function ar(e){return"script[async]"+e}function Gh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Ct(n.href)+'"]');if(a)return t.instance=a,We(a),a;var o=w({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),We(a),rt(a,"style",o),As(a,n.precedence,e),t.instance=a;case"stylesheet":o=ta(n.href);var u=e.querySelector(ir(o));if(u)return t.state.loading|=4,t.instance=u,We(u),u;a=$h(n),(o=qt.get(o))&&uu(a,o),u=(e.ownerDocument||e).createElement("link"),We(u);var h=u;return h._p=new Promise(function(v,E){h.onload=v,h.onerror=E}),rt(u,"link",a),t.state.loading|=4,As(u,n.precedence,e),t.instance=u;case"script":return u=na(n.src),(o=e.querySelector(ar(u)))?(t.instance=o,We(o),o):(a=n,(o=qt.get(u))&&(a=w({},n),cu(a,o)),e=e.ownerDocument||e,o=e.createElement("script"),We(o),rt(o,"link",a),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,As(a,n.precedence,e));return t.instance}function As(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=a.length?a[a.length-1]:null,u=o,h=0;h<a.length;h++){var v=a[h];if(v.dataset.precedence===t)u=v;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function uu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function cu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Os=null;function Vh(e,t,n){if(Os===null){var a=new Map,o=Os=new Map;o.set(n,a)}else o=Os,a=o.get(n),a||(a=new Map,o.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var u=n[o];if(!(u[_a]||u[tt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var h=u.getAttribute(t)||"";h=e+h;var v=a.get(h);v?v.push(u):a.set(h,[u])}}return a}function Yh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function ty(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Kh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ny(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=ta(a.href),u=t.querySelector(ir(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Rs.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=u,We(u);return}u=t.ownerDocument||t,a=$h(a),(o=qt.get(o))&&uu(a,o),u=u.createElement("link"),We(u);var h=u;h._p=new Promise(function(v,E){h.onload=v,h.onerror=E}),rt(u,"link",a),n.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Rs.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var du=0;function iy(e,t){return e.stylesheets&&e.count===0&&Cs(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&Cs(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&du===0&&(du=62500*B0());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Cs(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>du?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(o)}}:null}function Rs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cs(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var js=null;function Cs(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,js=new Map,t.forEach(ay,e),js=null,Rs.call(e))}function ay(e,t){if(!(t.state.loading&4)){var n=js.get(e);if(n)var a=n.get(null);else{n=new Map,js.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var h=o[u];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),a=h)}a&&n.set(null,a)}o=t.instance,h=o.getAttribute("data-precedence"),u=n.get(h)||a,u===a&&n.set(null,o),n.set(h,o),this.count++,a=Rs.bind(this),o.addEventListener("load",a),o.addEventListener("error",a),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var rr={$$typeof:K,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function ry(e,t,n,a,o,u,h,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rl(0),this.hiddenUpdates=rl(null),this.identifierPrefix=a,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Qh(e,t,n,a,o,u,h,v,E,z,$,V){return e=new ry(e,t,n,h,E,z,$,V,v),t=1,u===!0&&(t|=24),u=_t(3,null,null,t),e.current=u,u.stateNode=e,t=Vl(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:a,isDehydrated:n,cache:t},Xl(u),e}function Xh(e){return e?(e=zi,e):zi}function Jh(e,t,n,a,o,u){o=Xh(o),a.context===null?a.context=o:a.pendingContext=o,a=Tn(t),a.payload={element:n},u=u===void 0?null:u,u!==null&&(a.callback=u),n=An(e,a,t),n!==null&&(mt(n,e,t),Ba(n,e,t))}function Ih(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fu(e,t){Ih(e,t),(e=e.alternate)&&Ih(e,t)}function Zh(e){if(e.tag===13||e.tag===31){var t=Fn(e,67108864);t!==null&&mt(t,e,67108864),fu(e,67108864)}}function Ph(e){if(e.tag===13||e.tag===31){var t=Tt();t=sl(t);var n=Fn(e,t);n!==null&&mt(n,e,t),fu(e,t)}}var ks=!0;function sy(e,t,n,a){var o=M.T;M.T=null;var u=I.p;try{I.p=2,hu(e,t,n,a)}finally{I.p=u,M.T=o}}function ly(e,t,n,a){var o=M.T;M.T=null;var u=I.p;try{I.p=8,hu(e,t,n,a)}finally{I.p=u,M.T=o}}function hu(e,t,n,a){if(ks){var o=gu(a);if(o===null)Wo(e,t,a,Us,n),Wh(e,a);else if(uy(o,e,t,n,a))a.stopPropagation();else if(Wh(e,a),t&4&&-1<oy.indexOf(e)){for(;o!==null;){var u=Si(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=Xn(u.pendingLanes);if(h!==0){var v=u;for(v.pendingLanes|=2,v.entangledLanes|=2;h;){var E=1<<31-vt(h);v.entanglements[1]|=E,h&=~E}Jt(u),(je&6)===0&&(gs=pt()+500,Wa(0))}}break;case 31:case 13:v=Fn(u,2),v!==null&&mt(v,u,2),ps(),fu(u,2)}if(u=gu(a),u===null&&Wo(e,t,a,Us,n),u===o)break;o=u}o!==null&&a.stopPropagation()}else Wo(e,t,a,null,n)}}function gu(e){return e=ml(e),mu(e)}var Us=null;function mu(e){if(Us=null,e=wi(e),e!==null){var t=d(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=f(t),e!==null)return e;e=null}else if(n===31){if(e=g(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Us=e,null}function Fh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xm()){case ac:return 2;case rc:return 8;case wr:case Jm:return 32;case sc:return 268435456;default:return 32}default:return 32}}var pu=!1,Bn=null,qn=null,Ln=null,sr=new Map,lr=new Map,Hn=[],oy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wh(e,t){switch(e){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":sr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lr.delete(t.pointerId)}}function or(e,t,n,a,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:u,targetContainers:[o]},t!==null&&(t=Si(t),t!==null&&Zh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function uy(e,t,n,a,o){switch(t){case"focusin":return Bn=or(Bn,e,t,n,a,o),!0;case"dragenter":return qn=or(qn,e,t,n,a,o),!0;case"mouseover":return Ln=or(Ln,e,t,n,a,o),!0;case"pointerover":var u=o.pointerId;return sr.set(u,or(sr.get(u)||null,e,t,n,a,o)),!0;case"gotpointercapture":return u=o.pointerId,lr.set(u,or(lr.get(u)||null,e,t,n,a,o)),!0}return!1}function eg(e){var t=wi(e.target);if(t!==null){var n=d(t);if(n!==null){if(t=n.tag,t===13){if(t=f(n),t!==null){e.blockedOn=t,fc(e.priority,function(){Ph(n)});return}}else if(t===31){if(t=g(n),t!==null){e.blockedOn=t,fc(e.priority,function(){Ph(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gu(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);gl=a,n.target.dispatchEvent(a),gl=null}else return t=Si(n),t!==null&&Zh(t),e.blockedOn=n,!1;t.shift()}return!0}function tg(e,t,n){zs(e)&&n.delete(t)}function cy(){pu=!1,Bn!==null&&zs(Bn)&&(Bn=null),qn!==null&&zs(qn)&&(qn=null),Ln!==null&&zs(Ln)&&(Ln=null),sr.forEach(tg),lr.forEach(tg)}function Ds(e,t){e.blockedOn===t&&(e.blockedOn=null,pu||(pu=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,cy)))}var Ns=null;function ng(e){Ns!==e&&(Ns=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Ns===e&&(Ns=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],o=e[t+2];if(typeof a!="function"){if(mu(a||n)===null)continue;break}var u=Si(n);u!==null&&(e.splice(t,3),t-=3,go(u,{pending:!0,data:o,method:n.method,action:a},a,o))}}))}function ia(e){function t(E){return Ds(E,e)}Bn!==null&&Ds(Bn,e),qn!==null&&Ds(qn,e),Ln!==null&&Ds(Ln,e),sr.forEach(t),lr.forEach(t);for(var n=0;n<Hn.length;n++){var a=Hn[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)eg(n),n.blockedOn===null&&Hn.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var o=n[a],u=n[a+1],h=o[ut]||null;if(typeof u=="function")h||ng(n);else if(h){var v=null;if(u&&u.hasAttribute("formAction")){if(o=u,h=u[ut]||null)v=h.formAction;else if(mu(o)!==null)continue}else v=h.action;typeof v=="function"?n[a+1]=v:(n.splice(a,3),a-=3),ng(n)}}}function ig(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(h){return o=h})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function yu(e){this._internalRoot=e}Ms.prototype.render=yu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current,a=Tt();Jh(n,a,e,t,null,null)},Ms.prototype.unmount=yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jh(e.current,2,null,e,null,null),ps(),t[_i]=null}};function Ms(e){this._internalRoot=e}Ms.prototype.unstable_scheduleHydration=function(e){if(e){var t=dc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Hn.length&&t!==0&&t<Hn[n].priority;n++);Hn.splice(n,0,e),n===0&&eg(e)}};var ag=i.version;if(ag!=="19.2.0")throw Error(s(527,ag,"19.2.0"));I.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var dy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bs.isDisabled&&Bs.supportsFiber)try{ya=Bs.inject(dy),yt=Bs}catch{}}return cr.createRoot=function(e,t){if(!c(e))throw Error(s(299));var n=!1,a="",o=df,u=ff,h=hf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Qh(e,1,!1,null,null,n,a,null,o,u,h,ig),e[_i]=t.current,Fo(e),new yu(t)},cr.hydrateRoot=function(e,t,n){if(!c(e))throw Error(s(299));var a=!1,o="",u=df,h=ff,v=hf,E=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.formState!==void 0&&(E=n.formState)),t=Qh(e,1,!0,t,n??null,a,o,E,u,h,v,ig),t.context=Xh(null),n=t.current,a=Tt(),a=sl(a),o=Tn(a),o.callback=null,An(n,o,a),n=a,t.current.lanes=n,ba(t,n),Jt(t),e[_i]=t.current,Fo(e),new Ms(t)},cr.version="19.2.0",cr}var gg;function Sy(){if(gg)return _u.exports;gg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),_u.exports=wy(),_u.exports}var Ey=Sy();const xy=Qu(Ey);var zu=function(l,i){return zu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(r[c]=s[c])},zu(l,i)};function Xg(l,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");zu(l,i);function r(){this.constructor=l}l.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}var Xs=function(){return Xs=Object.assign||function(i){for(var r,s=1,c=arguments.length;s<c;s++){r=arguments[s];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(i[d]=r[d])}return i},Xs.apply(this,arguments)};function ga(l,i){var r={};for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&i.indexOf(s)<0&&(r[s]=l[s]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(l);c<s.length;c++)i.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(l,s[c])&&(r[s[c]]=l[s[c]]);return r}function Jg(l,i,r,s){var c=arguments.length,d=c<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,i,r,s);else for(var g=l.length-1;g>=0;g--)(f=l[g])&&(d=(c<3?f(d):c>3?f(i,r,d):f(i,r))||d);return c>3&&d&&Object.defineProperty(i,r,d),d}function Ig(l,i){return function(r,s){i(r,s,l)}}function Zg(l,i,r,s,c,d){function f(Y){if(Y!==void 0&&typeof Y!="function")throw new TypeError("Function expected");return Y}for(var g=s.kind,p=g==="getter"?"get":g==="setter"?"set":"value",m=!i&&l?s.static?l:l.prototype:null,b=i||(m?Object.getOwnPropertyDescriptor(m,s.name):{}),w,R=!1,A=r.length-1;A>=0;A--){var x={};for(var k in s)x[k]=k==="access"?{}:s[k];for(var k in s.access)x.access[k]=s.access[k];x.addInitializer=function(Y){if(R)throw new TypeError("Cannot add initializers after decoration has completed");d.push(f(Y||null))};var L=(0,r[A])(g==="accessor"?{get:b.get,set:b.set}:b[p],x);if(g==="accessor"){if(L===void 0)continue;if(L===null||typeof L!="object")throw new TypeError("Object expected");(w=f(L.get))&&(b.get=w),(w=f(L.set))&&(b.set=w),(w=f(L.init))&&c.unshift(w)}else(w=f(L))&&(g==="field"?c.unshift(w):b[p]=w)}m&&Object.defineProperty(m,s.name,b),R=!0}function Pg(l,i,r){for(var s=arguments.length>2,c=0;c<i.length;c++)r=s?i[c].call(l,r):i[c].call(l);return s?r:void 0}function Fg(l){return typeof l=="symbol"?l:"".concat(l)}function Wg(l,i,r){return typeof i=="symbol"&&(i=i.description?"[".concat(i.description,"]"):""),Object.defineProperty(l,"name",{configurable:!0,value:r?"".concat(r," ",i):i})}function em(l,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,i)}function ne(l,i,r,s){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(b){try{m(s.next(b))}catch(w){f(w)}}function p(b){try{m(s.throw(b))}catch(w){f(w)}}function m(b){b.done?d(b.value):c(b.value).then(g,p)}m((s=s.apply(l,i||[])).next())})}function tm(l,i){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,c,d,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=g(0),f.throw=g(1),f.return=g(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(b){return p([m,b])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(r=0)),r;)try{if(s=1,c&&(d=m[0]&2?c.return:m[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,m[1])).done)return d;switch(c=0,d&&(m=[m[0]&2,d.value]),m[0]){case 0:case 1:d=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,c=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!d||m[1]>d[0]&&m[1]<d[3])){r.label=m[1];break}if(m[0]===6&&r.label<d[1]){r.label=d[1],d=m;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(m);break}d[2]&&r.ops.pop(),r.trys.pop();continue}m=i.call(l,r)}catch(b){m=[6,b],c=0}finally{s=d=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Fs=Object.create?(function(l,i,r,s){s===void 0&&(s=r);var c=Object.getOwnPropertyDescriptor(i,r);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[r]}}),Object.defineProperty(l,s,c)}):(function(l,i,r,s){s===void 0&&(s=r),l[s]=i[r]});function nm(l,i){for(var r in l)r!=="default"&&!Object.prototype.hasOwnProperty.call(i,r)&&Fs(i,l,r)}function Js(l){var i=typeof Symbol=="function"&&Symbol.iterator,r=i&&l[i],s=0;if(r)return r.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&s>=l.length&&(l=void 0),{value:l&&l[s++],done:!l}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ju(l,i){var r=typeof Symbol=="function"&&l[Symbol.iterator];if(!r)return l;var s=r.call(l),c,d=[],f;try{for(;(i===void 0||i-- >0)&&!(c=s.next()).done;)d.push(c.value)}catch(g){f={error:g}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(f)throw f.error}}return d}function im(){for(var l=[],i=0;i<arguments.length;i++)l=l.concat(Ju(arguments[i]));return l}function am(){for(var l=0,i=0,r=arguments.length;i<r;i++)l+=arguments[i].length;for(var s=Array(l),c=0,i=0;i<r;i++)for(var d=arguments[i],f=0,g=d.length;f<g;f++,c++)s[c]=d[f];return s}function rm(l,i,r){if(r||arguments.length===2)for(var s=0,c=i.length,d;s<c;s++)(d||!(s in i))&&(d||(d=Array.prototype.slice.call(i,0,s)),d[s]=i[s]);return l.concat(d||Array.prototype.slice.call(i))}function fa(l){return this instanceof fa?(this.v=l,this):new fa(l)}function sm(l,i,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(l,i||[]),c,d=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",f),c[Symbol.asyncIterator]=function(){return this},c;function f(A){return function(x){return Promise.resolve(x).then(A,w)}}function g(A,x){s[A]&&(c[A]=function(k){return new Promise(function(L,Y){d.push([A,k,L,Y])>1||p(A,k)})},x&&(c[A]=x(c[A])))}function p(A,x){try{m(s[A](x))}catch(k){R(d[0][3],k)}}function m(A){A.value instanceof fa?Promise.resolve(A.value.v).then(b,w):R(d[0][2],A)}function b(A){p("next",A)}function w(A){p("throw",A)}function R(A,x){A(x),d.shift(),d.length&&p(d[0][0],d[0][1])}}function lm(l){var i,r;return i={},s("next"),s("throw",function(c){throw c}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(c,d){i[c]=l[c]?function(f){return(r=!r)?{value:fa(l[c](f)),done:!1}:d?d(f):f}:d}}function om(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=l[Symbol.asyncIterator],r;return i?i.call(l):(l=typeof Js=="function"?Js(l):l[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(d){r[d]=l[d]&&function(f){return new Promise(function(g,p){f=l[d](f),c(g,p,f.done,f.value)})}}function c(d,f,g,p){Promise.resolve(p).then(function(m){d({value:m,done:g})},f)}}function um(l,i){return Object.defineProperty?Object.defineProperty(l,"raw",{value:i}):l.raw=i,l}var Ty=Object.create?(function(l,i){Object.defineProperty(l,"default",{enumerable:!0,value:i})}):function(l,i){l.default=i},Du=function(l){return Du=Object.getOwnPropertyNames||function(i){var r=[];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[r.length]=s);return r},Du(l)};function cm(l){if(l&&l.__esModule)return l;var i={};if(l!=null)for(var r=Du(l),s=0;s<r.length;s++)r[s]!=="default"&&Fs(i,l,r[s]);return Ty(i,l),i}function dm(l){return l&&l.__esModule?l:{default:l}}function fm(l,i,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?l!==i||!s:!i.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(l):s?s.value:i.get(l)}function hm(l,i,r,s,c){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?l!==i||!c:!i.has(l))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?c.call(l,r):c?c.value=r:i.set(l,r),r}function gm(l,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof l=="function"?i===l:l.has(i)}function mm(l,i,r){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var s,c;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=i[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=i[Symbol.dispose],r&&(c=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");c&&(s=function(){try{c.call(this)}catch(d){return Promise.reject(d)}}),l.stack.push({value:i,dispose:s,async:r})}else r&&l.stack.push({async:!0});return i}var Ay=typeof SuppressedError=="function"?SuppressedError:function(l,i,r){var s=new Error(r);return s.name="SuppressedError",s.error=l,s.suppressed=i,s};function pm(l){function i(d){l.error=l.hasError?new Ay(d,l.error,"An error was suppressed during disposal."):d,l.hasError=!0}var r,s=0;function c(){for(;r=l.stack.pop();)try{if(!r.async&&s===1)return s=0,l.stack.push(r),Promise.resolve().then(c);if(r.dispose){var d=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(d).then(c,function(f){return i(f),c()})}else s|=1}catch(f){i(f)}if(s===1)return l.hasError?Promise.reject(l.error):Promise.resolve();if(l.hasError)throw l.error}return c()}function ym(l,i){return typeof l=="string"&&/^\.\.?\//.test(l)?l.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,c,d,f){return s?i?".jsx":".js":c&&(!d||!f)?r:c+d+"."+f.toLowerCase()+"js"}):l}const Oy={__extends:Xg,__assign:Xs,__rest:ga,__decorate:Jg,__param:Ig,__esDecorate:Zg,__runInitializers:Pg,__propKey:Fg,__setFunctionName:Wg,__metadata:em,__awaiter:ne,__generator:tm,__createBinding:Fs,__exportStar:nm,__values:Js,__read:Ju,__spread:im,__spreadArrays:am,__spreadArray:rm,__await:fa,__asyncGenerator:sm,__asyncDelegator:lm,__asyncValues:om,__makeTemplateObject:um,__importStar:cm,__importDefault:dm,__classPrivateFieldGet:fm,__classPrivateFieldSet:hm,__classPrivateFieldIn:gm,__addDisposableResource:mm,__disposeResources:pm,__rewriteRelativeImportExtension:ym},Ry=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:mm,get __assign(){return Xs},__asyncDelegator:lm,__asyncGenerator:sm,__asyncValues:om,__await:fa,__awaiter:ne,__classPrivateFieldGet:fm,__classPrivateFieldIn:gm,__classPrivateFieldSet:hm,__createBinding:Fs,__decorate:Jg,__disposeResources:pm,__esDecorate:Zg,__exportStar:nm,__extends:Xg,__generator:tm,__importDefault:dm,__importStar:cm,__makeTemplateObject:um,__metadata:em,__param:Ig,__propKey:Fg,__read:Ju,__rest:ga,__rewriteRelativeImportExtension:ym,__runInitializers:Pg,__setFunctionName:Wg,__spread:im,__spreadArray:rm,__spreadArrays:am,__values:Js,default:Oy},Symbol.toStringTag,{value:"Module"})),jy="modulepreload",Cy=function(l){return"/TTLS/"+l},mg={},ma=function(i,r,s){let c=Promise.resolve();if(r&&r.length>0){let m=function(b){return Promise.all(b.map(w=>Promise.resolve(w).then(R=>({status:"fulfilled",value:R}),R=>({status:"rejected",reason:R}))))};var f=m;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),p=g?.nonce||g?.getAttribute("nonce");c=m(r.map(b=>{if(b=Cy(b),b in mg)return;mg[b]=!0;const w=b.endsWith(".css"),R=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${R}`))return;const A=document.createElement("link");if(A.rel=w?"stylesheet":jy,w||(A.as="script"),A.crossOrigin="",A.href=b,p&&A.setAttribute("nonce",p),document.head.appendChild(A),w)return new Promise((x,k)=>{A.addEventListener("load",x),A.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${b}`)))})}))}function d(g){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=g,window.dispatchEvent(p),!p.defaultPrevented)throw g}return c.then(g=>{for(const p of g||[])p.status==="rejected"&&d(p.reason);return i().catch(d)})},ky=l=>{let i;return l?i=l:typeof fetch>"u"?i=(...r)=>ma(async()=>{const{default:s}=await Promise.resolve().then(()=>yi);return{default:s}},void 0).then(({default:s})=>s(...r)):i=fetch,(...r)=>i(...r)};class Iu extends Error{constructor(i,r="FunctionsError",s){super(i),this.name=r,this.context=s}}class pg extends Iu{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}}class yg extends Iu{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}}class vg extends Iu{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}}var Nu;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(Nu||(Nu={}));class Uy{constructor(i,{headers:r={},customFetch:s,region:c=Nu.Any}={}){this.url=i,this.headers=r,this.region=c,this.fetch=ky(s)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i){return ne(this,arguments,void 0,function*(r,s={}){var c;try{const{headers:d,method:f,body:g,signal:p}=s;let m={},{region:b}=s;b||(b=this.region);const w=new URL(`${this.url}/${r}`);b&&b!=="any"&&(m["x-region"]=b,w.searchParams.set("forceFunctionRegion",b));let R;g&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",R=g):typeof g=="string"?(m["Content-Type"]="text/plain",R=g):typeof FormData<"u"&&g instanceof FormData?R=g:(m["Content-Type"]="application/json",R=JSON.stringify(g)):R=g;const A=yield this.fetch(w.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),d),body:R,signal:p}).catch(Y=>{throw Y.name==="AbortError"?Y:new pg(Y)}),x=A.headers.get("x-relay-error");if(x&&x==="true")throw new yg(A);if(!A.ok)throw new vg(A);let k=((c=A.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),L;return k==="application/json"?L=yield A.json():k==="application/octet-stream"||k==="application/pdf"?L=yield A.blob():k==="text/event-stream"?L=A:k==="multipart/form-data"?L=yield A.formData():L=yield A.text(),{data:L,error:null,response:A}}catch(d){return d instanceof Error&&d.name==="AbortError"?{data:null,error:new pg(d)}:{data:null,error:d,response:d instanceof vg||d instanceof yg?d.context:void 0}}})}}var lt={};const pa=Qg(Ry);var qs={},Ls={},Hs={},$s={},Gs={},zy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ha=zy();const Dy=ha.fetch,vm=ha.fetch.bind(ha),bm=ha.Headers,Ny=ha.Request,My=ha.Response,yi=Object.freeze(Object.defineProperty({__proto__:null,Headers:bm,Request:Ny,Response:My,default:vm,fetch:Dy},Symbol.toStringTag,{value:"Module"})),By=Qg(yi);var Vs={},bg;function _m(){if(bg)return Vs;bg=1,Object.defineProperty(Vs,"__esModule",{value:!0});class l extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Vs.default=l,Vs}var _g;function wm(){if(_g)return Gs;_g=1,Object.defineProperty(Gs,"__esModule",{value:!0});const l=pa,i=l.__importDefault(By),r=l.__importDefault(_m());class s{constructor(d){var f,g;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(f=d.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=d.signal,this.isMaybeSingle=(g=d.isMaybeSingle)!==null&&g!==void 0?g:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,f){return this.headers=new Headers(this.headers),this.headers.set(d,f),this}then(d,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const g=this.fetch;let p=g(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var b,w,R,A;let x=null,k=null,L=null,Y=m.status,Q=m.statusText;if(m.ok){if(this.method!=="HEAD"){const W=await m.text();W===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((b=this.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?k=W:k=JSON.parse(W))}const P=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),ie=(R=m.headers.get("content-range"))===null||R===void 0?void 0:R.split("/");P&&ie&&ie.length>1&&(L=parseInt(ie[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(x={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,L=null,Y=406,Q="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const P=await m.text();try{x=JSON.parse(P),Array.isArray(x)&&m.status===404&&(k=[],x=null,Y=200,Q="OK")}catch{m.status===404&&P===""?(Y=204,Q="No Content"):x={message:P}}if(x&&this.isMaybeSingle&&(!((A=x?.details)===null||A===void 0)&&A.includes("0 rows"))&&(x=null,Y=200,Q="OK"),x&&this.shouldThrowOnError)throw new r.default(x)}return{error:x,data:k,count:L,status:Y,statusText:Q}});return this.shouldThrowOnError||(p=p.catch(m=>{var b,w,R;return{error:{message:`${(b=m?.name)!==null&&b!==void 0?b:"FetchError"}: ${m?.message}`,details:`${(w=m?.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(R=m?.code)!==null&&R!==void 0?R:""}`},data:null,count:null,status:0,statusText:""}})),p.then(d,f)}returns(){return this}overrideTypes(){return this}}return Gs.default=s,Gs}var wg;function Sm(){if(wg)return $s;wg=1,Object.defineProperty($s,"__esModule",{value:!0});const i=pa.__importDefault(wm());class r extends i.default{select(c){let d=!1;const f=(c??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:d=!0,nullsFirst:f,foreignTable:g,referencedTable:p=g}={}){const m=p?`${p}.order`:"order",b=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${b?`${b},`:""}${c}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:d,referencedTable:f=d}={}){const g=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(g,`${c}`),this}range(c,d,{foreignTable:f,referencedTable:g=f}={}){const p=typeof g>"u"?"offset":`${g}.offset`,m=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(p,`${c}`),this.url.searchParams.set(m,`${d-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:d=!1,settings:f=!1,buffers:g=!1,wal:p=!1,format:m="text"}={}){var b;const w=[c?"analyze":null,d?"verbose":null,f?"settings":null,g?"buffers":null,p?"wal":null].filter(Boolean).join("|"),R=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${R}"; options=${w};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return $s.default=r,$s}var Sg;function Zu(){if(Sg)return Hs;Sg=1,Object.defineProperty(Hs,"__esModule",{value:!0});const i=pa.__importDefault(Sm()),r=new RegExp("[,()]");class s extends i.default{eq(d,f){return this.url.searchParams.append(d,`eq.${f}`),this}neq(d,f){return this.url.searchParams.append(d,`neq.${f}`),this}gt(d,f){return this.url.searchParams.append(d,`gt.${f}`),this}gte(d,f){return this.url.searchParams.append(d,`gte.${f}`),this}lt(d,f){return this.url.searchParams.append(d,`lt.${f}`),this}lte(d,f){return this.url.searchParams.append(d,`lte.${f}`),this}like(d,f){return this.url.searchParams.append(d,`like.${f}`),this}likeAllOf(d,f){return this.url.searchParams.append(d,`like(all).{${f.join(",")}}`),this}likeAnyOf(d,f){return this.url.searchParams.append(d,`like(any).{${f.join(",")}}`),this}ilike(d,f){return this.url.searchParams.append(d,`ilike.${f}`),this}ilikeAllOf(d,f){return this.url.searchParams.append(d,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(d,f){return this.url.searchParams.append(d,`ilike(any).{${f.join(",")}}`),this}is(d,f){return this.url.searchParams.append(d,`is.${f}`),this}in(d,f){const g=Array.from(new Set(f)).map(p=>typeof p=="string"&&r.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(d,`in.(${g})`),this}contains(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cs.{${f.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(f)}`),this}containedBy(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cd.{${f.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(f)}`),this}rangeGt(d,f){return this.url.searchParams.append(d,`sr.${f}`),this}rangeGte(d,f){return this.url.searchParams.append(d,`nxl.${f}`),this}rangeLt(d,f){return this.url.searchParams.append(d,`sl.${f}`),this}rangeLte(d,f){return this.url.searchParams.append(d,`nxr.${f}`),this}rangeAdjacent(d,f){return this.url.searchParams.append(d,`adj.${f}`),this}overlaps(d,f){return typeof f=="string"?this.url.searchParams.append(d,`ov.${f}`):this.url.searchParams.append(d,`ov.{${f.join(",")}}`),this}textSearch(d,f,{config:g,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const b=g===void 0?"":`(${g})`;return this.url.searchParams.append(d,`${m}fts${b}.${f}`),this}match(d){return Object.entries(d).forEach(([f,g])=>{this.url.searchParams.append(f,`eq.${g}`)}),this}not(d,f,g){return this.url.searchParams.append(d,`not.${f}.${g}`),this}or(d,{foreignTable:f,referencedTable:g=f}={}){const p=g?`${g}.or`:"or";return this.url.searchParams.append(p,`(${d})`),this}filter(d,f,g){return this.url.searchParams.append(d,`${f}.${g}`),this}}return Hs.default=s,Hs}var Eg;function Em(){if(Eg)return Ls;Eg=1,Object.defineProperty(Ls,"__esModule",{value:!0});const i=pa.__importDefault(Zu());class r{constructor(c,{headers:d={},schema:f,fetch:g}){this.url=c,this.headers=new Headers(d),this.schema=f,this.fetch=g}select(c,d){const{head:f=!1,count:g}=d??{},p=f?"HEAD":"GET";let m=!1;const b=(c??"*").split("").map(w=>/\s/.test(w)&&!m?"":(w==='"'&&(m=!m),w)).join("");return this.url.searchParams.set("select",b),g&&this.headers.append("Prefer",`count=${g}`),new i.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:d,defaultToNull:f=!0}={}){var g;const p="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const m=c.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(m.length>0){const b=[...new Set(m)].map(w=>`"${w}"`);this.url.searchParams.set("columns",b.join(","))}}return new i.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(c,{onConflict:d,ignoreDuplicates:f=!1,count:g,defaultToNull:p=!0}={}){var m;const b="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),g&&this.headers.append("Prefer",`count=${g}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const w=c.reduce((R,A)=>R.concat(Object.keys(A)),[]);if(w.length>0){const R=[...new Set(w)].map(A=>`"${A}"`);this.url.searchParams.set("columns",R.join(","))}}return new i.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(c,{count:d}={}){var f;const g="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new i.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:c}={}){var d;const f="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new i.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Ls.default=r,Ls}var xg;function qy(){if(xg)return qs;xg=1,Object.defineProperty(qs,"__esModule",{value:!0});const l=pa,i=l.__importDefault(Em()),r=l.__importDefault(Zu());class s{constructor(d,{headers:f={},schema:g,fetch:p}={}){this.url=d,this.headers=new Headers(f),this.schemaName=g,this.fetch=p}from(d){const f=new URL(`${this.url}/${d}`);return new i.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new s(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:g=!1,get:p=!1,count:m}={}){var b;let w;const R=new URL(`${this.url}/rpc/${d}`);let A;g||p?(w=g?"HEAD":"GET",Object.entries(f).filter(([k,L])=>L!==void 0).map(([k,L])=>[k,Array.isArray(L)?`{${L.join(",")}}`:`${L}`]).forEach(([k,L])=>{R.searchParams.append(k,L)})):(w="POST",A=f);const x=new Headers(this.headers);return m&&x.set("Prefer",`count=${m}`),new r.default({method:w,url:R,headers:x,schema:this.schemaName,body:A,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return qs.default=s,qs}var Tg;function Ly(){if(Tg)return lt;Tg=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.PostgrestError=lt.PostgrestBuilder=lt.PostgrestTransformBuilder=lt.PostgrestFilterBuilder=lt.PostgrestQueryBuilder=lt.PostgrestClient=void 0;const l=pa,i=l.__importDefault(qy());lt.PostgrestClient=i.default;const r=l.__importDefault(Em());lt.PostgrestQueryBuilder=r.default;const s=l.__importDefault(Zu());lt.PostgrestFilterBuilder=s.default;const c=l.__importDefault(Sm());lt.PostgrestTransformBuilder=c.default;const d=l.__importDefault(wm());lt.PostgrestBuilder=d.default;const f=l.__importDefault(_m());return lt.PostgrestError=f.default,lt.default={PostgrestClient:i.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:d.default,PostgrestError:f.default},lt}var xm=Ly();const Tm=Qu(xm),Hy=hy({__proto__:null,default:Tm},[xm]),{PostgrestClient:$y,PostgrestQueryBuilder:x_,PostgrestFilterBuilder:T_,PostgrestTransformBuilder:A_,PostgrestBuilder:O_,PostgrestError:R_}=Tm||Hy;class Gy{static detectEnvironment(){var i;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((i=navigator.userAgent)===null||i===void 0)&&i.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,c=parseInt(s.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const i=this.detectEnvironment();if(i.constructor)return i.constructor;let r=i.error||"WebSocket not supported in this environment.";throw i.workaround&&(r+=`

Suggested solution: ${i.workaround}`),new Error(r)}static createWebSocket(i,r){const s=this.getWebSocketConstructor();return new s(i,r)}static isWebSocketSupported(){try{const i=this.detectEnvironment();return i.type==="native"||i.type==="ws"}catch{return!1}}}const Vy="2.77.0",Yy=`realtime-js/${Vy}`,Ky="1.0.0",Mu=1e4,Qy=1e3,Xy=100;var hr;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(hr||(hr={}));var Fe;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(Fe||(Fe={}));var Yt;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(Yt||(Yt={}));var Bu;(function(l){l.websocket="websocket"})(Bu||(Bu={}));var gi;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(gi||(gi={}));class Jy{constructor(){this.HEADER_LENGTH=1}decode(i,r){return i.constructor===ArrayBuffer?r(this._binaryDecode(i)):r(typeof i=="string"?JSON.parse(i):{})}_binaryDecode(i){const r=new DataView(i),s=new TextDecoder;return this._decodeBroadcast(i,r,s)}_decodeBroadcast(i,r,s){const c=r.getUint8(1),d=r.getUint8(2);let f=this.HEADER_LENGTH+2;const g=s.decode(i.slice(f,f+c));f=f+c;const p=s.decode(i.slice(f,f+d));f=f+d;const m=JSON.parse(s.decode(i.slice(f,i.byteLength)));return{ref:null,topic:g,event:p,payload:m}}}class Am{constructor(i,r){this.callback=i,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Be;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Be||(Be={}));const Ag=(l,i,r={})=>{var s;const c=(s=r.skipTypes)!==null&&s!==void 0?s:[];return i?Object.keys(i).reduce((d,f)=>(d[f]=Iy(f,l,i,c),d),{}):{}},Iy=(l,i,r,s)=>{const c=i.find(g=>g.name===l),d=c?.type,f=r[l];return d&&!s.includes(d)?Om(d,f):qu(f)},Om=(l,i)=>{if(l.charAt(0)==="_"){const r=l.slice(1,l.length);return Wy(i,r)}switch(l){case Be.bool:return Zy(i);case Be.float4:case Be.float8:case Be.int2:case Be.int4:case Be.int8:case Be.numeric:case Be.oid:return Py(i);case Be.json:case Be.jsonb:return Fy(i);case Be.timestamp:return ev(i);case Be.abstime:case Be.date:case Be.daterange:case Be.int4range:case Be.int8range:case Be.money:case Be.reltime:case Be.text:case Be.time:case Be.timestamptz:case Be.timetz:case Be.tsrange:case Be.tstzrange:return qu(i);default:return qu(i)}},qu=l=>l,Zy=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},Py=l=>{if(typeof l=="string"){const i=parseFloat(l);if(!Number.isNaN(i))return i}return l},Fy=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(i){return console.log(`JSON parse error: ${i}`),l}return l},Wy=(l,i)=>{if(typeof l!="string")return l;const r=l.length-1,s=l[r];if(l[0]==="{"&&s==="}"){let d;const f=l.slice(1,r);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(g=>Om(i,g))}return l},ev=l=>typeof l=="string"?l.replace(" ","T"):l,Rm=l=>{const i=new URL(l);return i.protocol=i.protocol.replace(/^ws/i,"http"),i.pathname=i.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),i.pathname===""||i.pathname==="/"?i.pathname="/api/broadcast":i.pathname=i.pathname+"/api/broadcast",i.href};class xu{constructor(i,r,s={},c=Mu){this.channel=i,this.event=r,this.payload=s,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,r){var s;return this._hasReceived(i)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:i,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const i=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:r}){this.recHooks.filter(s=>s.status===i).forEach(s=>s.callback(r))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}}var Og;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(Og||(Og={}));class gr{constructor(i,r){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},c=>{const{onJoin:d,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gr.syncState(this.state,c,d,f),this.pendingDiffs.forEach(p=>{this.state=gr.syncDiff(this.state,p,d,f)}),this.pendingDiffs=[],g()}),this.channel._on(s.diff,{},c=>{const{onJoin:d,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=gr.syncDiff(this.state,c,d,f),g())}),this.onJoin((c,d,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:f})}),this.onLeave((c,d,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,r,s,c){const d=this.cloneDeep(i),f=this.transformState(r),g={},p={};return this.map(d,(m,b)=>{f[m]||(p[m]=b)}),this.map(f,(m,b)=>{const w=d[m];if(w){const R=b.map(L=>L.presence_ref),A=w.map(L=>L.presence_ref),x=b.filter(L=>A.indexOf(L.presence_ref)<0),k=w.filter(L=>R.indexOf(L.presence_ref)<0);x.length>0&&(g[m]=x),k.length>0&&(p[m]=k)}else g[m]=b}),this.syncDiff(d,{joins:g,leaves:p},s,c)}static syncDiff(i,r,s,c){const{joins:d,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),c||(c=()=>{}),this.map(d,(g,p)=>{var m;const b=(m=i[g])!==null&&m!==void 0?m:[];if(i[g]=this.cloneDeep(p),b.length>0){const w=i[g].map(A=>A.presence_ref),R=b.filter(A=>w.indexOf(A.presence_ref)<0);i[g].unshift(...R)}s(g,b,p)}),this.map(f,(g,p)=>{let m=i[g];if(!m)return;const b=p.map(w=>w.presence_ref);m=m.filter(w=>b.indexOf(w.presence_ref)<0),i[g]=m,c(g,m,p),m.length===0&&delete i[g]}),i}static map(i,r){return Object.getOwnPropertyNames(i).map(s=>r(s,i[s]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((r,s)=>{const c=i[s];return"metas"in c?r[s]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):r[s]=c,r},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rg;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(Rg||(Rg={}));var mr;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(mr||(mr={}));var pn;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(pn||(pn={}));class Pu{constructor(i,r={config:{}},s){var c,d;if(this.topic=i,this.params=r,this.socket=s,this.bindings={},this.state=Fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new xu(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new Am(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fe.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new gr(this),this.broadcastEndpointURL=Rm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(i,r=this.timeout){var s,c,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Fe.closed){const{config:{broadcast:f,presence:g,private:p}}=this.params,m=(c=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(A=>A.filter))!==null&&c!==void 0?c:[],b=!!this.bindings[mr.PRESENCE]&&this.bindings[mr.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,w={},R={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(A=>i?.(pn.CHANNEL_ERROR,A)),this._onClose(()=>i?.(pn.CLOSED)),this.updateJoinPayload(Object.assign({config:R},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:A})=>{var x;if(this.socket.setAuth(),A===void 0){i?.(pn.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,L=(x=k?.length)!==null&&x!==void 0?x:0,Y=[];for(let Q=0;Q<L;Q++){const K=k[Q],{filter:{event:P,schema:ie,table:W,filter:N}}=K,J=A&&A[Q];if(J&&J.event===P&&J.schema===ie&&J.table===W&&J.filter===N)Y.push(Object.assign(Object.assign({},K),{id:J.id}));else{this.unsubscribe(),this.state=Fe.errored,i?.(pn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=Y,i&&i(pn.SUBSCRIBED);return}}).receive("error",A=>{this.state=Fe.errored,i?.(pn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{i?.(pn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(i,r={}){return await this.send({type:"presence",event:"track",payload:i},r.timeout||this.timeout)}async untrack(i={}){return await this.send({type:"presence",event:"untrack"},i)}on(i,r,s){return this.state===Fe.joined&&i===mr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(i,r,s)}async httpSend(i,r,s={}){var c;const d=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const f={method:"POST",headers:{Authorization:d,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:r,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(c=s.timeout)!==null&&c!==void 0?c:this.timeout);if(g.status===202)return{success:!0};let p=g.statusText;try{const m=await g.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(i,r={}){var s,c;if(!this._canPush()&&i.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=i,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((c=m.body)===null||c===void 0?void 0:c.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,g,p;const m=this._push(i.type,i,r.timeout||this.timeout);i.type==="broadcast"&&!(!((p=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||p===void 0)&&p.ack)&&d("ok"),m.receive("ok",()=>d("ok")),m.receive("error",()=>d("error")),m.receive("timeout",()=>d("timed out"))})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=Fe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(c=>{s=new xu(this,Yt.leave,{},i),s.receive("ok",()=>{r(),c("ok")}).receive("timeout",()=>{r(),c("timed out")}).receive("error",()=>{c("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(i=>i.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fe.closed,this.bindings={}}async _fetchWithTimeout(i,r,s){const c=new AbortController,d=setTimeout(()=>c.abort(),s),f=await this.socket.fetch(i,Object.assign(Object.assign({},r),{signal:c.signal}));return clearTimeout(d),f}_push(i,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new xu(this,i,r,s);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(i){if(i.startTimeout(),this.pushBuffer.push(i),this.pushBuffer.length>Xy){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(i,r,s){return r}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,r,s){var c,d;const f=i.toLocaleLowerCase(),{close:g,error:p,leave:m,join:b}=Yt;if(s&&[g,p,m,b].indexOf(f)>=0&&s!==this._joinRef())return;let R=this._onMessage(f,r,s);if(r&&!R)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(A=>{var x,k,L;return((x=A.filter)===null||x===void 0?void 0:x.event)==="*"||((L=(k=A.filter)===null||k===void 0?void 0:k.event)===null||L===void 0?void 0:L.toLocaleLowerCase())===f}).map(A=>A.callback(R,s)):(d=this.bindings[f])===null||d===void 0||d.filter(A=>{var x,k,L,Y,Q,K;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in A){const P=A.id,ie=(x=A.filter)===null||x===void 0?void 0:x.event;return P&&((k=r.ids)===null||k===void 0?void 0:k.includes(P))&&(ie==="*"||ie?.toLocaleLowerCase()===((L=r.data)===null||L===void 0?void 0:L.type.toLocaleLowerCase()))}else{const P=(Q=(Y=A?.filter)===null||Y===void 0?void 0:Y.event)===null||Q===void 0?void 0:Q.toLocaleLowerCase();return P==="*"||P===((K=r?.event)===null||K===void 0?void 0:K.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===f}).map(A=>{if(typeof R=="object"&&"ids"in R){const x=R.data,{schema:k,table:L,commit_timestamp:Y,type:Q,errors:K}=x;R=Object.assign(Object.assign({},{schema:k,table:L,commit_timestamp:Y,eventType:Q,new:{},old:{},errors:K}),this._getPayloadRecords(x))}A.callback(R,s)})}_isClosed(){return this.state===Fe.closed}_isJoined(){return this.state===Fe.joined}_isJoining(){return this.state===Fe.joining}_isLeaving(){return this.state===Fe.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,r,s){const c=i.toLocaleLowerCase(),d={type:c,filter:r,callback:s};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(i,r){const s=i.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===s&&Pu.isEqual(c.filter,r))})),this}static isEqual(i,r){if(Object.keys(i).length!==Object.keys(r).length)return!1;for(const s in i)if(i[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(Yt.close,{},i)}_onError(i){this._on(Yt.error,{},r=>i(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fe.joining,this.joinPush.resend(i))}_getPayloadRecords(i){const r={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(r.new=Ag(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(r.old=Ag(i.columns,i.old_record)),r}}const Tu=()=>{},Ys={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},tv=[1e3,2e3,5e3,1e4],nv=1e4,iv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class av{constructor(i,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Mu,this.transport=null,this.heartbeatIntervalMs=Ys.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tu,this.ref=0,this.reconnectTimer=null,this.logger=Tu,this.conn=null,this.sendBuffer=[],this.serializer=new Jy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>{let d;return c?d=c:typeof fetch>"u"?d=(...f)=>ma(async()=>{const{default:g}=await Promise.resolve().then(()=>yi);return{default:g}},void 0).then(({default:g})=>g(...f)).catch(g=>{throw new Error(`Failed to load @supabase/node-fetch: ${g.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...f)=>d(...f)},!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${i}/${Bu.websocket}`,this.httpEndpoint=Rm(i),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gy.createWebSocket(this.endpointURL())}catch(i){this._setConnectionState("disconnected");const r=i.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ky}))}disconnect(i,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},i?this.conn.close(i,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(i){const r=await i.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const i=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),i}log(i,r,s){this.logger(i,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case hr.connecting:return gi.Connecting;case hr.open:return gi.Open;case hr.closing:return gi.Closing;default:return gi.Closed}}isConnected(){return this.connectionState()===gi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(i,r={config:{}}){const s=`realtime:${i}`,c=this.getChannels().find(d=>d.topic===s);if(c)return c;{const d=new Pu(`realtime:${i}`,r,this);return this.channels.push(d),d}}push(i){const{topic:r,event:s,payload:c,ref:d}=i,f=()=>{this.encode(i,g=>{var p;(p=this.conn)===null||p===void 0||p.send(g)})};this.log("push",`${r} ${s} (${d})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(i=null){this._authPromise=this._performAuth(i);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var i;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(i=this.conn)===null||i===void 0||i.close(Qy,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ys.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(i){this.heartbeatCallback=i}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let r=this.channels.find(s=>s.topic===i&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${i}"`),r.unsubscribe())}_remove(i){this.channels=this.channels.filter(r=>r.topic!==i.topic)}_onConnMessage(i){this.decode(i.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:c,payload:d,ref:f}=r,g=f?`(${f})`:"",p=d.status||"";this.log("receive",`${p} ${s} ${c} ${g}`.trim(),d),this.channels.filter(m=>m._isMember(s)).forEach(m=>m._trigger(c,d,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(i){var r;i==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):i==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(i=>i.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(i){var r;this._setConnectionState("disconnected"),this.log("transport","close",i),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",i)}_onConnError(i){this._setConnectionState("disconnected"),this.log("transport",`${i}`),this._triggerChanError(),this._triggerStateCallbacks("error",i)}_triggerChanError(){this.channels.forEach(i=>i._trigger(Yt.error))}_appendParams(i,r){if(Object.keys(r).length===0)return i;const s=i.match(/\?/)?"&":"?",c=new URLSearchParams(r);return`${i}${s}${c}`}_workerObjectUrl(i){let r;if(i)r=i;else{const s=new Blob([iv],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(i,r=!1){this._connectionState=i,i==="connecting"?this._wasManualDisconnect=!1:i==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(i=null){let r;i?r=i:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const c={access_token:r,version:Yy};r&&s.updateJoinPayload(c),s.joinedOnce&&s._isJoined()&&s._push(Yt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(i="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${i}`,r)})}_triggerStateCallbacks(i,r){try{this.stateChangeCallbacks[i].forEach(s=>{try{s(r)}catch(c){this.log("error",`error in ${i} callback`,c)}})}catch(s){this.log("error",`error triggering ${i} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Am(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ys.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(i){var r,s,c,d,f,g,p,m,b;if(this.transport=(r=i?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=i?.timeout)!==null&&s!==void 0?s:Mu,this.heartbeatIntervalMs=(c=i?.heartbeatIntervalMs)!==null&&c!==void 0?c:Ys.HEARTBEAT_INTERVAL,this.worker=(d=i?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=i?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=i?.heartbeatCallback)!==null&&g!==void 0?g:Tu,i?.params&&(this.params=i.params),i?.logger&&(this.logger=i.logger),(i?.logLevel||i?.log_level)&&(this.logLevel=i.logLevel||i.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=i?.reconnectAfterMs)!==null&&p!==void 0?p:(w=>tv[w-1]||nv),this.encode=(m=i?.encode)!==null&&m!==void 0?m:((w,R)=>R(JSON.stringify(w))),this.decode=(b=i?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=i?.workerUrl}}}class Fu extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}}function $e(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class rv extends Fu{constructor(i,r,s){super(i),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Lu extends Fu{constructor(i,r){super(i),this.name="StorageUnknownError",this.originalError=r}}const Wu=l=>{let i;return l?i=l:typeof fetch>"u"?i=(...r)=>ma(async()=>{const{default:s}=await Promise.resolve().then(()=>yi);return{default:s}},void 0).then(({default:s})=>s(...r)):i=fetch,(...r)=>i(...r)},sv=()=>ne(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ma(()=>Promise.resolve().then(()=>yi),void 0)).Response:Response}),Hu=l=>{if(Array.isArray(l))return l.map(r=>Hu(r));if(typeof l=="function"||l!==Object(l))return l;const i={};return Object.entries(l).forEach(([r,s])=>{const c=r.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));i[c]=Hu(s)}),i},lv=l=>{if(typeof l!="object"||l===null)return!1;const i=Object.getPrototypeOf(l);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},Au=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),ov=(l,i,r)=>ne(void 0,void 0,void 0,function*(){const s=yield sv();l instanceof s&&!r?.noResolveJson?l.json().then(c=>{const d=l.status||500,f=c?.statusCode||d+"";i(new rv(Au(c),d,f))}).catch(c=>{i(new Lu(Au(c),c))}):i(new Lu(Au(l),l))}),uv=(l,i,r,s)=>{const c={method:l,headers:i?.headers||{}};return l==="GET"||!s?c:(lv(s)?(c.headers=Object.assign({"Content-Type":"application/json"},i?.headers),c.body=JSON.stringify(s)):c.body=s,i?.duplex&&(c.duplex=i.duplex),Object.assign(Object.assign({},c),r))};function _r(l,i,r,s,c,d){return ne(this,void 0,void 0,function*(){return new Promise((f,g)=>{l(r,uv(i,s,c,d)).then(p=>{if(!p.ok)throw p;return s?.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>ov(p,g,s))})})}function yr(l,i,r,s){return ne(this,void 0,void 0,function*(){return _r(l,"GET",i,r,s)})}function Vt(l,i,r,s,c){return ne(this,void 0,void 0,function*(){return _r(l,"POST",i,s,c,r)})}function $u(l,i,r,s,c){return ne(this,void 0,void 0,function*(){return _r(l,"PUT",i,s,c,r)})}function cv(l,i,r,s){return ne(this,void 0,void 0,function*(){return _r(l,"HEAD",i,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function ec(l,i,r,s,c){return ne(this,void 0,void 0,function*(){return _r(l,"DELETE",i,s,c,r)})}class dv{constructor(i,r){this.downloadFn=i,this.shouldThrowOnError=r}then(i,r){return this.execute().then(i,r)}execute(){return ne(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}})}}var jm;class fv{constructor(i,r){this.downloadFn=i,this.shouldThrowOnError=r,this[jm]="BlobDownloadBuilder",this.promise=null}asStream(){return new dv(this.downloadFn,this.shouldThrowOnError)}then(i,r){return this.getPromise().then(i,r)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ne(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}})}}jm=Symbol.toStringTag;const hv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class gv{constructor(i,r={},s,c){this.shouldThrowOnError=!1,this.url=i,this.headers=r,this.bucketId=s,this.fetch=Wu(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(i,r,s,c){return ne(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},jg),c);let g=Object.assign(Object.assign({},this.headers),i==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",this.encodeMetadata(p)),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",this.encodeMetadata(p))):(d=s,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,p&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),c?.headers&&(g=Object.assign(Object.assign({},g),c.headers));const m=this._removeEmptyFolders(r),b=this._getFinalPath(m),w=yield(i=="PUT"?$u:Vt)(this.fetch,`${this.url}/object/${b}`,d,Object.assign({headers:g},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:m,id:w.Id,fullPath:w.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if($e(d))return{data:null,error:d};throw d}})}upload(i,r,s){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",i,r,s)})}uploadToSignedUrl(i,r,s,c){return ne(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(i),f=this._getFinalPath(d),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",r);try{let p;const m=Object.assign({upsert:jg.upsert},c),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.append("cacheControl",m.cacheControl)):(p=s,b["cache-control"]=`max-age=${m.cacheControl}`,b["content-type"]=m.contentType);const w=yield $u(this.fetch,g.toString(),p,{headers:b});return{data:{path:d,fullPath:w.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if($e(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(i,r){return ne(this,void 0,void 0,function*(){try{let s=this._getFinalPath(i);const c=Object.assign({},this.headers);r?.upsert&&(c["x-upsert"]="true");const d=yield Vt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:c}),f=new URL(this.url+d.url),g=f.searchParams.get("token");if(!g)throw new Fu("No token returned by API");return{data:{signedUrl:f.toString(),path:i,token:g},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}update(i,r,s){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",i,r,s)})}move(i,r,s){return ne(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:i,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}copy(i,r,s){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield Vt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:i,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}createSignedUrl(i,r,s){return ne(this,void 0,void 0,function*(){try{let c=this._getFinalPath(i),d=yield Vt(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const f=s?.download?`&download=${s.download===!0?"":s.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}createSignedUrls(i,r,s){return ne(this,void 0,void 0,function*(){try{const c=yield Vt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:i},{headers:this.headers}),d=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:c.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}download(i,r){const c=typeof r?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(r?.transform||{}),f=d?`?${d}`:"",g=this._getFinalPath(i),p=()=>yr(this.fetch,`${this.url}/${c}/${g}${f}`,{headers:this.headers,noResolveJson:!0});return new fv(p,this.shouldThrowOnError)}info(i){return ne(this,void 0,void 0,function*(){const r=this._getFinalPath(i);try{const s=yield yr(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Hu(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}exists(i){return ne(this,void 0,void 0,function*(){const r=this._getFinalPath(i);try{return yield cv(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s)&&s instanceof Lu){const c=s.originalError;if([400,404].includes(c?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(i,r){const s=this._getFinalPath(i),c=[],d=r?.download?`download=${r.download===!0?"":r.download}`:"";d!==""&&c.push(d);const g=typeof r?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(r?.transform||{});p!==""&&c.push(p);let m=c.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${s}${m}`)}}}remove(i){return ne(this,void 0,void 0,function*(){try{return{data:yield ec(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:i},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}list(i,r,s){return ne(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},hv),r),{prefix:i||""});return{data:yield Vt(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},s),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}listV2(i,r){return ne(this,void 0,void 0,function*(){try{const s=Object.assign({},i);return{data:yield Vt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const r=[];return i.width&&r.push(`width=${i.width}`),i.height&&r.push(`height=${i.height}`),i.resize&&r.push(`resize=${i.resize}`),i.format&&r.push(`format=${i.format}`),i.quality&&r.push(`quality=${i.quality}`),r.join("&")}}const Cm="2.77.0",km={"X-Client-Info":`storage-js/${Cm}`};class mv{constructor(i,r={},s,c){this.shouldThrowOnError=!1;const d=new URL(i);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},km),r),this.fetch=Wu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(i){return ne(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(i);return{data:yield yr(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}getBucket(i){return ne(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/bucket/${i}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}createBucket(i){return ne(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield Vt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}updateBucket(i,r){return ne(this,void 0,void 0,function*(){try{return{data:yield $u(this.fetch,`${this.url}/bucket/${i}`,{id:i,name:i,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}emptyBucket(i){return ne(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/bucket/${i}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}deleteBucket(i){return ne(this,void 0,void 0,function*(){try{return{data:yield ec(this.fetch,`${this.url}/bucket/${i}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(i){const r={};return i&&("limit"in i&&(r.limit=String(i.limit)),"offset"in i&&(r.offset=String(i.offset)),i.search&&(r.search=i.search),i.sortColumn&&(r.sortColumn=i.sortColumn),i.sortOrder&&(r.sortOrder=i.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class pv{constructor(i,r={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},km),r),this.fetch=Wu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(i){return ne(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/bucket`,{name:i},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}listBuckets(i){return ne(this,void 0,void 0,function*(){try{const r=new URLSearchParams;i?.limit!==void 0&&r.set("limit",i.limit.toString()),i?.offset!==void 0&&r.set("offset",i.offset.toString()),i?.sortColumn&&r.set("sortColumn",i.sortColumn),i?.sortOrder&&r.set("sortOrder",i.sortOrder),i?.search&&r.set("search",i.search);const s=r.toString(),c=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield yr(this.fetch,c,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}deleteBucket(i){return ne(this,void 0,void 0,function*(){try{return{data:yield ec(this.fetch,`${this.url}/bucket/${i}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}}const tc={"X-Client-Info":`storage-js/${Cm}`,"Content-Type":"application/json"};class Um extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ot(l){return typeof l=="object"&&l!==null&&"__isStorageVectorsError"in l}class Ou extends Um{constructor(i,r,s){super(i),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yv extends Um{constructor(i,r){super(i),this.name="StorageVectorsUnknownError",this.originalError=r}}var Cg;(function(l){l.InternalError="InternalError",l.S3VectorConflictException="S3VectorConflictException",l.S3VectorNotFoundException="S3VectorNotFoundException",l.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",l.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",l.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Cg||(Cg={}));const nc=l=>{let i;return l?i=l:typeof fetch>"u"?i=(...r)=>ma(async()=>{const{default:s}=await Promise.resolve().then(()=>yi);return{default:s}},void 0).then(({default:s})=>s(...r)):i=fetch,(...r)=>i(...r)},vv=l=>{if(typeof l!="object"||l===null)return!1;const i=Object.getPrototypeOf(l);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},kg=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),bv=(l,i,r)=>ne(void 0,void 0,void 0,function*(){if(l&&typeof l=="object"&&"status"in l&&"ok"in l&&typeof l.status=="number"&&!r?.noResolveJson){const c=l.status||500,d=l;if(typeof d.json=="function")d.json().then(f=>{const g=f?.statusCode||f?.code||c+"";i(new Ou(kg(f),c,g))}).catch(()=>{const f=c+"",g=d.statusText||`HTTP ${c} error`;i(new Ou(g,c,f))});else{const f=c+"",g=d.statusText||`HTTP ${c} error`;i(new Ou(g,c,f))}}else i(new yv(kg(l),l))}),_v=(l,i,r,s)=>{const c={method:l,headers:i?.headers||{}};return s?(vv(s)?(c.headers=Object.assign({"Content-Type":"application/json"},i?.headers),c.body=JSON.stringify(s)):c.body=s,Object.assign(Object.assign({},c),r)):c};function wv(l,i,r,s,c,d){return ne(this,void 0,void 0,function*(){return new Promise((f,g)=>{l(r,_v(i,s,c,d)).then(p=>{if(!p.ok)throw p;if(s?.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>bv(p,g,s))})})}function Rt(l,i,r,s,c){return ne(this,void 0,void 0,function*(){return wv(l,"POST",i,s,c,r)})}class Sv{constructor(i,r={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tc),r),this.fetch=nc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(i){return ne(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/CreateIndex`,i,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}getIndex(i,r){return ne(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:i,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}})}listIndexes(i){return ne(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/ListIndexes`,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}deleteIndex(i,r){return ne(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:i,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}})}}class Ev{constructor(i,r={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tc),r),this.fetch=nc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(i){return ne(this,void 0,void 0,function*(){try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Rt(this.fetch,`${this.url}/PutVectors`,i,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}getVectors(i){return ne(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/GetVectors`,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}listVectors(i){return ne(this,void 0,void 0,function*(){try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:yield Rt(this.fetch,`${this.url}/ListVectors`,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}queryVectors(i){return ne(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/QueryVectors`,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}deleteVectors(i){return ne(this,void 0,void 0,function*(){try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Rt(this.fetch,`${this.url}/DeleteVectors`,i,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}}class xv{constructor(i,r={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tc),r),this.fetch=nc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(i){return ne(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}getBucket(i){return ne(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:i},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}listBuckets(){return ne(this,arguments,void 0,function*(i={}){try{return{data:yield Rt(this.fetch,`${this.url}/ListVectorBuckets`,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}deleteBucket(i){return ne(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}}class Tv extends xv{constructor(i,r={}){super(i,r.headers||{},r.fetch)}from(i){return new Av(this.url,this.headers,i,this.fetch)}}class Av extends Sv{constructor(i,r,s,c){super(i,r,c),this.vectorBucketName=s}createIndex(i){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ne(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const i=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ne(this,arguments,void 0,function*(r={}){return i.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(i){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ne(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,i)})}deleteIndex(i){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ne(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,i)})}index(i){return new Ov(this.url,this.headers,this.vectorBucketName,i,this.fetch)}}class Ov extends Ev{constructor(i,r,s,c,d){super(i,r,d),this.vectorBucketName=s,this.indexName=c}putVectors(i){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ne(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(i){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ne(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const i=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ne(this,arguments,void 0,function*(r={}){return i.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(i){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ne(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(i){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ne(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Rv extends mv{constructor(i,r={},s,c){super(i,r,s,c)}from(i){return new gv(this.url,this.headers,i,this.fetch)}get vectors(){return new Tv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new pv(this.url+"/iceberg",this.headers,this.fetch)}}const jv="2.77.0";let fr="";typeof Deno<"u"?fr="deno":typeof document<"u"?fr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fr="react-native":fr="node";const Cv={"X-Client-Info":`supabase-js-${fr}/${jv}`},kv={headers:Cv},Uv={schema:"public"},zv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Dv={},Nv=l=>{let i;return l?i=l:typeof fetch>"u"?i=vm:i=fetch,(...r)=>i(...r)},Mv=()=>typeof Headers>"u"?bm:Headers,Bv=(l,i,r)=>{const s=Nv(r),c=Mv();return async(d,f)=>{var g;const p=(g=await i())!==null&&g!==void 0?g:l;let m=new c(f?.headers);return m.has("apikey")||m.set("apikey",l),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),s(d,Object.assign(Object.assign({},f),{headers:m}))}};function qv(l){return l.endsWith("/")?l:l+"/"}function Lv(l,i){var r,s;const{db:c,auth:d,realtime:f,global:g}=l,{db:p,auth:m,realtime:b,global:w}=i,R={db:Object.assign(Object.assign({},p),c),auth:Object.assign(Object.assign({},m),d),realtime:Object.assign(Object.assign({},b),f),storage:{},global:Object.assign(Object.assign(Object.assign({},w),g),{headers:Object.assign(Object.assign({},(r=w?.headers)!==null&&r!==void 0?r:{}),(s=g?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return l.accessToken?R.accessToken=l.accessToken:delete R.accessToken,R}function Hv(l){const i=l?.trim();if(!i)throw new Error("supabaseUrl is required.");if(!i.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(qv(i))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const zm="2.77.0",ua=30*1e3,Gu=3,Ru=Gu*ua,$v="http://localhost:9999",Gv="supabase.auth.token",Vv={"X-Client-Info":`gotrue-js/${zm}`},Vu="X-Supabase-Api-Version",Dm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Yv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Kv=600*1e3;class vr extends Error{constructor(i,r,s){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function oe(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class Qv extends vr{constructor(i,r,s){super(i,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Xv(l){return oe(l)&&l.name==="AuthApiError"}class mi extends vr{constructor(i,r){super(i),this.name="AuthUnknownError",this.originalError=r}}class Kn extends vr{constructor(i,r,s,c){super(i,s,c),this.name=r,this.status=s}}class Vn extends Kn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jv(l){return oe(l)&&l.name==="AuthSessionMissingError"}class aa extends Kn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ks extends Kn{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}}class Qs extends Kn{constructor(i,r=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Iv(l){return oe(l)&&l.name==="AuthImplicitGrantRedirectError"}class Ug extends Kn{constructor(i,r=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yu extends Kn{constructor(i,r){super(i,"AuthRetryableFetchError",r,void 0)}}function ju(l){return oe(l)&&l.name==="AuthRetryableFetchError"}class zg extends Kn{constructor(i,r,s){super(i,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Ku extends Kn{constructor(i){super(i,"AuthInvalidJwtError",400,"invalid_jwt")}}const Is="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Dg=` 	
\r=`.split(""),Zv=(()=>{const l=new Array(128);for(let i=0;i<l.length;i+=1)l[i]=-1;for(let i=0;i<Dg.length;i+=1)l[Dg[i].charCodeAt(0)]=-2;for(let i=0;i<Is.length;i+=1)l[Is[i].charCodeAt(0)]=i;return l})();function Ng(l,i,r){if(l!==null)for(i.queue=i.queue<<8|l,i.queuedBits+=8;i.queuedBits>=6;){const s=i.queue>>i.queuedBits-6&63;r(Is[s]),i.queuedBits-=6}else if(i.queuedBits>0)for(i.queue=i.queue<<6-i.queuedBits,i.queuedBits=6;i.queuedBits>=6;){const s=i.queue>>i.queuedBits-6&63;r(Is[s]),i.queuedBits-=6}}function Nm(l,i,r){const s=Zv[l];if(s>-1)for(i.queue=i.queue<<6|s,i.queuedBits+=6;i.queuedBits>=8;)r(i.queue>>i.queuedBits-8&255),i.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function Mg(l){const i=[],r=f=>{i.push(String.fromCodePoint(f))},s={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=f=>{Wv(f,s,r)};for(let f=0;f<l.length;f+=1)Nm(l.charCodeAt(f),c,d);return i.join("")}function Pv(l,i){if(l<=127){i(l);return}else if(l<=2047){i(192|l>>6),i(128|l&63);return}else if(l<=65535){i(224|l>>12),i(128|l>>6&63),i(128|l&63);return}else if(l<=1114111){i(240|l>>18),i(128|l>>12&63),i(128|l>>6&63),i(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function Fv(l,i){for(let r=0;r<l.length;r+=1){let s=l.charCodeAt(r);if(s>55295&&s<=56319){const c=(s-55296)*1024&65535;s=(l.charCodeAt(r+1)-56320&65535|c)+65536,r+=1}Pv(s,i)}}function Wv(l,i,r){if(i.utf8seq===0){if(l<=127){r(l);return}for(let s=1;s<6;s+=1)if((l>>7-s&1)===0){i.utf8seq=s;break}if(i.utf8seq===2)i.codepoint=l&31;else if(i.utf8seq===3)i.codepoint=l&15;else if(i.utf8seq===4)i.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");i.utf8seq-=1}else if(i.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");i.codepoint=i.codepoint<<6|l&63,i.utf8seq-=1,i.utf8seq===0&&r(i.codepoint)}}function da(l){const i=[],r={queue:0,queuedBits:0},s=c=>{i.push(c)};for(let c=0;c<l.length;c+=1)Nm(l.charCodeAt(c),r,s);return new Uint8Array(i)}function eb(l){const i=[];return Fv(l,r=>i.push(r)),new Uint8Array(i)}function pi(l){const i=[],r={queue:0,queuedBits:0},s=c=>{i.push(c)};return l.forEach(c=>Ng(c,r,s)),Ng(null,r,s),i.join("")}function tb(l){return Math.round(Date.now()/1e3)+l}function nb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const i=Math.random()*16|0;return(l=="x"?i:i&3|8).toString(16)})}const At=()=>typeof window<"u"&&typeof document<"u",di={tested:!1,writable:!1},Mm=()=>{if(!At())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(di.tested)return di.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),di.tested=!0,di.writable=!0}catch{di.tested=!0,di.writable=!1}return di.writable};function ib(l){const i={},r=new URL(l);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((c,d)=>{i[d]=c})}catch{}return r.searchParams.forEach((s,c)=>{i[c]=s}),i}const Bm=l=>{let i;return l?i=l:typeof fetch>"u"?i=(...r)=>ma(async()=>{const{default:s}=await Promise.resolve().then(()=>yi);return{default:s}},void 0).then(({default:s})=>s(...r)):i=fetch,(...r)=>i(...r)},ab=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",ca=async(l,i,r)=>{await l.setItem(i,JSON.stringify(r))},fi=async(l,i)=>{const r=await l.getItem(i);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Gn=async(l,i)=>{await l.removeItem(i)};class Ws{constructor(){this.promise=new Ws.promiseConstructor((i,r)=>{this.resolve=i,this.reject=r})}}Ws.promiseConstructor=Promise;function Cu(l){const i=l.split(".");if(i.length!==3)throw new Ku("Invalid JWT structure");for(let s=0;s<i.length;s++)if(!Yv.test(i[s]))throw new Ku("JWT not in base64url format");return{header:JSON.parse(Mg(i[0])),payload:JSON.parse(Mg(i[1])),signature:da(i[2]),raw:{header:i[0],payload:i[1]}}}async function rb(l){return await new Promise(i=>{setTimeout(()=>i(null),l)})}function sb(l,i){return new Promise((s,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await l(d);if(!i(d,null,f)){s(f);return}}catch(f){if(!i(d,f)){c(f);return}}})()})}function lb(l){return("0"+l.toString(16)).substr(-2)}function ob(){const i=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let c="";for(let d=0;d<56;d++)c+=r.charAt(Math.floor(Math.random()*s));return c}return crypto.getRandomValues(i),Array.from(i,lb).join("")}async function ub(l){const r=new TextEncoder().encode(l),s=await crypto.subtle.digest("SHA-256",r),c=new Uint8Array(s);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function cb(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const r=await ub(l);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ra(l,i,r=!1){const s=ob();let c=s;r&&(c+="/PASSWORD_RECOVERY"),await ca(l,`${i}-code-verifier`,c);const d=await cb(s);return[d,s===d?"plain":"s256"]}const db=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fb(l){const i=l.headers.get(Vu);if(!i||!i.match(db))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}function hb(l){if(!l)throw new Error("Missing exp claim");const i=Math.floor(Date.now()/1e3);if(l<=i)throw new Error("JWT has expired")}function gb(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function sa(l){if(!mb.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ku(){const l={};return new Proxy(l,{get:(i,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(i,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(i,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bg(l){return JSON.parse(JSON.stringify(l))}const hi=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),pb=[502,503,504];async function qg(l){var i;if(!ab(l))throw new Yu(hi(l),0);if(pb.includes(l.status))throw new Yu(hi(l),l.status);let r;try{r=await l.json()}catch(d){throw new mi(hi(d),d)}let s;const c=fb(l);if(c&&c.getTime()>=Dm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new zg(hi(r),l.status,((i=r.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(s==="session_not_found")throw new Vn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new zg(hi(r),l.status,r.weak_password.reasons);throw new Qv(hi(r),l.status||500,s)}const yb=(l,i,r,s)=>{const c={method:l,headers:i?.headers||{}};return l==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i?.headers),c.body=JSON.stringify(s),Object.assign(Object.assign({},c),r))};async function he(l,i,r,s){var c;const d=Object.assign({},s?.headers);d[Vu]||(d[Vu]=Dm["2024-01-01"].name),s?.jwt&&(d.Authorization=`Bearer ${s.jwt}`);const f=(c=s?.query)!==null&&c!==void 0?c:{};s?.redirectTo&&(f.redirect_to=s.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await vb(l,i,r+g,{headers:d,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(p):{data:Object.assign({},p),error:null}}async function vb(l,i,r,s,c,d){const f=yb(i,s,c,d);let g;try{g=await l(r,Object.assign({},f))}catch(p){throw console.error(p),new Yu(hi(p),0)}if(g.ok||await qg(g),s?.noResolveJson)return g;try{return await g.json()}catch(p){await qg(p)}}function Gt(l){var i;let r=null;wb(l)&&(r=Object.assign({},l),l.expires_at||(r.expires_at=tb(l.expires_in)));const s=(i=l.user)!==null&&i!==void 0?i:l;return{data:{session:r,user:s},error:null}}function Lg(l){const i=Gt(l);return!i.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(i.data.weak_password=l.weak_password),i}function Yn(l){var i;return{data:{user:(i=l.user)!==null&&i!==void 0?i:l},error:null}}function bb(l){return{data:l,error:null}}function _b(l){const{action_link:i,email_otp:r,hashed_token:s,redirect_to:c,verification_type:d}=l,f=ga(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:i,email_otp:r,hashed_token:s,redirect_to:c,verification_type:d},p=Object.assign({},f);return{data:{properties:g,user:p},error:null}}function Hg(l){return l}function wb(l){return l.access_token&&l.refresh_token&&l.expires_in}const Uu=["global","local","others"];class Sb{constructor({url:i="",headers:r={},fetch:s}){this.url=i,this.headers=r,this.fetch=Bm(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(i,r=Uu[0]){if(Uu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Uu.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(s){if(oe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(i,r={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Yn})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async generateLink(i){try{const{options:r}=i,s=ga(i,["options"]),c=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(c.new_email=s?.newEmail,delete c.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:_b,redirectTo:r?.redirectTo})}catch(r){if(oe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(i){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:Yn})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async listUsers(i){var r,s,c,d,f,g,p;try{const m={nextPage:null,lastPage:0,total:0},b=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=i?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(d=(c=i?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Hg});if(b.error)throw b.error;const w=await b.json(),R=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,A=(p=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return A.length>0&&(A.forEach(x=>{const k=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(x.split(";")[1].split("=")[1]);m[`${L}Page`]=k}),m.total=parseInt(R)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(oe(m))return{data:{users:[]},error:m};throw m}}async getUserById(i){sa(i);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:Yn})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async updateUserById(i,r){sa(i);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:r,headers:this.headers,xform:Yn})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async deleteUser(i,r=!1){sa(i);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:r},xform:Yn})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async _listFactors(i){sa(i.userId);try{const{data:r,error:s}=await he(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:r,error:s}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _deleteFactor(i){sa(i.userId),sa(i.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _listOAuthClients(i){var r,s,c,d,f,g,p;try{const m={nextPage:null,lastPage:0,total:0},b=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=i?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(d=(c=i?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Hg});if(b.error)throw b.error;const w=await b.json(),R=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,A=(p=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return A.length>0&&(A.forEach(x=>{const k=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(x.split(";")[1].split("=")[1]);m[`${L}Page`]=k}),m.total=parseInt(R)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(oe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(i){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:i,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _getOAuthClient(i){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(i){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(i){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${i}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}}function $g(l={}){return{getItem:i=>l[i]||null,setItem:(i,r)=>{l[i]=r},removeItem:i=>{delete l[i]}}}const la={debug:!!(globalThis&&Mm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class qm extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}}class Eb extends qm{}async function xb(l,i,r){la.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,i);const s=new globalThis.AbortController;return i>0&&setTimeout(()=>{s.abort(),la.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},i),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async c=>{if(c){la.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,c.name);try{return await r()}finally{la.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,c.name)}}else{if(i===0)throw la.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new Eb(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(la.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Tb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Lm(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function Ab(l){return parseInt(l,16)}function Ob(l){const i=new TextEncoder().encode(l);return"0x"+Array.from(i,s=>s.toString(16).padStart(2,"0")).join("")}function Rb(l){var i;const{chainId:r,domain:s,expirationTime:c,issuedAt:d=new Date,nonce:f,notBefore:g,requestId:p,resources:m,scheme:b,uri:w,version:R}=l;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(R!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${R}`);if(!((i=l.statement)===null||i===void 0)&&i.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const A=Lm(l.address),x=b?`${b}://${s}`:s,k=l.statement?`${l.statement}
`:"",L=`${x} wants you to sign in with your Ethereum account:
${A}

${k}`;let Y=`URI: ${w}
Version: ${R}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(c&&(Y+=`
Expiration Time: ${c.toISOString()}`),g&&(Y+=`
Not Before: ${g.toISOString()}`),p&&(Y+=`
Request ID: ${p}`),m){let Q=`
Resources:`;for(const K of m){if(!K||typeof K!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${K}`);Q+=`
- ${K}`}Y+=Q}return`${L}
${Y}`}class Ze extends Error{constructor({message:i,code:r,cause:s,name:c}){var d;super(i,{cause:s}),this.__isWebAuthnError=!0,this.name=(d=c??(s instanceof Error?s.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=r}}class Zs extends Ze{constructor(i,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:i}),this.name="WebAuthnUnknownError",this.originalError=r}}function jb({error:l,options:i}){var r,s,c;const{publicKey:d}=i;if(!d)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(i.signal instanceof AbortSignal)return new Ze({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((r=d.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ze({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(i.mediation==="conditional"&&((s=d.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ze({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((c=d.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Ze({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new Ze({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new Ze({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return d.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Ze({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new Ze({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const f=window.location.hostname;if(Hm(f)){if(d.rp.id!==f)return new Ze({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new Ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Ze({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new Ze({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new Ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function Cb({error:l,options:i}){const{publicKey:r}=i;if(!r)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(i.signal instanceof AbortSignal)return new Ze({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new Ze({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const s=window.location.hostname;if(Hm(s)){if(r.rpId!==s)return new Ze({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new Ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new Ze({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new Ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}class kb{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const i=new AbortController;return this.controller=i,i.signal}cancelCeremony(){if(this.controller){const i=new Error("Manually cancelling existing WebAuthn API call");i.name="AbortError",this.controller.abort(i),this.controller=void 0}}}const Ub=new kb;function zb(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:i,user:r,excludeCredentials:s}=l,c=ga(l,["challenge","user","excludeCredentials"]),d=da(i).buffer,f=Object.assign(Object.assign({},r),{id:da(r.id).buffer}),g=Object.assign(Object.assign({},c),{challenge:d,user:f});if(s&&s.length>0){g.excludeCredentials=new Array(s.length);for(let p=0;p<s.length;p++){const m=s[p];g.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:da(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return g}function Db(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:i,allowCredentials:r}=l,s=ga(l,["challenge","allowCredentials"]),c=da(i).buffer,d=Object.assign(Object.assign({},s),{challenge:c});if(r&&r.length>0){d.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const g=r[f];d.allowCredentials[f]=Object.assign(Object.assign({},g),{id:da(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function Nb(l){var i;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const r=l;return{id:l.id,rawId:l.id,response:{attestationObject:pi(new Uint8Array(l.response.attestationObject)),clientDataJSON:pi(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(i=r.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function Mb(l){var i;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const r=l,s=l.getClientExtensionResults(),c=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:pi(new Uint8Array(c.authenticatorData)),clientDataJSON:pi(new Uint8Array(c.clientDataJSON)),signature:pi(new Uint8Array(c.signature)),userHandle:c.userHandle?pi(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(i=r.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function Hm(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function Gg(){var l,i;return!!(At()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator?.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.get)=="function")}async function Bb(l){try{const i=await navigator.credentials.create(l);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new Zs("Browser returned unexpected credential type",i)}:{data:null,error:new Zs("Empty credential response",i)}}catch(i){return{data:null,error:jb({error:i,options:l})}}}async function qb(l){try{const i=await navigator.credentials.get(l);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new Zs("Browser returned unexpected credential type",i)}:{data:null,error:new Zs("Empty credential response",i)}}catch(i){return{data:null,error:Cb({error:i,options:l})}}}const Lb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Hb={userVerification:"preferred",hints:["security-key"]};function Ps(...l){const i=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),r=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),s={};for(const c of l)if(c)for(const d in c){const f=c[d];if(f!==void 0)if(Array.isArray(f))s[d]=f;else if(r(f))s[d]=f;else if(i(f)){const g=s[d];i(g)?s[d]=Ps(g,f):s[d]=Ps(f)}else s[d]=f}return s}function $b(l,i){return Ps(Lb,l,i||{})}function Gb(l,i){return Ps(Hb,l,i||{})}class Vb{constructor(i){this.client=i,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(i){return this.client.mfa.enroll(Object.assign(Object.assign({},i),{factorType:"webauthn"}))}async _challenge({factorId:i,webauthn:r,friendlyName:s,signal:c},d){try{const{data:f,error:g}=await this.client.mfa.challenge({factorId:i,webauthn:r});if(!f)return{data:null,error:g};const p=c??Ub.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:m}=f.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${s}`),m.displayName||(m.displayName=m.name)}switch(f.webauthn.type){case"create":{const m=$b(f.webauthn.credential_options.publicKey,d?.create),{data:b,error:w}=await Bb({publicKey:m,signal:p});return b?{data:{factorId:i,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const m=Gb(f.webauthn.credential_options.publicKey,d?.request),{data:b,error:w}=await qb(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:m,signal:p}));return b?{data:{factorId:i,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(f){return oe(f)?{data:null,error:f}:{data:null,error:new mi("Unexpected error in challenge",f)}}}async _verify({challengeId:i,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:i,webauthn:s})}async _authenticate({factorId:i,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:c}},d){if(!r)return{data:null,error:new vr("rpId is required for WebAuthn authentication")};try{if(!Gg())return{data:null,error:new mi("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:i,webauthn:{rpId:r,rpOrigins:s},signal:c},{request:d});if(!f)return{data:null,error:g};const{webauthn:p}=f;return this._verify({factorId:i,challengeId:f.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:s,credential_response:p.credential_response}})}catch(f){return oe(f)?{data:null,error:f}:{data:null,error:new mi("Unexpected error in authenticate",f)}}}async _register({friendlyName:i,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:c},d){if(!r)return{data:null,error:new vr("rpId is required for WebAuthn registration")};try{if(!Gg())return{data:null,error:new mi("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:i});if(!f)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(R=>R.factor_type==="webauthn"&&R.friendly_name===i&&R.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:g};const{data:p,error:m}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:c},{create:d});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:s,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(f){return oe(f)?{data:null,error:f}:{data:null,error:new mi("Unexpected error in register",f)}}}}Tb();const Yb={url:$v,storageKey:Gv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Vg(l,i,r){return await r()}const oa={};class br{get jwks(){var i,r;return(r=(i=oa[this.storageKey])===null||i===void 0?void 0:i.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(i){oa[this.storageKey]=Object.assign(Object.assign({},oa[this.storageKey]),{jwks:i})}get jwks_cached_at(){var i,r;return(r=(i=oa[this.storageKey])===null||i===void 0?void 0:i.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(i){oa[this.storageKey]=Object.assign(Object.assign({},oa[this.storageKey]),{cachedAt:i})}constructor(i){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=br.nextInstanceID,br.nextInstanceID+=1,this.instanceID>0&&At()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},Yb),i);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Sb({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Bm(c.fetch),this.lock=c.lock||Vg,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:At()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=xb:this.lock=Vg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Vb(this)},this.persistSession?(c.storage?this.storage=c.storage:Mm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$g(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=$g(this.memoryStorage)),At()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}_debug(...i){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${zm}) ${new Date().toISOString()}`,...i),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var i;try{const r=ib(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),At()&&this.detectSessionInUrl&&s!=="none"){const{data:c,error:d}=await this._getSessionFromURL(r,s);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),Iv(d)){const p=(i=d.details)===null||i===void 0?void 0:i.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:g}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return oe(r)?{error:r}:{error:new mi("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(i){var r,s,c;try{const d=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=i?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(c=i?.options)===null||c===void 0?void 0:c.captchaToken}},xform:Gt}),{data:f,error:g}=d;if(g||!f)return{data:{user:null,session:null},error:g};const p=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(d){if(oe(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(i){var r,s,c;try{let d;if("email"in i){const{email:b,password:w,options:R}=i;let A=null,x=null;this.flowType==="pkce"&&([A,x]=await ra(this.storage,this.storageKey)),d=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:R?.emailRedirectTo,body:{email:b,password:w,data:(r=R?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:R?.captchaToken},code_challenge:A,code_challenge_method:x},xform:Gt})}else if("phone"in i){const{phone:b,password:w,options:R}=i;d=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(s=R?.data)!==null&&s!==void 0?s:{},channel:(c=R?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:R?.captchaToken}},xform:Gt})}else throw new Ks("You must provide either an email or phone number and a password");const{data:f,error:g}=d;if(g||!f)return{data:{user:null,session:null},error:g};const p=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(d){if(oe(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(i){try{let r;if("email"in i){const{email:d,password:f,options:g}=i;r=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Lg})}else if("phone"in i){const{phone:d,password:f,options:g}=i;r=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Lg})}else throw new Ks("You must provide either an email or phone number and a password");const{data:s,error:c}=r;return c?{data:{user:null,session:null},error:c}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new aa}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:c})}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(i){var r,s,c,d;return await this._handleProviderSignIn(i.provider,{redirectTo:(r=i.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=i.options)===null||s===void 0?void 0:s.scopes,queryParams:(c=i.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=i.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(i){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(i))}async signInWithWeb3(i){const{chain:r}=i;switch(r){case"ethereum":return await this.signInWithEthereum(i);case"solana":return await this.signInWithSolana(i);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(i){var r,s,c,d,f,g,p,m,b,w,R;let A,x;if("message"in i)A=i.message,x=i.signature;else{const{chain:k,wallet:L,statement:Y,options:Q}=i;let K;if(At())if(typeof L=="object")K=L;else{const se=window;if("ethereum"in se&&typeof se.ethereum=="object"&&"request"in se.ethereum&&typeof se.ethereum.request=="function")K=se.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!Q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");K=L}const P=new URL((r=Q?.url)!==null&&r!==void 0?r:window.location.href),ie=await K.request({method:"eth_requestAccounts"}).then(se=>se).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ie||ie.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=Lm(ie[0]);let N=(s=Q?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!N){const se=await K.request({method:"eth_chainId"});N=Ab(se)}const J={domain:P.host,address:W,statement:Y,uri:P.href,version:"1",chainId:N,nonce:(c=Q?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(f=(d=Q?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=Q?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(p=Q?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=Q?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(b=Q?.signInWithEthereum)===null||b===void 0?void 0:b.resources};A=Rb(J),x=await K.request({method:"personal_sign",params:[Ob(A),W]})}try{const{data:k,error:L}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:x},!((w=i.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(R=i.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:Gt});if(L)throw L;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new aa}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:L})}catch(k){if(oe(k))return{data:{user:null,session:null},error:k};throw k}}async signInWithSolana(i){var r,s,c,d,f,g,p,m,b,w,R,A;let x,k;if("message"in i)x=i.message,k=i.signature;else{const{chain:L,wallet:Y,statement:Q,options:K}=i;let P;if(At())if(typeof Y=="object")P=Y;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))P=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Y!="object"||!K?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=Y}const ie=new URL((r=K?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in P&&P.signIn){const W=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},K?.signInWithSolana),{version:"1",domain:ie.host,uri:ie.href}),Q?{statement:Q}:null));let N;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")N=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)N=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)x=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),k=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${ie.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...Q?["",Q,""]:[""],"Version: 1",`URI: ${ie.href}`,`Issued At: ${(c=(s=K?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=K?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${K.signInWithSolana.notBefore}`]:[],...!((f=K?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${K.signInWithSolana.expirationTime}`]:[],...!((g=K?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${K.signInWithSolana.chainId}`]:[],...!((p=K?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${K.signInWithSolana.nonce}`]:[],...!((m=K?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${K.signInWithSolana.requestId}`]:[],...!((w=(b=K?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...K.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const W=await P.signMessage(new TextEncoder().encode(x),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=W}}try{const{data:L,error:Y}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:pi(k)},!((R=i.options)===null||R===void 0)&&R.captchaToken?{gotrue_meta_security:{captcha_token:(A=i.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:Gt});if(Y)throw Y;return!L||!L.session||!L.user?{data:{user:null,session:null},error:new aa}:(L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),{data:Object.assign({},L),error:Y})}catch(L){if(oe(L))return{data:{user:null,session:null},error:L};throw L}}async _exchangeCodeForSession(i){const r=await fi(this.storage,`${this.storageKey}-code-verifier`),[s,c]=(r??"").split("/");try{const{data:d,error:f}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:i,code_verifier:s},xform:Gt});if(await Gn(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new aa}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:f})}catch(d){if(oe(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(i){try{const{options:r,provider:s,token:c,access_token:d,nonce:f}=i,g=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:c,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Gt}),{data:p,error:m}=g;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new aa}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:m})}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(i){var r,s,c,d,f;try{if("email"in i){const{email:g,options:p}=i;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await ra(this.storage,this.storageKey));const{error:w}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=p?.data)!==null&&r!==void 0?r:{},create_user:(s=p?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:b},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in i){const{phone:g,options:p}=i,{data:m,error:b}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(c=p?.data)!==null&&c!==void 0?c:{},create_user:(d=p?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(f=p?.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:b}}throw new Ks("You must provide either an email or phone number.")}catch(g){if(oe(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(i){var r,s;try{let c,d;"options"in i&&(c=(r=i.options)===null||r===void 0?void 0:r.redirectTo,d=(s=i.options)===null||s===void 0?void 0:s.captchaToken);const{data:f,error:g}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},i),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:Gt});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,m=f.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(i.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(c){if(oe(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(i){var r,s,c;try{let d=null,f=null;return this.flowType==="pkce"&&([d,f]=await ra(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in i?{provider_id:i.providerId}:null),"domain"in i?{domain:i.domain}:null),{redirect_to:(s=(r=i.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((c=i?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:i.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:bb})}catch(d){if(oe(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async i=>{const{data:{session:r},error:s}=i;if(s)throw s;if(!r)throw new Vn;const{error:c}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:c}})}catch(i){if(oe(i))return{data:{user:null,session:null},error:i};throw i}}async resend(i){try{const r=`${this.url}/resend`;if("email"in i){const{email:s,type:c,options:d}=i,{error:f}=await he(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in i){const{phone:s,type:c,options:d}=i,{data:f,error:g}=await he(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return{data:{user:null,session:null,messageId:f?.message_id},error:g}}throw new Ks("You must provide either an email or phone number and a type")}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(i,r){this._debug("#_acquireLock","begin",i);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,i,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(i){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await i(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let i=null;const r=await fi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?i=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!i)return{data:{session:null},error:null};const s=i.expires_at?i.expires_at*1e3-Date.now()<Ru:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",i.expires_at),!s){if(this.userStorage){const f=await fi(this.userStorage,this.storageKey+"-user");f?.user?i.user=f.user:i.user=ku()}if(this.storage.isServer&&i.user){let f=this.suppressGetSessionWarning;i=new Proxy(i,{get:(p,m,b)=>(!f&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,m,b))})}return{data:{session:i},error:null}}const{data:c,error:d}=await this._callRefreshToken(i.refresh_token);return d?{data:{session:null},error:d}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(i){return i?await this._getUser(i):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(i){try{return i?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:i,xform:Yn}):await this._useSession(async r=>{var s,c,d;const{data:f,error:g}=r;if(g)throw g;return!(!((s=f.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vn}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:Yn})})}catch(r){if(oe(r))return Jv(r)&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(i,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(i,r))}async _updateUser(i,r={}){try{return await this._useSession(async s=>{const{data:c,error:d}=s;if(d)throw d;if(!c.session)throw new Vn;const f=c.session;let g=null,p=null;this.flowType==="pkce"&&i.email!=null&&([g,p]=await ra(this.storage,this.storageKey));const{data:m,error:b}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},i),{code_challenge:g,code_challenge_method:p}),jwt:f.access_token,xform:Yn});if(b)throw b;return f.user=m.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async setSession(i){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(i))}async _setSession(i){try{if(!i.access_token||!i.refresh_token)throw new Vn;const r=Date.now()/1e3;let s=r,c=!0,d=null;const{payload:f}=Cu(i.access_token);if(f.exp&&(s=f.exp,c=s<=r),c){const{data:g,error:p}=await this._callRefreshToken(i.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!g)return{data:{user:null,session:null},error:null};d=g}else{const{data:g,error:p}=await this._getUser(i.access_token);if(p)throw p;d={access_token:i.access_token,refresh_token:i.refresh_token,user:g.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(r){if(oe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(i){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(i))}async _refreshSession(i){try{return await this._useSession(async r=>{var s;if(!i){const{data:f,error:g}=r;if(g)throw g;i=(s=f.session)!==null&&s!==void 0?s:void 0}if(!i?.refresh_token)throw new Vn;const{data:c,error:d}=await this._callRefreshToken(i.refresh_token);return d?{data:{user:null,session:null},error:d}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(i,r){try{if(!At())throw new Qs("No browser detected.");if(i.error||i.error_description||i.error_code)throw new Qs(i.error_description||"Error in URL with unspecified error_description",{error:i.error||"unspecified_error",code:i.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ug("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!i.code)throw new Ug("No code detected.");const{data:Q,error:K}=await this._exchangeCodeForSession(i.code);if(K)throw K;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:Q.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:c,access_token:d,refresh_token:f,expires_in:g,expires_at:p,token_type:m}=i;if(!d||!g||!f||!m)throw new Qs("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(g);let R=b+w;p&&(R=parseInt(p));const A=R-b;A*1e3<=ua&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${w}s`);const x=R-w;b-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,R,b):b-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,R,b);const{data:k,error:L}=await this._getUser(d);if(L)throw L;const Y={provider_token:s,provider_refresh_token:c,access_token:d,expires_in:w,expires_at:R,refresh_token:f,token_type:m,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Y,redirectType:i.type},error:null}}catch(s){if(oe(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(i){return!!(i.access_token||i.error_description)}async _isPKCECallback(i){const r=await fi(this.storage,`${this.storageKey}-code-verifier`);return!!(i.code&&r)}async signOut(i={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(i))}async _signOut({scope:i}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:c,error:d}=r;if(d)return{error:d};const f=(s=c.session)===null||s===void 0?void 0:s.access_token;if(f){const{error:g}=await this.admin.signOut(f,i);if(g&&!(Xv(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return i!=="others"&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(i){const r=nb(),s={id:r,callback:i,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(i){return await this._useSession(async r=>{var s,c;try{const{data:{session:d},error:f}=r;if(f)throw f;await((s=this.stateChangeEmitters.get(i))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",i,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(i))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",i,"error",d),console.error(d)}})}async resetPasswordForEmail(i,r={}){let s=null,c=null;this.flowType==="pkce"&&([s,c]=await ra(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:i,code_challenge:s,code_challenge_method:c,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(d){if(oe(d))return{data:null,error:d};throw d}}async getUserIdentities(){var i;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(i=r.user.identities)!==null&&i!==void 0?i:[]},error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async linkIdentity(i){return"token"in i?this.linkIdentityIdToken(i):this.linkIdentityOAuth(i)}async linkIdentityOAuth(i){var r;try{const{data:s,error:c}=await this._useSession(async d=>{var f,g,p,m,b;const{data:w,error:R}=d;if(R)throw R;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,i.provider,{redirectTo:(f=i.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=i.options)===null||g===void 0?void 0:g.scopes,queryParams:(p=i.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",A,{headers:this.headers,jwt:(b=(m=w.session)===null||m===void 0?void 0:m.access_token)!==null&&b!==void 0?b:void 0})});if(c)throw c;return At()&&!(!((r=i.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:i.provider,url:s?.url},error:null}}catch(s){if(oe(s))return{data:{provider:i.provider,url:null},error:s};throw s}}async linkIdentityIdToken(i){return await this._useSession(async r=>{var s;try{const{error:c,data:{session:d}}=r;if(c)throw c;const{options:f,provider:g,token:p,access_token:m,nonce:b}=i,w=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=d?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:g,id_token:p,access_token:m,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Gt}),{data:R,error:A}=w;return A?{data:{user:null,session:null},error:A}:!R||!R.session||!R.user?{data:{user:null,session:null},error:new aa}:(R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("USER_UPDATED",R.session)),{data:R,error:A})}catch(c){if(oe(c))return{data:{user:null,session:null},error:c};throw c}})}async unlinkIdentity(i){try{return await this._useSession(async r=>{var s,c;const{data:d,error:f}=r;if(f)throw f;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${i.identity_id}`,{headers:this.headers,jwt:(c=(s=d.session)===null||s===void 0?void 0:s.access_token)!==null&&c!==void 0?c:void 0})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(i){const r=`#_refreshAccessToken(${i.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await sb(async c=>(c>0&&await rb(200*Math.pow(2,c-1)),this._debug(r,"refreshing attempt",c),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:i},headers:this.headers,xform:Gt})),(c,d)=>{const f=200*Math.pow(2,c);return d&&ju(d)&&Date.now()+f-s<ua})}catch(s){if(this._debug(r,"error",s),oe(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(i){return typeof i=="object"&&i!==null&&"access_token"in i&&"refresh_token"in i&&"expires_at"in i}async _handleProviderSignIn(i,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,i,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",i,"options",r,"url",s),At()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:i,url:s},error:null}}async _recoverAndRefresh(){var i,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const c=await fi(this.storage,this.storageKey);if(c&&this.userStorage){let f=await fi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await ca(this.userStorage,this.storageKey+"-user",f)),c.user=(i=f?.user)!==null&&i!==void 0?i:ku()}else if(c&&!c.user&&!c.user){const f=await fi(this.storage,this.storageKey+"-user");f&&f?.user?(c.user=f.user,await Gn(this.storage,this.storageKey+"-user"),await ca(this.storage,this.storageKey,c)):c.user=ku()}if(this._debug(s,"session from storage",c),!this._isValidSession(c)){this._debug(s,"session is not valid"),c!==null&&await this._removeSession();return}const d=((r=c.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ru;if(this._debug(s,`session has${d?"":" not"} expired with margin of ${Ru}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),ju(f)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(c.access_token);!g&&f?.user?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(s,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(s,"error",c),console.error(c);return}finally{this._debug(s,"end")}}async _callRefreshToken(i){var r,s;if(!i)throw new Vn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${i.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new Ws;const{data:d,error:f}=await this._refreshAccessToken(i);if(f)throw f;if(!d.session)throw new Vn;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const g={data:d.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(d){if(this._debug(c,"error",d),oe(d)){const f={data:null,error:d};return ju(d)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(i,r,s=!0){const c=`#_notifyAllSubscribers(${i})`;this._debug(c,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:i,session:r});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(i,r)}catch(p){d.push(p)}});if(await Promise.all(f),d.length>0){for(let g=0;g<d.length;g+=1)console.error(d[g]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(i){this._debug("#_saveSession()",i),this.suppressGetSessionWarning=!0;const r=Object.assign({},i),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await ca(this.userStorage,this.storageKey+"-user",{user:r.user});const c=Object.assign({},r);delete c.user;const d=Bg(c);await ca(this.storage,this.storageKey,d)}else{const c=Bg(r);await ca(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await Gn(this.storage,this.storageKey),await Gn(this.storage,this.storageKey+"-code-verifier"),await Gn(this.storage,this.storageKey+"-user"),this.userStorage&&await Gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const i=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{i&&At()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",i)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const i=setInterval(()=>this._autoRefreshTokenTick(),ua);this.autoRefreshTicker=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const i=this.autoRefreshTicker;this.autoRefreshTicker=null,i&&clearInterval(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const i=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((s.expires_at*1e3-i)/ua);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${ua}ms, refresh threshold is ${Gu} ticks`),c<=Gu&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(i){if(i.isAcquireTimeout||i instanceof qm)this._debug("auto refresh token tick lock not available");else throw i}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!At()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(i){console.error("_handleVisibilityChange",i)}}async _onVisibilityChanged(i){const r=`#_onVisibilityChanged(${i})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),i||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(i,r,s){const c=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&c.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[d,f]=await ra(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(g.toString())}if(s?.queryParams){const d=new URLSearchParams(s.queryParams);c.push(d.toString())}return s?.skipBrowserRedirect&&c.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${i}?${c.join("&")}`}async _unenroll(i){try{return await this._useSession(async r=>{var s;const{data:c,error:d}=r;return d?{data:null,error:d}:await he(this.fetch,"DELETE",`${this.url}/factors/${i.factorId}`,{headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _enroll(i){try{return await this._useSession(async r=>{var s,c;const{data:d,error:f}=r;if(f)return{data:null,error:f};const g=Object.assign({friendly_name:i.friendlyName,factor_type:i.factorType},i.factorType==="phone"?{phone:i.phone}:i.factorType==="totp"?{issuer:i.issuer}:{}),{data:p,error:m}=await he(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(s=d?.session)===null||s===void 0?void 0:s.access_token});return m?{data:null,error:m}:(i.factorType==="totp"&&p.type==="totp"&&(!((c=p?.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _verify(i){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:c,error:d}=r;if(d)return{data:null,error:d};const f=Object.assign({challenge_id:i.challengeId},"webauthn"in i?{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_response:i.webauthn.type==="create"?Nb(i.webauthn.credential_response):Mb(i.webauthn.credential_response)})}:{code:i.code}),{data:g,error:p}=await he(this.fetch,"POST",`${this.url}/factors/${i.factorId}/verify`,{body:f,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),{data:g,error:p})})}catch(r){if(oe(r))return{data:null,error:r};throw r}})}async _challenge(i){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:c,error:d}=r;if(d)return{data:null,error:d};const f=await he(this.fetch,"POST",`${this.url}/factors/${i.factorId}/challenge`,{body:i,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:zb(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Db(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(oe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(i){const{data:r,error:s}=await this._challenge({factorId:i.factorId});return s?{data:null,error:s}:await this._verify({factorId:i.factorId,challengeId:r.id,code:i.code})}async _listFactors(){var i;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const c={all:[],phone:[],totp:[],webauthn:[]};for(const d of(i=r?.factors)!==null&&i!==void 0?i:[])c.all.push(d),d.status==="verified"&&c[d.factor_type].push(d);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async i=>{var r,s;const{data:{session:c},error:d}=i;if(d)return{data:null,error:d};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Cu(c.access_token);let g=null;f.aal&&(g=f.aal);let p=g;((s=(r=c.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const b=f.amr||[];return{data:{currentLevel:g,nextLevel:p,currentAuthenticationMethods:b},error:null}}))}async fetchJwk(i,r={keys:[]}){let s=r.keys.find(g=>g.kid===i);if(s)return s;const c=Date.now();if(s=this.jwks.keys.find(g=>g.kid===i),s&&this.jwks_cached_at+Kv>c)return s;const{data:d,error:f}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,s=d.keys.find(g=>g.kid===i),!s)?null:s}async getClaims(i,r={}){try{let s=i;if(!s){const{data:A,error:x}=await this.getSession();if(x||!A.session)return{data:null,error:x};s=A.session.access_token}const{header:c,payload:d,signature:f,raw:{header:g,payload:p}}=Cu(s);r?.allowExpired||hb(d.exp);const m=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!m){const{error:A}=await this.getUser(s);if(A)throw A;return{data:{claims:d,header:c,signature:f},error:null}}const b=gb(c.alg),w=await crypto.subtle.importKey("jwk",m,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,f,eb(`${g}.${p}`)))throw new Ku("Invalid JWT signature");return{data:{claims:d,header:c,signature:f},error:null}}catch(s){if(oe(s))return{data:null,error:s};throw s}}}br.nextInstanceID=0;const Kb=br;class Qb extends Kb{constructor(i){super(i)}}class Xb{constructor(i,r,s){var c,d,f;this.supabaseUrl=i,this.supabaseKey=r;const g=Hv(i);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const p=`sb-${g.hostname.split(".")[0]}-auth-token`,m={db:Uv,realtime:Dv,auth:Object.assign(Object.assign({},zv),{storageKey:p}),global:kv},b=Lv(s??{},m);this.storageKey=(c=b.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(d=b.global.headers)!==null&&d!==void 0?d:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(w,R)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(R)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=b.auth)!==null&&f!==void 0?f:{},this.headers,b.global.fetch),this.fetch=Bv(r,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new $y(new URL("rest/v1",g).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new Rv(this.storageUrl.href,this.headers,this.fetch,s?.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new Uy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,r,s)}channel(i,r={config:{}}){return this.realtime.channel(i,r)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i,r;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:r,detectSessionInUrl:s,storage:c,userStorage:d,storageKey:f,flowType:g,lock:p,debug:m},b,w){const R={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Qb({url:this.authUrl.href,headers:Object.assign(Object.assign({},R),b),storageKey:f,autoRefreshToken:i,persistSession:r,detectSessionInUrl:s,storage:c,userStorage:d,flowType:g,lock:p,debug:m,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new av(this.realtimeUrl.href,Object.assign(Object.assign({},i),{params:Object.assign({apikey:this.supabaseKey},i?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s?.access_token)})}_handleTokenChanged(i,r,s){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $m=(l,i,r)=>new Xb(l,i,r);function Jb(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const i=l.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}Jb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Gm="https://jgwwikvqvdfzxuboqgxr.supabase.co",Ib="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impnd3dpa3ZxdmRmenh1Ym9xZ3hyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTgxMTgsImV4cCI6MjA3NzMzNDExOH0.XvjyWN0CdPVYKTuHK4-ukl4YUPf17n2XQOTEjFyLXKA",Zb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impnd3dpa3ZxdmRmenh1Ym9xZ3hyIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MTc1ODExOCwiZXhwIjoyMDc3MzM0MTE4fQ.jNjEB_mdNMI-ao7jFCRVd8ijkjxsj_oyu3LCpZNwW0M",X=$m(Gm,Ib,{auth:{persistSession:!0,storageKey:"ttls-auth-storage",autoRefreshToken:!0}}),Pb=$m(Gm,Zb,{auth:{persistSession:!1,storageKey:"ttls-service-storage"},global:{headers:{"x-client-role":"service"}}});function Fb(){return S.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[S.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),S.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),S.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),S.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}function Wb({onSignIn:l}){return S.jsx("div",{className:"min-h-screen bg-night-sky flex items-center justify-center",children:S.jsxs("div",{className:"bg-black/70 p-8 rounded-md text-center text-white",children:[S.jsx("h1",{className:"text-2xl mb-2",children:" TTLS"}),S.jsx("p",{className:"mb-4",children:"Join the Night Sky"}),S.jsxs("button",{onClick:l,className:"px-4 py-2 rounded-md bg-white text-gray-800 font-semibold flex items-center gap-2",children:[S.jsx(Fb,{}),"Sign in with Google"]})]})})}function Yg({room:l,user:i,onTransferOwnership:r}){const[s,c]=B.useState(!1),[d,f]=B.useState([]),[g,p]=B.useState(!1),[m,b]=B.useState([]),[w,R]=B.useState(new Set),A=B.useRef(0),x=B.useRef(!1),k=B.useCallback(async()=>{if(l)try{const{data:N,error:J}=await X.from("room_audio_mutes").select("user_id").eq("room_id",l.id);if(J)throw J;const se=new Set(N.map(ye=>ye.user_id));R(se)}catch(N){console.error(" Error fetching muted users:",N)}},[l]),L=B.useCallback(async()=>{if(l)try{const{data:N,error:J}=await X.from("room_bans").select(`
        *,
        banned_user:user_positions!room_bans_banned_user_id_fkey (
          email
        ),
        banned_by:user_positions!room_bans_banned_by_user_id_fkey (
          email
        )
      `).eq("room_id",l.id).is("expires_at",null);if(J)throw J;b(N||[])}catch(N){console.error(" Error fetching banned users:",N)}},[l]),Y=B.useCallback(async(N=!1)=>{if(!l||!s)return;const J=Date.now();if(!N&&J-A.current<2e3&&!x.current){console.log(" Skipping fetch - too soon since last fetch");return}if(x.current){console.log(" Skipping fetch - already fetching");return}p(!0),x.current=!0,A.current=J;try{const{data:se,error:ye}=await X.from("user_room_memberships").select(`
          user_id,
          user_positions!user_room_memberships_user_id_fkey (
            email,
            is_online
          )
        `).eq("room_id",l.id);if(ye)throw ye;console.log(" Room members fetched:",se?.length||0,"members"),f(se||[])}catch(se){console.error(" Error fetching room members:",se)}finally{p(!1),x.current=!1}},[l,s]),Q=async N=>{if(!(!l||!i))try{const J=!w.has(N);if(J?muteManager.muteUser(l.id,N):muteManager.unmuteUser(l.id,N),R(se=>{const ye=new Set(se);return J?ye.add(N):ye.delete(N),ye}),console.log(` ${J?"Muting":"Unmuting"} user:`,N),J){const{error:se}=await X.from("room_audio_mutes").insert({room_id:l.id,user_id:N,muted_by_user_id:i.id});if(se)throw console.error(" Error muting user in database:",se),muteManager.unmuteUser(l.id,N),R(ye=>{const Ce=new Set(ye);return Ce.delete(N),Ce}),se}else{const{error:se}=await X.from("room_audio_mutes").delete().eq("room_id",l.id).eq("user_id",N);if(se)throw console.error(" Error unmuting user in database:",se),muteManager.muteUser(l.id,N),R(ye=>{const Ce=new Set(ye);return Ce.add(N),Ce}),se}console.log(` User ${J?"muted":"unmuted"} successfully`)}catch(J){console.error(" Error toggling mute:",J),alert("Error: "+J.message)}},K=async N=>{if(!(!l||!window.confirm(`SPINNING BACK KICK! 

Are you sure you want to BAN this user? They will be immediately removed and cannot rejoin.`)))try{console.log(" Banning user:",N,"from room:",l.id);const{error:J}=await X.from("user_room_memberships").delete().eq("user_id",N).eq("room_id",l.id);if(J)throw console.error(" Error kicking during ban:",J),J;const{error:se}=await X.from("room_bans").insert({room_id:l.id,banned_user_id:N,banned_by_user_id:i.id,reason:"Spinning back kick by room owner"});if(se)throw console.error(" Error adding ban:",se),se;console.log(" User banned successfully"),await Y(),await L(),alert(" SPINNING BACK KICK! User has been BANNED from this room!")}catch(J){console.error(" Error in spinning back kick:",J),alert("Error banning user: "+J.message)}},P=async N=>{if(!(!l||!window.confirm("Are you sure you want to kick this user from the room?")))try{const{data:J}=await X.from("user_positions").select("email").eq("user_id",N).single(),se=J?.email,{error:ye}=await X.from("user_room_memberships").delete().eq("user_id",N).eq("room_id",l.id);if(ye)throw ye;console.log(" User kicked successfully"),N===i.id&&(console.log(" Immediate UI update: Kicked ourselves, clearing room"),typeof window.forceLeaveRoom=="function"&&window.forceLeaveRoom(l.id));const{data:Ce}=await X.from("user_room_memberships").select("id").eq("room_id",l.id),ee=Ce?.length||0;await X.from("chat_rooms").update({current_slots:ee}).eq("id",l.id),console.log(" Room slots updated to:",ee)}catch(J){console.error(" Error kicking user:",J),alert("Error kicking user: "+J.message)}};B.useEffect(()=>{s&&(console.log(" RoomMembersPanel expanded, loading data..."),Date.now()-A.current>5e3?(Y(!0),L(),k()):console.log(" Using cached room members data"))},[s,l,Y,L,k]),B.useEffect(()=>{if(!l||!s)return;console.log(" Setting up REAL-TIME room membership subscription");const N=X.channel("room_members_updates_optimized").on("postgres_changes",{event:"*",schema:"public",table:"user_room_memberships",filter:`room_id=eq.${l.id}`},J=>{console.log(" RoomMembersPanel REAL-TIME EVENT:",J.eventType),setTimeout(()=>{Y(!0)},100)}).subscribe(J=>{console.log(" RoomMembersPanel Subscription Status:",J)});return()=>{console.log(" Cleaning up room membership subscription"),X.removeChannel(N)}},[l,s,Y]),B.useEffect(()=>{if(!l||!s)return;console.log(" Setting up mute status subscription");const N=X.channel("room_mute_changes_optimized").on("postgres_changes",{event:"*",schema:"public",table:"room_audio_mutes",filter:`room_id=eq.${l.id}`},J=>{console.log(" Mute status changed:",J.eventType),setTimeout(()=>{k()},100)}).subscribe();return()=>{X.removeChannel(N)}},[l,s,k]);const ie=i?.id===l?.owner_id,W=N=>N?.split("@")[0]||"Unknown";return s?S.jsxs(S.Fragment,{children:[S.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>c(!1)}),S.jsxs("div",{style:{position:"absolute",top:"80px",right:"16px",width:"300px",background:"linear-gradient(to bottom, #0f172a 0%, #581c87 100%)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"12px",padding:"16px",zIndex:100,maxHeight:"400px",overflowY:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx("h4",{style:{color:"white",margin:0,fontSize:"16px",fontWeight:"600"},children:"Room Members"}),S.jsx("span",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",color:"rgba(255,255,255,0.7)"},children:d.length})]}),S.jsx("button",{onClick:()=>c(!1),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",padding:"6px",fontSize:"14px",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),g?S.jsx("div",{style:{color:"rgba(255,255,255,0.6)",textAlign:"center",fontSize:"14px",padding:"20px"},children:"Loading members..."}):d.length===0?S.jsx("div",{style:{color:"rgba(255,255,255,0.6)",textAlign:"center",fontSize:"14px",padding:"20px"},children:"No members in this room"}):S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:d.map(N=>S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",color:"white",border:"1px solid rgba(255,255,255,0.1)"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",flex:1},children:[S.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:N.user_positions?.is_online?"#10B981":"#6B7280",flexShrink:0}}),S.jsxs("div",{style:{minWidth:0,flex:1},children:[S.jsxs("div",{style:{fontSize:"13px",fontWeight:N.user_id===l.owner_id?"600":"400",color:N.user_id===l.owner_id?"#F59E0B":"white"},children:[W(N.user_positions?.email),N.user_id===l.owner_id&&S.jsx("span",{style:{marginLeft:"6px",fontSize:"12px"},children:""})]}),S.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.5)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:N.user_positions?.email})]})]}),ie&&N.user_id!==i.id&&S.jsxs("div",{style:{display:"flex",gap:"6px",flexShrink:0},children:[S.jsx("button",{onClick:J=>{J.stopPropagation(),Q(N.user_id)},title:w.has(N.user_id)?"Unmute User":"Mute User",style:{background:w.has(N.user_id)?"rgba(59, 130, 246, 0.3)":"rgba(156, 163, 175, 0.1)",border:w.has(N.user_id)?"2px solid rgba(59, 130, 246, 0.6)":"1px solid rgba(156, 163, 175, 0.3)",borderRadius:"6px",color:w.has(N.user_id)?"#3B82F6":"#9CA3AF",cursor:"pointer",padding:"6px 8px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",transform:w.has(N.user_id)?"scale(1.1)":"scale(1)"},onMouseDown:J=>{J.currentTarget.style.transform="scale(0.95)"},onMouseUp:J=>{J.currentTarget.style.transform=w.has(N.user_id)?"scale(1.1)":"scale(1)"},children:w.has(N.user_id)?"":""}),S.jsx("button",{onClick:J=>{J.stopPropagation(),r(N.user_id)},title:"Transfer Ownership",style:{background:"rgba(245, 158, 11, 0.2)",border:"1px solid rgba(245, 158, 11, 0.4)",borderRadius:"6px",color:"#F59E0B",cursor:"pointer",padding:"6px 8px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),S.jsx("button",{onClick:J=>{J.stopPropagation(),P(N.user_id)},title:"Kick User",style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"6px",color:"#EF4444",cursor:"pointer",padding:"6px 8px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),S.jsx("button",{onClick:J=>{J.stopPropagation(),K(N.user_id)},title:"Spinning Back Kick (Ban)",style:{background:"rgba(139, 69, 19, 0.3)",border:"1px solid rgba(139, 69, 19, 0.6)",borderRadius:"4px",color:"#8B4513",cursor:"pointer",padding:"4px 6px",fontSize:"10px",fontWeight:"bold"},children:""})]})]},N.user_id))}),ie&&S.jsx("div",{style:{marginTop:"16px",padding:"10px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"8px",color:"#F59E0B",fontSize:"12px",textAlign:"center"},children:" You are the room owner - You can mute, kick members or transfer ownership"})]})]}):S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginLeft:"auto"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255,255,255,0.1)",padding:"6px 12px",borderRadius:"20px",cursor:"pointer",border:"1px solid rgba(255,255,255,0.2)",transition:"all 0.2s"},onClick:()=>c(!0),children:[S.jsx("span",{style:{fontSize:"14px"},children:""}),S.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:l?.current_slots||0})]}),ie&&S.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.2)",border:"1px solid rgba(245, 158, 11, 0.4)",borderRadius:"20px",padding:"4px 10px",fontSize:"11px",color:"#F59E0B",display:"flex",alignItems:"center",gap:"4px"},children:[S.jsx("span",{children:""}),S.jsx("span",{children:"Owner"})]})]})}function e_({isMuted:l,isConnected:i,audioDevices:r,selectedDevice:s,participants:c,localVolume:d,onToggleMute:f,onDeviceChange:g,isForcedMuted:p=!1,audioDiagnostics:m,forceAllAudioPlayback:b}){return S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",background:"rgba(0, 0, 0, 0.4)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",marginBottom:"12px"},children:[S.jsxs("div",{style:{position:"relative"},children:[S.jsxs("button",{onClick:p?null:f,disabled:p,style:{padding:"10px",borderRadius:"50%",border:"none",background:p?"linear-gradient(135deg, #8B4513, #A0522D)":l?"linear-gradient(135deg, #EF4444, #DC2626)":"linear-gradient(135deg, #10B981, #059669)",color:"white",cursor:p?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"44px",height:"44px",fontSize:"18px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",position:"relative",opacity:p?.6:1},title:p?"You are muted by room owner":l?"Unmute microphone":"Mute microphone",children:[p?"":l?"":"",!l&&!p&&d>10&&S.jsx("div",{style:{position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",border:`2px solid ${d>50?"#10B981":"#3B82F6"}`,borderRadius:"50%",opacity:d/100,animation:"pulse 2s infinite"}})]}),p&&S.jsx("div",{style:{position:"absolute",top:"-5px",right:"-5px",background:"#EF4444",color:"white",borderRadius:"50%",width:"16px",height:"16px",fontSize:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1},children:[S.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"white"},children:p?"Microphone locked ":l?"Microphone muted":"Microphone active"}),S.jsx("div",{style:{fontSize:"12px",color:i?"#10B981":c.length>0?"#F59E0B":"#6B7280"},children:p?"Muted by room owner":i?` Connected to ${c.length} participant${c.length!==1?"s":""}`:c.length>0?` ${c.length} participant${c.length!==1?"s":""} in room`:" Audio chat available"})]}),!1,r.length>1&&S.jsx("select",{value:s,onChange:w=>g(w.target.value),disabled:p,style:{padding:"6px 10px",borderRadius:"6px",background:"rgba(0, 0, 0, 0.6)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",fontSize:"12px",minWidth:"120px",opacity:p?.5:1},children:r.map(w=>S.jsx("option",{value:w.deviceId,children:w.label||`Microphone ${r.indexOf(w)+1}`},w.deviceId))})]})}function t_({participants:l,localVolume:i,currentUser:r}){return l.length===0?null:S.jsxs("div",{style:{padding:"12px 16px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",marginBottom:"12px"},children:[S.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"white",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[S.jsx("span",{children:""}),S.jsxs("span",{children:["Active Speakers (",l.length,")"]})]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 12px",background:"rgba(59, 130, 246, 0.2)",borderRadius:"6px",border:"1px solid rgba(59, 130, 246, 0.4)"},children:[S.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #3B82F6, #1D4ED8)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"white"},children:"You"}),S.jsx("div",{style:{flex:1,fontSize:"13px",color:"white"},children:r?.email?.split("@")[0]||"You"}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:i>20?"#10B981":"#6B7280"},children:[S.jsx("div",{style:{width:"4px",height:"12px",background:i>60?"#10B981":i>20?"#3B82F6":"#6B7280",borderRadius:"2px",transform:"scaleY(0.6)",opacity:i>0?1:.3}}),S.jsx("div",{style:{width:"4px",height:"16px",background:i>40?"#10B981":i>10?"#3B82F6":"#6B7280",borderRadius:"2px",transform:"scaleY(0.8)",opacity:i>0?1:.3}}),S.jsx("div",{style:{width:"4px",height:"20px",background:i>20?"#10B981":"#3B82F6",borderRadius:"2px",opacity:i>0?1:.3}})]}),S.jsxs("div",{style:{fontSize:"11px",color:i>20?"#10B981":"#6B7280",minWidth:"30px",textAlign:"right"},children:[Math.round(i),"%"]})]}),l.map(s=>S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[S.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #8B5CF6, #7C3AED)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:""}),S.jsx("div",{style:{flex:1,fontSize:"13px",color:"white"},children:s.email?.split("@")[0]||"User"}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:s.volume>20?"#10B981":"#6B7280"},children:[S.jsx("div",{style:{width:"4px",height:"12px",background:s.volume>60?"#10B981":s.volume>20?"#3B82F6":"#6B7280",borderRadius:"2px",transform:"scaleY(0.6)",opacity:s.volume>0?1:.3}}),S.jsx("div",{style:{width:"4px",height:"16px",background:s.volume>40?"#10B981":s.volume>10?"#3B82F6":"#6B7280",borderRadius:"2px",transform:"scaleY(0.8)",opacity:s.volume>0?1:.3}}),S.jsx("div",{style:{width:"4px",height:"20px",background:s.volume>20?"#10B981":"#3B82F6",borderRadius:"2px",opacity:s.volume>0?1:.3}})]}),S.jsxs("div",{style:{fontSize:"11px",color:s.volume>20?"#10B981":"#6B7280",minWidth:"30px",textAlign:"right"},children:[Math.round(s.volume),"%"]})]},s.user_id))]})]})}const n_=()=>`audio-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;function i_(l,i){console.log(" useAudioChat HOOK LOADED - Room:",i?.name,"User:",l?.email,"Room ID:",i?.id);const[r,s]=B.useState(!0),[c,d]=B.useState(!1),[f,g]=B.useState([]),[p,m]=B.useState(null),[b,w]=B.useState([]),[R,A]=B.useState(0),x=B.useRef(null),k=B.useRef({}),L=B.useRef({}),Y=B.useRef(null),Q=B.useRef(null),K=B.useRef(null),P=B.useRef(null),ie={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"},{urls:"turn:turn.bistri.com:80",credential:"homeo",username:"homeo"}],iceTransportPolicy:"all",rtcpMuxPolicy:"require"};B.useEffect(()=>{console.log(" useAudioChat ROOM CHANGED:",{roomId:i?.id,roomName:i?.name,hasUser:!!l,previousRoom:P.current}),P.current=i?.id,i||console.log(" ROOM BECAME NULL - This might trigger audio cleanup")},[i,l]);const W=B.useCallback((y,_)=>{try{if(console.log(" SETUP_REMOTE_AUDIO_ELEMENT - User:",y,"Stream active:",_.active),document.querySelectorAll(`audio[data-user-id="${y}"]`).forEach(le=>{console.log(" Removing existing audio element:",le),le.remove()}),!_)return console.error(" No remote stream provided for audio element"),null;const j=_.getAudioTracks();if(console.log(" Audio tracks in stream:",j.length),j.length===0)return console.error(" Remote stream has NO audio tracks"),null;j.forEach((le,Ee)=>{console.log(` Track ${Ee}:`,{id:le.id,kind:le.kind,enabled:le.enabled,readyState:le.readyState,muted:le.muted,label:le.label}),le.enabled||(console.log(` Enabling disabled audio track ${le.id}`),le.enabled=!0)});const H=document.createElement("audio"),Z=n_();return H.setAttribute("data-user-id",y),H.setAttribute("data-audio-id",Z),H.srcObject=_,H.autoplay=!0,H.playsInline=!0,H.muted=!1,H.volume=1,H.style.display="none",console.log(" Created audio element:",{id:Z,userId:y,srcObject:!!H.srcObject,muted:H.muted,volume:H.volume}),Object.entries({loadedmetadata:()=>{console.log(` Audio metadata loaded for ${y}`,{duration:H.duration,readyState:H.readyState})},canplay:()=>{console.log(` Audio can play for ${y}, attempting play...`);const le=(Ee=1)=>{if(Ee>3){console.warn(` Giving up on playback after ${Ee} attempts`);return}H.play().then(()=>{console.log(` SUCCESS: Audio playback started for ${y} on attempt ${Ee}`)}).catch(It=>{console.warn(` Playback attempt ${Ee} failed:`,It.message),setTimeout(()=>le(Ee+1),Ee*1e3)})};le(1)},play:()=>{console.log(` Audio PLAY event for ${y}`,{currentTime:H.currentTime,paused:H.paused})},playing:()=>{console.log(` Audio PLAYING event for ${y}`,{currentTime:H.currentTime,duration:H.duration})},timeupdate:()=>{Math.random()<.01&&console.log(` Audio time update for ${y}:`,H.currentTime)},error:le=>{console.error(` Audio element ERROR for ${y}:`,{error:H.error,event:le})},stalled:()=>{console.warn(` Audio stalled for ${y}`)},ended:()=>{console.warn(` Audio ended for ${y}`)}}).forEach(([le,Ee])=>{H.addEventListener(le,Ee)}),document.body.appendChild(H),console.log(` Audio element added to DOM for ${y}`),setTimeout(()=>{H.paused&&H.readyState>=2&&(console.log(` Immediate playback attempt for ${y}`),H.play().catch(le=>{console.warn(" Immediate playback failed:",le.message)}))},500),H}catch(O){return console.error(` Error setting up audio element for ${y}:`,O),null}},[i]);B.useCallback(()=>{console.log(" FORCING ALL AUDIO PLAYBACK"),document.querySelectorAll("audio[data-user-id]").forEach(_=>{const O=_.getAttribute("data-user-id");_.paused&&(console.log(` Forcing playback for ${O}`),_.play().then(()=>{console.log(` Successfully forced playback for ${O}`)}).catch(j=>{console.error(` Failed to force playback for ${O}:`,j)}))})},[]),B.useEffect(()=>{const y=()=>{console.log(" User interaction detected, attempting to play all audio..."),window.pendingAudioElements&&(window.pendingAudioElements.forEach((j,H)=>{j&&j.paused&&(console.log(` Attempting to play pending audio ${H}`),j.play().catch(Z=>console.warn(" Failed to play pending audio:",Z)))}),window.pendingAudioElements=[]);const O=document.querySelectorAll("audio[data-user-id]");console.log(` Found ${O.length} audio elements to play`),O.forEach((j,H)=>{const Z=j.getAttribute("data-user-id")||"unknown";j.paused&&j.readyState>=2&&(console.log(` Attempting to play audio for: ${Z}`),j.play().then(()=>{console.log(` Successfully started audio for: ${Z}`)}).catch(ue=>{console.warn(` Failed to play audio for ${Z}:`,ue.message)}))})},_=["click","touchstart","keydown"];return _.forEach(O=>{document.addEventListener(O,y,{capture:!0,passive:!0})}),()=>{_.forEach(O=>{document.removeEventListener(O,y,{capture:!0})})}},[]);const N=B.useCallback(()=>{const y=document.querySelectorAll("audio[data-user-id]");console.log(" AUDIO PLAYBACK STATUS:"),y.forEach((_,O)=>{const j=_.getAttribute("data-user-id");console.log(` Audio ${O} (User: ${j}):`,{paused:_.paused,currentTime:_.currentTime,duration:_.duration,volume:_.volume,muted:_.muted,readyState:_.readyState,error:_.error}),!_.paused&&_.currentTime>0?console.log(` Audio for ${j} IS PLAYING and progressing`):_.paused?console.log(` Audio for ${j} is PAUSED`):console.log(` Audio for ${j} status unclear`)})},[]),J=B.useCallback(()=>{console.log(" SYSTEM AUDIO SETTINGS:"),Y.current&&console.log(" AudioContext state:",Y.current.state),document.querySelectorAll("audio").forEach((_,O)=>{console.log(` System Audio ${O}:`,{volume:_.volume,muted:_.muted,srcObject:!!_.srcObject})})},[]);B.useEffect(()=>{b.length>0&&setTimeout(J,2e3)},[b,J]),B.useEffect(()=>{const y=setInterval(()=>{N()},5e3);return()=>clearInterval(y)},[N]),B.useCallback(()=>{console.log(" AUDIO DEBUG INFO:"),console.log(" Local Stream:",x.current),console.log(" Peer Connections:",Object.keys(k.current)),console.log(" Remote Streams:",Object.keys(L.current)),console.log(" Audio Elements:",document.querySelectorAll("audio[data-user-id]").length),document.querySelectorAll("audio[data-user-id]").forEach(y=>{const _=y.getAttribute("data-user-id");console.log(` Audio ${_}:`,{paused:y.paused,readyState:y.readyState,error:y.error,srcObject:y.srcObject})})},[]);const se=B.useCallback(async()=>{try{console.log(" Getting audio devices...");const _=(await navigator.mediaDevices.enumerateDevices()).filter(O=>O.kind==="audioinput");console.log(" Available audio devices:",_.length),g(_),_.length>0&&!p&&m(_[0].deviceId)}catch(y){console.error(" Error getting audio devices:",y)}},[p]),ye=B.useCallback(async()=>{try{if(!i||!l)return console.log(" initializeAudio: No room or user"),null;console.log(" Initializing audio stream for room:",i.name);const y={audio:{deviceId:p?{exact:p}:void 0,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1},_=await navigator.mediaDevices.getUserMedia(y);return console.log(" Audio stream obtained - Tracks:",_.getAudioTracks().length),x.current=_,Ce(_),_.getAudioTracks().forEach(O=>{O.enabled=!r}),console.log(" Audio stream initialized successfully"),_}catch(y){return console.error(" Error initializing audio:",y),null}},[i,l,p,r]),Ce=y=>{try{console.log(" Setting up volume monitoring..."),Y.current=new(window.AudioContext||window.webkitAudioContext),Q.current=Y.current.createAnalyser(),Y.current.createMediaStreamSource(y).connect(Q.current),Q.current.fftSize=256,K.current&&clearInterval(K.current),K.current=setInterval(()=>{if(!Q.current)return;const O=new Uint8Array(Q.current.frequencyBinCount);Q.current.getByteFrequencyData(O);let j=0;for(let ue=0;ue<O.length;ue++)j+=O[ue];const H=j/O.length,Z=Math.min(100,H/128*100);A(Z)},100)}catch(_){console.error(" Error setting up volume monitoring:",_)}},ee=B.useCallback(y=>{console.log(" CREATING PEER CONNECTION for user:",y);const _=new RTCPeerConnection(ie);return x.current?(console.log(` Adding ${x.current.getTracks().length} local tracks to peer connection`),x.current.getTracks().forEach(O=>{console.log(" Adding track:",{kind:O.kind,enabled:O.enabled,readyState:O.readyState,muted:O.muted}),_.addTrack(O,x.current)})):console.error(" No local stream available for peer connection"),_.onconnectionstatechange=()=>{console.log(` Peer connection state for ${y}:`,_.connectionState),_.connectionState==="connected"?(console.log(` SUCCESSFULLY CONNECTED to user ${y}`),d(!0),setTimeout(()=>{const O=document.querySelectorAll(`audio[data-user-id="${y}"]`);console.log(` Post-connection audio check: ${O.length} elements`),O.forEach(j=>{j.paused&&(console.log(` Post-connection playback attempt for ${y}`),j.play().catch(H=>{console.warn(" Post-connection playback failed:",H.message)}))})},1e3)):_.connectionState==="failed"&&(console.error(` Connection failed for user ${y}`),setTimeout(()=>{_.connectionState==="failed"&&console.log(` Attempting to restart connection for ${y}`)},2e3))},_.oniceconnectionstatechange=()=>{console.log(` ICE connection state for ${y}:`,_.iceConnectionState)},k.current[y]=_,console.log(` Peer connection created for user ${y}`),_},[i,W,Te]);pc.ontrack=y=>{console.log(` Received remote track from user ${userId}:`,{streams:y.streams.length,track:y.track?{kind:y.track.kind,enabled:y.track.enabled,readyState:y.track.readyState,muted:y.track.muted}:"No track"});const _=y.streams[0];if(_){console.log(` Remote stream received for ${userId}:`,{id:_.id,active:_.active,tracks:_.getTracks().map(j=>({kind:j.kind,enabled:j.enabled,readyState:j.readyState}))}),_.getAudioTracks().forEach(j=>{console.log(" Enabling remote audio track:",j.id),j.enabled=!0}),L.current[userId]=_,w(j=>j.map(H=>H.user_id===userId?{...H,audioStream:_,volume:0}:H));const O=W(userId,_);O&&setTimeout(()=>{O.paused&&(console.log(` Forcing immediate playback for ${userId}`),O.play().catch(j=>{console.warn(` Immediate playback failed for ${userId}:`,j.message)}))},1e3),de(userId,_)}else console.error(" No remote stream in track event")};const de=(y,_)=>{try{console.log(` Setting up remote volume monitoring for ${y}`);const O=new(window.AudioContext||window.webkitAudioContext),j=O.createAnalyser();O.createMediaStreamSource(_).connect(j),j.fftSize=256;const ue=setInterval(()=>{const le=new Uint8Array(j.frequencyBinCount);j.getByteFrequencyData(le);let Ee=0;for(let Zt=0;Zt<le.length;Zt++)Ee+=le[Zt];const It=Ee/le.length,vi=Math.min(100,It/128*100);w(Zt=>Zt.map(bi=>bi.user_id===y?{...bi,volume:vi}:bi))},100);L.current.volumeIntervals||(L.current.volumeIntervals={}),L.current.volumeIntervals[y]=ue}catch(O){console.error(` Error setting up remote volume monitoring for ${y}:`,O)}},Te=B.useCallback(async(y,_,O)=>{if(!i||!l){console.log(" Cannot send signaling: No room or user");return}try{console.log(` Sending ${_} to user ${y} in room ${i.name}`);const{error:j}=await X.from("webrtc_signaling").insert({room_id:i.id,from_user_id:l.id,to_user_id:y,signal_type:_,signal_data:O});j&&console.error(" Error sending signaling message:",j)}catch(j){console.error(" Error sending signaling message:",j)}},[i,l]),ve=B.useCallback(async y=>{if(console.log(" SIGNALING MESSAGE - Type:",y.signal_type,"From:",y.from_user_id,"Room stable:",!!i),y.to_user_id!==l.id)return;const{from_user_id:_,signal_type:O,signal_data:j}=y;let H=k.current[_];try{switch(O){case"offer":console.log(` Processing offer from ${_}`),H||(H=ee(_)),await H.setRemoteDescription(new RTCSessionDescription(j));const Z=await H.createAnswer();await H.setLocalDescription(Z),await Te(_,"answer",Z);break;case"answer":console.log(` Processing answer from ${_}`),H&&await H.setRemoteDescription(new RTCSessionDescription(j));break;case"ice-candidate":console.log(` Processing ICE candidate from ${_}`),H&&await H.addIceCandidate(new RTCIceCandidate(j));break}}catch(Z){console.error(` Error handling signaling message from ${_}:`,Z)}},[l,ee,Te,i]),M=B.useCallback(async y=>{if(console.log(" CONNECT_TO_PARTICIPANTS - Count:",y.length,"Room:",i?.name),!x.current&&(console.log(" No local stream, initializing audio..."),!await ye())){console.error(" Failed to initialize audio stream");return}if(x.current){const _=x.current.getAudioTracks();console.log(" Local audio tracks:",_.length),_.forEach((O,j)=>{console.log(` Local track ${j}:`,{enabled:O.enabled,readyState:O.readyState,muted:O.muted}),O.enabled||(console.log(" Enabling local audio track"),O.enabled=!0)})}for(const _ of y)if(_.user_id!==l.id){if(k.current[_.user_id]){console.log(` Already connected to ${_.user_id}`);continue}console.log(` Creating offer for ${_.user_id}`);try{const O=ee(_.user_id),j=await O.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!1});console.log(` Created offer for ${_.user_id}:`,j.type),await O.setLocalDescription(j),await Te(_.user_id,"offer",j),console.log(` Offer sent to ${_.user_id}`)}catch(O){console.error(` Error creating offer for ${_.user_id}:`,O)}}},[l,ye,ee,Te,i]),I=B.useCallback(async()=>{if(console.log(` Toggling mute: currently ${r}`),!x.current&&!await ye())return;const y=!r;s(y),x.current.getAudioTracks().forEach(_=>{_.enabled=!y}),console.log(y?" Microphone muted":" Microphone unmuted")},[r,ye]),ae=B.useCallback(()=>{console.log(" AUDIO DIAGNOSTICS REPORT:"),console.log(" LOCAL STREAM:",{exists:!!x.current,active:x.current?.active,tracks:x.current?.getTracks().length}),x.current&&x.current.getTracks().forEach((_,O)=>{console.log(` Local track ${O}:`,{kind:_.kind,enabled:_.enabled,readyState:_.readyState,muted:_.muted})}),console.log(" PEER CONNECTIONS:",Object.keys(k.current).length),Object.entries(k.current).forEach(([_,O])=>{console.log(` Peer ${_}:`,{connectionState:O.connectionState,iceConnectionState:O.iceConnectionState,signalingState:O.signalingState})}),console.log(" REMOTE STREAMS:",Object.keys(L.current).length),Object.entries(L.current).forEach(([_,O])=>{console.log(` Remote stream ${_}:`,{active:O.active,tracks:O.getTracks().length}),O.getTracks().forEach((j,H)=>{console.log(` Remote track ${H} for ${_}:`,{kind:j.kind,enabled:j.enabled,readyState:j.readyState})})});const y=document.querySelectorAll("audio[data-user-id]");console.log(" AUDIO ELEMENTS IN DOM:",y.length),y.forEach((_,O)=>{const j=_.getAttribute("data-user-id");console.log(` Audio ${O} (${j}):`,{paused:_.paused,currentTime:_.currentTime,volume:_.volume,muted:_.muted,readyState:_.readyState,error:_.error})})},[]),pe=B.useCallback(()=>{console.log(" CLEANUP_AUDIO CALLED - Reason:",i?"Manual cleanup":"Room is null","Room was:",i?.name),x.current&&(x.current.getTracks().forEach(y=>y.stop()),x.current=null),K.current&&(clearInterval(K.current),K.current=null),Y.current&&(Y.current.close(),Y.current=null),L.current.volumeIntervals&&Object.values(L.current.volumeIntervals).forEach(clearInterval),Object.values(k.current).forEach(y=>{y.close()}),k.current={},L.current={},document.querySelectorAll("audio[data-user-id]").forEach(y=>y.remove()),w([]),A(0),d(!1),console.log(" All audio resources cleaned up")},[i]),Ae=B.useCallback(y=>{console.log(` Force mute: ${y}`),s(y),x.current&&x.current.getAudioTracks().forEach(_=>{_.enabled=!y})},[]);return B.useEffect(()=>{console.log(" ROOM STABILITY DEBUG - Room exists:",!!i,"Room ID:",i?.id,"Room Name:",i?.name);const y=setInterval(()=>{console.log(" ROOM STATUS CHECK:",{roomExists:!!i,roomId:i?.id,roomName:i?.name,audioElements:document.querySelectorAll("audio").length,participantsCount:b.length,isConnected:c,peerConnections:Object.keys(k.current).length})},5e3);return()=>clearInterval(y)},[i,b.length,c]),B.useEffect(()=>(console.log(" Audio chat hook initialized for room:",i?.id,i?.name),se(),()=>{console.log(" Audio chat hook cleanup for room:",i?.name),pe()}),[se,pe,i]),B.useEffect(()=>{if(!i){console.log(" Room is null, but delaying audio cleanup...");const y=setTimeout(()=>{i||(console.log(" Room still null after delay, cleaning up audio"),pe())},1e4);return()=>clearTimeout(y)}console.log(" Room available, ensuring audio is ready:",i.name)},[i,pe]),{isMuted:r,isConnected:c,audioDevices:f,selectedDevice:p,participants:b,localVolume:R,toggleMute:I,setSelectedDevice:m,initializeAudio:ye,cleanupAudio:pe,connectToParticipants:M,handleSignalingMessage:ve,forceMuteUser:Ae,localStream:x.current,debugAudioConnections:N,audioDiagnostics:ae,forceAllAudioPlayback:()=>{console.log(" FORCING ALL AUDIO PLAYBACK"),document.querySelectorAll("audio[data-user-id]").forEach(y=>{y.paused&&y.play().catch(_=>console.warn("Playback failed:",_))})}}}class Kg extends pr.Component{constructor(i){super(i),this.state={hasError:!1,error:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,r){console.error(" Audio Error Boundary caught:",i,r)}render(){return this.state.hasError?S.jsx("div",{style:{padding:"12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",color:"#EF4444",fontSize:"12px",marginBottom:"12px"},children:" Audio temporarily unavailable"}):this.props.children}}class a_{constructor(){this.mutedUsers=new Map,this.listeners=new Map}muteUser(i,r){this.mutedUsers.has(i)||this.mutedUsers.set(i,new Set),this.mutedUsers.get(i).add(r),this.notifyListeners(i,r,!0),console.log(` MuteManager: User ${r} muted in room ${i}`)}unmuteUser(i,r){this.mutedUsers.has(i)&&this.mutedUsers.get(i).delete(r),this.notifyListeners(i,r,!1),console.log(` MuteManager: User ${r} unmuted in room ${i}`)}isUserMuted(i,r){return this.mutedUsers.has(i)&&this.mutedUsers.get(i).has(r)}addListener(i,r){return this.listeners.has(i)||this.listeners.set(i,[]),this.listeners.get(i).push(r),()=>{if(this.listeners.has(i)){const s=this.listeners.get(i),c=s.indexOf(r);c>-1&&s.splice(c,1)}}}notifyListeners(i,r,s){window.dispatchEvent(new CustomEvent("userMuteStatusChanged",{detail:{roomId:i,userId:r,muted:s}})),this.listeners.has(i)&&this.listeners.get(i).forEach(c=>{c(r,s)})}clearRoom(i){this.mutedUsers.delete(i),this.listeners.delete(i)}}const dr=new a_;function r_({user:l,room:i,onSendMessage:r=null}){console.log(" ChatPanel RENDER - Room:",i?.name,"User:",l?.email);const[s,c]=B.useState(""),[d,f]=B.useState([]),g=B.useRef(null),[p,m]=B.useState(i),{isMuted:b,isConnected:w,audioDevices:R,selectedDevice:A,participants:x,localVolume:k,toggleMute:L,setSelectedDevice:Y,cleanupAudio:Q,connectToParticipants:K,handleSignalingMessage:P,forceMuteUser:ie}=i_(l,i),[W,N]=B.useState(!1);B.useEffect(()=>{if(!i||!l){N(!1);return}console.log(" Checking initial mute status for room:",i.name),(async()=>{try{const{data:ve,error:M}=await X.rpc("is_user_muted_in_room",{p_room_id:i.id,p_user_id:l.id});!M&&ve?(N(!0),ie(!0),dr.muteUser(i.id,l.id),console.log(" User is muted in room")):console.log(" User is not muted in room")}catch(ve){console.error("Error checking initial mute status:",ve)}})();const de=dr.addListener(i.id,(ve,M)=>{ve===l.id&&(console.log(` Mute status changed to ${M}`),N(M),ie(M))}),Te=X.channel("user_mute_status").on("postgres_changes",{event:"*",schema:"public",table:"room_audio_mutes",filter:`room_id=eq.${i.id}`},ve=>{if(ve.new&&ve.new.user_id===l.id||ve.old&&ve.old.user_id===l.id){const M=ve.eventType==="INSERT";console.log(` Database sync: User ${M?"muted":"unmuted"}`),M?dr.muteUser(i.id,l.id):dr.unmuteUser(i.id,l.id)}}).subscribe();return()=>{de(),X.removeChannel(Te)}},[i,l,ie]),B.useEffect(()=>()=>{i&&dr.clearRoom(i.id)},[i]),B.useEffect(()=>{const ee=de=>{de.detail&&de.detail.userId===l.id&&de.detail.roomId===i?.id&&(console.log(" GLOBAL: Immediate mute update received"),N(de.detail.muted),ie(de.detail.muted))};return window.addEventListener("userMuteStatusChanged",ee),()=>{window.removeEventListener("userMuteStatusChanged",ee)}},[l,i,ie]),B.useEffect(()=>{if(!i||!l)return;console.log(" Setting up WebRTC signaling subscription for room:",i.name);const ee=X.channel("webrtc_signaling").on("postgres_changes",{event:"INSERT",schema:"public",table:"webrtc_signaling",filter:`room_id=eq.${i.id}`},de=>{console.log(" WebRTC signaling message received"),P(de.new)}).subscribe(de=>{console.log(" WebRTC signaling subscription status:",de)});return()=>{X.removeChannel(ee)}},[i,l,P]),B.useEffect(()=>{if(!i||!l)return;console.log(" Connecting to room members for room:",i.name),(async()=>{try{const{data:de,error:Te}=await X.from("user_room_memberships").select(`
            user_id,
            user_positions!user_room_memberships_user_id_fkey (
              email
            )
          `).eq("room_id",i.id);if(Te)throw Te;const ve=de.filter(M=>M.user_id!==l.id).map(M=>({user_id:M.user_id,email:M.user_positions?.email,volume:0}));console.log(" Connecting to room participants:",ve.length),await K(ve)}catch(de){console.error("Error connecting to room members:",de)}})()},[i,l,K]),B.useEffect(()=>{console.log(" ChatPanel room prop changed:",i?.name),m(i)},[i]),B.useEffect(()=>{p||(console.log(" Room is null, clearing room messages"),f([]),Q())},[p,Q]),B.useEffect(()=>{if(!i){console.log(" Room is null, clearing room messages"),f([]);return}(async()=>{try{console.log(" Fetching room messages for:",i.name);const{data:Te,error:ve}=await X.from("user_room_memberships").select("joined_at").eq("user_id",l.id).eq("room_id",i.id).single();if(ve){console.error(" Error fetching membership:",ve);return}const M=Te.joined_at;console.log(" User joined room at:",M);const{data:I,error:ae}=await X.from("room_messages").select("*").eq("room_id",i.id).gt("created_at",M).order("created_at",{ascending:!0});if(ae)throw ae;f(I||[]),console.log(" Room messages fetched (after join):",I?.length||0)}catch(Te){console.error("fetchRoomMessages error",Te)}})();const de=X.channel("room_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"room_messages",filter:`room_id=eq.${i.id}`},Te=>{console.log(" New room message"),f(ve=>[...ve,Te.new])}).subscribe();return()=>{X.removeChannel(de)}},[i,l]),B.useEffect(()=>{g.current?.scrollIntoView({behavior:"smooth"})},[d]);const J=async ee=>{ee.preventDefault(),!(!s.trim()||!i)&&(typeof r=="function"&&await r(s.trim()),c(""))},se=ee=>new Date(ee).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),ye=ee=>ee.split("@")[0],Ce=async ee=>{if(!(!i||!window.confirm("Are you sure you want to transfer room ownership? You will no longer be the owner.")))try{const{error:de}=await X.from("chat_rooms").update({owner_id:ee}).eq("id",i.id);if(de)throw de;alert("Ownership transferred successfully!"),console.log(" Ownership transferred to:",ee),setTimeout(()=>{window.location.reload()},1e3)}catch(de){console.error(" Error transferring ownership:",de),alert("Error transferring ownership: "+de.message)}};return i?S.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",background:"linear-gradient(to bottom, #0f172a 0%, #581c87 100%)",color:"white",fontFamily:"sans-serif"},children:[S.jsx(Yg,{room:i,user:l,onTransferOwnership:Ce}),S.jsxs("div",{style:{flexShrink:0,height:"100px",padding:"0 16px",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"linear-gradient(to right, rgba(76, 29, 149, 0.4), rgba(0, 0, 0, 0.6))",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[S.jsx("div",{style:{fontSize:"24px"},children:""}),S.jsxs("div",{children:[S.jsx("div",{style:{fontWeight:"600",fontSize:"18px"},children:i.name}),S.jsxs("div",{style:{fontSize:"12px",opacity:.6},children:["Room Chat  ",p?.current_slots||0," members  Created by ",ye(p?.creator_email||"Unknown")]})]})]}),S.jsx(Yg,{room:i,user:l,onTransferOwnership:Ce})]}),S.jsx(Kg,{children:p&&S.jsx(e_,{isMuted:b,isConnected:w,isForcedMuted:W,audioDevices:R,selectedDevice:A,participants:x,localVolume:k,onToggleMute:W?()=>{}:L,onDeviceChange:Y})}),S.jsx(Kg,{children:p&&x.length>0&&S.jsx(t_,{participants:x,localVolume:k,currentUser:l})}),S.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px",background:"linear-gradient(to bottom, rgba(15, 23, 42, 0.5), rgba(88, 28, 135, 0.3))"},children:[d.length===0&&S.jsxs("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.6)",marginTop:"32px"},children:[S.jsxs("div",{style:{fontSize:"18px",marginBottom:"8px"},children:[" Welcome to ",i.name,"!"]}),S.jsx("div",{style:{fontSize:"14px"},children:"Start the conversation..."})]}),S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:d.map(ee=>{if(ee.type!=="user")return S.jsx("div",{style:{textAlign:"center"},children:S.jsx("div",{style:{display:"inline-block",background:"rgba(55, 65, 81, 0.5)",border:"1px solid rgba(75, 85, 99, 0.3)",borderRadius:"9999px",padding:"8px 16px",maxWidth:"320px"},children:S.jsx("span",{style:{color:"rgba(209, 213, 219, 1)",fontSize:"14px",fontStyle:"italic"},children:ee.content})})},ee.id);const de=ee.sender_email===l?.email,Te=ye(ee.sender_email);return S.jsx("div",{style:{display:"flex",justifyContent:de?"flex-end":"flex-start"},children:S.jsxs("div",{style:{maxWidth:"80%",marginLeft:de?"auto":"0"},children:[!de&&S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px",paddingLeft:"12px"},children:[S.jsx("div",{style:{width:"8px",height:"8px",background:"#10B981",borderRadius:"50%",animation:"pulse 2s infinite"}}),S.jsx("span",{style:{fontSize:"12px",color:"#10B981",fontWeight:"500"},children:Te})]}),S.jsxs("div",{style:{position:"relative",padding:"12px 16px",borderRadius:"16px",background:de?"linear-gradient(135deg, #3B82F6, #1D4ED8)":"#374151",borderTopRightRadius:de?"4px":"16px",borderTopLeftRadius:de?"16px":"4px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[S.jsx("div",{style:{color:"white",fontSize:"14px",lineHeight:"1.5",wordBreak:"break-word"},children:ee.content}),S.jsx("div",{style:{fontSize:"11px",marginTop:"8px",color:de?"rgba(219, 234, 254, 1)":"rgba(156, 163, 175, 1)",textAlign:"right"},children:se(ee.created_at)})]}),de&&S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px",paddingRight:"12px",justifyContent:"flex-end"},children:[S.jsx("span",{style:{fontSize:"12px",color:"#93C5FD",fontWeight:"500"},children:"You"}),S.jsx("div",{style:{width:"8px",height:"8px",background:"#60A5FA",borderRadius:"50%"}})]})]})},ee.id)})}),S.jsx("div",{ref:g})]}),S.jsx("div",{style:{flexShrink:0,minHeight:"80px",borderTop:"1px solid rgba(255,255,255,0.1)",background:"linear-gradient(to right, rgba(0, 0, 0, 0.6), rgba(76, 29, 149, 0.4))"},children:S.jsxs("form",{onSubmit:J,style:{height:"100%",padding:"16px",display:"flex",alignItems:"center",gap:"12px",width:"100%"},children:[S.jsx("input",{value:s,onChange:ee=>c(ee.target.value),placeholder:i?`Message in ${i.name}...`:"Join a room to chat...",disabled:!i,style:{flex:1,padding:"12px 16px",borderRadius:"12px",background:"rgba(0, 0, 0, 0.4)",color:"white",border:"1px solid rgba(255,255,255,0.1)",outline:"none",opacity:i?1:.6}}),S.jsx("button",{type:"submit",disabled:!s.trim()||!i,style:{padding:"12px 24px",background:!s.trim()||!i?"linear-gradient(135deg, #4B5563, #374151)":"linear-gradient(135deg, #3B82F6, #7C3AED)",color:"white",fontWeight:"600",borderRadius:"12px",border:"none",cursor:!s.trim()||!i?"not-allowed":"pointer",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",transition:"all 0.2s",opacity:!s.trim()||!i?.5:1},children:"Send"})]})}),S.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
          }
        `})]}):S.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",background:"linear-gradient(to bottom, #0f172a 0%, #581c87 100%)",color:"white",alignItems:"center",justifyContent:"center",fontFamily:"sans-serif"},children:[S.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),S.jsx("div",{style:{fontSize:"18px",marginBottom:"8px"},children:"Welcome to Star Chat"}),S.jsx("div",{style:{fontSize:"14px",color:"rgba(255,255,255,0.6)"},children:"Join a room to start chatting"})]})}function s_({user:l,friends:i,privateMessages:r,onSendPrivateMessage:s,onMarkMessagesAsRead:c}){const[d,f]=B.useState(!1),[g,p]=B.useState(null),[m,b]=B.useState({}),[w,R]=B.useState(new Set),[A,x]=B.useState(!1),k=B.useRef({}),L=B.useRef({}),Y=B.useRef(null),Q=B.useRef({}),K=pr.useMemo(()=>{const y=new Set;return i.filter(_=>y.has(_.friend_id)?!1:(y.add(_.friend_id),!0))},[i]),P=B.useCallback(y=>(r[y]||[]).filter(O=>O.receiver_id===l.id&&!O.is_read),[l.id,r]),ie=B.useCallback(async y=>{const _=P(y);if(_.length>0&&!w.has(y)){console.log(` Marking ${_.length} messages as read for friend ${y}`),R(O=>new Set([...O,y]));try{await c(y),console.log(` Successfully marked messages as read for ${y}`)}catch(O){console.error(" Failed to mark messages as read:",O)}finally{setTimeout(()=>{R(O=>{const j=new Set(O);return j.delete(y),j})},1e3)}}},[P,c,w]),W=B.useCallback(y=>{A||x(!0),Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{x(!1)},1e3)},[A]),N=B.useCallback(y=>{if(!g||g!==y)return;const _=L.current[y],O=k.current[y];if(!_||!O||A)return;const H=_.scrollHeight-_.scrollTop-_.clientHeight<=100,Z=r[y]?.length||0,ue=Q.current[y]||0,le=Z>ue;(H||le)&&setTimeout(()=>{O.scrollIntoView({behavior:"smooth",block:"nearest"})},100),Q.current[y]=Z},[g,A,r]);B.useEffect(()=>{g&&d&&ie(g)},[g,d,ie]),B.useEffect(()=>{if(d&&g){const y=setTimeout(()=>{ie(g)},100);return()=>clearTimeout(y)}},[d,g,ie]),B.useEffect(()=>{g&&N(g)},[r,g,N]),B.useEffect(()=>{g&&(x(!1),Q.current[g]=r[g]?.length||0)},[g,r]),B.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current)},[]);const J=B.useCallback(y=>{y===g&&d&&ie(y)},[g,d,ie]),se=B.useCallback(y=>{y===g&&d&&ie(y)},[g,d,ie]),ye=B.useCallback(y=>{const _=k.current[y];_&&(x(!1),_.scrollIntoView({behavior:"smooth"}))},[]),Ce=y=>new Date(y).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),ee=y=>y.split("@")[0],de=y=>{const _=m[y]||"";_.trim()&&(s(y,_.trim()),b(O=>({...O,[y]:""})),x(!1))},Te=(y,_)=>{b(O=>({...O,[y]:_}))},ve=(y,_)=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),de(y))},M=y=>{p(y),d||f(!0),x(!1)},I=(y,_)=>{if(_.stopPropagation(),g===y){const O=K.filter(j=>j.friend_id!==y);O.length>0?p(O[0].friend_id):(p(null),f(!1))}},ae=y=>P(y).length,pe=pr.useMemo(()=>K.reduce((y,_)=>y+ae(_.friend_id),0),[K,P]),Ae=y=>{const _=L.current[y];return _?!(_.scrollHeight-_.scrollTop-_.clientHeight<=200):!1};return S.jsxs(S.Fragment,{children:[S.jsxs("button",{onClick:()=>f(!d),style:{position:"fixed",bottom:"20px",left:"20px",zIndex:1e3,background:"linear-gradient(135deg, #3B82F6, #7C3AED)",color:"white",border:"none",borderRadius:"50px",padding:"12px 20px",fontWeight:"bold",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[S.jsxs("span",{children:[" Friends (",K.length,")"]}),pe>0&&S.jsx("div",{style:{background:"#EF4444",color:"white",borderRadius:"50%",width:"20px",height:"20px",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"4px"},children:pe})]}),d&&S.jsxs("div",{style:{position:"fixed",bottom:"80px",left:"20px",width:"400px",height:"500px",background:"linear-gradient(to bottom, #0f172a 0%, #581c87 100%)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",zIndex:1e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[S.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"Private Chats"}),S.jsx("button",{onClick:()=>f(!1),style:{background:"none",border:"none",color:"white",fontSize:"18px",cursor:"pointer"},children:""})]}),S.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[S.jsx("div",{style:{width:"150px",borderRight:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.2)",overflowY:"auto"},children:K.map(y=>S.jsxs("div",{onClick:()=>M(y.friend_id),style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid rgba(255,255,255,0.05)",background:g===y.friend_id?"rgba(59, 130, 246, 0.3)":"transparent",display:"flex",alignItems:"center",gap:"8px",position:"relative"},children:[S.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:y.is_online?"#10B981":"#6B7280"}}),S.jsx("div",{style:{flex:1,fontSize:"12px"},children:ee(y.friend_email)}),ae(y.friend_id)>0&&S.jsx("div",{style:{background:"#EF4444",color:"white",borderRadius:"50%",width:"16px",height:"16px",fontSize:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:ae(y.friend_id)}),w.has(y.friend_id)&&S.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#3B82F6",animation:"pulse 1s infinite"}})]},y.friend_id))}),S.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",position:"relative"},children:g?S.jsxs(S.Fragment,{children:[S.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.2)",fontSize:"14px",fontWeight:"bold"},children:S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsxs("span",{children:[ee(K.find(y=>y.friend_id===g)?.friend_email||"Friend"),w.has(g)&&S.jsx("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#3B82F6"},children:"(Marking as read...)"})]}),S.jsx("button",{onClick:y=>I(g,y),style:{background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"14px"},children:""})]})}),S.jsxs("div",{ref:y=>L.current[g]=y,style:{flex:1,overflowY:"auto",padding:"16px",background:"linear-gradient(to bottom, rgba(15, 23, 42, 0.5), rgba(88, 28, 135, 0.3))",cursor:"pointer"},onClick:()=>se(g),onScroll:()=>W(g),children:[(r[g]||[]).map(y=>{const _=y.sender_id===l.id;return S.jsx("div",{style:{display:"flex",justifyContent:_?"flex-end":"flex-start",marginBottom:"12px"},children:S.jsxs("div",{style:{maxWidth:"80%",padding:"8px 12px",borderRadius:"12px",background:_?"#3B82F6":"#374151",borderTopRightRadius:_?"4px":"12px",borderTopLeftRadius:_?"12px":"4px"},children:[S.jsx("div",{style:{fontSize:"13px",lineHeight:"1.4"},children:y.content}),S.jsxs("div",{style:{fontSize:"10px",marginTop:"4px",color:_?"rgba(219, 234, 254, 1)":"rgba(156, 163, 175, 1)",textAlign:"right",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"4px"},children:[Ce(y.created_at),_&&S.jsx("span",{style:{fontSize:"8px",opacity:y.is_read?1:.5},children:y.is_read?"":""})]})]})},y.id)}),S.jsx("div",{ref:y=>k.current[g]=y})]}),Ae(g)&&S.jsx("button",{onClick:()=>ye(g),style:{position:"absolute",bottom:"70px",right:"20px",background:"rgba(59, 130, 246, 0.9)",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:100},title:"Scroll to bottom",children:""}),S.jsx("div",{style:{padding:"12px",borderTop:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.3)"},children:S.jsxs("div",{style:{display:"flex",gap:"8px"},children:[S.jsx("input",{value:m[g]||"",onChange:y=>Te(g,y.target.value),onKeyPress:y=>ve(g,y),onFocus:()=>J(g),placeholder:"Type a private message...",style:{flex:1,padding:"8px 12px",borderRadius:"20px",background:"rgba(0,0,0,0.4)",color:"white",border:"1px solid rgba(255,255,255,0.2)",outline:"none",fontSize:"13px"}}),S.jsx("button",{onClick:()=>de(g),disabled:!m[g]?.trim(),style:{padding:"8px 16px",background:m[g]?.trim()?"linear-gradient(135deg, #3B82F6, #7C3AED)":"#4B5563",color:"white",border:"none",borderRadius:"20px",cursor:m[g]?.trim()?"pointer":"not-allowed",fontSize:"13px"},children:"Send"})]})})]}):S.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.6)",fontSize:"14px"},children:"Select a friend to start chatting"})})]})]}),S.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
          }
        `})]})}function l_({user:l,onCreateRoom:i,onClose:r}){const[s,c]=B.useState(""),[d,f]=B.useState(""),[g,p]=B.useState(10),[m,b]=B.useState(!1),w=async R=>{if(R.preventDefault(),!(!s.trim()||m)){b(!0);try{console.log(" Creating room with data:",{name:s.trim(),description:d.trim(),maxSlots:g});const{error:A}=await X.from("user_room_memberships").delete().eq("user_id",l.id);A?console.error(" Error leaving current room:",A):console.log(" Left current room before creating new one");const{data:x,error:k}=await X.from("chat_rooms").insert({name:s.trim(),description:d.trim(),owner_id:l.id,max_slots:g,current_slots:1,is_public:!0}).select().single();if(k){console.error(" Room creation error:",k),alert("Error creating room: "+k.message);return}console.log(" Room created successfully:",x);const{error:L}=await X.from("user_room_memberships").insert({user_id:l.id,room_id:x.id});L?console.error(" Room join error:",L):console.log(" Room creator auto-joined room"),typeof i=="function"&&i(x),alert(`Room "${s}" created successfully! `),r()}catch(A){console.error(" Room creation exception:",A),alert("Error creating room: "+A.message)}finally{b(!1)}}};return S.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:S.jsxs("div",{style:{background:"linear-gradient(to bottom, #0f172a 0%, #581c87 100%)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"12px",padding:"24px",width:"400px",maxWidth:"90vw",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[S.jsx("h2",{style:{color:"white",marginBottom:"20px",textAlign:"center",fontSize:"20px"},children:"Create New Room"}),S.jsxs("form",{onSubmit:w,children:[S.jsxs("div",{style:{marginBottom:"16px"},children:[S.jsx("label",{style:{display:"block",color:"white",marginBottom:"8px",fontSize:"14px"},children:"Room Name *"}),S.jsx("input",{type:"text",value:s,onChange:R=>c(R.target.value),placeholder:"Enter room name",required:!0,disabled:m,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"rgba(0,0,0,0.4)",color:"white",border:"1px solid rgba(255,255,255,0.2)",outline:"none",opacity:m?.6:1}})]}),S.jsxs("div",{style:{marginBottom:"16px"},children:[S.jsx("label",{style:{display:"block",color:"white",marginBottom:"8px",fontSize:"14px"},children:"Description (Optional)"}),S.jsx("textarea",{value:d,onChange:R=>f(R.target.value),placeholder:"Room description",rows:"3",disabled:m,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"rgba(0,0,0,0.4)",color:"white",border:"1px solid rgba(255,255,255,0.2)",outline:"none",resize:"vertical",opacity:m?.6:1}})]}),S.jsxs("div",{style:{marginBottom:"24px"},children:[S.jsxs("label",{style:{display:"block",color:"white",marginBottom:"8px",fontSize:"14px"},children:["Max Slots: ",g]}),S.jsx("input",{type:"range",min:"2",max:"20",value:g,onChange:R=>p(parseInt(R.target.value)),disabled:m,style:{width:"100%",height:"6px",borderRadius:"3px",background:"rgba(255,255,255,0.2)",outline:"none",opacity:m?.6:1}}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"rgba(255,255,255,0.6)",fontSize:"12px",marginTop:"4px"},children:[S.jsx("span",{children:"2"}),S.jsx("span",{children:"20"})]})]}),S.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[S.jsx("button",{type:"button",onClick:r,disabled:m,style:{padding:"10px 20px",background:"rgba(255,255,255,0.1)",color:"white",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",cursor:m?"not-allowed":"pointer",opacity:m?.6:1},children:"Cancel"}),S.jsx("button",{type:"submit",disabled:!s.trim()||m,style:{padding:"10px 20px",background:!s.trim()||m?"rgba(59, 130, 246, 0.5)":"linear-gradient(135deg, #3B82F6, #7C3AED)",color:"white",border:"none",borderRadius:"8px",cursor:!s.trim()||m?"not-allowed":"pointer"},children:m?"Creating...":"Create Room"})]})]})]})})}function o_({user:l}){const[i,r]=B.useState([]),[s,c]=B.useState(!0),[d,f]=B.useState(null),[g,p]=B.useState(null),[m,b]=B.useState(!0),w=async()=>{try{console.log(" Fetching rooms with creator info...");const{data:x,error:k}=await X.from("chat_rooms").select(`
        *,
        user_positions!chat_rooms_owner_id_fkey (
          email
        )
      `).eq("is_public",!0).order("created_at",{ascending:!1});if(k)throw k;console.log(" Rooms fetched with creator info:",x),r(x||[])}catch(x){console.error(" fetchRooms error",x)}finally{c(!1)}},R=async()=>{if(l)try{console.log(" Fetching current user room...");const{data:x,error:k}=await X.from("user_room_memberships").select("room_id").eq("user_id",l.id);if(k){console.error(" Error fetching user rooms:",k);return}console.log(" User room memberships:",x),x&&x.length>0?(p(x[0].room_id),console.log(" Current user room set to:",x[0].room_id)):(p(null),console.log(" User is not in any room"))}catch(x){console.error(" fetchCurrentUserRoom error:",x)}finally{b(!1)}},A=async x=>{if(l){f(x);try{console.log(" Joining room:",x);const{error:k}=await X.from("user_room_memberships").delete().eq("user_id",l.id);k&&console.error(" Error leaving current room:",k);const{error:L}=await X.from("user_room_memberships").insert({user_id:l.id,room_id:x});if(L){console.error(" Error joining room:",L),alert("Error joining room: "+L.message);return}else console.log(" Successfully joined room"),p(x),console.log(" Current user room updated to:",x);const{data:Y,error:Q}=await X.from("user_room_memberships").select("id").eq("room_id",x);if(Q)console.error(" Error counting members:",Q);else{const K=Y?.length||0;console.log(" Room has",K,"members");const{error:P}=await X.from("chat_rooms").update({current_slots:K}).eq("id",x);P?(console.error(" Error updating current_slots:",P),console.log(" Update error details:",P)):console.log(" current_slots updated to:",K)}await w()}catch(k){console.error(" Join room exception:",k),alert("Error joining room: "+k.message)}finally{f(null)}}};return B.useEffect(()=>{if(!l)return;const x=X.channel("room_list_updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_rooms"},k=>{console.log(" RoomListPanel: Room updated in real-time:",k.new),typeof onRoomUpdate=="function"&&onRoomUpdate()}).subscribe(k=>{console.log(" RoomListPanel: Real-time subscription status:",k)});return()=>{X.removeChannel(x)}},[l]),B.useEffect(()=>{w(),R();const x=X.channel("room_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_rooms"},k=>{console.log(" New room created:",k.new),r(L=>[k.new,...L])}).on("postgres_changes",{event:"DELETE",schema:"public",table:"chat_rooms"},k=>{console.log(" Room deleted:",k.old),r(L=>L.filter(Y=>Y.id!==k.old.id))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_rooms"},k=>{console.log(" RoomListPanel: Room updated (slots changed):",k.new.current_slots),r(L=>L.map(Y=>Y.id===k.new.id?{...Y,...k.new}:Y))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"user_room_memberships",filter:`user_id=eq.${l?.id}`},async k=>{console.log(" User joined a room"),p(k.new.room_id),await w()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"user_room_memberships",filter:`user_id=eq.${l?.id}`},async k=>{console.log(" User left a room"),p(null),await w()}).subscribe(k=>{console.log(" Room subscription status:",k)});return()=>{X.removeChannel(x)}},[l]),S.jsxs("div",{style:{position:"fixed",top:"80px",right:"420px",width:"300px",maxHeight:"400px",background:"linear-gradient(to bottom, #0f172a 0%, #581c87 100%)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",zIndex:999,overflowY:"auto"},children:[S.jsxs("h3",{style:{color:"white",marginBottom:"16px",textAlign:"center",fontSize:"16px"},children:["Available Rooms (",i.length,")"]}),g&&S.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.4)",borderRadius:"8px",padding:"8px 12px",marginBottom:"12px",color:"#10B981",fontSize:"12px",textAlign:"center"},children:[" You are in: ",i.find(x=>x.id===g)?.name||"a room"]}),!g&&!m&&S.jsx("div",{style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",borderRadius:"8px",padding:"8px 12px",marginBottom:"12px",color:"#3B82F6",fontSize:"12px",textAlign:"center"},children:" You are not in any room"}),s?S.jsx("div",{style:{color:"white",textAlign:"center"},children:"Loading rooms..."}):i.length===0?S.jsx("div",{style:{color:"rgba(255,255,255,0.6)",textAlign:"center",fontSize:"14px",padding:"20px"},children:"No rooms available yet"}):S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.map(x=>{const k=g===x.id,L=x.current_slots>=x.max_slots,Y=d===x.id;return console.log(` Room ${x.name}:`,{roomId:x.id,currentUserRoom:g,isUserInThisRoom:k,currentSlots:x.current_slots,maxSlots:x.max_slots,isRoomFull:L}),S.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"12px",color:"white"},children:[S.jsx("div",{style:{fontWeight:"bold",fontSize:"14px",marginBottom:"4px"},children:x.name}),S.jsx("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.7)",marginBottom:"4px"},children:x.description||"No description"}),S.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.5)",marginBottom:"8px"},children:["Created by: ",x.user_positions?.email||"Unknown"]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"11px"},children:[S.jsxs("span",{style:{color:"rgba(255,255,255,0.5)"},children:["Slots: ",x.current_slots,"/",x.max_slots]}),S.jsx("button",{onClick:()=>A(x.id),disabled:Y||L||k,style:{padding:"4px 12px",background:k?"rgba(16, 185, 129, 0.5)":L?"rgba(107, 114, 128, 0.5)":Y?"rgba(59, 130, 246, 0.5)":"linear-gradient(135deg, #3B82F6, #7C3AED)",color:"white",border:"none",borderRadius:"6px",fontSize:"11px",cursor:Y||L||k?"not-allowed":"pointer"},children:k?"Joined ":Y?"Joining...":L?"Full":"Join"})]})]},x.id)})})]})}const u_=B.memo(()=>{const l=()=>{window.open("https://buymeacoffee.com/nessm","_blank","noopener,noreferrer")};return S.jsxs("button",{onClick:l,className:"group relative flex items-center gap-2 bg-gradient-to-br from-amber-400 via-orange-500 to-red-500 hover:from-amber-500 hover:via-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-2xl font-bold transition-all duration-300 shadow-2xl hover:shadow-amber-500/25 hover:scale-105 border-0 cursor-pointer overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),S.jsx("span",{className:"text-lg",children:""}),S.jsx("span",{className:"relative z-10 bg-gradient-to-b from-white to-amber-100 bg-clip-text text-transparent",children:"Buy me a coffee"}),S.jsx("div",{className:"absolute inset-0 rounded-2xl border-2 border-amber-300/50 animate-pulse group-hover:animate-none"})]})}),c_=B.memo(({user:l,onSignOut:i,onTwinkle:r})=>S.jsxs("header",{className:"absolute top-6 left-6 right-6 flex justify-between items-center z-30",children:[S.jsx("div",{className:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 backdrop-blur-lg border border-white/10 rounded-2xl px-6 py-3 shadow-2xl",children:S.jsx("div",{className:"text-white font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent",children:l.email})}),S.jsxs("div",{className:"flex gap-4 items-center",children:[S.jsx(u_,{}),S.jsxs("button",{onClick:r,className:"group relative flex items-center gap-2 bg-gradient-to-br from-yellow-400 via-amber-500 to-orange-500 hover:from-yellow-500 hover:via-amber-600 hover:to-orange-600 text-gray-900 px-6 py-3 rounded-2xl font-bold transition-all duration-300 shadow-2xl hover:shadow-yellow-400/30 hover:scale-105 border-0 cursor-pointer overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-yellow-200/40 to-transparent -skew-x-12 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),S.jsx("span",{className:"text-lg",children:""}),S.jsx("span",{className:"relative z-10",children:"Twinkle"})]}),S.jsxs("button",{onClick:i,className:"group relative flex items-center gap-2 bg-gradient-to-br from-rose-500 via-red-500 to-pink-600 hover:from-rose-600 hover:via-red-600 hover:to-pink-700 text-white px-6 py-3 rounded-2xl font-bold transition-all duration-300 shadow-2xl hover:shadow-rose-500/25 hover:scale-105 border-0 cursor-pointer overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),S.jsx("span",{className:"text-lg",children:""}),S.jsx("span",{className:"relative z-10",children:"Sign Out"})]})]})]})),d_=B.memo(({userData:l,allUsers:i=[],isCurrentUser:r,onFollow:s,recentFriendships:c=[],isFollowing:d=!1})=>{const[f,g]=B.useState({x:l.current_x??l.initial_x??Math.random(),y:l.current_y??l.initial_y??Math.random()}),[p,m]=B.useState(l.luminosity??.8),[b,w]=B.useState(!!l.is_twinkle),R=B.useRef([]);B.useEffect(()=>{if(l.current_x==null||l.current_y==null)return;const Y=500,Q=f.x,K=f.y,P=l.current_x-Q,ie=l.current_y-K,W=performance.now();let N;const J=se=>{const ye=Math.min((se-W)/Y,1),Ce=1-Math.pow(1-ye,3),ee=Q+P*Ce,de=K+ie*Ce;g({x:ee,y:de}),R.current=[{x:ee,y:de},...R.current].slice(0,25),ye<1&&(N=requestAnimationFrame(J))};return N=requestAnimationFrame(J),()=>cancelAnimationFrame(N)},[l.current_x,l.current_y]),B.useEffect(()=>{m(l.luminosity??.8),w(!!l.is_twinkle)},[l.luminosity,l.is_twinkle]);const A=B.useMemo(()=>l.is_online?r?"#ffe97a":"#ffffff":"#ff6b6b",[l.is_online,r]),x=B.useMemo(()=>r?18:12,[r]),k=B.useMemo(()=>c.find(Y=>Y.user1===l.user_id&&i.find(Q=>Q.user_id===Y.user2)||Y.user2===l.user_id&&i.find(Q=>Q.user_id===Y.user1)),[c,l.user_id,i]),L=B.useMemo(()=>k?i.find(Y=>Y.user_id===k.user1||Y.user_id===k.user2):null,[k,i]);return S.jsxs(S.Fragment,{children:[S.jsx("style",{children:`
        @keyframes twinklePulse {
          0%, 100% { transform: scale(1); opacity: 1; text-shadow: 0 0 8px ${A}, 0 0 16px ${A}; }
          50% { transform: scale(1.2); opacity: 0.7; text-shadow: 0 0 16px ${A}, 0 0 32px ${A}; }
        }
        @keyframes slowGlow {
          0%, 100% { text-shadow: 0 0 6px ${A}, 0 0 12px ${A}; }
          50% { text-shadow: 0 0 14px ${A}, 0 0 28px ${A}; }
        }
      `}),L&&S.jsx("svg",{style:{position:"absolute",width:"100%",height:"100%",left:0,top:0,pointerEvents:"none",zIndex:50},children:S.jsx("line",{x1:`${f.x*100}%`,y1:`${f.y*100}%`,x2:`${L.current_x*100}%`,y2:`${L.current_y*100}%`,stroke:"cyan",strokeWidth:"3",strokeOpacity:"0.8",filter:"drop-shadow(0 0 6px cyan)"})}),S.jsxs("div",{style:{position:"absolute",left:`${f.x*100}%`,top:`${f.y*100}%`,transform:"translate(-50%, -50%)",opacity:p,zIndex:100},children:[S.jsx("div",{style:{fontSize:`${x}px`,color:A,textShadow:`0 0 8px ${A}, 0 0 20px ${A}`,animation:b?"twinklePulse 0.4s ease-in-out infinite":"slowGlow 3s ease-in-out infinite",pointerEvents:"none"},children:""}),!r&&S.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-1 flex flex-col items-center gap-1",style:{pointerEvents:"auto"},children:!r&&!d&&S.jsx("button",{onClick:()=>s?.(l.user_id),className:"px-2 py-1 bg-blue-600 text-xs rounded hover:bg-blue-500",children:"Follow"})})]})]})});function f_({user:l,users:i=[],setUsers:r,followingList:s=[],onSignOut:c,onTwinkle:d,messages:f=[],onSendMessage:g=null,handleFollow:p,recentFriendships:m=[],friends:b=[],privateMessages:w={},onSendPrivateMessage:R,onMarkMessagesAsRead:A,currentUserRoom:x=null,rooms:k=[],onJoinRoom:L,supabase:Y,fetchRooms:Q}){const[K,P]=B.useState(!1),[ie,W]=B.useState(!1);return S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 384px",height:"100vh",width:"100vw",overflow:"hidden"},className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[S.jsxs("div",{style:{position:"relative",overflow:"hidden",paddingTop:"34px"},className:"flex-1",children:[S.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-blue-500/10 via-transparent to-transparent"}),S.jsx(c_,{user:l,onSignOut:c,onTwinkle:d}),i.map(N=>S.jsx(d_,{userData:N,allUsers:i,isCurrentUser:(N.email||"").toLowerCase()===(l.email||"").toLowerCase(),onFollow:J=>p(J),recentFriendships:m,isFollowing:s.includes(N.user_id)},N.id||N.email)),S.jsx(s_,{user:l,friends:b,privateMessages:w,onSendPrivateMessage:R,onMarkMessagesAsRead:A}),S.jsxs("button",{style:{position:"fixed",bottom:"20px",right:"420px",zIndex:1e3,background:"linear-gradient(135deg, #8B5CF6, #7C3AED)",color:"white",border:"none",borderRadius:"50px",padding:"12px 20px",fontWeight:"bold",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},onClick:()=>P(!0),children:[S.jsx("span",{children:""}),S.jsx("span",{children:"Create Room"})]}),S.jsxs("button",{style:{position:"fixed",bottom:"80px",right:"420px",zIndex:1e3,background:"linear-gradient(135deg, #10B981, #059669)",color:"white",border:"none",borderRadius:"50px",padding:"12px 20px",fontWeight:"bold",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},onClick:()=>W(!ie),children:[S.jsx("span",{children:""}),S.jsx("span",{children:"Show Rooms"})]}),K&&S.jsx(l_,{user:l,onClose:()=>P(!1),onCreateRoom:N=>{console.log(" Room created:",N),W(!0)}}),ie&&S.jsx(o_,{user:l,rooms:k,currentUserRoom:x,onJoinRoom:L,onRefresh:()=>{typeof Q=="function"&&Q()}},`roomlist-${x||"no-room"}`),x&&S.jsxs("div",{style:{position:"fixed",top:"80px",left:"20px",background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.4)",borderRadius:"8px",padding:"8px 12px",color:"#10B981",fontSize:"12px",zIndex:999},children:[" You are in: ",k.find(N=>N.id===x)?.name||"a room"]})]}),S.jsx("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},className:"bg-black/60 border-l border-white/10",children:S.jsx(r_,{user:l,room:x?k.find(N=>N.id===x):null,onSendMessage:async N=>{if(!(!l||!x||!N.trim())){console.log(" Sending room message to:",x);try{await Y.from("room_messages").insert({room_id:x,sender_id:l.id,sender_email:l.email,content:N.trim(),type:"user",created_at:new Date().toISOString()})}catch(J){console.error("Error sending room message:",J)}}}},`chatpanel-${x||"no-room"}`)})]})}const h_=({message:l="Loading..."})=>S.jsx("div",{className:"min-h-screen flex items-center justify-center text-white",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-white mb-4"}),S.jsx("div",{children:l})]})});function g_(){const[l,i]=B.useState(null),[r,s]=B.useState(!0),c=B.useRef(!1),d=B.useRef(!1),f=async(m,b="info")=>{try{await X.from("chat_messages").insert({sender_email:"system",sender_id:"00000000-0000-0000-0000-000000000000",content:m,type:b,created_at:new Date().toISOString()})}catch(w){console.error("Error sending system message:",w)}};return{user:l,setUser:i,loading:r,setLoading:s,isSigningOutRef:c,hasSentJoinMessageRef:d,markUserOnline:async(m,b)=>{try{const w=(m.email||"").toLowerCase(),{error:R}=await X.rpc("get_or_create_user_position",{p_user_id:m.id,p_email:w});if(R)throw R;b&&await b(),d.current||(await f(`${m.email} joined the chat`,"join"),d.current=!0)}catch(w){console.error("markUserOnline error",w)}},markUserOfflineViaService:async(m,b)=>{try{await Pb.rpc("mark_user_offline_by_email",{user_email:m}),b&&await b()}catch(w){console.error("markUserOfflineViaService error",w)}},sendSystemMessage:f}}const Vm={TIMING:{USER_MOVEMENT_INTERVAL:3e3},CHANNELS:{USER_POSITIONS:"user_positions_changes"}};function m_(l){const[i,r]=B.useState([]),[s,c]=B.useState([]),d=B.useCallback(async()=>{try{const{data:g,error:p}=await X.from("user_positions").select("*");if(p)throw p;r(g||[])}catch(g){console.error("fetchAllUsers error",g)}},[]),f=B.useCallback(async()=>{if(l)try{const{data:g,error:p}=await X.from("user_follows").select("followee_id").eq("follower_id",l.id);if(p)throw p;c(g.map(m=>m.followee_id))}catch(g){console.error("fetchFollowingList error:",g)}},[l]);return B.useEffect(()=>{d(),l&&f()},[l,d,f]),B.useEffect(()=>{const g=X.channel(Vm.CHANNELS.USER_POSITIONS).on("postgres_changes",{event:"*",schema:"public",table:"user_positions"},p=>{console.log(" Real-time user update received:",p);const m=p.new;m&&r(b=>{const w=(m.email||"").toLowerCase(),R=b.findIndex(A=>(A.email||"").toLowerCase()===w);if(R>=0){const A=[...b];return A[R]={...A[R],...m},A}else return[...b,m]})}).subscribe(p=>console.log("Realtime status:",p));return()=>{X.removeChannel(g)}},[]),B.useEffect(()=>{const g=()=>{document.visibilityState==="visible"&&(document.querySelector("[data-room-members-panel]")||(console.log(" Tab became visible, refreshing users..."),d()))};return document.addEventListener("visibilitychange",g),()=>{document.removeEventListener("visibilitychange",g)}},[d]),{users:i,setUsers:r,followingList:s,setFollowingList:c,fetchAllUsers:d,fetchFollowingList:f}}function p_(l){const[i,r]=B.useState([]),[s,c]=B.useState({});return B.useEffect(()=>{if(!l)return;const g=X.channel("chat_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},p=>{const m=p.new,b=new Date(m.created_at),w=new Date(Date.now()-300*1e3);b>w&&r(R=>[...R,m])}).subscribe();return()=>{X.removeChannel(g)}},[l]),B.useEffect(()=>{if(!l)return;const g=X.channel("private_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"private_messages"},async p=>{const m=p.new;if(m.receiver_id===l.id||m.sender_id===l.id){const b=m.sender_id===l.id?m.receiver_id:m.sender_id;c(w=>({...w,[b]:[...w[b]||[],m]}))}}).subscribe();return()=>{X.removeChannel(g)}},[l]),B.useEffect(()=>{if(!l)return;const g=setInterval(async()=>{try{const p=new Date(Date.now()-36e5).toISOString();await X.from("chat_messages").delete().lt("created_at",p)}catch(p){console.error("Error cleaning old messages:",p)}},300*1e3);return()=>clearInterval(g)},[l]),{messages:i,setMessages:r,privateMessages:s,setPrivateMessages:c,handleSendMessage:async g=>{if(!(!l||!g.trim()))try{await X.from("chat_messages").insert({sender_email:l.email,sender_id:l.id,content:g.trim(),type:"user",created_at:new Date().toISOString()})}catch(p){console.error("Error sending message:",p)}},handleSendPrivateMessage:async(g,p)=>{if(!(!l||!p.trim()))try{await X.from("private_messages").insert({sender_id:l.id,receiver_id:g,content:p.trim(),created_at:new Date().toISOString()})}catch(m){console.error("Error sending private message:",m)}}}}function y_(l,i,r){const[s,c]=B.useState([]),[d,f]=B.useState([]);B.useEffect(()=>{l&&g()},[l]),B.useEffect(()=>{const m=X.channel("friendship_events_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"friendship_events"},b=>{const{user1:w,user2:R}=b.new,A=Date.now();f(x=>[...x,{user1:w,user2:R,timestamp:A}]),setTimeout(()=>{f(x=>x.filter(k=>k.timestamp!==A))},5e3),g()}).subscribe(b=>console.log("Realtime friendship event status:",b));return()=>{X.removeChannel(m)}},[]);async function g(){if(l){console.log(" fetchFriends called for user:",l.id,l.email);try{const{data:m,error:b}=await X.rpc("get_mutual_friends",{user_uuid:l.id});if(b)throw console.error(" fetchFriends RPC error:",b),b;console.log(" fetchFriends result:",{user:l.id,friendsCount:m?.length||0,friends:m}),c(m||[]),m&&m.length>0?m.forEach(w=>{console.log(" Fetching private messages for friend:",w.friend_id),p(w.friend_id)}):console.log(" No friends found for user")}catch(m){console.error("fetchFriends error:",m)}}}async function p(m){if(l)try{const{data:b,error:w}=await X.from("private_messages").select("*").or(`and(sender_id.eq.${l.id},receiver_id.eq.${m}),and(sender_id.eq.${m},receiver_id.eq.${l.id})`).order("created_at",{ascending:!0});if(w)throw w;r(R=>({...R,[m]:b||[]}))}catch(b){console.error("fetchPrivateMessages error:",b)}}return{friends:s,setFriends:c,recentFriendships:d,fetchFriends:g,fetchPrivateMessages:p}}function v_(l,i){const r=B.useRef(null);return B.useCallback((...c)=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{l(...c)},i)},[l,i])}function b_(l){const[i,r]=B.useState([]),[s,c]=B.useState(null),d=v_(async()=>{console.log(" Debounced room fetch"),await g()},500);B.useEffect(()=>{if(!l)return;const m=X.channel("user_room_memberships_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_room_memberships",filter:`user_id=eq.${l.id}`},b=>{if(console.log(" User room membership REAL-TIME EVENT:",{event:b.eventType,room_id:b.new?.room_id||b.old?.room_id,user_id:b.new?.user_id||b.old?.user_id}),b.eventType==="INSERT")c(b.new.room_id),console.log(" User joined room:",b.new.room_id);else if(b.eventType==="DELETE"){const w=b.old.room_id;c(null),console.log(" User was KICKED from room:",w),typeof window.clearRoomMessages=="function"&&window.clearRoomMessages(w)}g()}).subscribe(b=>{console.log(" Room membership subscription status:",b)});return()=>{console.log(" Cleaning up room membership subscription"),X.removeChannel(m)}},[l]),B.useEffect(()=>{if(!l)return;console.log(" Setting up ALL room membership changes subscription");const m=X.channel("all_room_memberships_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_room_memberships"},b=>{console.log(" ANY user room membership changed:",b),d()}).subscribe(b=>{console.log(" All room memberships subscription status:",b)});return()=>{X.removeChannel(m)}},[l,d]),B.useEffect(()=>{if(!l)return;console.log(" Setting up room updates subscription");const m=X.channel("room_updates_changes").on("postgres_changes",{event:"*",schema:"public",table:"chat_rooms"},b=>{console.log(" Room data changed:",b),g()}).subscribe(b=>{console.log(" Room updates subscription status:",b)});return()=>{X.removeChannel(m)}},[l]);const f=async(m=l)=>{const b=m||l;if(!b)return console.log(" fetchCurrentUserRoom: No user provided"),c(null),null;try{console.log(" fetchCurrentUserRoom: Fetching for user:",b.id,b.email);const{data:w,error:R}=await X.from("user_room_memberships").select("room_id").eq("user_id",b.id);if(R)return console.error(" Error fetching user rooms:",R),c(null),null;if(console.log(" User room memberships found:",w),w&&w.length>0){const A=w[0].room_id;return c(A),console.log(" Current user room set to:",A),A}else return c(null),console.log(" User is not in any room"),null}catch(w){return console.error(" fetchCurrentUserRoom error:",w),c(null),null}},g=async()=>{try{console.log(" Fetching rooms with real-time data...");const{data:m,error:b}=await X.from("chat_rooms").select("*").eq("is_public",!0).order("created_at",{ascending:!1});if(b)throw b;console.log(" Basic rooms fetched:",m?.length||0,"rooms");const w=await Promise.all(m.map(async R=>{try{const{data:A}=await X.from("user_positions").select("email").eq("user_id",R.owner_id).single();return{...R,creator_email:A?.email||"Unknown"}}catch(A){return console.error(` Error fetching creator for room ${R.name}:`,A),{...R,creator_email:"Unknown"}}}));return console.log(" Rooms with creators:",w),r(w),w}catch(m){return console.error(" fetchRooms error",m),[]}};return{rooms:i,setRooms:r,currentUserRoom:s,setCurrentUserRoom:c,fetchRooms:g,fetchCurrentUserRoom:f,updateRoomSlots:async m=>{if(!m){console.log(" updateRoomSlots: No roomId provided");return}try{console.log(` updateRoomSlots: Starting for room ${m}`);const{data:b,error:w}=await X.from("user_room_memberships").select("id, user_id").eq("room_id",m);if(w){console.error(" updateRoomSlots: Error counting members:",w);return}const R=b?.length||0;console.log(` updateRoomSlots: Room ${m} has ${R} members`);const{error:A}=await X.from("chat_rooms").update({current_slots:R}).eq("id",m);A?console.error(" updateRoomSlots: Error updating database:",A):console.log(` updateRoomSlots: Successfully updated room ${m} to ${R} slots`)}catch(b){console.error(" updateRoomSlots: Unexpected error:",b)}}}}const __={async updateUserPosition(l,i,r){try{const{error:s}=await X.rpc("update_user_position",{p_email:l,p_x:i,p_y:r});s&&console.warn("update_user_position error",s)}catch(s){console.warn("update_user_position exception",s)}},async sendRoomMessage(l,i,r,s){try{await X.from("room_messages").insert({room_id:l,sender_id:i,sender_email:r,content:s.trim(),type:"user",created_at:new Date().toISOString()})}catch(c){console.error("Error sending room message:",c)}},async followUser(l,i){try{const{error:r}=await X.rpc("follow_user",{p_follower:l,p_followee:i});return{error:r}}catch(r){return{error:r}}}};function w_(l,i){const r=B.useRef({});B.useEffect(()=>{if(!l)return;const s=(l.email||"").toLowerCase();r.current[s]||(r.current[s]={dx:(Math.random()-.5)*.01,dy:(Math.random()-.5)*.01});const c=setInterval(()=>{i(d=>d.map(f=>{if((f.email||"").toLowerCase()!==s||!f.is_online)return f;let g=(f.current_x??f.initial_x??.5)+r.current[s].dx,p=(f.current_y??f.initial_y??.5)+r.current[s].dy;return g>1&&(g=0),g<0&&(g=1),p>1&&(p=0),p<0&&(p=1),__.updateUserPosition(s,g,p),{...f,current_x:g,current_y:p}}))},Vm.TIMING.USER_MOVEMENT_INTERVAL);return()=>clearInterval(c)},[l,i])}function S_(){B.useRef({});const{user:l,setUser:i,loading:r,setLoading:s,isSigningOutRef:c,hasSentJoinMessageRef:d,markUserOnline:f,markUserOfflineViaService:g,sendSystemMessage:p}=g_(),{users:m,setUsers:b,followingList:w,setFollowingList:R,fetchAllUsers:A,fetchFollowingList:x}=m_(l),{messages:k,setMessages:L,privateMessages:Y,setPrivateMessages:Q,handleSendMessage:K,handleSendPrivateMessage:P}=p_(l),{friends:ie,setFriends:W,recentFriendships:N,fetchFriends:J,fetchPrivateMessages:se}=y_(l,Y,Q),{rooms:ye,setRooms:Ce,currentUserRoom:ee,setCurrentUserRoom:de,fetchRooms:Te,fetchCurrentUserRoom:ve,updateRoomSlots:M}=b_(l);w_(l,b),B.useEffect(()=>{(async()=>{const{data:j}=await X.auth.getSession();j?.session?.user&&(i(j.session.user),await f(j.session.user,A)),s(!1)})();const{data:O}=X.auth.onAuthStateChange(async(j,H)=>{console.log(" Auth change:",j),j==="SIGNED_IN"&&H?.user?(console.log(" Setting user state:",H.user.email),i(H.user),f(H.user,A).catch(Z=>console.error(Z)),setTimeout(async()=>{console.log(" Loading user data after sign in..."),console.log(" Current user state:",l?.email);try{await new Promise(le=>setTimeout(le,100)),console.log(" Step 1: Fetching current user room...");const Z=await ve(H.user);console.log(" Step 2: Fetching rooms...");const ue=await Te();console.log(" Step 3: Fetching friends..."),await J(),console.log(" All user data loaded after sign in"),console.log(" Final room state:",{currentUserRoom:Z,roomsCount:ue.length,userEmail:l?.email})}catch(Z){console.error(" Error loading user data:",Z)}},100)):j==="SIGNED_OUT"&&(console.log(" User signed out, clearing all states"),i(null),b([]),L([]),Q({}),W([]),R([]),Ce([]),de(null))});return()=>O.subscription.unsubscribe()},[]),B.useEffect(()=>{A(),l&&J()},[l]),B.useEffect(()=>{l||(d.current=!1)},[l]),B.useEffect(()=>{const O=()=>{document.visibilityState==="visible"&&l&&(async()=>{try{const j=(l.email||"").toLowerCase();await X.from("user_positions").update({last_seen:new Date().toISOString()}).eq("email",j)}catch(j){console.error("Error updating last_seen:",j)}})()};return document.addEventListener("visibilitychange",O),()=>{document.removeEventListener("visibilitychange",O)}},[l]);const I=async O=>{if(l)try{console.log(" joinRoom: Starting process for room:",O),console.log(" joinRoom: Current user:",l.id,l.email);const{data:j,error:H}=await X.from("user_room_memberships").select("room_id").eq("user_id",l.id);if(H)throw console.error(" joinRoom: Error fetching current memberships:",H),H;const Z=j&&j.length>0?j[0].room_id:null;if(console.log(" joinRoom: User currently in room:",Z),Z){console.log(" joinRoom: Leaving old room:",Z);const{error:le}=await X.from("user_room_memberships").delete().eq("user_id",l.id).eq("room_id",Z);if(le)throw console.error(" joinRoom: Error leaving old room:",le),le;console.log(" joinRoom: Successfully left old room"),console.log(" joinRoom: Updating slots for old room:",Z),await M(Z)}console.log(" joinRoom: Joining new room:",O);const{error:ue}=await X.from("user_room_memberships").insert({user_id:l.id,room_id:O});if(ue){console.error(" joinRoom: Error joining new room:",ue),alert("Error joining room: "+ue.message);return}console.log(" joinRoom: Successfully joined new room"),console.log(" joinRoom: Updating slots for new room:",O),await M(O),console.log(" joinRoom: Refreshing room data..."),await Te(),await ve(),console.log(" joinRoom: Process completed successfully")}catch(j){console.error(" joinRoom: Unexpected error:",j),alert("Error joining room: "+j.message)}};async function ae(){if(!l)return;const O=(l.email||"").toLowerCase();b(j=>j.map(H=>(H.email||"").toLowerCase()===O?{...H,is_twinkle:!0,luminosity:1.5}:H));try{await X.from("user_positions").update({is_twinkle:!0,luminosity:1.5,last_seen:new Date().toISOString()}).eq("email",O)}catch(j){console.error("Error setting twinkle true:",j)}setTimeout(async()=>{b(j=>j.map(H=>(H.email||"").toLowerCase()===O?{...H,is_twinkle:!1,luminosity:.8}:H));try{await X.from("user_positions").update({is_twinkle:!1,luminosity:.8,last_seen:new Date().toISOString()}).eq("email",O)}catch(j){console.error("Error reverting twinkle:",j)}},3e3)}async function pe(O){if(l)try{console.log(" Attempting to follow user:",O);const{error:j}=await X.rpc("follow_user",{p_follower:l.id,p_followee:O});if(j){console.error(" Supabase RPC follow_user error",j),await Ae(O);return}console.log(" follow_user executed successfully");const{data:H,error:Z}=await X.rpc("check_friendship",{p_user1:l.id,p_user2:O});Z?console.error(" check_friendship error",Z):H===!0&&(console.log(" Friendship formed! Creating friendship event"),await X.from("friendship_events").insert({user1:l.id,user2:O}),J()),await x()}catch(j){console.error(" handleFollow error",j)}}async function Ae(O){try{console.log(" Trying direct follow insert for:",O);const{error:j}=await X.from("user_follows").insert({follower_id:l.id,followee_id:O}).select();j?console.error(" Direct follow insert error:",j):(console.log(" Direct follow insert successful"),await x())}catch(j){console.error(" followUserDirectly error:",j)}}async function y(){if(!l)return;const O=(l.email||"").toLowerCase();if(!c.current){if(c.current=!0,ee){console.log(" Leaving room before sign out:",ee);try{const{error:j}=await X.from("user_room_memberships").delete().eq("user_id",l.id);if(j)console.error(" Error leaving room on sign out:",j);else{console.log(" Successfully left room on sign out");const{data:H,error:Z}=await X.from("user_room_memberships").select("id").eq("room_id",ee);if(Z)console.error(" Error counting room members on sign out:",Z);else{const ue=H?.length||0;console.log(" Room member count after sign out:",ue);const{error:le}=await X.from("chat_rooms").update({current_slots:ue}).eq("id",ee);le?console.error(" Error updating room slots on sign out:",le):console.log(" Room slots updated on sign out to:",ue)}}}catch(j){console.error(" Error during room leave on sign out:",j)}}await p(`${l.email} left the chat`,"leave"),b(j=>j.map(H=>(H.email||"").toLowerCase()===O?{...H,is_online:!1,luminosity:.1}:H));try{await g(O,A);try{await X.removeAllChannels()}catch(H){console.warn("removeAllChannels failed",H)}const{error:j}=await X.auth.signOut();j&&console.warn("auth.signOut error",j),i(null),b(H=>H.map(Z=>(Z.email||"").toLowerCase()===O?{...Z,is_online:!1,luminosity:.1}:Z))}catch(j){console.error("handleSignOut failed",j)}finally{c.current=!1}}}const _=async O=>{if(l)try{const{data:j,error:H}=await X.from("private_messages").update({is_read:!0}).eq("receiver_id",l.id).eq("sender_id",O).eq("is_read",!1).select();if(H)throw H;console.log(` Marked ${j?.length||0} messages as read for friend ${O}`),await se(O)}catch(j){console.error("Error marking messages as read:",j)}};return r?S.jsx(h_,{message:"Connecting to the starry sky..."}):l?S.jsxs("div",{className:"fixed inset-0 w-screen h-screen overflow-hidden",children:[S.jsx("div",{children:"B"}),S.jsx(f_,{user:l,users:m,setUsers:b,followingList:w,onSignOut:y,onTwinkle:ae,messages:k,onSendMessage:K,handleFollow:pe,recentFriendships:N,friends:ie,privateMessages:Y,onSendPrivateMessage:P,onMarkMessagesAsRead:_,currentUserRoom:ee,rooms:ye,onJoinRoom:I,supabase:X,fetchRooms:Te})]}):S.jsx(Wb,{onSignIn:()=>X.auth.signInWithOAuth({provider:"google"})})}class E_ extends pr.Component{constructor(i){super(i),this.state={hasError:!1,error:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,r){console.error("Error caught by boundary:",i,r)}render(){return this.state.hasError?S.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"white",background:"#1a202c"},children:[S.jsx("h2",{children:"Something went wrong"}),S.jsx("p",{children:"Please refresh the page and try again."}),S.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",background:"#3182ce",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Refresh Page"}),S.jsx("details",{style:{marginTop:"20px",color:"#a0aec0"},children:this.state.error?.toString()})]}):this.props.children}}xy.createRoot(document.getElementById("root")).render(S.jsx(pr.StrictMode,{children:S.jsx(E_,{children:S.jsx(S_,{})})}));
