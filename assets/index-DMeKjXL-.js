function my(l,i){for(var r=0;r<i.length;r++){const s=i[r];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in l)){const d=Object.getOwnPropertyDescriptor(s,c);d&&Object.defineProperty(l,c,d.get?d:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function r(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(c){if(c.ep)return;c.ep=!0;const d=r(c);fetch(c.href,d)}})();function Xu(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function Jg(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var i=l.default;if(typeof i=="function"){var r=function s(){var c=!1;try{c=this instanceof s}catch{}return c?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};r.prototype=i.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(l).forEach(function(s){var c=Object.getOwnPropertyDescriptor(l,s);Object.defineProperty(r,s,c.get?c:{enumerable:!0,get:function(){return l[s]}})}),r}var vu={exports:{}},lr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg;function py(){if(sg)return lr;sg=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(s,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var g in c)g!=="key"&&(d[g]=c[g])}else d=c;return c=d.ref,{$$typeof:l,type:s,key:f,ref:c!==void 0?c:null,props:d}}return lr.Fragment=i,lr.jsx=r,lr.jsxs=r,lr}var lg;function yy(){return lg||(lg=1,vu.exports=py()),vu.exports}var _=yy(),bu={exports:{}},he={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var og;function vy(){if(og)return he;og=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function E(v){return v===null||typeof v!="object"?null:(v=T&&v[T]||v["@@iterator"],typeof v=="function"?v:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,L={};function Y(v,j,N){this.props=v,this.context=j,this.refs=L,this.updater=N||A}Y.prototype.isReactComponent={},Y.prototype.setState=function(v,j){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,j,"setState")},Y.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function Z(){}Z.prototype=Y.prototype;function Q(v,j,N){this.props=v,this.context=j,this.refs=L,this.updater=N||A}var W=Q.prototype=new Z;W.constructor=Q,R(W,Y.prototype),W.isPureReactComponent=!0;var ae=Array.isArray;function re(){}var M={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function ue(v,j,N){var H=N.ref;return{$$typeof:l,type:v,key:j,ref:H!==void 0?H:null,props:N}}function ve(v,j){return ue(v.type,j,v.props)}function Te(v){return typeof v=="object"&&v!==null&&v.$$typeof===l}function Ee(v){var j={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(N){return j[N]})}var ne=/\/+/g;function ee(v,j){return typeof v=="object"&&v!==null&&v.key!=null?Ee(""+v.key):j.toString(36)}function ye(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(re,re):(v.status="pending",v.then(function(j){v.status==="pending"&&(v.status="fulfilled",v.value=j)},function(j){v.status==="pending"&&(v.status="rejected",v.reason=j)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function z(v,j,N,H,P){var te=typeof v;(te==="undefined"||te==="boolean")&&(v=null);var fe=!1;if(v===null)fe=!0;else switch(te){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(v.$$typeof){case l:case i:fe=!0;break;case b:return fe=v._init,z(fe(v._payload),j,N,H,P)}}if(fe)return P=P(v),fe=H===""?"."+ee(v,0):H,ae(P)?(N="",fe!=null&&(N=fe.replace(ne,"$&/")+"/"),z(P,j,N,"",function(It){return It})):P!=null&&(Te(P)&&(P=ve(P,N+(P.key==null||v&&v.key===P.key?"":(""+P.key).replace(ne,"$&/")+"/")+fe)),j.push(P)),1;fe=0;var Ue=H===""?".":H+":";if(ae(v))for(var Me=0;Me<v.length;Me++)H=v[Me],te=Ue+ee(H,Me),fe+=z(H,j,N,te,P);else if(Me=E(v),typeof Me=="function")for(v=Me.call(v),Me=0;!(H=v.next()).done;)H=H.value,te=Ue+ee(H,Me++),fe+=z(H,j,N,te,P);else if(te==="object"){if(typeof v.then=="function")return z(ye(v),j,N,H,P);throw j=String(v),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return fe}function X(v,j,N){if(v==null)return v;var H=[],P=0;return z(v,H,"","",function(te){return j.call(N,te,P++)}),H}function C(v){if(v._status===-1){var j=v._result;j=j(),j.then(function(N){(v._status===0||v._status===-1)&&(v._status=1,v._result=N)},function(N){(v._status===0||v._status===-1)&&(v._status=2,v._result=N)}),v._status===-1&&(v._status=0,v._result=j)}if(v._status===1)return v._result.default;throw v._result}var K=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)},F={map:X,forEach:function(v,j,N){X(v,function(){j.apply(this,arguments)},N)},count:function(v){var j=0;return X(v,function(){j++}),j},toArray:function(v){return X(v,function(j){return j})||[]},only:function(v){if(!Te(v))throw Error("React.Children.only expected to receive a single React element child.");return v}};return he.Activity=w,he.Children=F,he.Component=Y,he.Fragment=r,he.Profiler=c,he.PureComponent=Q,he.StrictMode=s,he.Suspense=p,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,he.__COMPILER_RUNTIME={__proto__:null,c:function(v){return M.H.useMemoCache(v)}},he.cache=function(v){return function(){return v.apply(null,arguments)}},he.cacheSignal=function(){return null},he.cloneElement=function(v,j,N){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var H=R({},v.props),P=v.key;if(j!=null)for(te in j.key!==void 0&&(P=""+j.key),j)!I.call(j,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&j.ref===void 0||(H[te]=j[te]);var te=arguments.length-2;if(te===1)H.children=N;else if(1<te){for(var fe=Array(te),Ue=0;Ue<te;Ue++)fe[Ue]=arguments[Ue+2];H.children=fe}return ue(v.type,P,H)},he.createContext=function(v){return v={$$typeof:f,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:d,_context:v},v},he.createElement=function(v,j,N){var H,P={},te=null;if(j!=null)for(H in j.key!==void 0&&(te=""+j.key),j)I.call(j,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(P[H]=j[H]);var fe=arguments.length-2;if(fe===1)P.children=N;else if(1<fe){for(var Ue=Array(fe),Me=0;Me<fe;Me++)Ue[Me]=arguments[Me+2];P.children=Ue}if(v&&v.defaultProps)for(H in fe=v.defaultProps,fe)P[H]===void 0&&(P[H]=fe[H]);return ue(v,te,P)},he.createRef=function(){return{current:null}},he.forwardRef=function(v){return{$$typeof:g,render:v}},he.isValidElement=Te,he.lazy=function(v){return{$$typeof:b,_payload:{_status:-1,_result:v},_init:C}},he.memo=function(v,j){return{$$typeof:m,type:v,compare:j===void 0?null:j}},he.startTransition=function(v){var j=M.T,N={};M.T=N;try{var H=v(),P=M.S;P!==null&&P(N,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(re,K)}catch(te){K(te)}finally{j!==null&&N.types!==null&&(j.types=N.types),M.T=j}},he.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},he.use=function(v){return M.H.use(v)},he.useActionState=function(v,j,N){return M.H.useActionState(v,j,N)},he.useCallback=function(v,j){return M.H.useCallback(v,j)},he.useContext=function(v){return M.H.useContext(v)},he.useDebugValue=function(){},he.useDeferredValue=function(v,j){return M.H.useDeferredValue(v,j)},he.useEffect=function(v,j){return M.H.useEffect(v,j)},he.useEffectEvent=function(v){return M.H.useEffectEvent(v)},he.useId=function(){return M.H.useId()},he.useImperativeHandle=function(v,j,N){return M.H.useImperativeHandle(v,j,N)},he.useInsertionEffect=function(v,j){return M.H.useInsertionEffect(v,j)},he.useLayoutEffect=function(v,j){return M.H.useLayoutEffect(v,j)},he.useMemo=function(v,j){return M.H.useMemo(v,j)},he.useOptimistic=function(v,j){return M.H.useOptimistic(v,j)},he.useReducer=function(v,j,N){return M.H.useReducer(v,j,N)},he.useRef=function(v){return M.H.useRef(v)},he.useState=function(v){return M.H.useState(v)},he.useSyncExternalStore=function(v,j,N){return M.H.useSyncExternalStore(v,j,N)},he.useTransition=function(){return M.H.useTransition()},he.version="19.2.0",he}var ug;function Ju(){return ug||(ug=1,bu.exports=vy()),bu.exports}var q=Ju();const gr=Xu(q);var _u={exports:{}},or={},wu={exports:{}},Su={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg;function by(){return cg||(cg=1,(function(l){function i(z,X){var C=z.length;z.push(X);e:for(;0<C;){var K=C-1>>>1,F=z[K];if(0<c(F,X))z[K]=X,z[C]=F,C=K;else break e}}function r(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var X=z[0],C=z.pop();if(C!==X){z[0]=C;e:for(var K=0,F=z.length,v=F>>>1;K<v;){var j=2*(K+1)-1,N=z[j],H=j+1,P=z[H];if(0>c(N,C))H<F&&0>c(P,N)?(z[K]=P,z[H]=C,K=H):(z[K]=N,z[j]=C,K=j);else if(H<F&&0>c(P,C))z[K]=P,z[H]=C,K=H;else break e}}return X}function c(z,X){var C=z.sortIndex-X.sortIndex;return C!==0?C:z.id-X.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var f=Date,g=f.now();l.unstable_now=function(){return f.now()-g}}var p=[],m=[],b=1,w=null,T=3,E=!1,A=!1,R=!1,L=!1,Y=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function W(z){for(var X=r(m);X!==null;){if(X.callback===null)s(m);else if(X.startTime<=z)s(m),X.sortIndex=X.expirationTime,i(p,X);else break;X=r(m)}}function ae(z){if(R=!1,W(z),!A)if(r(p)!==null)A=!0,re||(re=!0,Ee());else{var X=r(m);X!==null&&ye(ae,X.startTime-z)}}var re=!1,M=-1,I=5,ue=-1;function ve(){return L?!0:!(l.unstable_now()-ue<I)}function Te(){if(L=!1,re){var z=l.unstable_now();ue=z;var X=!0;try{e:{A=!1,R&&(R=!1,Z(M),M=-1),E=!0;var C=T;try{t:{for(W(z),w=r(p);w!==null&&!(w.expirationTime>z&&ve());){var K=w.callback;if(typeof K=="function"){w.callback=null,T=w.priorityLevel;var F=K(w.expirationTime<=z);if(z=l.unstable_now(),typeof F=="function"){w.callback=F,W(z),X=!0;break t}w===r(p)&&s(p),W(z)}else s(p);w=r(p)}if(w!==null)X=!0;else{var v=r(m);v!==null&&ye(ae,v.startTime-z),X=!1}}break e}finally{w=null,T=C,E=!1}X=void 0}}finally{X?Ee():re=!1}}}var Ee;if(typeof Q=="function")Ee=function(){Q(Te)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ee=ne.port2;ne.port1.onmessage=Te,Ee=function(){ee.postMessage(null)}}else Ee=function(){Y(Te,0)};function ye(z,X){M=Y(function(){z(l.unstable_now())},X)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(z){z.callback=null},l.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},l.unstable_getCurrentPriorityLevel=function(){return T},l.unstable_next=function(z){switch(T){case 1:case 2:case 3:var X=3;break;default:X=T}var C=T;T=X;try{return z()}finally{T=C}},l.unstable_requestPaint=function(){L=!0},l.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var C=T;T=z;try{return X()}finally{T=C}},l.unstable_scheduleCallback=function(z,X,C){var K=l.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?K+C:K):C=K,z){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=C+F,z={id:b++,callback:X,priorityLevel:z,startTime:C,expirationTime:F,sortIndex:-1},C>K?(z.sortIndex=C,i(m,z),r(p)===null&&z===r(m)&&(R?(Z(M),M=-1):R=!0,ye(ae,C-K))):(z.sortIndex=F,i(p,z),A||E||(A=!0,re||(re=!0,Ee()))),z},l.unstable_shouldYield=ve,l.unstable_wrapCallback=function(z){var X=T;return function(){var C=T;T=X;try{return z.apply(this,arguments)}finally{T=C}}}})(Su)),Su}var dg;function _y(){return dg||(dg=1,wu.exports=by()),wu.exports}var xu={exports:{}},lt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg;function wy(){if(fg)return lt;fg=1;var l=Ju();function i(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(i(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(p,m,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:p,containerInfo:m,implementation:b}}var f=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,lt.createPortal=function(p,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(i(299));return d(p,m,null,b)},lt.flushSync=function(p){var m=f.T,b=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=m,s.p=b,s.d.f()}},lt.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},lt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},lt.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var b=m.as,w=g(b,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,E=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;b==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:E}):b==="script"&&s.d.X(p,{crossOrigin:w,integrity:T,fetchPriority:E,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},lt.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var b=g(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},lt.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var b=m.as,w=g(b,m.crossOrigin);s.d.L(p,b,{crossOrigin:w,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},lt.preloadModule=function(p,m){if(typeof p=="string")if(m){var b=g(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},lt.requestFormReset=function(p){s.d.r(p)},lt.unstable_batchedUpdates=function(p,m){return p(m)},lt.useFormState=function(p,m,b){return f.H.useFormState(p,m,b)},lt.useFormStatus=function(){return f.H.useHostTransitionStatus()},lt.version="19.2.0",lt}var hg;function Sy(){if(hg)return xu.exports;hg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),xu.exports=wy(),xu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg;function xy(){if(gg)return or;gg=1;var l=_y(),i=Ju(),r=Sy();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(s(188))}function m(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,a=t;;){var o=n.return;if(o===null)break;var u=o.alternate;if(u===null){if(a=o.return,a!==null){n=a;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===n)return p(o),e;if(u===a)return p(o),t;u=u.sibling}throw Error(s(188))}if(n.return!==a.return)n=o,a=u;else{for(var h=!1,y=o.child;y;){if(y===n){h=!0,n=o,a=u;break}if(y===a){h=!0,a=o,n=u;break}y=y.sibling}if(!h){for(y=u.child;y;){if(y===n){h=!0,n=u,a=o;break}if(y===a){h=!0,a=u,n=o;break}y=y.sibling}if(!h)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),ve=Symbol.for("react.memo_cache_sentinel"),Te=Symbol.iterator;function Ee(e){return e===null||typeof e!="object"?null:(e=Te&&e[Te]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Symbol.for("react.client.reference");function ee(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ne?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case Y:return"Profiler";case L:return"StrictMode";case ae:return"Suspense";case re:return"SuspenseList";case ue:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case Q:return e.displayName||"Context";case Z:return(e._context.displayName||"Context")+".Consumer";case W:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return t=e.displayName||null,t!==null?t:ee(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return ee(e(t))}catch{}}return null}var ye=Array.isArray,z=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,C={pending:!1,data:null,method:null,action:null},K=[],F=-1;function v(e){return{current:e}}function j(e){0>F||(e.current=K[F],K[F]=null,F--)}function N(e,t){F++,K[F]=e.current,e.current=t}var H=v(null),P=v(null),te=v(null),fe=v(null);function Ue(e,t){switch(N(te,t),N(P,e),N(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Rh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Rh(t),e=Ch(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(H),N(H,e)}function Me(){j(H),j(P),j(te)}function It(e){e.memoizedState!==null&&N(fe,e);var t=H.current,n=Ch(t,e.type);t!==n&&(N(P,e),N(H,n))}function br(e){P.current===e&&(j(H),j(P)),fe.current===e&&(j(fe),ir._currentValue=C)}var Ws,ac;function Qn(e){if(Ws===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ws=t&&t[1]||"",ac=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ws+e+ac}var el=!1;function tl(e,t){if(!e||el)return"";el=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(B){var D=B}Reflect.construct(e,[],V)}else{try{V.call()}catch(B){D=B}e.call(V.prototype)}}else{try{throw Error()}catch(B){D=B}(V=e())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(B){if(B&&D&&typeof B.stack=="string")return[B.stack,D.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=a.DetermineComponentFrameRoot(),h=u[0],y=u[1];if(h&&y){var S=h.split(`
`),k=y.split(`
`);for(o=a=0;a<S.length&&!S[a].includes("DetermineComponentFrameRoot");)a++;for(;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;if(a===S.length||o===k.length)for(a=S.length-1,o=k.length-1;1<=a&&0<=o&&S[a]!==k[o];)o--;for(;1<=a&&0<=o;a--,o--)if(S[a]!==k[o]){if(a!==1||o!==1)do if(a--,o--,0>o||S[a]!==k[o]){var $=`
`+S[a].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=a&&0<=o);break}}}finally{el=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Qn(n):""}function Qm(e,t){switch(e.tag){case 26:case 27:case 5:return Qn(e.type);case 16:return Qn("Lazy");case 13:return e.child!==t&&t!==null?Qn("Suspense Fallback"):Qn("Suspense");case 19:return Qn("SuspenseList");case 0:case 15:return tl(e.type,!1);case 11:return tl(e.type.render,!1);case 1:return tl(e.type,!0);case 31:return Qn("Activity");default:return""}}function rc(e){try{var t="",n=null;do t+=Qm(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var nl=Object.prototype.hasOwnProperty,il=l.unstable_scheduleCallback,al=l.unstable_cancelCallback,Xm=l.unstable_shouldYield,Jm=l.unstable_requestPaint,yt=l.unstable_now,Zm=l.unstable_getCurrentPriorityLevel,sc=l.unstable_ImmediatePriority,lc=l.unstable_UserBlockingPriority,_r=l.unstable_NormalPriority,Im=l.unstable_LowPriority,oc=l.unstable_IdlePriority,Pm=l.log,Fm=l.unstable_setDisableYieldValue,ma=null,vt=null;function yn(e){if(typeof Pm=="function"&&Fm(e),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(ma,e)}catch{}}var bt=Math.clz32?Math.clz32:tp,Wm=Math.log,ep=Math.LN2;function tp(e){return e>>>=0,e===0?32:31-(Wm(e)/ep|0)|0}var wr=256,Sr=262144,xr=4194304;function Xn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Er(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var o=0,u=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var y=a&134217727;return y!==0?(a=y&~u,a!==0?o=Xn(a):(h&=y,h!==0?o=Xn(h):n||(n=y&~e,n!==0&&(o=Xn(n))))):(y=a&~u,y!==0?o=Xn(y):h!==0?o=Xn(h):n||(n=a&~e,n!==0&&(o=Xn(n)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,n=t&-t,u>=n||u===32&&(n&4194048)!==0)?t:o}function pa(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function np(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uc(){var e=xr;return xr<<=1,(xr&62914560)===0&&(xr=4194304),e}function rl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ya(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ip(e,t,n,a,o,u){var h=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var y=e.entanglements,S=e.expirationTimes,k=e.hiddenUpdates;for(n=h&~n;0<n;){var $=31-bt(n),V=1<<$;y[$]=0,S[$]=-1;var D=k[$];if(D!==null)for(k[$]=null,$=0;$<D.length;$++){var B=D[$];B!==null&&(B.lane&=-536870913)}n&=~V}a!==0&&cc(e,a,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(h&~t))}function cc(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-bt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function dc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-bt(n),o=1<<a;o&t|e[a]&t&&(e[a]|=t),n&=~o}}function fc(e,t){var n=t&-t;return n=(n&42)!==0?1:sl(n),(n&(e.suspendedLanes|t))!==0?0:n}function sl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ll(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function hc(){var e=X.p;return e!==0?e:(e=window.event,e===void 0?32:Wh(e.type))}function gc(e,t){var n=X.p;try{return X.p=e,t()}finally{X.p=n}}var vn=Math.random().toString(36).slice(2),tt="__reactFiber$"+vn,ct="__reactProps$"+vn,vi="__reactContainer$"+vn,ol="__reactEvents$"+vn,ap="__reactListeners$"+vn,rp="__reactHandles$"+vn,mc="__reactResources$"+vn,va="__reactMarker$"+vn;function ul(e){delete e[tt],delete e[ct],delete e[ol],delete e[ap],delete e[rp]}function bi(e){var t=e[tt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[tt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Bh(e);e!==null;){if(n=e[tt])return n;e=Bh(e)}return t}e=n,n=e.parentNode}return null}function _i(e){if(e=e[tt]||e[vi]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ba(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function wi(e){var t=e[mc];return t||(t=e[mc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[va]=!0}var pc=new Set,yc={};function Jn(e,t){Si(e,t),Si(e+"Capture",t)}function Si(e,t){for(yc[e]=t,e=0;e<t.length;e++)pc.add(t[e])}var sp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vc={},bc={};function lp(e){return nl.call(bc,e)?!0:nl.call(vc,e)?!1:sp.test(e)?bc[e]=!0:(vc[e]=!0,!1)}function Tr(e,t,n){if(lp(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ar(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Pt(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function Ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _c(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function op(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var o=a.get,u=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){n=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cl(e){if(!e._valueTracker){var t=_c(e)?"checked":"value";e._valueTracker=op(e,t,""+e[t])}}function wc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=_c(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Or(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var up=/[\n"\\]/g;function Ut(e){return e.replace(up,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function dl(e,t,n,a,o,u,h,y){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ct(t)):e.value!==""+Ct(t)&&(e.value=""+Ct(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?fl(e,h,Ct(t)):n!=null?fl(e,h,Ct(n)):a!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+Ct(y):e.removeAttribute("name")}function Sc(e,t,n,a,o,u,h,y){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||n!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){cl(e);return}n=n!=null?""+Ct(n):"",t=t!=null?""+Ct(t):n,y||t===e.value||(e.value=t),e.defaultValue=t}a=a??o,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=y?e.checked:!!a,e.defaultChecked=!!a,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),cl(e)}function fl(e,t,n){t==="number"&&Or(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xi(e,t,n,a){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Ct(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,a&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function xc(e,t,n){if(t!=null&&(t=""+Ct(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Ct(n):""}function Ec(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(s(92));if(ye(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=Ct(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),cl(e)}function Ei(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var cp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tc(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||cp.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ac(e,t,n){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var o in t)a=t[o],t.hasOwnProperty(o)&&n[o]!==a&&Tc(e,o,a)}else for(var u in t)t.hasOwnProperty(u)&&Tc(e,u,t[u])}function hl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jr(e){return fp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ft(){}var gl=null;function ml(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ti=null,Ai=null;function Oc(e){var t=_i(e);if(t&&(e=t.stateNode)){var n=e[ct]||null;e:switch(e=t.stateNode,t.type){case"input":if(dl(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ut(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var o=a[ct]||null;if(!o)throw Error(s(90));dl(a,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&wc(a)}break e;case"textarea":xc(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&xi(e,!!n.multiple,t,!1)}}}var pl=!1;function jc(e,t,n){if(pl)return e(t,n);pl=!0;try{var a=e(t);return a}finally{if(pl=!1,(Ti!==null||Ai!==null)&&(ms(),Ti&&(t=Ti,e=Ai,Ai=Ti=null,Oc(t),e)))for(t=0;t<e.length;t++)Oc(e[t])}}function _a(e,t){var n=e.stateNode;if(n===null)return null;var a=n[ct]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yl=!1;if(Wt)try{var wa={};Object.defineProperty(wa,"passive",{get:function(){yl=!0}}),window.addEventListener("test",wa,wa),window.removeEventListener("test",wa,wa)}catch{yl=!1}var bn=null,vl=null,Rr=null;function Rc(){if(Rr)return Rr;var e,t=vl,n=t.length,a,o="value"in bn?bn.value:bn.textContent,u=o.length;for(e=0;e<n&&t[e]===o[e];e++);var h=n-e;for(a=1;a<=h&&t[n-a]===o[u-a];a++);return Rr=o.slice(e,1<a?1-a:void 0)}function Cr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ur(){return!0}function Cc(){return!1}function dt(e){function t(n,a,o,u,h){this._reactName=n,this._targetInst=o,this.type=a,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(n=e[y],this[y]=n?n(u):u[y]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Ur:Cc,this.isPropagationStopped=Cc,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),t}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kr=dt(Zn),Sa=w({},Zn,{view:0,detail:0}),hp=dt(Sa),bl,_l,xa,zr=w({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xa&&(xa&&e.type==="mousemove"?(bl=e.screenX-xa.screenX,_l=e.screenY-xa.screenY):_l=bl=0,xa=e),bl)},movementY:function(e){return"movementY"in e?e.movementY:_l}}),Uc=dt(zr),gp=w({},zr,{dataTransfer:0}),mp=dt(gp),pp=w({},Sa,{relatedTarget:0}),wl=dt(pp),yp=w({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),vp=dt(yp),bp=w({},Zn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_p=dt(bp),wp=w({},Zn,{data:0}),kc=dt(wp),Sp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ep={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ep[e])?!!t[e]:!1}function Sl(){return Tp}var Ap=w({},Sa,{key:function(e){if(e.key){var t=Sp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sl,charCode:function(e){return e.type==="keypress"?Cr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Op=dt(Ap),jp=w({},zr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zc=dt(jp),Rp=w({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sl}),Cp=dt(Rp),Up=w({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),kp=dt(Up),zp=w({},zr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dp=dt(zp),Mp=w({},Zn,{newState:0,oldState:0}),Np=dt(Mp),Bp=[9,13,27,32],xl=Wt&&"CompositionEvent"in window,Ea=null;Wt&&"documentMode"in document&&(Ea=document.documentMode);var qp=Wt&&"TextEvent"in window&&!Ea,Dc=Wt&&(!xl||Ea&&8<Ea&&11>=Ea),Mc=" ",Nc=!1;function Bc(e,t){switch(e){case"keyup":return Bp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oi=!1;function Lp(e,t){switch(e){case"compositionend":return qc(t);case"keypress":return t.which!==32?null:(Nc=!0,Mc);case"textInput":return e=t.data,e===Mc&&Nc?null:e;default:return null}}function Hp(e,t){if(Oi)return e==="compositionend"||!xl&&Bc(e,t)?(e=Rc(),Rr=vl=bn=null,Oi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dc&&t.locale!=="ko"?null:t.data;default:return null}}var $p={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$p[e.type]:t==="textarea"}function Hc(e,t,n,a){Ti?Ai?Ai.push(a):Ai=[a]:Ti=a,t=Ss(t,"onChange"),0<t.length&&(n=new kr("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Ta=null,Aa=null;function Gp(e){xh(e,0)}function Dr(e){var t=ba(e);if(wc(t))return e}function $c(e,t){if(e==="change")return t}var Gc=!1;if(Wt){var El;if(Wt){var Tl="oninput"in document;if(!Tl){var Vc=document.createElement("div");Vc.setAttribute("oninput","return;"),Tl=typeof Vc.oninput=="function"}El=Tl}else El=!1;Gc=El&&(!document.documentMode||9<document.documentMode)}function Yc(){Ta&&(Ta.detachEvent("onpropertychange",Kc),Aa=Ta=null)}function Kc(e){if(e.propertyName==="value"&&Dr(Aa)){var t=[];Hc(t,Aa,e,ml(e)),jc(Gp,t)}}function Vp(e,t,n){e==="focusin"?(Yc(),Ta=t,Aa=n,Ta.attachEvent("onpropertychange",Kc)):e==="focusout"&&Yc()}function Yp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Dr(Aa)}function Kp(e,t){if(e==="click")return Dr(t)}function Qp(e,t){if(e==="input"||e==="change")return Dr(t)}function Xp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:Xp;function Oa(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var o=n[a];if(!nl.call(t,o)||!_t(e[o],t[o]))return!1}return!0}function Qc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xc(e,t){var n=Qc(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qc(n)}}function Jc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Or(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Or(e.document)}return t}function Al(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Jp=Wt&&"documentMode"in document&&11>=document.documentMode,ji=null,Ol=null,ja=null,jl=!1;function Ic(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jl||ji==null||ji!==Or(a)||(a=ji,"selectionStart"in a&&Al(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ja&&Oa(ja,a)||(ja=a,a=Ss(Ol,"onSelect"),0<a.length&&(t=new kr("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ji)))}function In(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ri={animationend:In("Animation","AnimationEnd"),animationiteration:In("Animation","AnimationIteration"),animationstart:In("Animation","AnimationStart"),transitionrun:In("Transition","TransitionRun"),transitionstart:In("Transition","TransitionStart"),transitioncancel:In("Transition","TransitionCancel"),transitionend:In("Transition","TransitionEnd")},Rl={},Pc={};Wt&&(Pc=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function Pn(e){if(Rl[e])return Rl[e];if(!Ri[e])return e;var t=Ri[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Pc)return Rl[e]=t[n];return e}var Fc=Pn("animationend"),Wc=Pn("animationiteration"),ed=Pn("animationstart"),Zp=Pn("transitionrun"),Ip=Pn("transitionstart"),Pp=Pn("transitioncancel"),td=Pn("transitionend"),nd=new Map,Cl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cl.push("scrollEnd");function Ht(e,t){nd.set(e,t),Jn(t,[e])}var Mr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},kt=[],Ci=0,Ul=0;function Nr(){for(var e=Ci,t=Ul=Ci=0;t<e;){var n=kt[t];kt[t++]=null;var a=kt[t];kt[t++]=null;var o=kt[t];kt[t++]=null;var u=kt[t];if(kt[t++]=null,a!==null&&o!==null){var h=a.pending;h===null?o.next=o:(o.next=h.next,h.next=o),a.pending=o}u!==0&&id(n,o,u)}}function Br(e,t,n,a){kt[Ci++]=e,kt[Ci++]=t,kt[Ci++]=n,kt[Ci++]=a,Ul|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function kl(e,t,n,a){return Br(e,t,n,a),qr(e)}function Fn(e,t){return Br(e,null,null,t),qr(e)}function id(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var o=!1,u=e.return;u!==null;)u.childLanes|=n,a=u.alternate,a!==null&&(a.childLanes|=n),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-bt(n),e=u.hiddenUpdates,a=e[o],a===null?e[o]=[t]:a.push(t),t.lane=n|536870912),u):null}function qr(e){if(50<Ia)throw Ia=0,Go=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ui={};function Fp(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,n,a){return new Fp(e,t,n,a)}function zl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function en(e,t){var n=e.alternate;return n===null?(n=wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ad(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Lr(e,t,n,a,o,u){var h=0;if(a=e,typeof e=="function")zl(e)&&(h=1);else if(typeof e=="string")h=iy(e,n,H.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ue:return e=wt(31,n,t,o),e.elementType=ue,e.lanes=u,e;case R:return Wn(n.children,o,u,t);case L:h=8,o|=24;break;case Y:return e=wt(12,n,t,o|2),e.elementType=Y,e.lanes=u,e;case ae:return e=wt(13,n,t,o),e.elementType=ae,e.lanes=u,e;case re:return e=wt(19,n,t,o),e.elementType=re,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:h=10;break e;case Z:h=9;break e;case W:h=11;break e;case M:h=14;break e;case I:h=16,a=null;break e}h=29,n=Error(s(130,e===null?"null":typeof e,"")),a=null}return t=wt(h,n,t,o),t.elementType=e,t.type=a,t.lanes=u,t}function Wn(e,t,n,a){return e=wt(7,e,a,t),e.lanes=n,e}function Dl(e,t,n){return e=wt(6,e,null,t),e.lanes=n,e}function rd(e){var t=wt(18,null,null,0);return t.stateNode=e,t}function Ml(e,t,n){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var sd=new WeakMap;function zt(e,t){if(typeof e=="object"&&e!==null){var n=sd.get(e);return n!==void 0?n:(t={value:e,source:t,stack:rc(t)},sd.set(e,t),t)}return{value:e,source:t,stack:rc(t)}}var ki=[],zi=0,Hr=null,Ra=0,Dt=[],Mt=0,_n=null,Qt=1,Xt="";function tn(e,t){ki[zi++]=Ra,ki[zi++]=Hr,Hr=e,Ra=t}function ld(e,t,n){Dt[Mt++]=Qt,Dt[Mt++]=Xt,Dt[Mt++]=_n,_n=e;var a=Qt;e=Xt;var o=32-bt(a)-1;a&=~(1<<o),n+=1;var u=32-bt(t)+o;if(30<u){var h=o-o%5;u=(a&(1<<h)-1).toString(32),a>>=h,o-=h,Qt=1<<32-bt(t)+o|n<<o|a,Xt=u+e}else Qt=1<<u|n<<o|a,Xt=e}function Nl(e){e.return!==null&&(tn(e,1),ld(e,1,0))}function Bl(e){for(;e===Hr;)Hr=ki[--zi],ki[zi]=null,Ra=ki[--zi],ki[zi]=null;for(;e===_n;)_n=Dt[--Mt],Dt[Mt]=null,Xt=Dt[--Mt],Dt[Mt]=null,Qt=Dt[--Mt],Dt[Mt]=null}function od(e,t){Dt[Mt++]=Qt,Dt[Mt++]=Xt,Dt[Mt++]=_n,Qt=t.id,Xt=t.overflow,_n=e}var nt=null,qe=null,xe=!1,wn=null,Nt=!1,ql=Error(s(519));function Sn(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ca(zt(t,e)),ql}function ud(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[tt]=e,t[ct]=a,n){case"dialog":_e("cancel",t),_e("close",t);break;case"iframe":case"object":case"embed":_e("load",t);break;case"video":case"audio":for(n=0;n<Fa.length;n++)_e(Fa[n],t);break;case"source":_e("error",t);break;case"img":case"image":case"link":_e("error",t),_e("load",t);break;case"details":_e("toggle",t);break;case"input":_e("invalid",t),Sc(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":_e("invalid",t);break;case"textarea":_e("invalid",t),Ec(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||Oh(t.textContent,n)?(a.popover!=null&&(_e("beforetoggle",t),_e("toggle",t)),a.onScroll!=null&&_e("scroll",t),a.onScrollEnd!=null&&_e("scrollend",t),a.onClick!=null&&(t.onclick=Ft),t=!0):t=!1,t||Sn(e,!0)}function cd(e){for(nt=e.return;nt;)switch(nt.tag){case 5:case 31:case 13:Nt=!1;return;case 27:case 3:Nt=!0;return;default:nt=nt.return}}function Di(e){if(e!==nt)return!1;if(!xe)return cd(e),xe=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||iu(e.type,e.memoizedProps)),n=!n),n&&qe&&Sn(e),cd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));qe=Nh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));qe=Nh(e)}else t===27?(t=qe,Nn(e.type)?(e=ou,ou=null,qe=e):qe=t):qe=nt?qt(e.stateNode.nextSibling):null;return!0}function ei(){qe=nt=null,xe=!1}function Ll(){var e=wn;return e!==null&&(mt===null?mt=e:mt.push.apply(mt,e),wn=null),e}function Ca(e){wn===null?wn=[e]:wn.push(e)}var Hl=v(null),ti=null,nn=null;function xn(e,t,n){N(Hl,t._currentValue),t._currentValue=n}function an(e){e._currentValue=Hl.current,j(Hl)}function $l(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Gl(e,t,n,a){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var h=o.child;u=u.firstContext;e:for(;u!==null;){var y=u;u=o;for(var S=0;S<t.length;S++)if(y.context===t[S]){u.lanes|=n,y=u.alternate,y!==null&&(y.lanes|=n),$l(u.return,n,e),a||(h=null);break e}u=y.next}}else if(o.tag===18){if(h=o.return,h===null)throw Error(s(341));h.lanes|=n,u=h.alternate,u!==null&&(u.lanes|=n),$l(h,n,e),h=null}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===e){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}}function Mi(e,t,n,a){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var h=o.alternate;if(h===null)throw Error(s(387));if(h=h.memoizedProps,h!==null){var y=o.type;_t(o.pendingProps.value,h.value)||(e!==null?e.push(y):e=[y])}}else if(o===fe.current){if(h=o.alternate,h===null)throw Error(s(387));h.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(ir):e=[ir])}o=o.return}e!==null&&Gl(t,e,n,a),t.flags|=262144}function $r(e){for(e=e.firstContext;e!==null;){if(!_t(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ni(e){ti=e,nn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function it(e){return dd(ti,e)}function Gr(e,t){return ti===null&&ni(e),dd(e,t)}function dd(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},nn===null){if(e===null)throw Error(s(308));nn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else nn=nn.next=t;return n}var Wp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},e0=l.unstable_scheduleCallback,t0=l.unstable_NormalPriority,Qe={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vl(){return{controller:new Wp,data:new Map,refCount:0}}function Ua(e){e.refCount--,e.refCount===0&&e0(t0,function(){e.controller.abort()})}var ka=null,Yl=0,Ni=0,Bi=null;function n0(e,t){if(ka===null){var n=ka=[];Yl=0,Ni=Jo(),Bi={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Yl++,t.then(fd,fd),t}function fd(){if(--Yl===0&&ka!==null){Bi!==null&&(Bi.status="fulfilled");var e=ka;ka=null,Ni=0,Bi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function i0(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(a.status="rejected",a.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),a}var hd=z.S;z.S=function(e,t){Pf=yt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&n0(e,t),hd!==null&&hd(e,t)};var ii=v(null);function Kl(){var e=ii.current;return e!==null?e:Ne.pooledCache}function Vr(e,t){t===null?N(ii,ii.current):N(ii,t.pool)}function gd(){var e=Kl();return e===null?null:{parent:Qe._currentValue,pool:e}}var qi=Error(s(460)),Ql=Error(s(474)),Yr=Error(s(542)),Kr={then:function(){}};function md(e){return e=e.status,e==="fulfilled"||e==="rejected"}function pd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ft,Ft),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,vd(e),e;default:if(typeof t.status=="string")t.then(Ft,Ft);else{if(e=Ne,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=a}},function(a){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,vd(e),e}throw ri=t,qi}}function ai(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(ri=n,qi):n}}var ri=null;function yd(){if(ri===null)throw Error(s(459));var e=ri;return ri=null,e}function vd(e){if(e===qi||e===Yr)throw Error(s(483))}var Li=null,za=0;function Qr(e){var t=za;return za+=1,Li===null&&(Li=[]),pd(Li,e,t)}function Da(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Xr(e,t){throw t.$$typeof===T?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function bd(e){function t(O,x){if(e){var U=O.deletions;U===null?(O.deletions=[x],O.flags|=16):U.push(x)}}function n(O,x){if(!e)return null;for(;x!==null;)t(O,x),x=x.sibling;return null}function a(O){for(var x=new Map;O!==null;)O.key!==null?x.set(O.key,O):x.set(O.index,O),O=O.sibling;return x}function o(O,x){return O=en(O,x),O.index=0,O.sibling=null,O}function u(O,x,U){return O.index=U,e?(U=O.alternate,U!==null?(U=U.index,U<x?(O.flags|=67108866,x):U):(O.flags|=67108866,x)):(O.flags|=1048576,x)}function h(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function y(O,x,U,G){return x===null||x.tag!==6?(x=Dl(U,O.mode,G),x.return=O,x):(x=o(x,U),x.return=O,x)}function S(O,x,U,G){var oe=U.type;return oe===R?$(O,x,U.props.children,G,U.key):x!==null&&(x.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===I&&ai(oe)===x.type)?(x=o(x,U.props),Da(x,U),x.return=O,x):(x=Lr(U.type,U.key,U.props,null,O.mode,G),Da(x,U),x.return=O,x)}function k(O,x,U,G){return x===null||x.tag!==4||x.stateNode.containerInfo!==U.containerInfo||x.stateNode.implementation!==U.implementation?(x=Ml(U,O.mode,G),x.return=O,x):(x=o(x,U.children||[]),x.return=O,x)}function $(O,x,U,G,oe){return x===null||x.tag!==7?(x=Wn(U,O.mode,G,oe),x.return=O,x):(x=o(x,U),x.return=O,x)}function V(O,x,U){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=Dl(""+x,O.mode,U),x.return=O,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case E:return U=Lr(x.type,x.key,x.props,null,O.mode,U),Da(U,x),U.return=O,U;case A:return x=Ml(x,O.mode,U),x.return=O,x;case I:return x=ai(x),V(O,x,U)}if(ye(x)||Ee(x))return x=Wn(x,O.mode,U,null),x.return=O,x;if(typeof x.then=="function")return V(O,Qr(x),U);if(x.$$typeof===Q)return V(O,Gr(O,x),U);Xr(O,x)}return null}function D(O,x,U,G){var oe=x!==null?x.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return oe!==null?null:y(O,x,""+U,G);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case E:return U.key===oe?S(O,x,U,G):null;case A:return U.key===oe?k(O,x,U,G):null;case I:return U=ai(U),D(O,x,U,G)}if(ye(U)||Ee(U))return oe!==null?null:$(O,x,U,G,null);if(typeof U.then=="function")return D(O,x,Qr(U),G);if(U.$$typeof===Q)return D(O,x,Gr(O,U),G);Xr(O,U)}return null}function B(O,x,U,G,oe){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return O=O.get(U)||null,y(x,O,""+G,oe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case E:return O=O.get(G.key===null?U:G.key)||null,S(x,O,G,oe);case A:return O=O.get(G.key===null?U:G.key)||null,k(x,O,G,oe);case I:return G=ai(G),B(O,x,U,G,oe)}if(ye(G)||Ee(G))return O=O.get(U)||null,$(x,O,G,oe,null);if(typeof G.then=="function")return B(O,x,U,Qr(G),oe);if(G.$$typeof===Q)return B(O,x,U,Gr(x,G),oe);Xr(x,G)}return null}function ie(O,x,U,G){for(var oe=null,Ae=null,se=x,pe=x=0,Se=null;se!==null&&pe<U.length;pe++){se.index>pe?(Se=se,se=null):Se=se.sibling;var Oe=D(O,se,U[pe],G);if(Oe===null){se===null&&(se=Se);break}e&&se&&Oe.alternate===null&&t(O,se),x=u(Oe,x,pe),Ae===null?oe=Oe:Ae.sibling=Oe,Ae=Oe,se=Se}if(pe===U.length)return n(O,se),xe&&tn(O,pe),oe;if(se===null){for(;pe<U.length;pe++)se=V(O,U[pe],G),se!==null&&(x=u(se,x,pe),Ae===null?oe=se:Ae.sibling=se,Ae=se);return xe&&tn(O,pe),oe}for(se=a(se);pe<U.length;pe++)Se=B(se,O,pe,U[pe],G),Se!==null&&(e&&Se.alternate!==null&&se.delete(Se.key===null?pe:Se.key),x=u(Se,x,pe),Ae===null?oe=Se:Ae.sibling=Se,Ae=Se);return e&&se.forEach(function($n){return t(O,$n)}),xe&&tn(O,pe),oe}function de(O,x,U,G){if(U==null)throw Error(s(151));for(var oe=null,Ae=null,se=x,pe=x=0,Se=null,Oe=U.next();se!==null&&!Oe.done;pe++,Oe=U.next()){se.index>pe?(Se=se,se=null):Se=se.sibling;var $n=D(O,se,Oe.value,G);if($n===null){se===null&&(se=Se);break}e&&se&&$n.alternate===null&&t(O,se),x=u($n,x,pe),Ae===null?oe=$n:Ae.sibling=$n,Ae=$n,se=Se}if(Oe.done)return n(O,se),xe&&tn(O,pe),oe;if(se===null){for(;!Oe.done;pe++,Oe=U.next())Oe=V(O,Oe.value,G),Oe!==null&&(x=u(Oe,x,pe),Ae===null?oe=Oe:Ae.sibling=Oe,Ae=Oe);return xe&&tn(O,pe),oe}for(se=a(se);!Oe.done;pe++,Oe=U.next())Oe=B(se,O,pe,Oe.value,G),Oe!==null&&(e&&Oe.alternate!==null&&se.delete(Oe.key===null?pe:Oe.key),x=u(Oe,x,pe),Ae===null?oe=Oe:Ae.sibling=Oe,Ae=Oe);return e&&se.forEach(function(gy){return t(O,gy)}),xe&&tn(O,pe),oe}function De(O,x,U,G){if(typeof U=="object"&&U!==null&&U.type===R&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case E:e:{for(var oe=U.key;x!==null;){if(x.key===oe){if(oe=U.type,oe===R){if(x.tag===7){n(O,x.sibling),G=o(x,U.props.children),G.return=O,O=G;break e}}else if(x.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===I&&ai(oe)===x.type){n(O,x.sibling),G=o(x,U.props),Da(G,U),G.return=O,O=G;break e}n(O,x);break}else t(O,x);x=x.sibling}U.type===R?(G=Wn(U.props.children,O.mode,G,U.key),G.return=O,O=G):(G=Lr(U.type,U.key,U.props,null,O.mode,G),Da(G,U),G.return=O,O=G)}return h(O);case A:e:{for(oe=U.key;x!==null;){if(x.key===oe)if(x.tag===4&&x.stateNode.containerInfo===U.containerInfo&&x.stateNode.implementation===U.implementation){n(O,x.sibling),G=o(x,U.children||[]),G.return=O,O=G;break e}else{n(O,x);break}else t(O,x);x=x.sibling}G=Ml(U,O.mode,G),G.return=O,O=G}return h(O);case I:return U=ai(U),De(O,x,U,G)}if(ye(U))return ie(O,x,U,G);if(Ee(U)){if(oe=Ee(U),typeof oe!="function")throw Error(s(150));return U=oe.call(U),de(O,x,U,G)}if(typeof U.then=="function")return De(O,x,Qr(U),G);if(U.$$typeof===Q)return De(O,x,Gr(O,U),G);Xr(O,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,x!==null&&x.tag===6?(n(O,x.sibling),G=o(x,U),G.return=O,O=G):(n(O,x),G=Dl(U,O.mode,G),G.return=O,O=G),h(O)):n(O,x)}return function(O,x,U,G){try{za=0;var oe=De(O,x,U,G);return Li=null,oe}catch(se){if(se===qi||se===Yr)throw se;var Ae=wt(29,se,null,O.mode);return Ae.lanes=G,Ae.return=O,Ae}finally{}}}var si=bd(!0),_d=bd(!1),En=!1;function Xl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Tn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function An(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(je&2)!==0){var o=a.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),a.pending=t,t=qr(e),id(e,null,n),t}return Br(e,a,t,n),qr(e)}function Ma(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,dc(e,n)}}function Zl(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var o=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};u===null?o=u=h:u=u.next=h,n=n.next}while(n!==null);u===null?o=u=t:u=u.next=t}else o=u=t;n={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Il=!1;function Na(){if(Il){var e=Bi;if(e!==null)throw e}}function Ba(e,t,n,a){Il=!1;var o=e.updateQueue;En=!1;var u=o.firstBaseUpdate,h=o.lastBaseUpdate,y=o.shared.pending;if(y!==null){o.shared.pending=null;var S=y,k=S.next;S.next=null,h===null?u=k:h.next=k,h=S;var $=e.alternate;$!==null&&($=$.updateQueue,y=$.lastBaseUpdate,y!==h&&(y===null?$.firstBaseUpdate=k:y.next=k,$.lastBaseUpdate=S))}if(u!==null){var V=o.baseState;h=0,$=k=S=null,y=u;do{var D=y.lane&-536870913,B=D!==y.lane;if(B?(we&D)===D:(a&D)===D){D!==0&&D===Ni&&(Il=!0),$!==null&&($=$.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var ie=e,de=y;D=t;var De=n;switch(de.tag){case 1:if(ie=de.payload,typeof ie=="function"){V=ie.call(De,V,D);break e}V=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=de.payload,D=typeof ie=="function"?ie.call(De,V,D):ie,D==null)break e;V=w({},V,D);break e;case 2:En=!0}}D=y.callback,D!==null&&(e.flags|=64,B&&(e.flags|=8192),B=o.callbacks,B===null?o.callbacks=[D]:B.push(D))}else B={lane:D,tag:y.tag,payload:y.payload,callback:y.callback,next:null},$===null?(k=$=B,S=V):$=$.next=B,h|=D;if(y=y.next,y===null){if(y=o.shared.pending,y===null)break;B=y,y=B.next,B.next=null,o.lastBaseUpdate=B,o.shared.pending=null}}while(!0);$===null&&(S=V),o.baseState=S,o.firstBaseUpdate=k,o.lastBaseUpdate=$,u===null&&(o.shared.lanes=0),Un|=h,e.lanes=h,e.memoizedState=V}}function wd(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Sd(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)wd(n[e],t)}var Hi=v(null),Jr=v(0);function xd(e,t){e=hn,N(Jr,e),N(Hi,t),hn=e|t.baseLanes}function Pl(){N(Jr,hn),N(Hi,Hi.current)}function Fl(){hn=Jr.current,j(Hi),j(Jr)}var St=v(null),Bt=null;function On(e){var t=e.alternate;N(Ye,Ye.current&1),N(St,e),Bt===null&&(t===null||Hi.current!==null||t.memoizedState!==null)&&(Bt=e)}function Wl(e){N(Ye,Ye.current),N(St,e),Bt===null&&(Bt=e)}function Ed(e){e.tag===22?(N(Ye,Ye.current),N(St,e),Bt===null&&(Bt=e)):jn()}function jn(){N(Ye,Ye.current),N(St,St.current)}function xt(e){j(St),Bt===e&&(Bt=null),j(Ye)}var Ye=v(0);function Zr(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||su(n)||lu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rn=0,me=null,ke=null,Xe=null,Ir=!1,$i=!1,li=!1,Pr=0,qa=0,Gi=null,a0=0;function Ge(){throw Error(s(321))}function eo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_t(e[n],t[n]))return!1;return!0}function to(e,t,n,a,o,u){return rn=u,me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z.H=e===null||e.memoizedState===null?of:yo,li=!1,u=n(a,o),li=!1,$i&&(u=Ad(t,n,a,o)),Td(e),u}function Td(e){z.H=$a;var t=ke!==null&&ke.next!==null;if(rn=0,Xe=ke=me=null,Ir=!1,qa=0,Gi=null,t)throw Error(s(300));e===null||Je||(e=e.dependencies,e!==null&&$r(e)&&(Je=!0))}function Ad(e,t,n,a){me=e;var o=0;do{if($i&&(Gi=null),qa=0,$i=!1,25<=o)throw Error(s(301));if(o+=1,Xe=ke=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}z.H=uf,u=t(n,a)}while($i);return u}function r0(){var e=z.H,t=e.useState()[0];return t=typeof t.then=="function"?La(t):t,e=e.useState()[0],(ke!==null?ke.memoizedState:null)!==e&&(me.flags|=1024),t}function no(){var e=Pr!==0;return Pr=0,e}function io(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ao(e){if(Ir){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ir=!1}rn=0,Xe=ke=me=null,$i=!1,qa=Pr=0,Gi=null}function ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?me.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Ke(){if(ke===null){var e=me.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=Xe===null?me.memoizedState:Xe.next;if(t!==null)Xe=t,ke=e;else{if(e===null)throw me.alternate===null?Error(s(467)):Error(s(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Xe===null?me.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function Fr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function La(e){var t=qa;return qa+=1,Gi===null&&(Gi=[]),e=pd(Gi,e,t),t=me,(Xe===null?t.memoizedState:Xe.next)===null&&(t=t.alternate,z.H=t===null||t.memoizedState===null?of:yo),e}function Wr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return La(e);if(e.$$typeof===Q)return it(e)}throw Error(s(438,String(e)))}function ro(e){var t=null,n=me.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=me.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Fr(),me.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=ve;return t.index++,n}function sn(e,t){return typeof t=="function"?t(e):t}function es(e){var t=Ke();return so(t,ke,e)}function so(e,t,n){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var o=e.baseQueue,u=a.pending;if(u!==null){if(o!==null){var h=o.next;o.next=u.next,u.next=h}t.baseQueue=o=u,a.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var y=h=null,S=null,k=t,$=!1;do{var V=k.lane&-536870913;if(V!==k.lane?(we&V)===V:(rn&V)===V){var D=k.revertLane;if(D===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),V===Ni&&($=!0);else if((rn&D)===D){k=k.next,D===Ni&&($=!0);continue}else V={lane:0,revertLane:k.revertLane,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},S===null?(y=S=V,h=u):S=S.next=V,me.lanes|=D,Un|=D;V=k.action,li&&n(u,V),u=k.hasEagerState?k.eagerState:n(u,V)}else D={lane:V,revertLane:k.revertLane,gesture:k.gesture,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},S===null?(y=S=D,h=u):S=S.next=D,me.lanes|=V,Un|=V;k=k.next}while(k!==null&&k!==t);if(S===null?h=u:S.next=y,!_t(u,e.memoizedState)&&(Je=!0,$&&(n=Bi,n!==null)))throw n;e.memoizedState=u,e.baseState=h,e.baseQueue=S,a.lastRenderedState=u}return o===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function lo(e){var t=Ke(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,o=n.pending,u=t.memoizedState;if(o!==null){n.pending=null;var h=o=o.next;do u=e(u,h.action),h=h.next;while(h!==o);_t(u,t.memoizedState)||(Je=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,a]}function Od(e,t,n){var a=me,o=Ke(),u=xe;if(u){if(n===void 0)throw Error(s(407));n=n()}else n=t();var h=!_t((ke||o).memoizedState,n);if(h&&(o.memoizedState=n,Je=!0),o=o.queue,co(Cd.bind(null,a,o,e),[e]),o.getSnapshot!==t||h||Xe!==null&&Xe.memoizedState.tag&1){if(a.flags|=2048,Vi(9,{destroy:void 0},Rd.bind(null,a,o,n,t),null),Ne===null)throw Error(s(349));u||(rn&127)!==0||jd(a,t,n)}return n}function jd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=me.updateQueue,t===null?(t=Fr(),me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Rd(e,t,n,a){t.value=n,t.getSnapshot=a,Ud(t)&&kd(e)}function Cd(e,t,n){return n(function(){Ud(t)&&kd(e)})}function Ud(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_t(e,n)}catch{return!0}}function kd(e){var t=Fn(e,2);t!==null&&pt(t,e,2)}function oo(e){var t=ut();if(typeof e=="function"){var n=e;if(e=n(),li){yn(!0);try{n()}finally{yn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:e},t}function zd(e,t,n,a){return e.baseState=n,so(e,ke,typeof a=="function"?a:sn)}function s0(e,t,n,a,o){if(is(e))throw Error(s(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){u.listeners.push(h)}};z.T!==null?n(!0):u.isTransition=!1,a(u),n=t.pending,n===null?(u.next=t.pending=u,Dd(t,u)):(u.next=n.next,t.pending=n.next=u)}}function Dd(e,t){var n=t.action,a=t.payload,o=e.state;if(t.isTransition){var u=z.T,h={};z.T=h;try{var y=n(o,a),S=z.S;S!==null&&S(h,y),Md(e,t,y)}catch(k){uo(e,t,k)}finally{u!==null&&h.types!==null&&(u.types=h.types),z.T=u}}else try{u=n(o,a),Md(e,t,u)}catch(k){uo(e,t,k)}}function Md(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Nd(e,t,a)},function(a){return uo(e,t,a)}):Nd(e,t,n)}function Nd(e,t,n){t.status="fulfilled",t.value=n,Bd(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Dd(e,n)))}function uo(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,Bd(t),t=t.next;while(t!==a)}e.action=null}function Bd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function qd(e,t){return t}function Ld(e,t){if(xe){var n=Ne.formState;if(n!==null){e:{var a=me;if(xe){if(qe){t:{for(var o=qe,u=Nt;o.nodeType!==8;){if(!u){o=null;break t}if(o=qt(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){qe=qt(o.nextSibling),a=o.data==="F!";break e}}Sn(a)}a=!1}a&&(t=n[0])}}return n=ut(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qd,lastRenderedState:t},n.queue=a,n=rf.bind(null,me,a),a.dispatch=n,a=oo(!1),u=po.bind(null,me,!1,a.queue),a=ut(),o={state:t,dispatch:null,action:e,pending:null},a.queue=o,n=s0.bind(null,me,o,u,n),o.dispatch=n,a.memoizedState=e,[t,n,!1]}function Hd(e){var t=Ke();return $d(t,ke,e)}function $d(e,t,n){if(t=so(e,t,qd)[0],e=es(sn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=La(t)}catch(h){throw h===qi?Yr:h}else a=t;t=Ke();var o=t.queue,u=o.dispatch;return n!==t.memoizedState&&(me.flags|=2048,Vi(9,{destroy:void 0},l0.bind(null,o,n),null)),[a,u,e]}function l0(e,t){e.action=t}function Gd(e){var t=Ke(),n=ke;if(n!==null)return $d(t,n,e);Ke(),t=t.memoizedState,n=Ke();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function Vi(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=me.updateQueue,t===null&&(t=Fr(),me.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Vd(){return Ke().memoizedState}function ts(e,t,n,a){var o=ut();me.flags|=e,o.memoizedState=Vi(1|t,{destroy:void 0},n,a===void 0?null:a)}function ns(e,t,n,a){var o=Ke();a=a===void 0?null:a;var u=o.memoizedState.inst;ke!==null&&a!==null&&eo(a,ke.memoizedState.deps)?o.memoizedState=Vi(t,u,n,a):(me.flags|=e,o.memoizedState=Vi(1|t,u,n,a))}function Yd(e,t){ts(8390656,8,e,t)}function co(e,t){ns(2048,8,e,t)}function o0(e){me.flags|=4;var t=me.updateQueue;if(t===null)t=Fr(),me.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Kd(e){var t=Ke().memoizedState;return o0({ref:t,nextImpl:e}),function(){if((je&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Qd(e,t){return ns(4,2,e,t)}function Xd(e,t){return ns(4,4,e,t)}function Jd(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zd(e,t,n){n=n!=null?n.concat([e]):null,ns(4,4,Jd.bind(null,t,e),n)}function fo(){}function Id(e,t){var n=Ke();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&eo(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Pd(e,t){var n=Ke();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&eo(t,a[1]))return a[0];if(a=e(),li){yn(!0);try{e()}finally{yn(!1)}}return n.memoizedState=[a,t],a}function ho(e,t,n){return n===void 0||(rn&1073741824)!==0&&(we&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Wf(),me.lanes|=e,Un|=e,n)}function Fd(e,t,n,a){return _t(n,t)?n:Hi.current!==null?(e=ho(e,n,a),_t(e,t)||(Je=!0),e):(rn&42)===0||(rn&1073741824)!==0&&(we&261930)===0?(Je=!0,e.memoizedState=n):(e=Wf(),me.lanes|=e,Un|=e,t)}function Wd(e,t,n,a,o){var u=X.p;X.p=u!==0&&8>u?u:8;var h=z.T,y={};z.T=y,po(e,!1,t,n);try{var S=o(),k=z.S;if(k!==null&&k(y,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var $=i0(S,a);Ha(e,t,$,At(e))}else Ha(e,t,a,At(e))}catch(V){Ha(e,t,{then:function(){},status:"rejected",reason:V},At())}finally{X.p=u,h!==null&&y.types!==null&&(h.types=y.types),z.T=h}}function u0(){}function go(e,t,n,a){if(e.tag!==5)throw Error(s(476));var o=ef(e).queue;Wd(e,o,t,C,n===null?u0:function(){return tf(e),n(a)})}function ef(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:C,baseState:C,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:C},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function tf(e){var t=ef(e);t.next===null&&(t=e.alternate.memoizedState),Ha(e,t.next.queue,{},At())}function mo(){return it(ir)}function nf(){return Ke().memoizedState}function af(){return Ke().memoizedState}function c0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=At();e=Tn(n);var a=An(t,e,n);a!==null&&(pt(a,t,n),Ma(a,t,n)),t={cache:Vl()},e.payload=t;return}t=t.return}}function d0(e,t,n){var a=At();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},is(e)?sf(t,n):(n=kl(e,t,n,a),n!==null&&(pt(n,e,a),lf(n,t,a)))}function rf(e,t,n){var a=At();Ha(e,t,n,a)}function Ha(e,t,n,a){var o={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(is(e))sf(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,y=u(h,n);if(o.hasEagerState=!0,o.eagerState=y,_t(y,h))return Br(e,t,o,0),Ne===null&&Nr(),!1}catch{}finally{}if(n=kl(e,t,o,a),n!==null)return pt(n,e,a),lf(n,t,a),!0}return!1}function po(e,t,n,a){if(a={lane:2,revertLane:Jo(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},is(e)){if(t)throw Error(s(479))}else t=kl(e,n,a,2),t!==null&&pt(t,e,2)}function is(e){var t=e.alternate;return e===me||t!==null&&t===me}function sf(e,t){$i=Ir=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lf(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,dc(e,n)}}var $a={readContext:it,use:Wr,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge};$a.useEffectEvent=Ge;var of={readContext:it,use:Wr,useCallback:function(e,t){return ut().memoizedState=[e,t===void 0?null:t],e},useContext:it,useEffect:Yd,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,ts(4194308,4,Jd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ts(4194308,4,e,t)},useInsertionEffect:function(e,t){ts(4,2,e,t)},useMemo:function(e,t){var n=ut();t=t===void 0?null:t;var a=e();if(li){yn(!0);try{e()}finally{yn(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=ut();if(n!==void 0){var o=n(t);if(li){yn(!0);try{n(t)}finally{yn(!1)}}}else o=t;return a.memoizedState=a.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},a.queue=e,e=e.dispatch=d0.bind(null,me,e),[a.memoizedState,e]},useRef:function(e){var t=ut();return e={current:e},t.memoizedState=e},useState:function(e){e=oo(e);var t=e.queue,n=rf.bind(null,me,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:fo,useDeferredValue:function(e,t){var n=ut();return ho(n,e,t)},useTransition:function(){var e=oo(!1);return e=Wd.bind(null,me,e.queue,!0,!1),ut().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=me,o=ut();if(xe){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),Ne===null)throw Error(s(349));(we&127)!==0||jd(a,t,n)}o.memoizedState=n;var u={value:n,getSnapshot:t};return o.queue=u,Yd(Cd.bind(null,a,u,e),[e]),a.flags|=2048,Vi(9,{destroy:void 0},Rd.bind(null,a,u,n,t),null),n},useId:function(){var e=ut(),t=Ne.identifierPrefix;if(xe){var n=Xt,a=Qt;n=(a&~(1<<32-bt(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Pr++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=a0++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:mo,useFormState:Ld,useActionState:Ld,useOptimistic:function(e){var t=ut();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=po.bind(null,me,!0,n),n.dispatch=t,[e,t]},useMemoCache:ro,useCacheRefresh:function(){return ut().memoizedState=c0.bind(null,me)},useEffectEvent:function(e){var t=ut(),n={impl:e};return t.memoizedState=n,function(){if((je&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},yo={readContext:it,use:Wr,useCallback:Id,useContext:it,useEffect:co,useImperativeHandle:Zd,useInsertionEffect:Qd,useLayoutEffect:Xd,useMemo:Pd,useReducer:es,useRef:Vd,useState:function(){return es(sn)},useDebugValue:fo,useDeferredValue:function(e,t){var n=Ke();return Fd(n,ke.memoizedState,e,t)},useTransition:function(){var e=es(sn)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:La(e),t]},useSyncExternalStore:Od,useId:nf,useHostTransitionStatus:mo,useFormState:Hd,useActionState:Hd,useOptimistic:function(e,t){var n=Ke();return zd(n,ke,e,t)},useMemoCache:ro,useCacheRefresh:af};yo.useEffectEvent=Kd;var uf={readContext:it,use:Wr,useCallback:Id,useContext:it,useEffect:co,useImperativeHandle:Zd,useInsertionEffect:Qd,useLayoutEffect:Xd,useMemo:Pd,useReducer:lo,useRef:Vd,useState:function(){return lo(sn)},useDebugValue:fo,useDeferredValue:function(e,t){var n=Ke();return ke===null?ho(n,e,t):Fd(n,ke.memoizedState,e,t)},useTransition:function(){var e=lo(sn)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:La(e),t]},useSyncExternalStore:Od,useId:nf,useHostTransitionStatus:mo,useFormState:Gd,useActionState:Gd,useOptimistic:function(e,t){var n=Ke();return ke!==null?zd(n,ke,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ro,useCacheRefresh:af};uf.useEffectEvent=Kd;function vo(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:w({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bo={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=At(),o=Tn(a);o.payload=t,n!=null&&(o.callback=n),t=An(e,o,a),t!==null&&(pt(t,e,a),Ma(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=At(),o=Tn(a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=An(e,o,a),t!==null&&(pt(t,e,a),Ma(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=At(),a=Tn(n);a.tag=2,t!=null&&(a.callback=t),t=An(e,a,n),t!==null&&(pt(t,e,n),Ma(t,e,n))}};function cf(e,t,n,a,o,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,u,h):t.prototype&&t.prototype.isPureReactComponent?!Oa(n,a)||!Oa(o,u):!0}function df(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&bo.enqueueReplaceState(t,t.state,null)}function oi(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=w({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function ff(e){Mr(e)}function hf(e){console.error(e)}function gf(e){Mr(e)}function as(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function mf(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function _o(e,t,n){return n=Tn(n),n.tag=3,n.payload={element:null},n.callback=function(){as(e,t)},n}function pf(e){return e=Tn(e),e.tag=3,e}function yf(e,t,n,a){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var u=a.value;e.payload=function(){return o(u)},e.callback=function(){mf(t,n,a)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){mf(t,n,a),typeof o!="function"&&(kn===null?kn=new Set([this]):kn.add(this));var y=a.stack;this.componentDidCatch(a.value,{componentStack:y!==null?y:""})})}function f0(e,t,n,a,o){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&Mi(t,n,o,!0),n=St.current,n!==null){switch(n.tag){case 31:case 13:return Bt===null?ps():n.alternate===null&&Ve===0&&(Ve=3),n.flags&=-257,n.flags|=65536,n.lanes=o,a===Kr?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Ko(e,a,o)),!1;case 22:return n.flags|=65536,a===Kr?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Ko(e,a,o)),!1}throw Error(s(435,n.tag))}return Ko(e,a,o),ps(),!1}if(xe)return t=St.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,a!==ql&&(e=Error(s(422),{cause:a}),Ca(zt(e,n)))):(a!==ql&&(t=Error(s(423),{cause:a}),Ca(zt(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,a=zt(a,n),o=_o(e.stateNode,a,o),Zl(e,o),Ve!==4&&(Ve=2)),!1;var u=Error(s(520),{cause:a});if(u=zt(u,n),Za===null?Za=[u]:Za.push(u),Ve!==4&&(Ve=2),t===null)return!0;a=zt(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=_o(n.stateNode,a,e),Zl(n,e),!1;case 1:if(t=n.type,u=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(kn===null||!kn.has(u))))return n.flags|=65536,o&=-o,n.lanes|=o,o=pf(o),yf(o,e,n,a),Zl(n,o),!1}n=n.return}while(n!==null);return!1}var wo=Error(s(461)),Je=!1;function at(e,t,n,a){t.child=e===null?_d(t,null,n,a):si(t,e.child,n,a)}function vf(e,t,n,a,o){n=n.render;var u=t.ref;if("ref"in a){var h={};for(var y in a)y!=="ref"&&(h[y]=a[y])}else h=a;return ni(t),a=to(e,t,n,h,u,o),y=no(),e!==null&&!Je?(io(e,t,o),ln(e,t,o)):(xe&&y&&Nl(t),t.flags|=1,at(e,t,a,o),t.child)}function bf(e,t,n,a,o){if(e===null){var u=n.type;return typeof u=="function"&&!zl(u)&&u.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=u,_f(e,t,u,a,o)):(e=Lr(n.type,null,a,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Ro(e,o)){var h=u.memoizedProps;if(n=n.compare,n=n!==null?n:Oa,n(h,a)&&e.ref===t.ref)return ln(e,t,o)}return t.flags|=1,e=en(u,a),e.ref=t.ref,e.return=t,t.child=e}function _f(e,t,n,a,o){if(e!==null){var u=e.memoizedProps;if(Oa(u,a)&&e.ref===t.ref)if(Je=!1,t.pendingProps=a=u,Ro(e,o))(e.flags&131072)!==0&&(Je=!0);else return t.lanes=e.lanes,ln(e,t,o)}return So(e,t,n,a,o)}function wf(e,t,n,a){var o=a.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|n:n,e!==null){for(a=t.child=e.child,o=0;a!==null;)o=o|a.lanes|a.childLanes,a=a.sibling;a=o&~u}else a=0,t.child=null;return Sf(e,t,u,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Vr(t,u!==null?u.cachePool:null),u!==null?xd(t,u):Pl(),Ed(t);else return a=t.lanes=536870912,Sf(e,t,u!==null?u.baseLanes|n:n,n,a)}else u!==null?(Vr(t,u.cachePool),xd(t,u),jn(),t.memoizedState=null):(e!==null&&Vr(t,null),Pl(),jn());return at(e,t,o,n),t.child}function Ga(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Sf(e,t,n,a,o){var u=Kl();return u=u===null?null:{parent:Qe._currentValue,pool:u},t.memoizedState={baseLanes:n,cachePool:u},e!==null&&Vr(t,null),Pl(),Ed(t),e!==null&&Mi(e,t,a,!0),t.childLanes=o,null}function rs(e,t){return t=ls({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function xf(e,t,n){return si(t,e.child,null,n),e=rs(t,t.pendingProps),e.flags|=2,xt(t),t.memoizedState=null,e}function h0(e,t,n){var a=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(xe){if(a.mode==="hidden")return e=rs(t,a),t.lanes=536870912,Ga(null,e);if(Wl(t),(e=qe)?(e=Mh(e,Nt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:_n!==null?{id:Qt,overflow:Xt}:null,retryLane:536870912,hydrationErrors:null},n=rd(e),n.return=t,t.child=n,nt=t,qe=null)):e=null,e===null)throw Sn(t);return t.lanes=536870912,null}return rs(t,a)}var u=e.memoizedState;if(u!==null){var h=u.dehydrated;if(Wl(t),o)if(t.flags&256)t.flags&=-257,t=xf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(Je||Mi(e,t,n,!1),o=(n&e.childLanes)!==0,Je||o){if(a=Ne,a!==null&&(h=fc(a,n),h!==0&&h!==u.retryLane))throw u.retryLane=h,Fn(e,h),pt(a,e,h),wo;ps(),t=xf(e,t,n)}else e=u.treeContext,qe=qt(h.nextSibling),nt=t,xe=!0,wn=null,Nt=!1,e!==null&&od(t,e),t=rs(t,a),t.flags|=4096;return t}return e=en(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ss(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function So(e,t,n,a,o){return ni(t),n=to(e,t,n,a,void 0,o),a=no(),e!==null&&!Je?(io(e,t,o),ln(e,t,o)):(xe&&a&&Nl(t),t.flags|=1,at(e,t,n,o),t.child)}function Ef(e,t,n,a,o,u){return ni(t),t.updateQueue=null,n=Ad(t,a,n,o),Td(e),a=no(),e!==null&&!Je?(io(e,t,u),ln(e,t,u)):(xe&&a&&Nl(t),t.flags|=1,at(e,t,n,u),t.child)}function Tf(e,t,n,a,o){if(ni(t),t.stateNode===null){var u=Ui,h=n.contextType;typeof h=="object"&&h!==null&&(u=it(h)),u=new n(a,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=bo,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=a,u.state=t.memoizedState,u.refs={},Xl(t),h=n.contextType,u.context=typeof h=="object"&&h!==null?it(h):Ui,u.state=t.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(vo(t,n,h,a),u.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(h=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),h!==u.state&&bo.enqueueReplaceState(u,u.state,null),Ba(t,a,u,o),Na(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){u=t.stateNode;var y=t.memoizedProps,S=oi(n,y);u.props=S;var k=u.context,$=n.contextType;h=Ui,typeof $=="object"&&$!==null&&(h=it($));var V=n.getDerivedStateFromProps;$=typeof V=="function"||typeof u.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,$||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(y||k!==h)&&df(t,u,a,h),En=!1;var D=t.memoizedState;u.state=D,Ba(t,a,u,o),Na(),k=t.memoizedState,y||D!==k||En?(typeof V=="function"&&(vo(t,n,V,a),k=t.memoizedState),(S=En||cf(t,n,S,a,D,k,h))?($||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=k),u.props=a,u.state=k,u.context=h,a=S):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{u=t.stateNode,Jl(e,t),h=t.memoizedProps,$=oi(n,h),u.props=$,V=t.pendingProps,D=u.context,k=n.contextType,S=Ui,typeof k=="object"&&k!==null&&(S=it(k)),y=n.getDerivedStateFromProps,(k=typeof y=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==V||D!==S)&&df(t,u,a,S),En=!1,D=t.memoizedState,u.state=D,Ba(t,a,u,o),Na();var B=t.memoizedState;h!==V||D!==B||En||e!==null&&e.dependencies!==null&&$r(e.dependencies)?(typeof y=="function"&&(vo(t,n,y,a),B=t.memoizedState),($=En||cf(t,n,$,a,D,B,S)||e!==null&&e.dependencies!==null&&$r(e.dependencies))?(k||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(a,B,S),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(a,B,S)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=B),u.props=a,u.state=B,u.context=S,a=$):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),a=!1)}return u=a,ss(e,t),a=(t.flags&128)!==0,u||a?(u=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&a?(t.child=si(t,e.child,null,o),t.child=si(t,null,n,o)):at(e,t,n,o),t.memoizedState=u.state,e=t.child):e=ln(e,t,o),e}function Af(e,t,n,a){return ei(),t.flags|=256,at(e,t,n,a),t.child}var xo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Eo(e){return{baseLanes:e,cachePool:gd()}}function To(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Tt),e}function Of(e,t,n){var a=t.pendingProps,o=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(Ye.current&2)!==0),h&&(o=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(xe){if(o?On(t):jn(),(e=qe)?(e=Mh(e,Nt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:_n!==null?{id:Qt,overflow:Xt}:null,retryLane:536870912,hydrationErrors:null},n=rd(e),n.return=t,t.child=n,nt=t,qe=null)):e=null,e===null)throw Sn(t);return lu(e)?t.lanes=32:t.lanes=536870912,null}var y=a.children;return a=a.fallback,o?(jn(),o=t.mode,y=ls({mode:"hidden",children:y},o),a=Wn(a,o,n,null),y.return=t,a.return=t,y.sibling=a,t.child=y,a=t.child,a.memoizedState=Eo(n),a.childLanes=To(e,h,n),t.memoizedState=xo,Ga(null,a)):(On(t),Ao(t,y))}var S=e.memoizedState;if(S!==null&&(y=S.dehydrated,y!==null)){if(u)t.flags&256?(On(t),t.flags&=-257,t=Oo(e,t,n)):t.memoizedState!==null?(jn(),t.child=e.child,t.flags|=128,t=null):(jn(),y=a.fallback,o=t.mode,a=ls({mode:"visible",children:a.children},o),y=Wn(y,o,n,null),y.flags|=2,a.return=t,y.return=t,a.sibling=y,t.child=a,si(t,e.child,null,n),a=t.child,a.memoizedState=Eo(n),a.childLanes=To(e,h,n),t.memoizedState=xo,t=Ga(null,a));else if(On(t),lu(y)){if(h=y.nextSibling&&y.nextSibling.dataset,h)var k=h.dgst;h=k,a=Error(s(419)),a.stack="",a.digest=h,Ca({value:a,source:null,stack:null}),t=Oo(e,t,n)}else if(Je||Mi(e,t,n,!1),h=(n&e.childLanes)!==0,Je||h){if(h=Ne,h!==null&&(a=fc(h,n),a!==0&&a!==S.retryLane))throw S.retryLane=a,Fn(e,a),pt(h,e,a),wo;su(y)||ps(),t=Oo(e,t,n)}else su(y)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,qe=qt(y.nextSibling),nt=t,xe=!0,wn=null,Nt=!1,e!==null&&od(t,e),t=Ao(t,a.children),t.flags|=4096);return t}return o?(jn(),y=a.fallback,o=t.mode,S=e.child,k=S.sibling,a=en(S,{mode:"hidden",children:a.children}),a.subtreeFlags=S.subtreeFlags&65011712,k!==null?y=en(k,y):(y=Wn(y,o,n,null),y.flags|=2),y.return=t,a.return=t,a.sibling=y,t.child=a,Ga(null,a),a=t.child,y=e.child.memoizedState,y===null?y=Eo(n):(o=y.cachePool,o!==null?(S=Qe._currentValue,o=o.parent!==S?{parent:S,pool:S}:o):o=gd(),y={baseLanes:y.baseLanes|n,cachePool:o}),a.memoizedState=y,a.childLanes=To(e,h,n),t.memoizedState=xo,Ga(e.child,a)):(On(t),n=e.child,e=n.sibling,n=en(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=n,t.memoizedState=null,n)}function Ao(e,t){return t=ls({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ls(e,t){return e=wt(22,e,null,t),e.lanes=0,e}function Oo(e,t,n){return si(t,e.child,null,n),e=Ao(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jf(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),$l(e.return,t,n)}function jo(e,t,n,a,o,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:o,treeForkCount:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=n,h.tailMode=o,h.treeForkCount=u)}function Rf(e,t,n){var a=t.pendingProps,o=a.revealOrder,u=a.tail;a=a.children;var h=Ye.current,y=(h&2)!==0;if(y?(h=h&1|2,t.flags|=128):h&=1,N(Ye,h),at(e,t,a,n),a=xe?Ra:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jf(e,n,t);else if(e.tag===19)jf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Zr(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),jo(t,!1,o,n,u,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Zr(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}jo(t,!0,n,null,u,a);break;case"together":jo(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function ln(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Un|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Mi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=en(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=en(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ro(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&$r(e)))}function g0(e,t,n){switch(t.tag){case 3:Ue(t,t.stateNode.containerInfo),xn(t,Qe,e.memoizedState.cache),ei();break;case 27:case 5:It(t);break;case 4:Ue(t,t.stateNode.containerInfo);break;case 10:xn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Wl(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(On(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Of(e,t,n):(On(t),e=ln(e,t,n),e!==null?e.sibling:null);On(t);break;case 19:var o=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(Mi(e,t,n,!1),a=(n&t.childLanes)!==0),o){if(a)return Rf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),N(Ye,Ye.current),a)break;return null;case 22:return t.lanes=0,wf(e,t,n,t.pendingProps);case 24:xn(t,Qe,e.memoizedState.cache)}return ln(e,t,n)}function Cf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Je=!0;else{if(!Ro(e,n)&&(t.flags&128)===0)return Je=!1,g0(e,t,n);Je=(e.flags&131072)!==0}else Je=!1,xe&&(t.flags&1048576)!==0&&ld(t,Ra,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=ai(t.elementType),t.type=e,typeof e=="function")zl(e)?(a=oi(e,a),t.tag=1,t=Tf(null,t,e,a,n)):(t.tag=0,t=So(null,t,e,a,n));else{if(e!=null){var o=e.$$typeof;if(o===W){t.tag=11,t=vf(null,t,e,a,n);break e}else if(o===M){t.tag=14,t=bf(null,t,e,a,n);break e}}throw t=ee(e)||e,Error(s(306,t,""))}}return t;case 0:return So(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,o=oi(a,t.pendingProps),Tf(e,t,a,o,n);case 3:e:{if(Ue(t,t.stateNode.containerInfo),e===null)throw Error(s(387));a=t.pendingProps;var u=t.memoizedState;o=u.element,Jl(e,t),Ba(t,a,null,n);var h=t.memoizedState;if(a=h.cache,xn(t,Qe,a),a!==u.cache&&Gl(t,[Qe],n,!0),Na(),a=h.element,u.isDehydrated)if(u={element:a,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Af(e,t,a,n);break e}else if(a!==o){o=zt(Error(s(424)),t),Ca(o),t=Af(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qe=qt(e.firstChild),nt=t,xe=!0,wn=null,Nt=!0,n=_d(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ei(),a===o){t=ln(e,t,n);break e}at(e,t,a,n)}t=t.child}return t;case 26:return ss(e,t),e===null?(n=$h(t.type,null,t.pendingProps,null))?t.memoizedState=n:xe||(n=t.type,e=t.pendingProps,a=xs(te.current).createElement(n),a[tt]=t,a[ct]=e,rt(a,n,e),We(a),t.stateNode=a):t.memoizedState=$h(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return It(t),e===null&&xe&&(a=t.stateNode=qh(t.type,t.pendingProps,te.current),nt=t,Nt=!0,o=qe,Nn(t.type)?(ou=o,qe=qt(a.firstChild)):qe=o),at(e,t,t.pendingProps.children,n),ss(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&xe&&((o=a=qe)&&(a=Y0(a,t.type,t.pendingProps,Nt),a!==null?(t.stateNode=a,nt=t,qe=qt(a.firstChild),Nt=!1,o=!0):o=!1),o||Sn(t)),It(t),o=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,a=u.children,iu(o,u)?a=null:h!==null&&iu(o,h)&&(t.flags|=32),t.memoizedState!==null&&(o=to(e,t,r0,null,null,n),ir._currentValue=o),ss(e,t),at(e,t,a,n),t.child;case 6:return e===null&&xe&&((e=n=qe)&&(n=K0(n,t.pendingProps,Nt),n!==null?(t.stateNode=n,nt=t,qe=null,e=!0):e=!1),e||Sn(t)),null;case 13:return Of(e,t,n);case 4:return Ue(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=si(t,null,a,n):at(e,t,a,n),t.child;case 11:return vf(e,t,t.type,t.pendingProps,n);case 7:return at(e,t,t.pendingProps,n),t.child;case 8:return at(e,t,t.pendingProps.children,n),t.child;case 12:return at(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,xn(t,t.type,a.value),at(e,t,a.children,n),t.child;case 9:return o=t.type._context,a=t.pendingProps.children,ni(t),o=it(o),a=a(o),t.flags|=1,at(e,t,a,n),t.child;case 14:return bf(e,t,t.type,t.pendingProps,n);case 15:return _f(e,t,t.type,t.pendingProps,n);case 19:return Rf(e,t,n);case 31:return h0(e,t,n);case 22:return wf(e,t,n,t.pendingProps);case 24:return ni(t),a=it(Qe),e===null?(o=Kl(),o===null&&(o=Ne,u=Vl(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=n),o=u),t.memoizedState={parent:a,cache:o},Xl(t),xn(t,Qe,o)):((e.lanes&n)!==0&&(Jl(e,t),Ba(t,null,null,n),Na()),o=e.memoizedState,u=t.memoizedState,o.parent!==a?(o={parent:a,cache:a},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),xn(t,Qe,a)):(a=u.cache,xn(t,Qe,a),a!==o.cache&&Gl(t,[Qe],n,!0))),at(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function on(e){e.flags|=4}function Co(e,t,n,a,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(ih())e.flags|=8192;else throw ri=Kr,Ql}else e.flags&=-16777217}function Uf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Qh(t))if(ih())e.flags|=8192;else throw ri=Kr,Ql}function os(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?uc():536870912,e.lanes|=t,Xi|=t)}function Va(e,t){if(!xe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Le(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,a|=o.subtreeFlags&65011712,a|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function m0(e,t,n){var a=t.pendingProps;switch(Bl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(t),null;case 1:return Le(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),an(Qe),Me(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Di(t)?on(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ll())),Le(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(on(t),u!==null?(Le(t),Uf(t,u)):(Le(t),Co(t,o,null,a,n))):u?u!==e.memoizedState?(on(t),Le(t),Uf(t,u)):(Le(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&on(t),Le(t),Co(t,o,e,a,n)),null;case 27:if(br(t),n=te.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&on(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Le(t),null}e=H.current,Di(t)?ud(t):(e=qh(o,a,n),t.stateNode=e,on(t))}return Le(t),null;case 5:if(br(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&on(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Le(t),null}if(u=H.current,Di(t))ud(t);else{var h=xs(te.current);switch(u){case 1:u=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=h.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof a.is=="string"?h.createElement("select",{is:a.is}):h.createElement("select"),a.multiple?u.multiple=!0:a.size&&(u.size=a.size);break;default:u=typeof a.is=="string"?h.createElement(o,{is:a.is}):h.createElement(o)}}u[tt]=t,u[ct]=a;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)u.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=u;e:switch(rt(u,o,a),o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&on(t)}}return Le(t),Co(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&on(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(e=te.current,Di(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,o=nt,o!==null)switch(o.tag){case 27:case 5:a=o.memoizedProps}e[tt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Oh(e.nodeValue,n)),e||Sn(t,!0)}else e=xs(e).createTextNode(a),e[tt]=t,t.stateNode=e}return Le(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=Di(t),n!==null){if(e===null){if(!a)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[tt]=t}else ei(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Le(t),e=!1}else n=Ll(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(xt(t),t):(xt(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Le(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Di(t),a!==null&&a.dehydrated!==null){if(e===null){if(!o)throw Error(s(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));o[tt]=t}else ei(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Le(t),o=!1}else o=Ll(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(xt(t),t):(xt(t),null)}return xt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,o=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(o=a.alternate.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),os(t,t.updateQueue),Le(t),null);case 4:return Me(),e===null&&Fo(t.stateNode.containerInfo),Le(t),null;case 10:return an(t.type),Le(t),null;case 19:if(j(Ye),a=t.memoizedState,a===null)return Le(t),null;if(o=(t.flags&128)!==0,u=a.rendering,u===null)if(o)Va(a,!1);else{if(Ve!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Zr(e),u!==null){for(t.flags|=128,Va(a,!1),e=u.updateQueue,t.updateQueue=e,os(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ad(n,e),n=n.sibling;return N(Ye,Ye.current&1|2),xe&&tn(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&yt()>hs&&(t.flags|=128,o=!0,Va(a,!1),t.lanes=4194304)}else{if(!o)if(e=Zr(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,os(t,e),Va(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!xe)return Le(t),null}else 2*yt()-a.renderingStartTime>hs&&n!==536870912&&(t.flags|=128,o=!0,Va(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(e=a.last,e!==null?e.sibling=u:t.child=u,a.last=u)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=yt(),e.sibling=null,n=Ye.current,N(Ye,o?n&1|2:n&1),xe&&tn(t,a.treeForkCount),e):(Le(t),null);case 22:case 23:return xt(t),Fl(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(Le(t),t.subtreeFlags&6&&(t.flags|=8192)):Le(t),n=t.updateQueue,n!==null&&os(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&j(ii),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),an(Qe),Le(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function p0(e,t){switch(Bl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return an(Qe),Me(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return br(t),null;case 31:if(t.memoizedState!==null){if(xt(t),t.alternate===null)throw Error(s(340));ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(xt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return j(Ye),null;case 4:return Me(),null;case 10:return an(t.type),null;case 22:case 23:return xt(t),Fl(),e!==null&&j(ii),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return an(Qe),null;case 25:return null;default:return null}}function kf(e,t){switch(Bl(t),t.tag){case 3:an(Qe),Me();break;case 26:case 27:case 5:br(t);break;case 4:Me();break;case 31:t.memoizedState!==null&&xt(t);break;case 13:xt(t);break;case 19:j(Ye);break;case 10:an(t.type);break;case 22:case 23:xt(t),Fl(),e!==null&&j(ii);break;case 24:an(Qe)}}function Ya(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var o=a.next;n=o;do{if((n.tag&e)===e){a=void 0;var u=n.create,h=n.inst;a=u(),h.destroy=a}n=n.next}while(n!==o)}}catch(y){Ce(t,t.return,y)}}function Rn(e,t,n){try{var a=t.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var u=o.next;a=u;do{if((a.tag&e)===e){var h=a.inst,y=h.destroy;if(y!==void 0){h.destroy=void 0,o=t;var S=n,k=y;try{k()}catch($){Ce(o,S,$)}}}a=a.next}while(a!==u)}}catch($){Ce(t,t.return,$)}}function zf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Sd(t,n)}catch(a){Ce(e,e.return,a)}}}function Df(e,t,n){n.props=oi(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Ce(e,t,a)}}function Ka(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(o){Ce(e,t,o)}}function Jt(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(o){Ce(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Ce(e,t,o)}else n.current=null}function Mf(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(o){Ce(e,e.return,o)}}function Uo(e,t,n){try{var a=e.stateNode;q0(a,e.type,n,t),a[ct]=t}catch(o){Ce(e,e.return,o)}}function Nf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Nn(e.type)||e.tag===4}function ko(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Nn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zo(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ft));else if(a!==4&&(a===27&&Nn(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(zo(e,t,n),e=e.sibling;e!==null;)zo(e,t,n),e=e.sibling}function us(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&Nn(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(us(e,t,n),e=e.sibling;e!==null;)us(e,t,n),e=e.sibling}function Bf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);rt(t,a,n),t[tt]=e,t[ct]=n}catch(u){Ce(e,e.return,u)}}var un=!1,Ze=!1,Do=!1,qf=typeof WeakSet=="function"?WeakSet:Set,et=null;function y0(e,t){if(e=e.containerInfo,tu=Cs,e=Zc(e),Al(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var o=a.anchorOffset,u=a.focusNode;a=a.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var h=0,y=-1,S=-1,k=0,$=0,V=e,D=null;t:for(;;){for(var B;V!==n||o!==0&&V.nodeType!==3||(y=h+o),V!==u||a!==0&&V.nodeType!==3||(S=h+a),V.nodeType===3&&(h+=V.nodeValue.length),(B=V.firstChild)!==null;)D=V,V=B;for(;;){if(V===e)break t;if(D===n&&++k===o&&(y=h),D===u&&++$===a&&(S=h),(B=V.nextSibling)!==null)break;V=D,D=V.parentNode}V=B}n=y===-1||S===-1?null:{start:y,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(nu={focusedElem:e,selectionRange:n},Cs=!1,et=t;et!==null;)if(t=et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,et=e;else for(;et!==null;){switch(t=et,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,n=t,o=u.memoizedProps,u=u.memoizedState,a=n.stateNode;try{var ie=oi(n.type,o);e=a.getSnapshotBeforeUpdate(ie,u),a.__reactInternalSnapshotBeforeUpdate=e}catch(de){Ce(n,n.return,de)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ru(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ru(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,et=e;break}et=t.return}}function Lf(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:dn(e,n),a&4&&Ya(5,n);break;case 1:if(dn(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(h){Ce(n,n.return,h)}else{var o=oi(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){Ce(n,n.return,h)}}a&64&&zf(n),a&512&&Ka(n,n.return);break;case 3:if(dn(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Sd(e,t)}catch(h){Ce(n,n.return,h)}}break;case 27:t===null&&a&4&&Bf(n);case 26:case 5:dn(e,n),t===null&&a&4&&Mf(n),a&512&&Ka(n,n.return);break;case 12:dn(e,n);break;case 31:dn(e,n),a&4&&Gf(e,n);break;case 13:dn(e,n),a&4&&Vf(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=A0.bind(null,n),Q0(e,n))));break;case 22:if(a=n.memoizedState!==null||un,!a){t=t!==null&&t.memoizedState!==null||Ze,o=un;var u=Ze;un=a,(Ze=t)&&!u?fn(e,n,(n.subtreeFlags&8772)!==0):dn(e,n),un=o,Ze=u}break;case 30:break;default:dn(e,n)}}function Hf(e){var t=e.alternate;t!==null&&(e.alternate=null,Hf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ul(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var He=null,ft=!1;function cn(e,t,n){for(n=n.child;n!==null;)$f(e,t,n),n=n.sibling}function $f(e,t,n){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(ma,n)}catch{}switch(n.tag){case 26:Ze||Jt(n,t),cn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ze||Jt(n,t);var a=He,o=ft;Nn(n.type)&&(He=n.stateNode,ft=!1),cn(e,t,n),er(n.stateNode),He=a,ft=o;break;case 5:Ze||Jt(n,t);case 6:if(a=He,o=ft,He=null,cn(e,t,n),He=a,ft=o,He!==null)if(ft)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(n.stateNode)}catch(u){Ce(n,t,u)}else try{He.removeChild(n.stateNode)}catch(u){Ce(n,t,u)}break;case 18:He!==null&&(ft?(e=He,zh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ta(e)):zh(He,n.stateNode));break;case 4:a=He,o=ft,He=n.stateNode.containerInfo,ft=!0,cn(e,t,n),He=a,ft=o;break;case 0:case 11:case 14:case 15:Rn(2,n,t),Ze||Rn(4,n,t),cn(e,t,n);break;case 1:Ze||(Jt(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Df(n,t,a)),cn(e,t,n);break;case 21:cn(e,t,n);break;case 22:Ze=(a=Ze)||n.memoizedState!==null,cn(e,t,n),Ze=a;break;default:cn(e,t,n)}}function Gf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ta(e)}catch(n){Ce(t,t.return,n)}}}function Vf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ta(e)}catch(n){Ce(t,t.return,n)}}function v0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new qf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new qf),t;default:throw Error(s(435,e.tag))}}function cs(e,t){var n=v0(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var o=O0.bind(null,e,a);a.then(o,o)}})}function ht(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var o=n[a],u=e,h=t,y=h;e:for(;y!==null;){switch(y.tag){case 27:if(Nn(y.type)){He=y.stateNode,ft=!1;break e}break;case 5:He=y.stateNode,ft=!1;break e;case 3:case 4:He=y.stateNode.containerInfo,ft=!0;break e}y=y.return}if(He===null)throw Error(s(160));$f(u,h,o),He=null,ft=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Yf(t,e),t=t.sibling}var $t=null;function Yf(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ht(t,e),gt(e),a&4&&(Rn(3,e,e.return),Ya(3,e),Rn(5,e,e.return));break;case 1:ht(t,e),gt(e),a&512&&(Ze||n===null||Jt(n,n.return)),a&64&&un&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var o=$t;if(ht(t,e),gt(e),a&512&&(Ze||n===null||Jt(n,n.return)),a&4){var u=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(a){case"title":u=o.getElementsByTagName("title")[0],(!u||u[va]||u[tt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(a),o.head.insertBefore(u,o.querySelector("head > title"))),rt(u,a,n),u[tt]=e,We(u),a=u;break e;case"link":var h=Yh("link","href",o).get(a+(n.href||""));if(h){for(var y=0;y<h.length;y++)if(u=h[y],u.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&u.getAttribute("rel")===(n.rel==null?null:n.rel)&&u.getAttribute("title")===(n.title==null?null:n.title)&&u.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(y,1);break t}}u=o.createElement(a),rt(u,a,n),o.head.appendChild(u);break;case"meta":if(h=Yh("meta","content",o).get(a+(n.content||""))){for(y=0;y<h.length;y++)if(u=h[y],u.getAttribute("content")===(n.content==null?null:""+n.content)&&u.getAttribute("name")===(n.name==null?null:n.name)&&u.getAttribute("property")===(n.property==null?null:n.property)&&u.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&u.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(y,1);break t}}u=o.createElement(a),rt(u,a,n),o.head.appendChild(u);break;default:throw Error(s(468,a))}u[tt]=e,We(u),a=u}e.stateNode=a}else Kh(o,e.type,e.stateNode);else e.stateNode=Vh(o,a,e.memoizedProps);else u!==a?(u===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):u.count--,a===null?Kh(o,e.type,e.stateNode):Vh(o,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Uo(e,e.memoizedProps,n.memoizedProps)}break;case 27:ht(t,e),gt(e),a&512&&(Ze||n===null||Jt(n,n.return)),n!==null&&a&4&&Uo(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ht(t,e),gt(e),a&512&&(Ze||n===null||Jt(n,n.return)),e.flags&32){o=e.stateNode;try{Ei(o,"")}catch(ie){Ce(e,e.return,ie)}}a&4&&e.stateNode!=null&&(o=e.memoizedProps,Uo(e,o,n!==null?n.memoizedProps:o)),a&1024&&(Do=!0);break;case 6:if(ht(t,e),gt(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(ie){Ce(e,e.return,ie)}}break;case 3:if(As=null,o=$t,$t=Es(t.containerInfo),ht(t,e),$t=o,gt(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{ta(t.containerInfo)}catch(ie){Ce(e,e.return,ie)}Do&&(Do=!1,Kf(e));break;case 4:a=$t,$t=Es(e.stateNode.containerInfo),ht(t,e),gt(e),$t=a;break;case 12:ht(t,e),gt(e);break;case 31:ht(t,e),gt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,cs(e,a)));break;case 13:ht(t,e),gt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(fs=yt()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,cs(e,a)));break;case 22:o=e.memoizedState!==null;var S=n!==null&&n.memoizedState!==null,k=un,$=Ze;if(un=k||o,Ze=$||S,ht(t,e),Ze=$,un=k,gt(e),a&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||S||un||Ze||ui(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){S=n=t;try{if(u=S.stateNode,o)h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{y=S.stateNode;var V=S.memoizedProps.style,D=V!=null&&V.hasOwnProperty("display")?V.display:null;y.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch(ie){Ce(S,S.return,ie)}}}else if(t.tag===6){if(n===null){S=t;try{S.stateNode.nodeValue=o?"":S.memoizedProps}catch(ie){Ce(S,S.return,ie)}}}else if(t.tag===18){if(n===null){S=t;try{var B=S.stateNode;o?Dh(B,!0):Dh(S.stateNode,!1)}catch(ie){Ce(S,S.return,ie)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,cs(e,n))));break;case 19:ht(t,e),gt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,cs(e,a)));break;case 30:break;case 21:break;default:ht(t,e),gt(e)}}function gt(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(Nf(a)){n=a;break}a=a.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var o=n.stateNode,u=ko(e);us(e,u,o);break;case 5:var h=n.stateNode;n.flags&32&&(Ei(h,""),n.flags&=-33);var y=ko(e);us(e,y,h);break;case 3:case 4:var S=n.stateNode.containerInfo,k=ko(e);zo(e,k,S);break;default:throw Error(s(161))}}catch($){Ce(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Kf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Kf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function dn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Lf(e,t.alternate,t),t=t.sibling}function ui(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Rn(4,t,t.return),ui(t);break;case 1:Jt(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Df(t,t.return,n),ui(t);break;case 27:er(t.stateNode);case 26:case 5:Jt(t,t.return),ui(t);break;case 22:t.memoizedState===null&&ui(t);break;case 30:ui(t);break;default:ui(t)}e=e.sibling}}function fn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,o=e,u=t,h=u.flags;switch(u.tag){case 0:case 11:case 15:fn(o,u,n),Ya(4,u);break;case 1:if(fn(o,u,n),a=u,o=a.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(k){Ce(a,a.return,k)}if(a=u,o=a.updateQueue,o!==null){var y=a.stateNode;try{var S=o.shared.hiddenCallbacks;if(S!==null)for(o.shared.hiddenCallbacks=null,o=0;o<S.length;o++)wd(S[o],y)}catch(k){Ce(a,a.return,k)}}n&&h&64&&zf(u),Ka(u,u.return);break;case 27:Bf(u);case 26:case 5:fn(o,u,n),n&&a===null&&h&4&&Mf(u),Ka(u,u.return);break;case 12:fn(o,u,n);break;case 31:fn(o,u,n),n&&h&4&&Gf(o,u);break;case 13:fn(o,u,n),n&&h&4&&Vf(o,u);break;case 22:u.memoizedState===null&&fn(o,u,n),Ka(u,u.return);break;case 30:break;default:fn(o,u,n)}t=t.sibling}}function Mo(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ua(n))}function No(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ua(e))}function Gt(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Qf(e,t,n,a),t=t.sibling}function Qf(e,t,n,a){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Gt(e,t,n,a),o&2048&&Ya(9,t);break;case 1:Gt(e,t,n,a);break;case 3:Gt(e,t,n,a),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ua(e)));break;case 12:if(o&2048){Gt(e,t,n,a),e=t.stateNode;try{var u=t.memoizedProps,h=u.id,y=u.onPostCommit;typeof y=="function"&&y(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){Ce(t,t.return,S)}}else Gt(e,t,n,a);break;case 31:Gt(e,t,n,a);break;case 13:Gt(e,t,n,a);break;case 23:break;case 22:u=t.stateNode,h=t.alternate,t.memoizedState!==null?u._visibility&2?Gt(e,t,n,a):Qa(e,t):u._visibility&2?Gt(e,t,n,a):(u._visibility|=2,Yi(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),o&2048&&Mo(h,t);break;case 24:Gt(e,t,n,a),o&2048&&No(t.alternate,t);break;default:Gt(e,t,n,a)}}function Yi(e,t,n,a,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,h=t,y=n,S=a,k=h.flags;switch(h.tag){case 0:case 11:case 15:Yi(u,h,y,S,o),Ya(8,h);break;case 23:break;case 22:var $=h.stateNode;h.memoizedState!==null?$._visibility&2?Yi(u,h,y,S,o):Qa(u,h):($._visibility|=2,Yi(u,h,y,S,o)),o&&k&2048&&Mo(h.alternate,h);break;case 24:Yi(u,h,y,S,o),o&&k&2048&&No(h.alternate,h);break;default:Yi(u,h,y,S,o)}t=t.sibling}}function Qa(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,o=a.flags;switch(a.tag){case 22:Qa(n,a),o&2048&&Mo(a.alternate,a);break;case 24:Qa(n,a),o&2048&&No(a.alternate,a);break;default:Qa(n,a)}t=t.sibling}}var Xa=8192;function Ki(e,t,n){if(e.subtreeFlags&Xa)for(e=e.child;e!==null;)Xf(e,t,n),e=e.sibling}function Xf(e,t,n){switch(e.tag){case 26:Ki(e,t,n),e.flags&Xa&&e.memoizedState!==null&&ay(n,$t,e.memoizedState,e.memoizedProps);break;case 5:Ki(e,t,n);break;case 3:case 4:var a=$t;$t=Es(e.stateNode.containerInfo),Ki(e,t,n),$t=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Xa,Xa=16777216,Ki(e,t,n),Xa=a):Ki(e,t,n));break;default:Ki(e,t,n)}}function Jf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ja(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];et=a,If(a,e)}Jf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Zf(e),e=e.sibling}function Zf(e){switch(e.tag){case 0:case 11:case 15:Ja(e),e.flags&2048&&Rn(9,e,e.return);break;case 3:Ja(e);break;case 12:Ja(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ds(e)):Ja(e);break;default:Ja(e)}}function ds(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];et=a,If(a,e)}Jf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Rn(8,t,t.return),ds(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ds(t));break;default:ds(t)}e=e.sibling}}function If(e,t){for(;et!==null;){var n=et;switch(n.tag){case 0:case 11:case 15:Rn(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Ua(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,et=a;else e:for(n=e;et!==null;){a=et;var o=a.sibling,u=a.return;if(Hf(a),a===n){et=null;break e}if(o!==null){o.return=u,et=o;break e}et=u}}}var b0={getCacheForType:function(e){var t=it(Qe),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return it(Qe).controller.signal}},_0=typeof WeakMap=="function"?WeakMap:Map,je=0,Ne=null,be=null,we=0,Re=0,Et=null,Cn=!1,Qi=!1,Bo=!1,hn=0,Ve=0,Un=0,ci=0,qo=0,Tt=0,Xi=0,Za=null,mt=null,Lo=!1,fs=0,Pf=0,hs=1/0,gs=null,kn=null,Pe=0,zn=null,Ji=null,gn=0,Ho=0,$o=null,Ff=null,Ia=0,Go=null;function At(){return(je&2)!==0&&we!==0?we&-we:z.T!==null?Jo():hc()}function Wf(){if(Tt===0)if((we&536870912)===0||xe){var e=Sr;Sr<<=1,(Sr&3932160)===0&&(Sr=262144),Tt=e}else Tt=536870912;return e=St.current,e!==null&&(e.flags|=32),Tt}function pt(e,t,n){(e===Ne&&(Re===2||Re===9)||e.cancelPendingCommit!==null)&&(Zi(e,0),Dn(e,we,Tt,!1)),ya(e,n),((je&2)===0||e!==Ne)&&(e===Ne&&((je&2)===0&&(ci|=n),Ve===4&&Dn(e,we,Tt,!1)),Zt(e))}function eh(e,t,n){if((je&6)!==0)throw Error(s(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||pa(e,t),o=a?x0(e,t):Yo(e,t,!0),u=a;do{if(o===0){Qi&&!a&&Dn(e,t,0,!1);break}else{if(n=e.current.alternate,u&&!w0(n)){o=Yo(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var y=e;o=Za;var S=y.current.memoizedState.isDehydrated;if(S&&(Zi(y,h).flags|=256),h=Yo(y,h,!1),h!==2){if(Bo&&!S){y.errorRecoveryDisabledLanes|=u,ci|=u,o=4;break e}u=mt,mt=o,u!==null&&(mt===null?mt=u:mt.push.apply(mt,u))}o=h}if(u=!1,o!==2)continue}}if(o===1){Zi(e,0),Dn(e,t,0,!0);break}e:{switch(a=e,u=o,u){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Dn(a,t,Tt,!Cn);break e;case 2:mt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(o=fs+300-yt(),10<o)){if(Dn(a,t,Tt,!Cn),Er(a,0,!0)!==0)break e;gn=t,a.timeoutHandle=Uh(th.bind(null,a,n,mt,gs,Lo,t,Tt,ci,Xi,Cn,u,"Throttled",-0,0),o);break e}th(a,n,mt,gs,Lo,t,Tt,ci,Xi,Cn,u,null,-0,0)}}break}while(!0);Zt(e)}function th(e,t,n,a,o,u,h,y,S,k,$,V,D,B){if(e.timeoutHandle=-1,V=t.subtreeFlags,V&8192||(V&16785408)===16785408){V={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ft},Xf(t,u,V);var ie=(u&62914560)===u?fs-yt():(u&4194048)===u?Pf-yt():0;if(ie=ry(V,ie),ie!==null){gn=u,e.cancelPendingCommit=ie(uh.bind(null,e,t,u,n,a,o,h,y,S,$,V,null,D,B)),Dn(e,u,h,!k);return}}uh(e,t,u,n,a,o,h,y,S)}function w0(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var o=n[a],u=o.getSnapshot;o=o.value;try{if(!_t(u(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dn(e,t,n,a){t&=~qo,t&=~ci,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var o=t;0<o;){var u=31-bt(o),h=1<<u;a[u]=-1,o&=~h}n!==0&&cc(e,n,t)}function ms(){return(je&6)===0?(Pa(0),!1):!0}function Vo(){if(be!==null){if(Re===0)var e=be.return;else e=be,nn=ti=null,ao(e),Li=null,za=0,e=be;for(;e!==null;)kf(e.alternate,e),e=e.return;be=null}}function Zi(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,$0(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),gn=0,Vo(),Ne=e,be=n=en(e.current,null),we=t,Re=0,Et=null,Cn=!1,Qi=pa(e,t),Bo=!1,Xi=Tt=qo=ci=Un=Ve=0,mt=Za=null,Lo=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var o=31-bt(a),u=1<<o;t|=e[o],a&=~u}return hn=t,Nr(),n}function nh(e,t){me=null,z.H=$a,t===qi||t===Yr?(t=yd(),Re=3):t===Ql?(t=yd(),Re=4):Re=t===wo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Et=t,be===null&&(Ve=1,as(e,zt(t,e.current)))}function ih(){var e=St.current;return e===null?!0:(we&4194048)===we?Bt===null:(we&62914560)===we||(we&536870912)!==0?e===Bt:!1}function ah(){var e=z.H;return z.H=$a,e===null?$a:e}function rh(){var e=z.A;return z.A=b0,e}function ps(){Ve=4,Cn||(we&4194048)!==we&&St.current!==null||(Qi=!0),(Un&134217727)===0&&(ci&134217727)===0||Ne===null||Dn(Ne,we,Tt,!1)}function Yo(e,t,n){var a=je;je|=2;var o=ah(),u=rh();(Ne!==e||we!==t)&&(gs=null,Zi(e,t)),t=!1;var h=Ve;e:do try{if(Re!==0&&be!==null){var y=be,S=Et;switch(Re){case 8:Vo(),h=6;break e;case 3:case 2:case 9:case 6:St.current===null&&(t=!0);var k=Re;if(Re=0,Et=null,Ii(e,y,S,k),n&&Qi){h=0;break e}break;default:k=Re,Re=0,Et=null,Ii(e,y,S,k)}}S0(),h=Ve;break}catch($){nh(e,$)}while(!0);return t&&e.shellSuspendCounter++,nn=ti=null,je=a,z.H=o,z.A=u,be===null&&(Ne=null,we=0,Nr()),h}function S0(){for(;be!==null;)sh(be)}function x0(e,t){var n=je;je|=2;var a=ah(),o=rh();Ne!==e||we!==t?(gs=null,hs=yt()+500,Zi(e,t)):Qi=pa(e,t);e:do try{if(Re!==0&&be!==null){t=be;var u=Et;t:switch(Re){case 1:Re=0,Et=null,Ii(e,t,u,1);break;case 2:case 9:if(md(u)){Re=0,Et=null,lh(t);break}t=function(){Re!==2&&Re!==9||Ne!==e||(Re=7),Zt(e)},u.then(t,t);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:md(u)?(Re=0,Et=null,lh(t)):(Re=0,Et=null,Ii(e,t,u,7));break;case 5:var h=null;switch(be.tag){case 26:h=be.memoizedState;case 5:case 27:var y=be;if(h?Qh(h):y.stateNode.complete){Re=0,Et=null;var S=y.sibling;if(S!==null)be=S;else{var k=y.return;k!==null?(be=k,ys(k)):be=null}break t}}Re=0,Et=null,Ii(e,t,u,5);break;case 6:Re=0,Et=null,Ii(e,t,u,6);break;case 8:Vo(),Ve=6;break e;default:throw Error(s(462))}}E0();break}catch($){nh(e,$)}while(!0);return nn=ti=null,z.H=a,z.A=o,je=n,be!==null?0:(Ne=null,we=0,Nr(),Ve)}function E0(){for(;be!==null&&!Xm();)sh(be)}function sh(e){var t=Cf(e.alternate,e,hn);e.memoizedProps=e.pendingProps,t===null?ys(e):be=t}function lh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ef(n,t,t.pendingProps,t.type,void 0,we);break;case 11:t=Ef(n,t,t.pendingProps,t.type.render,t.ref,we);break;case 5:ao(t);default:kf(n,t),t=be=ad(t,hn),t=Cf(n,t,hn)}e.memoizedProps=e.pendingProps,t===null?ys(e):be=t}function Ii(e,t,n,a){nn=ti=null,ao(t),Li=null,za=0;var o=t.return;try{if(f0(e,o,t,n,we)){Ve=1,as(e,zt(n,e.current)),be=null;return}}catch(u){if(o!==null)throw be=o,u;Ve=1,as(e,zt(n,e.current)),be=null;return}t.flags&32768?(xe||a===1?e=!0:Qi||(we&536870912)!==0?e=!1:(Cn=e=!0,(a===2||a===9||a===3||a===6)&&(a=St.current,a!==null&&a.tag===13&&(a.flags|=16384))),oh(t,e)):ys(t)}function ys(e){var t=e;do{if((t.flags&32768)!==0){oh(t,Cn);return}e=t.return;var n=m0(t.alternate,t,hn);if(n!==null){be=n;return}if(t=t.sibling,t!==null){be=t;return}be=t=e}while(t!==null);Ve===0&&(Ve=5)}function oh(e,t){do{var n=p0(e.alternate,e);if(n!==null){n.flags&=32767,be=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){be=e;return}be=e=n}while(e!==null);Ve=6,be=null}function uh(e,t,n,a,o,u,h,y,S){e.cancelPendingCommit=null;do vs();while(Pe!==0);if((je&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(u=t.lanes|t.childLanes,u|=Ul,ip(e,n,u,h,y,S),e===Ne&&(be=Ne=null,we=0),Ji=t,zn=e,gn=n,Ho=u,$o=o,Ff=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,j0(_r,function(){return gh(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=z.T,z.T=null,o=X.p,X.p=2,h=je,je|=4;try{y0(e,t,n)}finally{je=h,X.p=o,z.T=a}}Pe=1,ch(),dh(),fh()}}function ch(){if(Pe===1){Pe=0;var e=zn,t=Ji,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=z.T,z.T=null;var a=X.p;X.p=2;var o=je;je|=4;try{Yf(t,e);var u=nu,h=Zc(e.containerInfo),y=u.focusedElem,S=u.selectionRange;if(h!==y&&y&&y.ownerDocument&&Jc(y.ownerDocument.documentElement,y)){if(S!==null&&Al(y)){var k=S.start,$=S.end;if($===void 0&&($=k),"selectionStart"in y)y.selectionStart=k,y.selectionEnd=Math.min($,y.value.length);else{var V=y.ownerDocument||document,D=V&&V.defaultView||window;if(D.getSelection){var B=D.getSelection(),ie=y.textContent.length,de=Math.min(S.start,ie),De=S.end===void 0?de:Math.min(S.end,ie);!B.extend&&de>De&&(h=De,De=de,de=h);var O=Xc(y,de),x=Xc(y,De);if(O&&x&&(B.rangeCount!==1||B.anchorNode!==O.node||B.anchorOffset!==O.offset||B.focusNode!==x.node||B.focusOffset!==x.offset)){var U=V.createRange();U.setStart(O.node,O.offset),B.removeAllRanges(),de>De?(B.addRange(U),B.extend(x.node,x.offset)):(U.setEnd(x.node,x.offset),B.addRange(U))}}}}for(V=[],B=y;B=B.parentNode;)B.nodeType===1&&V.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<V.length;y++){var G=V[y];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}Cs=!!tu,nu=tu=null}finally{je=o,X.p=a,z.T=n}}e.current=t,Pe=2}}function dh(){if(Pe===2){Pe=0;var e=zn,t=Ji,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=z.T,z.T=null;var a=X.p;X.p=2;var o=je;je|=4;try{Lf(e,t.alternate,t)}finally{je=o,X.p=a,z.T=n}}Pe=3}}function fh(){if(Pe===4||Pe===3){Pe=0,Jm();var e=zn,t=Ji,n=gn,a=Ff;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Pe=5:(Pe=0,Ji=zn=null,hh(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(kn=null),ll(n),t=t.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(ma,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=z.T,o=X.p,X.p=2,z.T=null;try{for(var u=e.onRecoverableError,h=0;h<a.length;h++){var y=a[h];u(y.value,{componentStack:y.stack})}}finally{z.T=t,X.p=o}}(gn&3)!==0&&vs(),Zt(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===Go?Ia++:(Ia=0,Go=e):Ia=0,Pa(0)}}function hh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ua(t)))}function vs(){return ch(),dh(),fh(),gh()}function gh(){if(Pe!==5)return!1;var e=zn,t=Ho;Ho=0;var n=ll(gn),a=z.T,o=X.p;try{X.p=32>n?32:n,z.T=null,n=$o,$o=null;var u=zn,h=gn;if(Pe=0,Ji=zn=null,gn=0,(je&6)!==0)throw Error(s(331));var y=je;if(je|=4,Zf(u.current),Qf(u,u.current,h,n),je=y,Pa(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(ma,u)}catch{}return!0}finally{X.p=o,z.T=a,hh(e,t)}}function mh(e,t,n){t=zt(n,t),t=_o(e.stateNode,t,2),e=An(e,t,2),e!==null&&(ya(e,2),Zt(e))}function Ce(e,t,n){if(e.tag===3)mh(e,e,n);else for(;t!==null;){if(t.tag===3){mh(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(kn===null||!kn.has(a))){e=zt(n,e),n=pf(2),a=An(t,n,2),a!==null&&(yf(n,a,t,e),ya(a,2),Zt(a));break}}t=t.return}}function Ko(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new _0;var o=new Set;a.set(t,o)}else o=a.get(t),o===void 0&&(o=new Set,a.set(t,o));o.has(n)||(Bo=!0,o.add(n),e=T0.bind(null,e,t,n),t.then(e,e))}function T0(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ne===e&&(we&n)===n&&(Ve===4||Ve===3&&(we&62914560)===we&&300>yt()-fs?(je&2)===0&&Zi(e,0):qo|=n,Xi===we&&(Xi=0)),Zt(e)}function ph(e,t){t===0&&(t=uc()),e=Fn(e,t),e!==null&&(ya(e,t),Zt(e))}function A0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ph(e,n)}function O0(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(t),ph(e,n)}function j0(e,t){return il(e,t)}var bs=null,Pi=null,Qo=!1,_s=!1,Xo=!1,Mn=0;function Zt(e){e!==Pi&&e.next===null&&(Pi===null?bs=Pi=e:Pi=Pi.next=e),_s=!0,Qo||(Qo=!0,C0())}function Pa(e,t){if(!Xo&&_s){Xo=!0;do for(var n=!1,a=bs;a!==null;){if(e!==0){var o=a.pendingLanes;if(o===0)var u=0;else{var h=a.suspendedLanes,y=a.pingedLanes;u=(1<<31-bt(42|e)+1)-1,u&=o&~(h&~y),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(n=!0,_h(a,u))}else u=we,u=Er(a,a===Ne?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(u&3)===0||pa(a,u)||(n=!0,_h(a,u));a=a.next}while(n);Xo=!1}}function R0(){yh()}function yh(){_s=Qo=!1;var e=0;Mn!==0&&H0()&&(e=Mn);for(var t=yt(),n=null,a=bs;a!==null;){var o=a.next,u=vh(a,t);u===0?(a.next=null,n===null?bs=o:n.next=o,o===null&&(Pi=n)):(n=a,(e!==0||(u&3)!==0)&&(_s=!0)),a=o}Pe!==0&&Pe!==5||Pa(e),Mn!==0&&(Mn=0)}function vh(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var h=31-bt(u),y=1<<h,S=o[h];S===-1?((y&n)===0||(y&a)!==0)&&(o[h]=np(y,t)):S<=t&&(e.expiredLanes|=y),u&=~y}if(t=Ne,n=we,n=Er(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Re===2||Re===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&al(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||pa(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&al(a),ll(n)){case 2:case 8:n=lc;break;case 32:n=_r;break;case 268435456:n=oc;break;default:n=_r}return a=bh.bind(null,e),n=il(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&al(a),e.callbackPriority=2,e.callbackNode=null,2}function bh(e,t){if(Pe!==0&&Pe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(vs()&&e.callbackNode!==n)return null;var a=we;return a=Er(e,e===Ne?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(eh(e,a,t),vh(e,yt()),e.callbackNode!=null&&e.callbackNode===n?bh.bind(null,e):null)}function _h(e,t){if(vs())return null;eh(e,t,!0)}function C0(){G0(function(){(je&6)!==0?il(sc,R0):yh()})}function Jo(){if(Mn===0){var e=Ni;e===0&&(e=wr,wr<<=1,(wr&261888)===0&&(wr=256)),Mn=e}return Mn}function wh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:jr(""+e)}function Sh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function U0(e,t,n,a,o){if(t==="submit"&&n&&n.stateNode===o){var u=wh((o[ct]||null).action),h=a.submitter;h&&(t=(t=h[ct]||null)?wh(t.formAction):h.getAttribute("formAction"),t!==null&&(u=t,h=null));var y=new kr("action","action",null,a,o);e.push({event:y,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Mn!==0){var S=h?Sh(o,h):new FormData(o);go(n,{pending:!0,data:S,method:o.method,action:u},null,S)}}else typeof u=="function"&&(y.preventDefault(),S=h?Sh(o,h):new FormData(o),go(n,{pending:!0,data:S,method:o.method,action:u},u,S))},currentTarget:o}]})}}for(var Zo=0;Zo<Cl.length;Zo++){var Io=Cl[Zo],k0=Io.toLowerCase(),z0=Io[0].toUpperCase()+Io.slice(1);Ht(k0,"on"+z0)}Ht(Fc,"onAnimationEnd"),Ht(Wc,"onAnimationIteration"),Ht(ed,"onAnimationStart"),Ht("dblclick","onDoubleClick"),Ht("focusin","onFocus"),Ht("focusout","onBlur"),Ht(Zp,"onTransitionRun"),Ht(Ip,"onTransitionStart"),Ht(Pp,"onTransitionCancel"),Ht(td,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fa));function xh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],o=a.event;a=a.listeners;e:{var u=void 0;if(t)for(var h=a.length-1;0<=h;h--){var y=a[h],S=y.instance,k=y.currentTarget;if(y=y.listener,S!==u&&o.isPropagationStopped())break e;u=y,o.currentTarget=k;try{u(o)}catch($){Mr($)}o.currentTarget=null,u=S}else for(h=0;h<a.length;h++){if(y=a[h],S=y.instance,k=y.currentTarget,y=y.listener,S!==u&&o.isPropagationStopped())break e;u=y,o.currentTarget=k;try{u(o)}catch($){Mr($)}o.currentTarget=null,u=S}}}}function _e(e,t){var n=t[ol];n===void 0&&(n=t[ol]=new Set);var a=e+"__bubble";n.has(a)||(Eh(t,e,2,!1),n.add(a))}function Po(e,t,n){var a=0;t&&(a|=4),Eh(n,e,a,t)}var ws="_reactListening"+Math.random().toString(36).slice(2);function Fo(e){if(!e[ws]){e[ws]=!0,pc.forEach(function(n){n!=="selectionchange"&&(D0.has(n)||Po(n,!1,e),Po(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ws]||(t[ws]=!0,Po("selectionchange",!1,t))}}function Eh(e,t,n,a){switch(Wh(t)){case 2:var o=oy;break;case 8:o=uy;break;default:o=hu}n=o.bind(null,t,n,e),o=void 0,!yl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),a?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Wo(e,t,n,a,o){var u=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var h=a.tag;if(h===3||h===4){var y=a.stateNode.containerInfo;if(y===o)break;if(h===4)for(h=a.return;h!==null;){var S=h.tag;if((S===3||S===4)&&h.stateNode.containerInfo===o)return;h=h.return}for(;y!==null;){if(h=bi(y),h===null)return;if(S=h.tag,S===5||S===6||S===26||S===27){a=u=h;continue e}y=y.parentNode}}a=a.return}jc(function(){var k=u,$=ml(n),V=[];e:{var D=nd.get(e);if(D!==void 0){var B=kr,ie=e;switch(e){case"keypress":if(Cr(n)===0)break e;case"keydown":case"keyup":B=Op;break;case"focusin":ie="focus",B=wl;break;case"focusout":ie="blur",B=wl;break;case"beforeblur":case"afterblur":B=wl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=mp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=Cp;break;case Fc:case Wc:case ed:B=vp;break;case td:B=kp;break;case"scroll":case"scrollend":B=hp;break;case"wheel":B=Dp;break;case"copy":case"cut":case"paste":B=_p;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=zc;break;case"toggle":case"beforetoggle":B=Np}var de=(t&4)!==0,De=!de&&(e==="scroll"||e==="scrollend"),O=de?D!==null?D+"Capture":null:D;de=[];for(var x=k,U;x!==null;){var G=x;if(U=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||U===null||O===null||(G=_a(x,O),G!=null&&de.push(Wa(x,G,U))),De)break;x=x.return}0<de.length&&(D=new B(D,ie,null,n,$),V.push({event:D,listeners:de}))}}if((t&7)===0){e:{if(D=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",D&&n!==gl&&(ie=n.relatedTarget||n.fromElement)&&(bi(ie)||ie[vi]))break e;if((B||D)&&(D=$.window===$?$:(D=$.ownerDocument)?D.defaultView||D.parentWindow:window,B?(ie=n.relatedTarget||n.toElement,B=k,ie=ie?bi(ie):null,ie!==null&&(De=d(ie),de=ie.tag,ie!==De||de!==5&&de!==27&&de!==6)&&(ie=null)):(B=null,ie=k),B!==ie)){if(de=Uc,G="onMouseLeave",O="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(de=zc,G="onPointerLeave",O="onPointerEnter",x="pointer"),De=B==null?D:ba(B),U=ie==null?D:ba(ie),D=new de(G,x+"leave",B,n,$),D.target=De,D.relatedTarget=U,G=null,bi($)===k&&(de=new de(O,x+"enter",ie,n,$),de.target=U,de.relatedTarget=De,G=de),De=G,B&&ie)t:{for(de=M0,O=B,x=ie,U=0,G=O;G;G=de(G))U++;G=0;for(var oe=x;oe;oe=de(oe))G++;for(;0<U-G;)O=de(O),U--;for(;0<G-U;)x=de(x),G--;for(;U--;){if(O===x||x!==null&&O===x.alternate){de=O;break t}O=de(O),x=de(x)}de=null}else de=null;B!==null&&Th(V,D,B,de,!1),ie!==null&&De!==null&&Th(V,De,ie,de,!0)}}e:{if(D=k?ba(k):window,B=D.nodeName&&D.nodeName.toLowerCase(),B==="select"||B==="input"&&D.type==="file")var Ae=$c;else if(Lc(D))if(Gc)Ae=Qp;else{Ae=Yp;var se=Vp}else B=D.nodeName,!B||B.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?k&&hl(k.elementType)&&(Ae=$c):Ae=Kp;if(Ae&&(Ae=Ae(e,k))){Hc(V,Ae,n,$);break e}se&&se(e,D,k),e==="focusout"&&k&&D.type==="number"&&k.memoizedProps.value!=null&&fl(D,"number",D.value)}switch(se=k?ba(k):window,e){case"focusin":(Lc(se)||se.contentEditable==="true")&&(ji=se,Ol=k,ja=null);break;case"focusout":ja=Ol=ji=null;break;case"mousedown":jl=!0;break;case"contextmenu":case"mouseup":case"dragend":jl=!1,Ic(V,n,$);break;case"selectionchange":if(Jp)break;case"keydown":case"keyup":Ic(V,n,$)}var pe;if(xl)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Oi?Bc(e,n)&&(Se="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Se="onCompositionStart");Se&&(Dc&&n.locale!=="ko"&&(Oi||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Oi&&(pe=Rc()):(bn=$,vl="value"in bn?bn.value:bn.textContent,Oi=!0)),se=Ss(k,Se),0<se.length&&(Se=new kc(Se,e,null,n,$),V.push({event:Se,listeners:se}),pe?Se.data=pe:(pe=qc(n),pe!==null&&(Se.data=pe)))),(pe=qp?Lp(e,n):Hp(e,n))&&(Se=Ss(k,"onBeforeInput"),0<Se.length&&(se=new kc("onBeforeInput","beforeinput",null,n,$),V.push({event:se,listeners:Se}),se.data=pe)),U0(V,e,k,n,$)}xh(V,t)})}function Wa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ss(e,t){for(var n=t+"Capture",a=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=_a(e,n),o!=null&&a.unshift(Wa(e,o,u)),o=_a(e,t),o!=null&&a.push(Wa(e,o,u))),e.tag===3)return a;e=e.return}return[]}function M0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Th(e,t,n,a,o){for(var u=t._reactName,h=[];n!==null&&n!==a;){var y=n,S=y.alternate,k=y.stateNode;if(y=y.tag,S!==null&&S===a)break;y!==5&&y!==26&&y!==27||k===null||(S=k,o?(k=_a(n,u),k!=null&&h.unshift(Wa(n,k,S))):o||(k=_a(n,u),k!=null&&h.push(Wa(n,k,S)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var N0=/\r\n?/g,B0=/\u0000|\uFFFD/g;function Ah(e){return(typeof e=="string"?e:""+e).replace(N0,`
`).replace(B0,"")}function Oh(e,t){return t=Ah(t),Ah(e)===t}function ze(e,t,n,a,o,u){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Ei(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Ei(e,""+a);break;case"className":Ar(e,"class",a);break;case"tabIndex":Ar(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Ar(e,n,a);break;case"style":Ac(e,a,u);break;case"data":if(t!=="object"){Ar(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=jr(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(n==="formAction"?(t!=="input"&&ze(e,t,"name",o.name,o,null),ze(e,t,"formEncType",o.formEncType,o,null),ze(e,t,"formMethod",o.formMethod,o,null),ze(e,t,"formTarget",o.formTarget,o,null)):(ze(e,t,"encType",o.encType,o,null),ze(e,t,"method",o.method,o,null),ze(e,t,"target",o.target,o,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=jr(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Ft);break;case"onScroll":a!=null&&_e("scroll",e);break;case"onScrollEnd":a!=null&&_e("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(o.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=jr(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":_e("beforetoggle",e),_e("toggle",e),Tr(e,"popover",a);break;case"xlinkActuate":Pt(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Pt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Pt(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Pt(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Pt(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Pt(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Tr(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=dp.get(n)||n,Tr(e,n,a))}}function eu(e,t,n,a,o,u){switch(n){case"style":Ac(e,a,u);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(o.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"children":typeof a=="string"?Ei(e,a):(typeof a=="number"||typeof a=="bigint")&&Ei(e,""+a);break;case"onScroll":a!=null&&_e("scroll",e);break;case"onScrollEnd":a!=null&&_e("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Ft);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yc.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),u=e[ct]||null,u=u!=null?u[n]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof a=="function")){typeof u!="function"&&u!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,o);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):Tr(e,n,a)}}}function rt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",e),_e("load",e);var a=!1,o=!1,u;for(u in n)if(n.hasOwnProperty(u)){var h=n[u];if(h!=null)switch(u){case"src":a=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ze(e,t,u,h,n,null)}}o&&ze(e,t,"srcSet",n.srcSet,n,null),a&&ze(e,t,"src",n.src,n,null);return;case"input":_e("invalid",e);var y=u=h=o=null,S=null,k=null;for(a in n)if(n.hasOwnProperty(a)){var $=n[a];if($!=null)switch(a){case"name":o=$;break;case"type":h=$;break;case"checked":S=$;break;case"defaultChecked":k=$;break;case"value":u=$;break;case"defaultValue":y=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,t));break;default:ze(e,t,a,$,n,null)}}Sc(e,u,y,S,k,h,o,!1);return;case"select":_e("invalid",e),a=h=u=null;for(o in n)if(n.hasOwnProperty(o)&&(y=n[o],y!=null))switch(o){case"value":u=y;break;case"defaultValue":h=y;break;case"multiple":a=y;default:ze(e,t,o,y,n,null)}t=u,n=h,e.multiple=!!a,t!=null?xi(e,!!a,t,!1):n!=null&&xi(e,!!a,n,!0);return;case"textarea":_e("invalid",e),u=o=a=null;for(h in n)if(n.hasOwnProperty(h)&&(y=n[h],y!=null))switch(h){case"value":a=y;break;case"defaultValue":o=y;break;case"children":u=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:ze(e,t,h,y,n,null)}Ec(e,a,o,u);return;case"option":for(S in n)if(n.hasOwnProperty(S)&&(a=n[S],a!=null))switch(S){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:ze(e,t,S,a,n,null)}return;case"dialog":_e("beforetoggle",e),_e("toggle",e),_e("cancel",e),_e("close",e);break;case"iframe":case"object":_e("load",e);break;case"video":case"audio":for(a=0;a<Fa.length;a++)_e(Fa[a],e);break;case"image":_e("error",e),_e("load",e);break;case"details":_e("toggle",e);break;case"embed":case"source":case"link":_e("error",e),_e("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in n)if(n.hasOwnProperty(k)&&(a=n[k],a!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ze(e,t,k,a,n,null)}return;default:if(hl(t)){for($ in n)n.hasOwnProperty($)&&(a=n[$],a!==void 0&&eu(e,t,$,a,n,void 0));return}}for(y in n)n.hasOwnProperty(y)&&(a=n[y],a!=null&&ze(e,t,y,a,n,null))}function q0(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,h=null,y=null,S=null,k=null,$=null;for(B in n){var V=n[B];if(n.hasOwnProperty(B)&&V!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":S=V;default:a.hasOwnProperty(B)||ze(e,t,B,null,a,V)}}for(var D in a){var B=a[D];if(V=n[D],a.hasOwnProperty(D)&&(B!=null||V!=null))switch(D){case"type":u=B;break;case"name":o=B;break;case"checked":k=B;break;case"defaultChecked":$=B;break;case"value":h=B;break;case"defaultValue":y=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,t));break;default:B!==V&&ze(e,t,D,B,a,V)}}dl(e,h,y,S,k,$,u,o);return;case"select":B=h=y=D=null;for(u in n)if(S=n[u],n.hasOwnProperty(u)&&S!=null)switch(u){case"value":break;case"multiple":B=S;default:a.hasOwnProperty(u)||ze(e,t,u,null,a,S)}for(o in a)if(u=a[o],S=n[o],a.hasOwnProperty(o)&&(u!=null||S!=null))switch(o){case"value":D=u;break;case"defaultValue":y=u;break;case"multiple":h=u;default:u!==S&&ze(e,t,o,u,a,S)}t=y,n=h,a=B,D!=null?xi(e,!!n,D,!1):!!a!=!!n&&(t!=null?xi(e,!!n,t,!0):xi(e,!!n,n?[]:"",!1));return;case"textarea":B=D=null;for(y in n)if(o=n[y],n.hasOwnProperty(y)&&o!=null&&!a.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:ze(e,t,y,null,a,o)}for(h in a)if(o=a[h],u=n[h],a.hasOwnProperty(h)&&(o!=null||u!=null))switch(h){case"value":D=o;break;case"defaultValue":B=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(s(91));break;default:o!==u&&ze(e,t,h,o,a,u)}xc(e,D,B);return;case"option":for(var ie in n)if(D=n[ie],n.hasOwnProperty(ie)&&D!=null&&!a.hasOwnProperty(ie))switch(ie){case"selected":e.selected=!1;break;default:ze(e,t,ie,null,a,D)}for(S in a)if(D=a[S],B=n[S],a.hasOwnProperty(S)&&D!==B&&(D!=null||B!=null))switch(S){case"selected":e.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:ze(e,t,S,D,a,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in n)D=n[de],n.hasOwnProperty(de)&&D!=null&&!a.hasOwnProperty(de)&&ze(e,t,de,null,a,D);for(k in a)if(D=a[k],B=n[k],a.hasOwnProperty(k)&&D!==B&&(D!=null||B!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(137,t));break;default:ze(e,t,k,D,a,B)}return;default:if(hl(t)){for(var De in n)D=n[De],n.hasOwnProperty(De)&&D!==void 0&&!a.hasOwnProperty(De)&&eu(e,t,De,void 0,a,D);for($ in a)D=a[$],B=n[$],!a.hasOwnProperty($)||D===B||D===void 0&&B===void 0||eu(e,t,$,D,a,B);return}}for(var O in n)D=n[O],n.hasOwnProperty(O)&&D!=null&&!a.hasOwnProperty(O)&&ze(e,t,O,null,a,D);for(V in a)D=a[V],B=n[V],!a.hasOwnProperty(V)||D===B||D==null&&B==null||ze(e,t,V,D,a,B)}function jh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function L0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var o=n[a],u=o.transferSize,h=o.initiatorType,y=o.duration;if(u&&y&&jh(h)){for(h=0,y=o.responseEnd,a+=1;a<n.length;a++){var S=n[a],k=S.startTime;if(k>y)break;var $=S.transferSize,V=S.initiatorType;$&&jh(V)&&(S=S.responseEnd,h+=$*(S<y?1:(y-k)/(S-k)))}if(--a,t+=8*(u+h)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var tu=null,nu=null;function xs(e){return e.nodeType===9?e:e.ownerDocument}function Rh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ch(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function iu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var au=null;function H0(){var e=window.event;return e&&e.type==="popstate"?e===au?!1:(au=e,!0):(au=null,!1)}var Uh=typeof setTimeout=="function"?setTimeout:void 0,$0=typeof clearTimeout=="function"?clearTimeout:void 0,kh=typeof Promise=="function"?Promise:void 0,G0=typeof queueMicrotask=="function"?queueMicrotask:typeof kh<"u"?function(e){return kh.resolve(null).then(e).catch(V0)}:Uh;function V0(e){setTimeout(function(){throw e})}function Nn(e){return e==="head"}function zh(e,t){var n=t,a=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(o),ta(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")er(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,er(n);for(var u=n.firstChild;u;){var h=u.nextSibling,y=u.nodeName;u[va]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&u.rel.toLowerCase()==="stylesheet"||n.removeChild(u),u=h}}else n==="body"&&er(e.ownerDocument.body);n=o}while(n);ta(t)}function Dh(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function ru(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ru(n),ul(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Y0(e,t,n,a){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[va])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=qt(e.nextSibling),e===null)break}return null}function K0(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=qt(e.nextSibling),e===null))return null;return e}function Mh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=qt(e.nextSibling),e===null))return null;return e}function su(e){return e.data==="$?"||e.data==="$~"}function lu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Q0(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function qt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ou=null;function Nh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return qt(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Bh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function qh(e,t,n){switch(t=xs(n),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function er(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ul(e)}var Lt=new Map,Lh=new Set;function Es(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var mn=X.d;X.d={f:X0,r:J0,D:Z0,C:I0,L:P0,m:F0,X:ey,S:W0,M:ty};function X0(){var e=mn.f(),t=ms();return e||t}function J0(e){var t=_i(e);t!==null&&t.tag===5&&t.type==="form"?tf(t):mn.r(e)}var Fi=typeof document>"u"?null:document;function Hh(e,t,n){var a=Fi;if(a&&typeof t=="string"&&t){var o=Ut(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Lh.has(o)||(Lh.add(o),e={rel:e,crossOrigin:n,href:t},a.querySelector(o)===null&&(t=a.createElement("link"),rt(t,"link",e),We(t),a.head.appendChild(t)))}}function Z0(e){mn.D(e),Hh("dns-prefetch",e,null)}function I0(e,t){mn.C(e,t),Hh("preconnect",e,t)}function P0(e,t,n){mn.L(e,t,n);var a=Fi;if(a&&e&&t){var o='link[rel="preload"][as="'+Ut(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Ut(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Ut(n.imageSizes)+'"]')):o+='[href="'+Ut(e)+'"]';var u=o;switch(t){case"style":u=Wi(e);break;case"script":u=ea(e)}Lt.has(u)||(e=w({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Lt.set(u,e),a.querySelector(o)!==null||t==="style"&&a.querySelector(tr(u))||t==="script"&&a.querySelector(nr(u))||(t=a.createElement("link"),rt(t,"link",e),We(t),a.head.appendChild(t)))}}function F0(e,t){mn.m(e,t);var n=Fi;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Ut(a)+'"][href="'+Ut(e)+'"]',u=o;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=ea(e)}if(!Lt.has(u)&&(e=w({rel:"modulepreload",href:e},t),Lt.set(u,e),n.querySelector(o)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(nr(u)))return}a=n.createElement("link"),rt(a,"link",e),We(a),n.head.appendChild(a)}}}function W0(e,t,n){mn.S(e,t,n);var a=Fi;if(a&&e){var o=wi(a).hoistableStyles,u=Wi(e);t=t||"default";var h=o.get(u);if(!h){var y={loading:0,preload:null};if(h=a.querySelector(tr(u)))y.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Lt.get(u))&&uu(e,n);var S=h=a.createElement("link");We(S),rt(S,"link",e),S._p=new Promise(function(k,$){S.onload=k,S.onerror=$}),S.addEventListener("load",function(){y.loading|=1}),S.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Ts(h,t,a)}h={type:"stylesheet",instance:h,count:1,state:y},o.set(u,h)}}}function ey(e,t){mn.X(e,t);var n=Fi;if(n&&e){var a=wi(n).hoistableScripts,o=ea(e),u=a.get(o);u||(u=n.querySelector(nr(o)),u||(e=w({src:e,async:!0},t),(t=Lt.get(o))&&cu(e,t),u=n.createElement("script"),We(u),rt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},a.set(o,u))}}function ty(e,t){mn.M(e,t);var n=Fi;if(n&&e){var a=wi(n).hoistableScripts,o=ea(e),u=a.get(o);u||(u=n.querySelector(nr(o)),u||(e=w({src:e,async:!0,type:"module"},t),(t=Lt.get(o))&&cu(e,t),u=n.createElement("script"),We(u),rt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},a.set(o,u))}}function $h(e,t,n,a){var o=(o=te.current)?Es(o):null;if(!o)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Wi(n.href),n=wi(o).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Wi(n.href);var u=wi(o).hoistableStyles,h=u.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=o.querySelector(tr(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Lt.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Lt.set(e,n),u||ny(o,e,n,h.state))),t&&a===null)throw Error(s(528,""));return h}if(t&&a!==null)throw Error(s(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ea(n),n=wi(o).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Wi(e){return'href="'+Ut(e)+'"'}function tr(e){return'link[rel="stylesheet"]['+e+"]"}function Gh(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function ny(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),rt(t,"link",n),We(t),e.head.appendChild(t))}function ea(e){return'[src="'+Ut(e)+'"]'}function nr(e){return"script[async]"+e}function Vh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Ut(n.href)+'"]');if(a)return t.instance=a,We(a),a;var o=w({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),We(a),rt(a,"style",o),Ts(a,n.precedence,e),t.instance=a;case"stylesheet":o=Wi(n.href);var u=e.querySelector(tr(o));if(u)return t.state.loading|=4,t.instance=u,We(u),u;a=Gh(n),(o=Lt.get(o))&&uu(a,o),u=(e.ownerDocument||e).createElement("link"),We(u);var h=u;return h._p=new Promise(function(y,S){h.onload=y,h.onerror=S}),rt(u,"link",a),t.state.loading|=4,Ts(u,n.precedence,e),t.instance=u;case"script":return u=ea(n.src),(o=e.querySelector(nr(u)))?(t.instance=o,We(o),o):(a=n,(o=Lt.get(u))&&(a=w({},n),cu(a,o)),e=e.ownerDocument||e,o=e.createElement("script"),We(o),rt(o,"link",a),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Ts(a,n.precedence,e));return t.instance}function Ts(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=a.length?a[a.length-1]:null,u=o,h=0;h<a.length;h++){var y=a[h];if(y.dataset.precedence===t)u=y;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function uu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function cu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var As=null;function Yh(e,t,n){if(As===null){var a=new Map,o=As=new Map;o.set(n,a)}else o=As,a=o.get(n),a||(a=new Map,o.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var u=n[o];if(!(u[va]||u[tt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var h=u.getAttribute(t)||"";h=e+h;var y=a.get(h);y?y.push(u):a.set(h,[u])}}return a}function Kh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function iy(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Qh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ay(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=Wi(a.href),u=t.querySelector(tr(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Os.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=u,We(u);return}u=t.ownerDocument||t,a=Gh(a),(o=Lt.get(o))&&uu(a,o),u=u.createElement("link"),We(u);var h=u;h._p=new Promise(function(y,S){h.onload=y,h.onerror=S}),rt(u,"link",a),n.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Os.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var du=0;function ry(e,t){return e.stylesheets&&e.count===0&&Rs(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&Rs(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&du===0&&(du=62500*L0());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Rs(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>du?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(o)}}:null}function Os(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rs(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var js=null;function Rs(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,js=new Map,t.forEach(sy,e),js=null,Os.call(e))}function sy(e,t){if(!(t.state.loading&4)){var n=js.get(e);if(n)var a=n.get(null);else{n=new Map,js.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var h=o[u];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),a=h)}a&&n.set(null,a)}o=t.instance,h=o.getAttribute("data-precedence"),u=n.get(h)||a,u===a&&n.set(null,o),n.set(h,o),this.count++,a=Os.bind(this),o.addEventListener("load",a),o.addEventListener("error",a),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var ir={$$typeof:Q,Provider:null,Consumer:null,_currentValue:C,_currentValue2:C,_threadCount:0};function ly(e,t,n,a,o,u,h,y,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rl(0),this.hiddenUpdates=rl(null),this.identifierPrefix=a,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Xh(e,t,n,a,o,u,h,y,S,k,$,V){return e=new ly(e,t,n,h,S,k,$,V,y),t=1,u===!0&&(t|=24),u=wt(3,null,null,t),e.current=u,u.stateNode=e,t=Vl(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:a,isDehydrated:n,cache:t},Xl(u),e}function Jh(e){return e?(e=Ui,e):Ui}function Zh(e,t,n,a,o,u){o=Jh(o),a.context===null?a.context=o:a.pendingContext=o,a=Tn(t),a.payload={element:n},u=u===void 0?null:u,u!==null&&(a.callback=u),n=An(e,a,t),n!==null&&(pt(n,e,t),Ma(n,e,t))}function Ih(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fu(e,t){Ih(e,t),(e=e.alternate)&&Ih(e,t)}function Ph(e){if(e.tag===13||e.tag===31){var t=Fn(e,67108864);t!==null&&pt(t,e,67108864),fu(e,67108864)}}function Fh(e){if(e.tag===13||e.tag===31){var t=At();t=sl(t);var n=Fn(e,t);n!==null&&pt(n,e,t),fu(e,t)}}var Cs=!0;function oy(e,t,n,a){var o=z.T;z.T=null;var u=X.p;try{X.p=2,hu(e,t,n,a)}finally{X.p=u,z.T=o}}function uy(e,t,n,a){var o=z.T;z.T=null;var u=X.p;try{X.p=8,hu(e,t,n,a)}finally{X.p=u,z.T=o}}function hu(e,t,n,a){if(Cs){var o=gu(a);if(o===null)Wo(e,t,a,Us,n),eg(e,a);else if(dy(o,e,t,n,a))a.stopPropagation();else if(eg(e,a),t&4&&-1<cy.indexOf(e)){for(;o!==null;){var u=_i(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=Xn(u.pendingLanes);if(h!==0){var y=u;for(y.pendingLanes|=2,y.entangledLanes|=2;h;){var S=1<<31-bt(h);y.entanglements[1]|=S,h&=~S}Zt(u),(je&6)===0&&(hs=yt()+500,Pa(0))}}break;case 31:case 13:y=Fn(u,2),y!==null&&pt(y,u,2),ms(),fu(u,2)}if(u=gu(a),u===null&&Wo(e,t,a,Us,n),u===o)break;o=u}o!==null&&a.stopPropagation()}else Wo(e,t,a,null,n)}}function gu(e){return e=ml(e),mu(e)}var Us=null;function mu(e){if(Us=null,e=bi(e),e!==null){var t=d(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=f(t),e!==null)return e;e=null}else if(n===31){if(e=g(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Us=e,null}function Wh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zm()){case sc:return 2;case lc:return 8;case _r:case Im:return 32;case oc:return 268435456;default:return 32}default:return 32}}var pu=!1,Bn=null,qn=null,Ln=null,ar=new Map,rr=new Map,Hn=[],cy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function eg(e,t){switch(e){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":ar.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rr.delete(t.pointerId)}}function sr(e,t,n,a,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:u,targetContainers:[o]},t!==null&&(t=_i(t),t!==null&&Ph(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function dy(e,t,n,a,o){switch(t){case"focusin":return Bn=sr(Bn,e,t,n,a,o),!0;case"dragenter":return qn=sr(qn,e,t,n,a,o),!0;case"mouseover":return Ln=sr(Ln,e,t,n,a,o),!0;case"pointerover":var u=o.pointerId;return ar.set(u,sr(ar.get(u)||null,e,t,n,a,o)),!0;case"gotpointercapture":return u=o.pointerId,rr.set(u,sr(rr.get(u)||null,e,t,n,a,o)),!0}return!1}function tg(e){var t=bi(e.target);if(t!==null){var n=d(t);if(n!==null){if(t=n.tag,t===13){if(t=f(n),t!==null){e.blockedOn=t,gc(e.priority,function(){Fh(n)});return}}else if(t===31){if(t=g(n),t!==null){e.blockedOn=t,gc(e.priority,function(){Fh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ks(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gu(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);gl=a,n.target.dispatchEvent(a),gl=null}else return t=_i(n),t!==null&&Ph(t),e.blockedOn=n,!1;t.shift()}return!0}function ng(e,t,n){ks(e)&&n.delete(t)}function fy(){pu=!1,Bn!==null&&ks(Bn)&&(Bn=null),qn!==null&&ks(qn)&&(qn=null),Ln!==null&&ks(Ln)&&(Ln=null),ar.forEach(ng),rr.forEach(ng)}function zs(e,t){e.blockedOn===t&&(e.blockedOn=null,pu||(pu=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,fy)))}var Ds=null;function ig(e){Ds!==e&&(Ds=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Ds===e&&(Ds=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],o=e[t+2];if(typeof a!="function"){if(mu(a||n)===null)continue;break}var u=_i(n);u!==null&&(e.splice(t,3),t-=3,go(u,{pending:!0,data:o,method:n.method,action:a},a,o))}}))}function ta(e){function t(S){return zs(S,e)}Bn!==null&&zs(Bn,e),qn!==null&&zs(qn,e),Ln!==null&&zs(Ln,e),ar.forEach(t),rr.forEach(t);for(var n=0;n<Hn.length;n++){var a=Hn[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)tg(n),n.blockedOn===null&&Hn.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var o=n[a],u=n[a+1],h=o[ct]||null;if(typeof u=="function")h||ig(n);else if(h){var y=null;if(u&&u.hasAttribute("formAction")){if(o=u,h=u[ct]||null)y=h.formAction;else if(mu(o)!==null)continue}else y=h.action;typeof y=="function"?n[a+1]=y:(n.splice(a,3),a-=3),ig(n)}}}function ag(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(h){return o=h})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function yu(e){this._internalRoot=e}Ms.prototype.render=yu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current,a=At();Zh(n,a,e,t,null,null)},Ms.prototype.unmount=yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zh(e.current,2,null,e,null,null),ms(),t[vi]=null}};function Ms(e){this._internalRoot=e}Ms.prototype.unstable_scheduleHydration=function(e){if(e){var t=hc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Hn.length&&t!==0&&t<Hn[n].priority;n++);Hn.splice(n,0,e),n===0&&tg(e)}};var rg=i.version;if(rg!=="19.2.0")throw Error(s(527,rg,"19.2.0"));X.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var hy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ns=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ns.isDisabled&&Ns.supportsFiber)try{ma=Ns.inject(hy),vt=Ns}catch{}}return or.createRoot=function(e,t){if(!c(e))throw Error(s(299));var n=!1,a="",o=ff,u=hf,h=gf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Xh(e,1,!1,null,null,n,a,null,o,u,h,ag),e[vi]=t.current,Fo(e),new yu(t)},or.hydrateRoot=function(e,t,n){if(!c(e))throw Error(s(299));var a=!1,o="",u=ff,h=hf,y=gf,S=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError),n.formState!==void 0&&(S=n.formState)),t=Xh(e,1,!0,t,n??null,a,o,S,u,h,y,ag),t.context=Jh(null),n=t.current,a=At(),a=sl(a),o=Tn(a),o.callback=null,An(n,o,a),n=a,t.current.lanes=n,ya(t,n),Zt(t),e[vi]=t.current,Fo(e),new Ms(t)},or.version="19.2.0",or}var mg;function Ey(){if(mg)return _u.exports;mg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),_u.exports=xy(),_u.exports}var Ty=Ey();const Ay=Xu(Ty);var Du=function(l,i){return Du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(r[c]=s[c])},Du(l,i)};function Zg(l,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");Du(l,i);function r(){this.constructor=l}l.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}var Qs=function(){return Qs=Object.assign||function(i){for(var r,s=1,c=arguments.length;s<c;s++){r=arguments[s];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(i[d]=r[d])}return i},Qs.apply(this,arguments)};function fa(l,i){var r={};for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&i.indexOf(s)<0&&(r[s]=l[s]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(l);c<s.length;c++)i.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(l,s[c])&&(r[s[c]]=l[s[c]]);return r}function Ig(l,i,r,s){var c=arguments.length,d=c<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,i,r,s);else for(var g=l.length-1;g>=0;g--)(f=l[g])&&(d=(c<3?f(d):c>3?f(i,r,d):f(i,r))||d);return c>3&&d&&Object.defineProperty(i,r,d),d}function Pg(l,i){return function(r,s){i(r,s,l)}}function Fg(l,i,r,s,c,d){function f(Y){if(Y!==void 0&&typeof Y!="function")throw new TypeError("Function expected");return Y}for(var g=s.kind,p=g==="getter"?"get":g==="setter"?"set":"value",m=!i&&l?s.static?l:l.prototype:null,b=i||(m?Object.getOwnPropertyDescriptor(m,s.name):{}),w,T=!1,E=r.length-1;E>=0;E--){var A={};for(var R in s)A[R]=R==="access"?{}:s[R];for(var R in s.access)A.access[R]=s.access[R];A.addInitializer=function(Y){if(T)throw new TypeError("Cannot add initializers after decoration has completed");d.push(f(Y||null))};var L=(0,r[E])(g==="accessor"?{get:b.get,set:b.set}:b[p],A);if(g==="accessor"){if(L===void 0)continue;if(L===null||typeof L!="object")throw new TypeError("Object expected");(w=f(L.get))&&(b.get=w),(w=f(L.set))&&(b.set=w),(w=f(L.init))&&c.unshift(w)}else(w=f(L))&&(g==="field"?c.unshift(w):b[p]=w)}m&&Object.defineProperty(m,s.name,b),T=!0}function Wg(l,i,r){for(var s=arguments.length>2,c=0;c<i.length;c++)r=s?i[c].call(l,r):i[c].call(l);return s?r:void 0}function em(l){return typeof l=="symbol"?l:"".concat(l)}function tm(l,i,r){return typeof i=="symbol"&&(i=i.description?"[".concat(i.description,"]"):""),Object.defineProperty(l,"name",{configurable:!0,value:r?"".concat(r," ",i):i})}function nm(l,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,i)}function le(l,i,r,s){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(b){try{m(s.next(b))}catch(w){f(w)}}function p(b){try{m(s.throw(b))}catch(w){f(w)}}function m(b){b.done?d(b.value):c(b.value).then(g,p)}m((s=s.apply(l,i||[])).next())})}function im(l,i){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,c,d,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=g(0),f.throw=g(1),f.return=g(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(b){return p([m,b])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(r=0)),r;)try{if(s=1,c&&(d=m[0]&2?c.return:m[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,m[1])).done)return d;switch(c=0,d&&(m=[m[0]&2,d.value]),m[0]){case 0:case 1:d=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,c=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!d||m[1]>d[0]&&m[1]<d[3])){r.label=m[1];break}if(m[0]===6&&r.label<d[1]){r.label=d[1],d=m;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(m);break}d[2]&&r.ops.pop(),r.trys.pop();continue}m=i.call(l,r)}catch(b){m=[6,b],c=0}finally{s=d=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Ps=Object.create?(function(l,i,r,s){s===void 0&&(s=r);var c=Object.getOwnPropertyDescriptor(i,r);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[r]}}),Object.defineProperty(l,s,c)}):(function(l,i,r,s){s===void 0&&(s=r),l[s]=i[r]});function am(l,i){for(var r in l)r!=="default"&&!Object.prototype.hasOwnProperty.call(i,r)&&Ps(i,l,r)}function Xs(l){var i=typeof Symbol=="function"&&Symbol.iterator,r=i&&l[i],s=0;if(r)return r.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&s>=l.length&&(l=void 0),{value:l&&l[s++],done:!l}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zu(l,i){var r=typeof Symbol=="function"&&l[Symbol.iterator];if(!r)return l;var s=r.call(l),c,d=[],f;try{for(;(i===void 0||i-- >0)&&!(c=s.next()).done;)d.push(c.value)}catch(g){f={error:g}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(f)throw f.error}}return d}function rm(){for(var l=[],i=0;i<arguments.length;i++)l=l.concat(Zu(arguments[i]));return l}function sm(){for(var l=0,i=0,r=arguments.length;i<r;i++)l+=arguments[i].length;for(var s=Array(l),c=0,i=0;i<r;i++)for(var d=arguments[i],f=0,g=d.length;f<g;f++,c++)s[c]=d[f];return s}function lm(l,i,r){if(r||arguments.length===2)for(var s=0,c=i.length,d;s<c;s++)(d||!(s in i))&&(d||(d=Array.prototype.slice.call(i,0,s)),d[s]=i[s]);return l.concat(d||Array.prototype.slice.call(i))}function ca(l){return this instanceof ca?(this.v=l,this):new ca(l)}function om(l,i,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(l,i||[]),c,d=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",f),c[Symbol.asyncIterator]=function(){return this},c;function f(E){return function(A){return Promise.resolve(A).then(E,w)}}function g(E,A){s[E]&&(c[E]=function(R){return new Promise(function(L,Y){d.push([E,R,L,Y])>1||p(E,R)})},A&&(c[E]=A(c[E])))}function p(E,A){try{m(s[E](A))}catch(R){T(d[0][3],R)}}function m(E){E.value instanceof ca?Promise.resolve(E.value.v).then(b,w):T(d[0][2],E)}function b(E){p("next",E)}function w(E){p("throw",E)}function T(E,A){E(A),d.shift(),d.length&&p(d[0][0],d[0][1])}}function um(l){var i,r;return i={},s("next"),s("throw",function(c){throw c}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(c,d){i[c]=l[c]?function(f){return(r=!r)?{value:ca(l[c](f)),done:!1}:d?d(f):f}:d}}function cm(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=l[Symbol.asyncIterator],r;return i?i.call(l):(l=typeof Xs=="function"?Xs(l):l[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(d){r[d]=l[d]&&function(f){return new Promise(function(g,p){f=l[d](f),c(g,p,f.done,f.value)})}}function c(d,f,g,p){Promise.resolve(p).then(function(m){d({value:m,done:g})},f)}}function dm(l,i){return Object.defineProperty?Object.defineProperty(l,"raw",{value:i}):l.raw=i,l}var Oy=Object.create?(function(l,i){Object.defineProperty(l,"default",{enumerable:!0,value:i})}):function(l,i){l.default=i},Mu=function(l){return Mu=Object.getOwnPropertyNames||function(i){var r=[];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[r.length]=s);return r},Mu(l)};function fm(l){if(l&&l.__esModule)return l;var i={};if(l!=null)for(var r=Mu(l),s=0;s<r.length;s++)r[s]!=="default"&&Ps(i,l,r[s]);return Oy(i,l),i}function hm(l){return l&&l.__esModule?l:{default:l}}function gm(l,i,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?l!==i||!s:!i.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(l):s?s.value:i.get(l)}function mm(l,i,r,s,c){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?l!==i||!c:!i.has(l))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?c.call(l,r):c?c.value=r:i.set(l,r),r}function pm(l,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof l=="function"?i===l:l.has(i)}function ym(l,i,r){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var s,c;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=i[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=i[Symbol.dispose],r&&(c=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");c&&(s=function(){try{c.call(this)}catch(d){return Promise.reject(d)}}),l.stack.push({value:i,dispose:s,async:r})}else r&&l.stack.push({async:!0});return i}var jy=typeof SuppressedError=="function"?SuppressedError:function(l,i,r){var s=new Error(r);return s.name="SuppressedError",s.error=l,s.suppressed=i,s};function vm(l){function i(d){l.error=l.hasError?new jy(d,l.error,"An error was suppressed during disposal."):d,l.hasError=!0}var r,s=0;function c(){for(;r=l.stack.pop();)try{if(!r.async&&s===1)return s=0,l.stack.push(r),Promise.resolve().then(c);if(r.dispose){var d=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(d).then(c,function(f){return i(f),c()})}else s|=1}catch(f){i(f)}if(s===1)return l.hasError?Promise.reject(l.error):Promise.resolve();if(l.hasError)throw l.error}return c()}function bm(l,i){return typeof l=="string"&&/^\.\.?\//.test(l)?l.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,c,d,f){return s?i?".jsx":".js":c&&(!d||!f)?r:c+d+"."+f.toLowerCase()+"js"}):l}const Ry={__extends:Zg,__assign:Qs,__rest:fa,__decorate:Ig,__param:Pg,__esDecorate:Fg,__runInitializers:Wg,__propKey:em,__setFunctionName:tm,__metadata:nm,__awaiter:le,__generator:im,__createBinding:Ps,__exportStar:am,__values:Xs,__read:Zu,__spread:rm,__spreadArrays:sm,__spreadArray:lm,__await:ca,__asyncGenerator:om,__asyncDelegator:um,__asyncValues:cm,__makeTemplateObject:dm,__importStar:fm,__importDefault:hm,__classPrivateFieldGet:gm,__classPrivateFieldSet:mm,__classPrivateFieldIn:pm,__addDisposableResource:ym,__disposeResources:vm,__rewriteRelativeImportExtension:bm},Cy=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:ym,get __assign(){return Qs},__asyncDelegator:um,__asyncGenerator:om,__asyncValues:cm,__await:ca,__awaiter:le,__classPrivateFieldGet:gm,__classPrivateFieldIn:pm,__classPrivateFieldSet:mm,__createBinding:Ps,__decorate:Ig,__disposeResources:vm,__esDecorate:Fg,__exportStar:am,__extends:Zg,__generator:im,__importDefault:hm,__importStar:fm,__makeTemplateObject:dm,__metadata:nm,__param:Pg,__propKey:em,__read:Zu,__rest:fa,__rewriteRelativeImportExtension:bm,__runInitializers:Wg,__setFunctionName:tm,__spread:rm,__spreadArray:lm,__spreadArrays:sm,__values:Xs,default:Ry},Symbol.toStringTag,{value:"Module"})),Uy="modulepreload",ky=function(l){return"/TTLS/"+l},pg={},ha=function(i,r,s){let c=Promise.resolve();if(r&&r.length>0){let m=function(b){return Promise.all(b.map(w=>Promise.resolve(w).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var f=m;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),p=g?.nonce||g?.getAttribute("nonce");c=m(r.map(b=>{if(b=ky(b),b in pg)return;pg[b]=!0;const w=b.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${T}`))return;const E=document.createElement("link");if(E.rel=w?"stylesheet":Uy,w||(E.as="script"),E.crossOrigin="",E.href=b,p&&E.setAttribute("nonce",p),document.head.appendChild(E),w)return new Promise((A,R)=>{E.addEventListener("load",A),E.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${b}`)))})}))}function d(g){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=g,window.dispatchEvent(p),!p.defaultPrevented)throw g}return c.then(g=>{for(const p of g||[])p.status==="rejected"&&d(p.reason);return i().catch(d)})},zy=l=>{let i;return l?i=l:typeof fetch>"u"?i=(...r)=>ha(async()=>{const{default:s}=await Promise.resolve().then(()=>yi);return{default:s}},void 0).then(({default:s})=>s(...r)):i=fetch,(...r)=>i(...r)};class Iu extends Error{constructor(i,r="FunctionsError",s){super(i),this.name=r,this.context=s}}class yg extends Iu{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}}class vg extends Iu{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}}class bg extends Iu{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}}var Nu;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(Nu||(Nu={}));class Dy{constructor(i,{headers:r={},customFetch:s,region:c=Nu.Any}={}){this.url=i,this.headers=r,this.region=c,this.fetch=zy(s)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i){return le(this,arguments,void 0,function*(r,s={}){var c;try{const{headers:d,method:f,body:g,signal:p}=s;let m={},{region:b}=s;b||(b=this.region);const w=new URL(`${this.url}/${r}`);b&&b!=="any"&&(m["x-region"]=b,w.searchParams.set("forceFunctionRegion",b));let T;g&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",T=g):typeof g=="string"?(m["Content-Type"]="text/plain",T=g):typeof FormData<"u"&&g instanceof FormData?T=g:(m["Content-Type"]="application/json",T=JSON.stringify(g)):T=g;const E=yield this.fetch(w.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),d),body:T,signal:p}).catch(Y=>{throw Y.name==="AbortError"?Y:new yg(Y)}),A=E.headers.get("x-relay-error");if(A&&A==="true")throw new vg(E);if(!E.ok)throw new bg(E);let R=((c=E.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),L;return R==="application/json"?L=yield E.json():R==="application/octet-stream"||R==="application/pdf"?L=yield E.blob():R==="text/event-stream"?L=E:R==="multipart/form-data"?L=yield E.formData():L=yield E.text(),{data:L,error:null,response:E}}catch(d){return d instanceof Error&&d.name==="AbortError"?{data:null,error:new yg(d)}:{data:null,error:d,response:d instanceof bg||d instanceof vg?d.context:void 0}}})}}var ot={};const ga=Jg(Cy);var Bs={},qs={},Ls={},Hs={},$s={},My=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},da=My();const Ny=da.fetch,_m=da.fetch.bind(da),wm=da.Headers,By=da.Request,qy=da.Response,yi=Object.freeze(Object.defineProperty({__proto__:null,Headers:wm,Request:By,Response:qy,default:_m,fetch:Ny},Symbol.toStringTag,{value:"Module"})),Ly=Jg(yi);var Gs={},_g;function Sm(){if(_g)return Gs;_g=1,Object.defineProperty(Gs,"__esModule",{value:!0});class l extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Gs.default=l,Gs}var wg;function xm(){if(wg)return $s;wg=1,Object.defineProperty($s,"__esModule",{value:!0});const l=ga,i=l.__importDefault(Ly),r=l.__importDefault(Sm());class s{constructor(d){var f,g;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(f=d.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=d.signal,this.isMaybeSingle=(g=d.isMaybeSingle)!==null&&g!==void 0?g:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,f){return this.headers=new Headers(this.headers),this.headers.set(d,f),this}then(d,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const g=this.fetch;let p=g(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var b,w,T,E;let A=null,R=null,L=null,Y=m.status,Z=m.statusText;if(m.ok){if(this.method!=="HEAD"){const re=await m.text();re===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((b=this.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?R=re:R=JSON.parse(re))}const W=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),ae=(T=m.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");W&&ae&&ae.length>1&&(L=parseInt(ae[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(R)&&(R.length>1?(A={code:"PGRST116",details:`Results contain ${R.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},R=null,L=null,Y=406,Z="Not Acceptable"):R.length===1?R=R[0]:R=null)}else{const W=await m.text();try{A=JSON.parse(W),Array.isArray(A)&&m.status===404&&(R=[],A=null,Y=200,Z="OK")}catch{m.status===404&&W===""?(Y=204,Z="No Content"):A={message:W}}if(A&&this.isMaybeSingle&&(!((E=A?.details)===null||E===void 0)&&E.includes("0 rows"))&&(A=null,Y=200,Z="OK"),A&&this.shouldThrowOnError)throw new r.default(A)}return{error:A,data:R,count:L,status:Y,statusText:Z}});return this.shouldThrowOnError||(p=p.catch(m=>{var b,w,T;return{error:{message:`${(b=m?.name)!==null&&b!==void 0?b:"FetchError"}: ${m?.message}`,details:`${(w=m?.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(T=m?.code)!==null&&T!==void 0?T:""}`},data:null,count:null,status:0,statusText:""}})),p.then(d,f)}returns(){return this}overrideTypes(){return this}}return $s.default=s,$s}var Sg;function Em(){if(Sg)return Hs;Sg=1,Object.defineProperty(Hs,"__esModule",{value:!0});const i=ga.__importDefault(xm());class r extends i.default{select(c){let d=!1;const f=(c??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:d=!0,nullsFirst:f,foreignTable:g,referencedTable:p=g}={}){const m=p?`${p}.order`:"order",b=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${b?`${b},`:""}${c}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:d,referencedTable:f=d}={}){const g=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(g,`${c}`),this}range(c,d,{foreignTable:f,referencedTable:g=f}={}){const p=typeof g>"u"?"offset":`${g}.offset`,m=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(p,`${c}`),this.url.searchParams.set(m,`${d-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:d=!1,settings:f=!1,buffers:g=!1,wal:p=!1,format:m="text"}={}){var b;const w=[c?"analyze":null,d?"verbose":null,f?"settings":null,g?"buffers":null,p?"wal":null].filter(Boolean).join("|"),T=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${T}"; options=${w};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return Hs.default=r,Hs}var xg;function Pu(){if(xg)return Ls;xg=1,Object.defineProperty(Ls,"__esModule",{value:!0});const i=ga.__importDefault(Em()),r=new RegExp("[,()]");class s extends i.default{eq(d,f){return this.url.searchParams.append(d,`eq.${f}`),this}neq(d,f){return this.url.searchParams.append(d,`neq.${f}`),this}gt(d,f){return this.url.searchParams.append(d,`gt.${f}`),this}gte(d,f){return this.url.searchParams.append(d,`gte.${f}`),this}lt(d,f){return this.url.searchParams.append(d,`lt.${f}`),this}lte(d,f){return this.url.searchParams.append(d,`lte.${f}`),this}like(d,f){return this.url.searchParams.append(d,`like.${f}`),this}likeAllOf(d,f){return this.url.searchParams.append(d,`like(all).{${f.join(",")}}`),this}likeAnyOf(d,f){return this.url.searchParams.append(d,`like(any).{${f.join(",")}}`),this}ilike(d,f){return this.url.searchParams.append(d,`ilike.${f}`),this}ilikeAllOf(d,f){return this.url.searchParams.append(d,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(d,f){return this.url.searchParams.append(d,`ilike(any).{${f.join(",")}}`),this}is(d,f){return this.url.searchParams.append(d,`is.${f}`),this}in(d,f){const g=Array.from(new Set(f)).map(p=>typeof p=="string"&&r.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(d,`in.(${g})`),this}contains(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cs.{${f.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(f)}`),this}containedBy(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cd.{${f.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(f)}`),this}rangeGt(d,f){return this.url.searchParams.append(d,`sr.${f}`),this}rangeGte(d,f){return this.url.searchParams.append(d,`nxl.${f}`),this}rangeLt(d,f){return this.url.searchParams.append(d,`sl.${f}`),this}rangeLte(d,f){return this.url.searchParams.append(d,`nxr.${f}`),this}rangeAdjacent(d,f){return this.url.searchParams.append(d,`adj.${f}`),this}overlaps(d,f){return typeof f=="string"?this.url.searchParams.append(d,`ov.${f}`):this.url.searchParams.append(d,`ov.{${f.join(",")}}`),this}textSearch(d,f,{config:g,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const b=g===void 0?"":`(${g})`;return this.url.searchParams.append(d,`${m}fts${b}.${f}`),this}match(d){return Object.entries(d).forEach(([f,g])=>{this.url.searchParams.append(f,`eq.${g}`)}),this}not(d,f,g){return this.url.searchParams.append(d,`not.${f}.${g}`),this}or(d,{foreignTable:f,referencedTable:g=f}={}){const p=g?`${g}.or`:"or";return this.url.searchParams.append(p,`(${d})`),this}filter(d,f,g){return this.url.searchParams.append(d,`${f}.${g}`),this}}return Ls.default=s,Ls}var Eg;function Tm(){if(Eg)return qs;Eg=1,Object.defineProperty(qs,"__esModule",{value:!0});const i=ga.__importDefault(Pu());class r{constructor(c,{headers:d={},schema:f,fetch:g}){this.url=c,this.headers=new Headers(d),this.schema=f,this.fetch=g}select(c,d){const{head:f=!1,count:g}=d??{},p=f?"HEAD":"GET";let m=!1;const b=(c??"*").split("").map(w=>/\s/.test(w)&&!m?"":(w==='"'&&(m=!m),w)).join("");return this.url.searchParams.set("select",b),g&&this.headers.append("Prefer",`count=${g}`),new i.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:d,defaultToNull:f=!0}={}){var g;const p="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const m=c.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(m.length>0){const b=[...new Set(m)].map(w=>`"${w}"`);this.url.searchParams.set("columns",b.join(","))}}return new i.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(c,{onConflict:d,ignoreDuplicates:f=!1,count:g,defaultToNull:p=!0}={}){var m;const b="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),g&&this.headers.append("Prefer",`count=${g}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const w=c.reduce((T,E)=>T.concat(Object.keys(E)),[]);if(w.length>0){const T=[...new Set(w)].map(E=>`"${E}"`);this.url.searchParams.set("columns",T.join(","))}}return new i.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(c,{count:d}={}){var f;const g="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new i.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:c}={}){var d;const f="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new i.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return qs.default=r,qs}var Tg;function Hy(){if(Tg)return Bs;Tg=1,Object.defineProperty(Bs,"__esModule",{value:!0});const l=ga,i=l.__importDefault(Tm()),r=l.__importDefault(Pu());class s{constructor(d,{headers:f={},schema:g,fetch:p}={}){this.url=d,this.headers=new Headers(f),this.schemaName=g,this.fetch=p}from(d){const f=new URL(`${this.url}/${d}`);return new i.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new s(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:g=!1,get:p=!1,count:m}={}){var b;let w;const T=new URL(`${this.url}/rpc/${d}`);let E;g||p?(w=g?"HEAD":"GET",Object.entries(f).filter(([R,L])=>L!==void 0).map(([R,L])=>[R,Array.isArray(L)?`{${L.join(",")}}`:`${L}`]).forEach(([R,L])=>{T.searchParams.append(R,L)})):(w="POST",E=f);const A=new Headers(this.headers);return m&&A.set("Prefer",`count=${m}`),new r.default({method:w,url:T,headers:A,schema:this.schemaName,body:E,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return Bs.default=s,Bs}var Ag;function $y(){if(Ag)return ot;Ag=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.PostgrestError=ot.PostgrestBuilder=ot.PostgrestTransformBuilder=ot.PostgrestFilterBuilder=ot.PostgrestQueryBuilder=ot.PostgrestClient=void 0;const l=ga,i=l.__importDefault(Hy());ot.PostgrestClient=i.default;const r=l.__importDefault(Tm());ot.PostgrestQueryBuilder=r.default;const s=l.__importDefault(Pu());ot.PostgrestFilterBuilder=s.default;const c=l.__importDefault(Em());ot.PostgrestTransformBuilder=c.default;const d=l.__importDefault(xm());ot.PostgrestBuilder=d.default;const f=l.__importDefault(Sm());return ot.PostgrestError=f.default,ot.default={PostgrestClient:i.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:d.default,PostgrestError:f.default},ot}var Am=$y();const Om=Xu(Am),Gy=my({__proto__:null,default:Om},[Am]),{PostgrestClient:Vy,PostgrestQueryBuilder:k_,PostgrestFilterBuilder:z_,PostgrestTransformBuilder:D_,PostgrestBuilder:M_,PostgrestError:N_}=Om||Gy;class Yy{static detectEnvironment(){var i;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((i=navigator.userAgent)===null||i===void 0)&&i.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,c=parseInt(s.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const i=this.detectEnvironment();if(i.constructor)return i.constructor;let r=i.error||"WebSocket not supported in this environment.";throw i.workaround&&(r+=`

Suggested solution: ${i.workaround}`),new Error(r)}static createWebSocket(i,r){const s=this.getWebSocketConstructor();return new s(i,r)}static isWebSocketSupported(){try{const i=this.detectEnvironment();return i.type==="native"||i.type==="ws"}catch{return!1}}}const Ky="2.77.0",Qy=`realtime-js/${Ky}`,Xy="1.0.0",Bu=1e4,Jy=1e3,Zy=100;var dr;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(dr||(dr={}));var Fe;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(Fe||(Fe={}));var Kt;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(Kt||(Kt={}));var qu;(function(l){l.websocket="websocket"})(qu||(qu={}));var gi;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(gi||(gi={}));class Iy{constructor(){this.HEADER_LENGTH=1}decode(i,r){return i.constructor===ArrayBuffer?r(this._binaryDecode(i)):r(typeof i=="string"?JSON.parse(i):{})}_binaryDecode(i){const r=new DataView(i),s=new TextDecoder;return this._decodeBroadcast(i,r,s)}_decodeBroadcast(i,r,s){const c=r.getUint8(1),d=r.getUint8(2);let f=this.HEADER_LENGTH+2;const g=s.decode(i.slice(f,f+c));f=f+c;const p=s.decode(i.slice(f,f+d));f=f+d;const m=JSON.parse(s.decode(i.slice(f,i.byteLength)));return{ref:null,topic:g,event:p,payload:m}}}class jm{constructor(i,r){this.callback=i,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Be;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Be||(Be={}));const Og=(l,i,r={})=>{var s;const c=(s=r.skipTypes)!==null&&s!==void 0?s:[];return i?Object.keys(i).reduce((d,f)=>(d[f]=Py(f,l,i,c),d),{}):{}},Py=(l,i,r,s)=>{const c=i.find(g=>g.name===l),d=c?.type,f=r[l];return d&&!s.includes(d)?Rm(d,f):Lu(f)},Rm=(l,i)=>{if(l.charAt(0)==="_"){const r=l.slice(1,l.length);return tv(i,r)}switch(l){case Be.bool:return Fy(i);case Be.float4:case Be.float8:case Be.int2:case Be.int4:case Be.int8:case Be.numeric:case Be.oid:return Wy(i);case Be.json:case Be.jsonb:return ev(i);case Be.timestamp:return nv(i);case Be.abstime:case Be.date:case Be.daterange:case Be.int4range:case Be.int8range:case Be.money:case Be.reltime:case Be.text:case Be.time:case Be.timestamptz:case Be.timetz:case Be.tsrange:case Be.tstzrange:return Lu(i);default:return Lu(i)}},Lu=l=>l,Fy=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},Wy=l=>{if(typeof l=="string"){const i=parseFloat(l);if(!Number.isNaN(i))return i}return l},ev=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(i){return console.log(`JSON parse error: ${i}`),l}return l},tv=(l,i)=>{if(typeof l!="string")return l;const r=l.length-1,s=l[r];if(l[0]==="{"&&s==="}"){let d;const f=l.slice(1,r);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(g=>Rm(i,g))}return l},nv=l=>typeof l=="string"?l.replace(" ","T"):l,Cm=l=>{const i=new URL(l);return i.protocol=i.protocol.replace(/^ws/i,"http"),i.pathname=i.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),i.pathname===""||i.pathname==="/"?i.pathname="/api/broadcast":i.pathname=i.pathname+"/api/broadcast",i.href};class Eu{constructor(i,r,s={},c=Bu){this.channel=i,this.event=r,this.payload=s,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,r){var s;return this._hasReceived(i)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:i,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const i=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:r}){this.recHooks.filter(s=>s.status===i).forEach(s=>s.callback(r))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}}var jg;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(jg||(jg={}));class fr{constructor(i,r){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},c=>{const{onJoin:d,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fr.syncState(this.state,c,d,f),this.pendingDiffs.forEach(p=>{this.state=fr.syncDiff(this.state,p,d,f)}),this.pendingDiffs=[],g()}),this.channel._on(s.diff,{},c=>{const{onJoin:d,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=fr.syncDiff(this.state,c,d,f),g())}),this.onJoin((c,d,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:f})}),this.onLeave((c,d,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,r,s,c){const d=this.cloneDeep(i),f=this.transformState(r),g={},p={};return this.map(d,(m,b)=>{f[m]||(p[m]=b)}),this.map(f,(m,b)=>{const w=d[m];if(w){const T=b.map(L=>L.presence_ref),E=w.map(L=>L.presence_ref),A=b.filter(L=>E.indexOf(L.presence_ref)<0),R=w.filter(L=>T.indexOf(L.presence_ref)<0);A.length>0&&(g[m]=A),R.length>0&&(p[m]=R)}else g[m]=b}),this.syncDiff(d,{joins:g,leaves:p},s,c)}static syncDiff(i,r,s,c){const{joins:d,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),c||(c=()=>{}),this.map(d,(g,p)=>{var m;const b=(m=i[g])!==null&&m!==void 0?m:[];if(i[g]=this.cloneDeep(p),b.length>0){const w=i[g].map(E=>E.presence_ref),T=b.filter(E=>w.indexOf(E.presence_ref)<0);i[g].unshift(...T)}s(g,b,p)}),this.map(f,(g,p)=>{let m=i[g];if(!m)return;const b=p.map(w=>w.presence_ref);m=m.filter(w=>b.indexOf(w.presence_ref)<0),i[g]=m,c(g,m,p),m.length===0&&delete i[g]}),i}static map(i,r){return Object.getOwnPropertyNames(i).map(s=>r(s,i[s]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((r,s)=>{const c=i[s];return"metas"in c?r[s]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):r[s]=c,r},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rg;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(Rg||(Rg={}));var hr;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(hr||(hr={}));var pn;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(pn||(pn={}));class Fu{constructor(i,r={config:{}},s){var c,d;if(this.topic=i,this.params=r,this.socket=s,this.bindings={},this.state=Fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Eu(this,Kt.join,this.params,this.timeout),this.rejoinTimer=new jm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fe.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kt.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new fr(this),this.broadcastEndpointURL=Cm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(i,r=this.timeout){var s,c,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Fe.closed){const{config:{broadcast:f,presence:g,private:p}}=this.params,m=(c=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(E=>E.filter))!==null&&c!==void 0?c:[],b=!!this.bindings[hr.PRESENCE]&&this.bindings[hr.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,w={},T={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(E=>i?.(pn.CHANNEL_ERROR,E)),this._onClose(()=>i?.(pn.CLOSED)),this.updateJoinPayload(Object.assign({config:T},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:E})=>{var A;if(this.socket.setAuth(),E===void 0){i?.(pn.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,L=(A=R?.length)!==null&&A!==void 0?A:0,Y=[];for(let Z=0;Z<L;Z++){const Q=R[Z],{filter:{event:W,schema:ae,table:re,filter:M}}=Q,I=E&&E[Z];if(I&&I.event===W&&I.schema===ae&&I.table===re&&I.filter===M)Y.push(Object.assign(Object.assign({},Q),{id:I.id}));else{this.unsubscribe(),this.state=Fe.errored,i?.(pn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=Y,i&&i(pn.SUBSCRIBED);return}}).receive("error",E=>{this.state=Fe.errored,i?.(pn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{i?.(pn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(i,r={}){return await this.send({type:"presence",event:"track",payload:i},r.timeout||this.timeout)}async untrack(i={}){return await this.send({type:"presence",event:"untrack"},i)}on(i,r,s){return this.state===Fe.joined&&i===hr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(i,r,s)}async httpSend(i,r,s={}){var c;const d=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const f={method:"POST",headers:{Authorization:d,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:r,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(c=s.timeout)!==null&&c!==void 0?c:this.timeout);if(g.status===202)return{success:!0};let p=g.statusText;try{const m=await g.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(i,r={}){var s,c;if(!this._canPush()&&i.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=i,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((c=m.body)===null||c===void 0?void 0:c.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,g,p;const m=this._push(i.type,i,r.timeout||this.timeout);i.type==="broadcast"&&!(!((p=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||p===void 0)&&p.ack)&&d("ok"),m.receive("ok",()=>d("ok")),m.receive("error",()=>d("error")),m.receive("timeout",()=>d("timed out"))})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=Fe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(c=>{s=new Eu(this,Kt.leave,{},i),s.receive("ok",()=>{r(),c("ok")}).receive("timeout",()=>{r(),c("timed out")}).receive("error",()=>{c("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(i=>i.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fe.closed,this.bindings={}}async _fetchWithTimeout(i,r,s){const c=new AbortController,d=setTimeout(()=>c.abort(),s),f=await this.socket.fetch(i,Object.assign(Object.assign({},r),{signal:c.signal}));return clearTimeout(d),f}_push(i,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Eu(this,i,r,s);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(i){if(i.startTimeout(),this.pushBuffer.push(i),this.pushBuffer.length>Zy){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(i,r,s){return r}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,r,s){var c,d;const f=i.toLocaleLowerCase(),{close:g,error:p,leave:m,join:b}=Kt;if(s&&[g,p,m,b].indexOf(f)>=0&&s!==this._joinRef())return;let T=this._onMessage(f,r,s);if(r&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(E=>{var A,R,L;return((A=E.filter)===null||A===void 0?void 0:A.event)==="*"||((L=(R=E.filter)===null||R===void 0?void 0:R.event)===null||L===void 0?void 0:L.toLocaleLowerCase())===f}).map(E=>E.callback(T,s)):(d=this.bindings[f])===null||d===void 0||d.filter(E=>{var A,R,L,Y,Z,Q;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in E){const W=E.id,ae=(A=E.filter)===null||A===void 0?void 0:A.event;return W&&((R=r.ids)===null||R===void 0?void 0:R.includes(W))&&(ae==="*"||ae?.toLocaleLowerCase()===((L=r.data)===null||L===void 0?void 0:L.type.toLocaleLowerCase()))}else{const W=(Z=(Y=E?.filter)===null||Y===void 0?void 0:Y.event)===null||Z===void 0?void 0:Z.toLocaleLowerCase();return W==="*"||W===((Q=r?.event)===null||Q===void 0?void 0:Q.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===f}).map(E=>{if(typeof T=="object"&&"ids"in T){const A=T.data,{schema:R,table:L,commit_timestamp:Y,type:Z,errors:Q}=A;T=Object.assign(Object.assign({},{schema:R,table:L,commit_timestamp:Y,eventType:Z,new:{},old:{},errors:Q}),this._getPayloadRecords(A))}E.callback(T,s)})}_isClosed(){return this.state===Fe.closed}_isJoined(){return this.state===Fe.joined}_isJoining(){return this.state===Fe.joining}_isLeaving(){return this.state===Fe.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,r,s){const c=i.toLocaleLowerCase(),d={type:c,filter:r,callback:s};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(i,r){const s=i.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===s&&Fu.isEqual(c.filter,r))})),this}static isEqual(i,r){if(Object.keys(i).length!==Object.keys(r).length)return!1;for(const s in i)if(i[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(Kt.close,{},i)}_onError(i){this._on(Kt.error,{},r=>i(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fe.joining,this.joinPush.resend(i))}_getPayloadRecords(i){const r={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(r.new=Og(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(r.old=Og(i.columns,i.old_record)),r}}const Tu=()=>{},Vs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},iv=[1e3,2e3,5e3,1e4],av=1e4,rv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class sv{constructor(i,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bu,this.transport=null,this.heartbeatIntervalMs=Vs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tu,this.ref=0,this.reconnectTimer=null,this.logger=Tu,this.conn=null,this.sendBuffer=[],this.serializer=new Iy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>{let d;return c?d=c:typeof fetch>"u"?d=(...f)=>ha(async()=>{const{default:g}=await Promise.resolve().then(()=>yi);return{default:g}},void 0).then(({default:g})=>g(...f)).catch(g=>{throw new Error(`Failed to load @supabase/node-fetch: ${g.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...f)=>d(...f)},!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${i}/${qu.websocket}`,this.httpEndpoint=Cm(i),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Yy.createWebSocket(this.endpointURL())}catch(i){this._setConnectionState("disconnected");const r=i.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Xy}))}disconnect(i,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},i?this.conn.close(i,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(i){const r=await i.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const i=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),i}log(i,r,s){this.logger(i,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case dr.connecting:return gi.Connecting;case dr.open:return gi.Open;case dr.closing:return gi.Closing;default:return gi.Closed}}isConnected(){return this.connectionState()===gi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(i,r={config:{}}){const s=`realtime:${i}`,c=this.getChannels().find(d=>d.topic===s);if(c)return c;{const d=new Fu(`realtime:${i}`,r,this);return this.channels.push(d),d}}push(i){const{topic:r,event:s,payload:c,ref:d}=i,f=()=>{this.encode(i,g=>{var p;(p=this.conn)===null||p===void 0||p.send(g)})};this.log("push",`${r} ${s} (${d})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(i=null){this._authPromise=this._performAuth(i);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var i;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(i=this.conn)===null||i===void 0||i.close(Jy,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Vs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(i){this.heartbeatCallback=i}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let r=this.channels.find(s=>s.topic===i&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${i}"`),r.unsubscribe())}_remove(i){this.channels=this.channels.filter(r=>r.topic!==i.topic)}_onConnMessage(i){this.decode(i.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:c,payload:d,ref:f}=r,g=f?`(${f})`:"",p=d.status||"";this.log("receive",`${p} ${s} ${c} ${g}`.trim(),d),this.channels.filter(m=>m._isMember(s)).forEach(m=>m._trigger(c,d,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(i){var r;i==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):i==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(i=>i.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(i){var r;this._setConnectionState("disconnected"),this.log("transport","close",i),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",i)}_onConnError(i){this._setConnectionState("disconnected"),this.log("transport",`${i}`),this._triggerChanError(),this._triggerStateCallbacks("error",i)}_triggerChanError(){this.channels.forEach(i=>i._trigger(Kt.error))}_appendParams(i,r){if(Object.keys(r).length===0)return i;const s=i.match(/\?/)?"&":"?",c=new URLSearchParams(r);return`${i}${s}${c}`}_workerObjectUrl(i){let r;if(i)r=i;else{const s=new Blob([rv],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(i,r=!1){this._connectionState=i,i==="connecting"?this._wasManualDisconnect=!1:i==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(i=null){let r;i?r=i:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const c={access_token:r,version:Qy};r&&s.updateJoinPayload(c),s.joinedOnce&&s._isJoined()&&s._push(Kt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(i="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${i}`,r)})}_triggerStateCallbacks(i,r){try{this.stateChangeCallbacks[i].forEach(s=>{try{s(r)}catch(c){this.log("error",`error in ${i} callback`,c)}})}catch(s){this.log("error",`error triggering ${i} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new jm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Vs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(i){var r,s,c,d,f,g,p,m,b;if(this.transport=(r=i?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=i?.timeout)!==null&&s!==void 0?s:Bu,this.heartbeatIntervalMs=(c=i?.heartbeatIntervalMs)!==null&&c!==void 0?c:Vs.HEARTBEAT_INTERVAL,this.worker=(d=i?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=i?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=i?.heartbeatCallback)!==null&&g!==void 0?g:Tu,i?.params&&(this.params=i.params),i?.logger&&(this.logger=i.logger),(i?.logLevel||i?.log_level)&&(this.logLevel=i.logLevel||i.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=i?.reconnectAfterMs)!==null&&p!==void 0?p:(w=>iv[w-1]||av),this.encode=(m=i?.encode)!==null&&m!==void 0?m:((w,T)=>T(JSON.stringify(w))),this.decode=(b=i?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=i?.workerUrl}}}class Wu extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}}function $e(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class lv extends Wu{constructor(i,r,s){super(i),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Hu extends Wu{constructor(i,r){super(i),this.name="StorageUnknownError",this.originalError=r}}const ec=l=>{let i;return l?i=l:typeof fetch>"u"?i=(...r)=>ha(async()=>{const{default:s}=await Promise.resolve().then(()=>yi);return{default:s}},void 0).then(({default:s})=>s(...r)):i=fetch,(...r)=>i(...r)},ov=()=>le(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ha(()=>Promise.resolve().then(()=>yi),void 0)).Response:Response}),$u=l=>{if(Array.isArray(l))return l.map(r=>$u(r));if(typeof l=="function"||l!==Object(l))return l;const i={};return Object.entries(l).forEach(([r,s])=>{const c=r.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));i[c]=$u(s)}),i},uv=l=>{if(typeof l!="object"||l===null)return!1;const i=Object.getPrototypeOf(l);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},Au=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),cv=(l,i,r)=>le(void 0,void 0,void 0,function*(){const s=yield ov();l instanceof s&&!r?.noResolveJson?l.json().then(c=>{const d=l.status||500,f=c?.statusCode||d+"";i(new lv(Au(c),d,f))}).catch(c=>{i(new Hu(Au(c),c))}):i(new Hu(Au(l),l))}),dv=(l,i,r,s)=>{const c={method:l,headers:i?.headers||{}};return l==="GET"||!s?c:(uv(s)?(c.headers=Object.assign({"Content-Type":"application/json"},i?.headers),c.body=JSON.stringify(s)):c.body=s,i?.duplex&&(c.duplex=i.duplex),Object.assign(Object.assign({},c),r))};function vr(l,i,r,s,c,d){return le(this,void 0,void 0,function*(){return new Promise((f,g)=>{l(r,dv(i,s,c,d)).then(p=>{if(!p.ok)throw p;return s?.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>cv(p,g,s))})})}function mr(l,i,r,s){return le(this,void 0,void 0,function*(){return vr(l,"GET",i,r,s)})}function Yt(l,i,r,s,c){return le(this,void 0,void 0,function*(){return vr(l,"POST",i,s,c,r)})}function Gu(l,i,r,s,c){return le(this,void 0,void 0,function*(){return vr(l,"PUT",i,s,c,r)})}function fv(l,i,r,s){return le(this,void 0,void 0,function*(){return vr(l,"HEAD",i,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function tc(l,i,r,s,c){return le(this,void 0,void 0,function*(){return vr(l,"DELETE",i,s,c,r)})}class hv{constructor(i,r){this.downloadFn=i,this.shouldThrowOnError=r}then(i,r){return this.execute().then(i,r)}execute(){return le(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}})}}var Um;class gv{constructor(i,r){this.downloadFn=i,this.shouldThrowOnError=r,this[Um]="BlobDownloadBuilder",this.promise=null}asStream(){return new hv(this.downloadFn,this.shouldThrowOnError)}then(i,r){return this.getPromise().then(i,r)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return le(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}})}}Um=Symbol.toStringTag;const mv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pv{constructor(i,r={},s,c){this.shouldThrowOnError=!1,this.url=i,this.headers=r,this.bucketId=s,this.fetch=ec(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(i,r,s,c){return le(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},Cg),c);let g=Object.assign(Object.assign({},this.headers),i==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",this.encodeMetadata(p)),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",this.encodeMetadata(p))):(d=s,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,p&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),c?.headers&&(g=Object.assign(Object.assign({},g),c.headers));const m=this._removeEmptyFolders(r),b=this._getFinalPath(m),w=yield(i=="PUT"?Gu:Yt)(this.fetch,`${this.url}/object/${b}`,d,Object.assign({headers:g},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:m,id:w.Id,fullPath:w.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if($e(d))return{data:null,error:d};throw d}})}upload(i,r,s){return le(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",i,r,s)})}uploadToSignedUrl(i,r,s,c){return le(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(i),f=this._getFinalPath(d),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",r);try{let p;const m=Object.assign({upsert:Cg.upsert},c),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.append("cacheControl",m.cacheControl)):(p=s,b["cache-control"]=`max-age=${m.cacheControl}`,b["content-type"]=m.contentType);const w=yield Gu(this.fetch,g.toString(),p,{headers:b});return{data:{path:d,fullPath:w.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if($e(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(i,r){return le(this,void 0,void 0,function*(){try{let s=this._getFinalPath(i);const c=Object.assign({},this.headers);r?.upsert&&(c["x-upsert"]="true");const d=yield Yt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:c}),f=new URL(this.url+d.url),g=f.searchParams.get("token");if(!g)throw new Wu("No token returned by API");return{data:{signedUrl:f.toString(),path:i,token:g},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}update(i,r,s){return le(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",i,r,s)})}move(i,r,s){return le(this,void 0,void 0,function*(){try{return{data:yield Yt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:i,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}copy(i,r,s){return le(this,void 0,void 0,function*(){try{return{data:{path:(yield Yt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:i,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}createSignedUrl(i,r,s){return le(this,void 0,void 0,function*(){try{let c=this._getFinalPath(i),d=yield Yt(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const f=s?.download?`&download=${s.download===!0?"":s.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}createSignedUrls(i,r,s){return le(this,void 0,void 0,function*(){try{const c=yield Yt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:i},{headers:this.headers}),d=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:c.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}download(i,r){const c=typeof r?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(r?.transform||{}),f=d?`?${d}`:"",g=this._getFinalPath(i),p=()=>mr(this.fetch,`${this.url}/${c}/${g}${f}`,{headers:this.headers,noResolveJson:!0});return new gv(p,this.shouldThrowOnError)}info(i){return le(this,void 0,void 0,function*(){const r=this._getFinalPath(i);try{const s=yield mr(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:$u(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}exists(i){return le(this,void 0,void 0,function*(){const r=this._getFinalPath(i);try{return yield fv(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s)&&s instanceof Hu){const c=s.originalError;if([400,404].includes(c?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(i,r){const s=this._getFinalPath(i),c=[],d=r?.download?`download=${r.download===!0?"":r.download}`:"";d!==""&&c.push(d);const g=typeof r?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(r?.transform||{});p!==""&&c.push(p);let m=c.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${s}${m}`)}}}remove(i){return le(this,void 0,void 0,function*(){try{return{data:yield tc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:i},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}list(i,r,s){return le(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},mv),r),{prefix:i||""});return{data:yield Yt(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},s),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}listV2(i,r){return le(this,void 0,void 0,function*(){try{const s=Object.assign({},i);return{data:yield Yt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const r=[];return i.width&&r.push(`width=${i.width}`),i.height&&r.push(`height=${i.height}`),i.resize&&r.push(`resize=${i.resize}`),i.format&&r.push(`format=${i.format}`),i.quality&&r.push(`quality=${i.quality}`),r.join("&")}}const km="2.77.0",zm={"X-Client-Info":`storage-js/${km}`};class yv{constructor(i,r={},s,c){this.shouldThrowOnError=!1;const d=new URL(i);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zm),r),this.fetch=ec(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(i){return le(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(i);return{data:yield mr(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}getBucket(i){return le(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket/${i}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}createBucket(i){return le(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield Yt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}updateBucket(i,r){return le(this,void 0,void 0,function*(){try{return{data:yield Gu(this.fetch,`${this.url}/bucket/${i}`,{id:i,name:i,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}emptyBucket(i){return le(this,void 0,void 0,function*(){try{return{data:yield Yt(this.fetch,`${this.url}/bucket/${i}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}deleteBucket(i){return le(this,void 0,void 0,function*(){try{return{data:yield tc(this.fetch,`${this.url}/bucket/${i}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(i){const r={};return i&&("limit"in i&&(r.limit=String(i.limit)),"offset"in i&&(r.offset=String(i.offset)),i.search&&(r.search=i.search),i.sortColumn&&(r.sortColumn=i.sortColumn),i.sortOrder&&(r.sortOrder=i.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class vv{constructor(i,r={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zm),r),this.fetch=ec(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(i){return le(this,void 0,void 0,function*(){try{return{data:yield Yt(this.fetch,`${this.url}/bucket`,{name:i},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}listBuckets(i){return le(this,void 0,void 0,function*(){try{const r=new URLSearchParams;i?.limit!==void 0&&r.set("limit",i.limit.toString()),i?.offset!==void 0&&r.set("offset",i.offset.toString()),i?.sortColumn&&r.set("sortColumn",i.sortColumn),i?.sortOrder&&r.set("sortOrder",i.sortOrder),i?.search&&r.set("search",i.search);const s=r.toString(),c=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield mr(this.fetch,c,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}deleteBucket(i){return le(this,void 0,void 0,function*(){try{return{data:yield tc(this.fetch,`${this.url}/bucket/${i}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}}const nc={"X-Client-Info":`storage-js/${km}`,"Content-Type":"application/json"};class Dm extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function jt(l){return typeof l=="object"&&l!==null&&"__isStorageVectorsError"in l}class Ou extends Dm{constructor(i,r,s){super(i),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bv extends Dm{constructor(i,r){super(i),this.name="StorageVectorsUnknownError",this.originalError=r}}var Ug;(function(l){l.InternalError="InternalError",l.S3VectorConflictException="S3VectorConflictException",l.S3VectorNotFoundException="S3VectorNotFoundException",l.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",l.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",l.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ug||(Ug={}));const ic=l=>{let i;return l?i=l:typeof fetch>"u"?i=(...r)=>ha(async()=>{const{default:s}=await Promise.resolve().then(()=>yi);return{default:s}},void 0).then(({default:s})=>s(...r)):i=fetch,(...r)=>i(...r)},_v=l=>{if(typeof l!="object"||l===null)return!1;const i=Object.getPrototypeOf(l);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},kg=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),wv=(l,i,r)=>le(void 0,void 0,void 0,function*(){if(l&&typeof l=="object"&&"status"in l&&"ok"in l&&typeof l.status=="number"&&!r?.noResolveJson){const c=l.status||500,d=l;if(typeof d.json=="function")d.json().then(f=>{const g=f?.statusCode||f?.code||c+"";i(new Ou(kg(f),c,g))}).catch(()=>{const f=c+"",g=d.statusText||`HTTP ${c} error`;i(new Ou(g,c,f))});else{const f=c+"",g=d.statusText||`HTTP ${c} error`;i(new Ou(g,c,f))}}else i(new bv(kg(l),l))}),Sv=(l,i,r,s)=>{const c={method:l,headers:i?.headers||{}};return s?(_v(s)?(c.headers=Object.assign({"Content-Type":"application/json"},i?.headers),c.body=JSON.stringify(s)):c.body=s,Object.assign(Object.assign({},c),r)):c};function xv(l,i,r,s,c,d){return le(this,void 0,void 0,function*(){return new Promise((f,g)=>{l(r,Sv(i,s,c,d)).then(p=>{if(!p.ok)throw p;if(s?.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>wv(p,g,s))})})}function Rt(l,i,r,s,c){return le(this,void 0,void 0,function*(){return xv(l,"POST",i,s,c,r)})}class Ev{constructor(i,r={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},nc),r),this.fetch=ic(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(i){return le(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/CreateIndex`,i,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}getIndex(i,r){return le(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:i,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}})}listIndexes(i){return le(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/ListIndexes`,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}deleteIndex(i,r){return le(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:i,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}})}}class Tv{constructor(i,r={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},nc),r),this.fetch=ic(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(i){return le(this,void 0,void 0,function*(){try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Rt(this.fetch,`${this.url}/PutVectors`,i,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}getVectors(i){return le(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/GetVectors`,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}listVectors(i){return le(this,void 0,void 0,function*(){try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:yield Rt(this.fetch,`${this.url}/ListVectors`,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}queryVectors(i){return le(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/QueryVectors`,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}deleteVectors(i){return le(this,void 0,void 0,function*(){try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Rt(this.fetch,`${this.url}/DeleteVectors`,i,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}}class Av{constructor(i,r={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},nc),r),this.fetch=ic(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(i){return le(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}getBucket(i){return le(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:i},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}listBuckets(){return le(this,arguments,void 0,function*(i={}){try{return{data:yield Rt(this.fetch,`${this.url}/ListVectorBuckets`,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}deleteBucket(i){return le(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}}class Ov extends Av{constructor(i,r={}){super(i,r.headers||{},r.fetch)}from(i){return new jv(this.url,this.headers,i,this.fetch)}}class jv extends Ev{constructor(i,r,s,c){super(i,r,c),this.vectorBucketName=s}createIndex(i){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return le(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const i=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return le(this,arguments,void 0,function*(r={}){return i.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(i){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return le(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,i)})}deleteIndex(i){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return le(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,i)})}index(i){return new Rv(this.url,this.headers,this.vectorBucketName,i,this.fetch)}}class Rv extends Tv{constructor(i,r,s,c,d){super(i,r,d),this.vectorBucketName=s,this.indexName=c}putVectors(i){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return le(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(i){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return le(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const i=Object.create(null,{listVectors:{get:()=>super.listVectors}});return le(this,arguments,void 0,function*(r={}){return i.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(i){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return le(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(i){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return le(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Cv extends yv{constructor(i,r={},s,c){super(i,r,s,c)}from(i){return new pv(this.url,this.headers,i,this.fetch)}get vectors(){return new Ov(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new vv(this.url+"/iceberg",this.headers,this.fetch)}}const Uv="2.77.0";let cr="";typeof Deno<"u"?cr="deno":typeof document<"u"?cr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cr="react-native":cr="node";const kv={"X-Client-Info":`supabase-js-${cr}/${Uv}`},zv={headers:kv},Dv={schema:"public"},Mv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Nv={},Bv=l=>{let i;return l?i=l:typeof fetch>"u"?i=_m:i=fetch,(...r)=>i(...r)},qv=()=>typeof Headers>"u"?wm:Headers,Lv=(l,i,r)=>{const s=Bv(r),c=qv();return async(d,f)=>{var g;const p=(g=await i())!==null&&g!==void 0?g:l;let m=new c(f?.headers);return m.has("apikey")||m.set("apikey",l),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),s(d,Object.assign(Object.assign({},f),{headers:m}))}};function Hv(l){return l.endsWith("/")?l:l+"/"}function $v(l,i){var r,s;const{db:c,auth:d,realtime:f,global:g}=l,{db:p,auth:m,realtime:b,global:w}=i,T={db:Object.assign(Object.assign({},p),c),auth:Object.assign(Object.assign({},m),d),realtime:Object.assign(Object.assign({},b),f),storage:{},global:Object.assign(Object.assign(Object.assign({},w),g),{headers:Object.assign(Object.assign({},(r=w?.headers)!==null&&r!==void 0?r:{}),(s=g?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return l.accessToken?T.accessToken=l.accessToken:delete T.accessToken,T}function Gv(l){const i=l?.trim();if(!i)throw new Error("supabaseUrl is required.");if(!i.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Hv(i))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Mm="2.77.0",la=30*1e3,Vu=3,ju=Vu*la,Vv="http://localhost:9999",Yv="supabase.auth.token",Kv={"X-Client-Info":`gotrue-js/${Mm}`},Yu="X-Supabase-Api-Version",Nm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Qv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xv=600*1e3;class pr extends Error{constructor(i,r,s){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function ce(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class Jv extends pr{constructor(i,r,s){super(i,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Zv(l){return ce(l)&&l.name==="AuthApiError"}class mi extends pr{constructor(i,r){super(i),this.name="AuthUnknownError",this.originalError=r}}class Kn extends pr{constructor(i,r,s,c){super(i,s,c),this.name=r,this.status=s}}class Vn extends Kn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Iv(l){return ce(l)&&l.name==="AuthSessionMissingError"}class na extends Kn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ys extends Kn{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}}class Ks extends Kn{constructor(i,r=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Pv(l){return ce(l)&&l.name==="AuthImplicitGrantRedirectError"}class zg extends Kn{constructor(i,r=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ku extends Kn{constructor(i,r){super(i,"AuthRetryableFetchError",r,void 0)}}function Ru(l){return ce(l)&&l.name==="AuthRetryableFetchError"}class Dg extends Kn{constructor(i,r,s){super(i,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Qu extends Kn{constructor(i){super(i,"AuthInvalidJwtError",400,"invalid_jwt")}}const Js="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Mg=` 	
\r=`.split(""),Fv=(()=>{const l=new Array(128);for(let i=0;i<l.length;i+=1)l[i]=-1;for(let i=0;i<Mg.length;i+=1)l[Mg[i].charCodeAt(0)]=-2;for(let i=0;i<Js.length;i+=1)l[Js[i].charCodeAt(0)]=i;return l})();function Ng(l,i,r){if(l!==null)for(i.queue=i.queue<<8|l,i.queuedBits+=8;i.queuedBits>=6;){const s=i.queue>>i.queuedBits-6&63;r(Js[s]),i.queuedBits-=6}else if(i.queuedBits>0)for(i.queue=i.queue<<6-i.queuedBits,i.queuedBits=6;i.queuedBits>=6;){const s=i.queue>>i.queuedBits-6&63;r(Js[s]),i.queuedBits-=6}}function Bm(l,i,r){const s=Fv[l];if(s>-1)for(i.queue=i.queue<<6|s,i.queuedBits+=6;i.queuedBits>=8;)r(i.queue>>i.queuedBits-8&255),i.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function Bg(l){const i=[],r=f=>{i.push(String.fromCodePoint(f))},s={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=f=>{tb(f,s,r)};for(let f=0;f<l.length;f+=1)Bm(l.charCodeAt(f),c,d);return i.join("")}function Wv(l,i){if(l<=127){i(l);return}else if(l<=2047){i(192|l>>6),i(128|l&63);return}else if(l<=65535){i(224|l>>12),i(128|l>>6&63),i(128|l&63);return}else if(l<=1114111){i(240|l>>18),i(128|l>>12&63),i(128|l>>6&63),i(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function eb(l,i){for(let r=0;r<l.length;r+=1){let s=l.charCodeAt(r);if(s>55295&&s<=56319){const c=(s-55296)*1024&65535;s=(l.charCodeAt(r+1)-56320&65535|c)+65536,r+=1}Wv(s,i)}}function tb(l,i,r){if(i.utf8seq===0){if(l<=127){r(l);return}for(let s=1;s<6;s+=1)if((l>>7-s&1)===0){i.utf8seq=s;break}if(i.utf8seq===2)i.codepoint=l&31;else if(i.utf8seq===3)i.codepoint=l&15;else if(i.utf8seq===4)i.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");i.utf8seq-=1}else if(i.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");i.codepoint=i.codepoint<<6|l&63,i.utf8seq-=1,i.utf8seq===0&&r(i.codepoint)}}function ua(l){const i=[],r={queue:0,queuedBits:0},s=c=>{i.push(c)};for(let c=0;c<l.length;c+=1)Bm(l.charCodeAt(c),r,s);return new Uint8Array(i)}function nb(l){const i=[];return eb(l,r=>i.push(r)),new Uint8Array(i)}function pi(l){const i=[],r={queue:0,queuedBits:0},s=c=>{i.push(c)};return l.forEach(c=>Ng(c,r,s)),Ng(null,r,s),i.join("")}function ib(l){return Math.round(Date.now()/1e3)+l}function ab(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const i=Math.random()*16|0;return(l=="x"?i:i&3|8).toString(16)})}const Ot=()=>typeof window<"u"&&typeof document<"u",di={tested:!1,writable:!1},qm=()=>{if(!Ot())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(di.tested)return di.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),di.tested=!0,di.writable=!0}catch{di.tested=!0,di.writable=!1}return di.writable};function rb(l){const i={},r=new URL(l);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((c,d)=>{i[d]=c})}catch{}return r.searchParams.forEach((s,c)=>{i[c]=s}),i}const Lm=l=>{let i;return l?i=l:typeof fetch>"u"?i=(...r)=>ha(async()=>{const{default:s}=await Promise.resolve().then(()=>yi);return{default:s}},void 0).then(({default:s})=>s(...r)):i=fetch,(...r)=>i(...r)},sb=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",oa=async(l,i,r)=>{await l.setItem(i,JSON.stringify(r))},fi=async(l,i)=>{const r=await l.getItem(i);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Gn=async(l,i)=>{await l.removeItem(i)};class Fs{constructor(){this.promise=new Fs.promiseConstructor((i,r)=>{this.resolve=i,this.reject=r})}}Fs.promiseConstructor=Promise;function Cu(l){const i=l.split(".");if(i.length!==3)throw new Qu("Invalid JWT structure");for(let s=0;s<i.length;s++)if(!Qv.test(i[s]))throw new Qu("JWT not in base64url format");return{header:JSON.parse(Bg(i[0])),payload:JSON.parse(Bg(i[1])),signature:ua(i[2]),raw:{header:i[0],payload:i[1]}}}async function lb(l){return await new Promise(i=>{setTimeout(()=>i(null),l)})}function ob(l,i){return new Promise((s,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await l(d);if(!i(d,null,f)){s(f);return}}catch(f){if(!i(d,f)){c(f);return}}})()})}function ub(l){return("0"+l.toString(16)).substr(-2)}function cb(){const i=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let c="";for(let d=0;d<56;d++)c+=r.charAt(Math.floor(Math.random()*s));return c}return crypto.getRandomValues(i),Array.from(i,ub).join("")}async function db(l){const r=new TextEncoder().encode(l),s=await crypto.subtle.digest("SHA-256",r),c=new Uint8Array(s);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function fb(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const r=await db(l);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ia(l,i,r=!1){const s=cb();let c=s;r&&(c+="/PASSWORD_RECOVERY"),await oa(l,`${i}-code-verifier`,c);const d=await fb(s);return[d,s===d?"plain":"s256"]}const hb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gb(l){const i=l.headers.get(Yu);if(!i||!i.match(hb))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}function mb(l){if(!l)throw new Error("Missing exp claim");const i=Math.floor(Date.now()/1e3);if(l<=i)throw new Error("JWT has expired")}function pb(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function aa(l){if(!yb.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uu(){const l={};return new Proxy(l,{get:(i,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(i,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(i,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qg(l){return JSON.parse(JSON.stringify(l))}const hi=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),vb=[502,503,504];async function Lg(l){var i;if(!sb(l))throw new Ku(hi(l),0);if(vb.includes(l.status))throw new Ku(hi(l),l.status);let r;try{r=await l.json()}catch(d){throw new mi(hi(d),d)}let s;const c=gb(l);if(c&&c.getTime()>=Nm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Dg(hi(r),l.status,((i=r.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(s==="session_not_found")throw new Vn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new Dg(hi(r),l.status,r.weak_password.reasons);throw new Jv(hi(r),l.status||500,s)}const bb=(l,i,r,s)=>{const c={method:l,headers:i?.headers||{}};return l==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i?.headers),c.body=JSON.stringify(s),Object.assign(Object.assign({},c),r))};async function ge(l,i,r,s){var c;const d=Object.assign({},s?.headers);d[Yu]||(d[Yu]=Nm["2024-01-01"].name),s?.jwt&&(d.Authorization=`Bearer ${s.jwt}`);const f=(c=s?.query)!==null&&c!==void 0?c:{};s?.redirectTo&&(f.redirect_to=s.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await _b(l,i,r+g,{headers:d,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(p):{data:Object.assign({},p),error:null}}async function _b(l,i,r,s,c,d){const f=bb(i,s,c,d);let g;try{g=await l(r,Object.assign({},f))}catch(p){throw console.error(p),new Ku(hi(p),0)}if(g.ok||await Lg(g),s?.noResolveJson)return g;try{return await g.json()}catch(p){await Lg(p)}}function Vt(l){var i;let r=null;xb(l)&&(r=Object.assign({},l),l.expires_at||(r.expires_at=ib(l.expires_in)));const s=(i=l.user)!==null&&i!==void 0?i:l;return{data:{session:r,user:s},error:null}}function Hg(l){const i=Vt(l);return!i.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(i.data.weak_password=l.weak_password),i}function Yn(l){var i;return{data:{user:(i=l.user)!==null&&i!==void 0?i:l},error:null}}function wb(l){return{data:l,error:null}}function Sb(l){const{action_link:i,email_otp:r,hashed_token:s,redirect_to:c,verification_type:d}=l,f=fa(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:i,email_otp:r,hashed_token:s,redirect_to:c,verification_type:d},p=Object.assign({},f);return{data:{properties:g,user:p},error:null}}function $g(l){return l}function xb(l){return l.access_token&&l.refresh_token&&l.expires_in}const ku=["global","local","others"];class Eb{constructor({url:i="",headers:r={},fetch:s}){this.url=i,this.headers=r,this.fetch=Lm(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(i,r=ku[0]){if(ku.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ku.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async inviteUserByEmail(i,r={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Yn})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async generateLink(i){try{const{options:r}=i,s=fa(i,["options"]),c=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(c.new_email=s?.newEmail,delete c.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Sb,redirectTo:r?.redirectTo})}catch(r){if(ce(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(i){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:Yn})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async listUsers(i){var r,s,c,d,f,g,p;try{const m={nextPage:null,lastPage:0,total:0},b=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=i?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(d=(c=i?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:$g});if(b.error)throw b.error;const w=await b.json(),T=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,E=(p=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return E.length>0&&(E.forEach(A=>{const R=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(A.split(";")[1].split("=")[1]);m[`${L}Page`]=R}),m.total=parseInt(T)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(ce(m))return{data:{users:[]},error:m};throw m}}async getUserById(i){aa(i);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:Yn})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async updateUserById(i,r){aa(i);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:r,headers:this.headers,xform:Yn})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async deleteUser(i,r=!1){aa(i);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:r},xform:Yn})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async _listFactors(i){aa(i.userId);try{const{data:r,error:s}=await ge(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:r,error:s}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _deleteFactor(i){aa(i.userId),aa(i.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _listOAuthClients(i){var r,s,c,d,f,g,p;try{const m={nextPage:null,lastPage:0,total:0},b=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=i?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(d=(c=i?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:$g});if(b.error)throw b.error;const w=await b.json(),T=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,E=(p=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return E.length>0&&(E.forEach(A=>{const R=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(A.split(";")[1].split("=")[1]);m[`${L}Page`]=R}),m.total=parseInt(T)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(ce(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(i){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:i,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _getOAuthClient(i){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(i){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(i){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${i}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}}function Gg(l={}){return{getItem:i=>l[i]||null,setItem:(i,r)=>{l[i]=r},removeItem:i=>{delete l[i]}}}const ra={debug:!!(globalThis&&qm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hm extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}}class Tb extends Hm{}async function Ab(l,i,r){ra.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,i);const s=new globalThis.AbortController;return i>0&&setTimeout(()=>{s.abort(),ra.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},i),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async c=>{if(c){ra.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,c.name);try{return await r()}finally{ra.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,c.name)}}else{if(i===0)throw ra.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new Tb(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(ra.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Ob(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function $m(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function jb(l){return parseInt(l,16)}function Rb(l){const i=new TextEncoder().encode(l);return"0x"+Array.from(i,s=>s.toString(16).padStart(2,"0")).join("")}function Cb(l){var i;const{chainId:r,domain:s,expirationTime:c,issuedAt:d=new Date,nonce:f,notBefore:g,requestId:p,resources:m,scheme:b,uri:w,version:T}=l;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((i=l.statement)===null||i===void 0)&&i.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const E=$m(l.address),A=b?`${b}://${s}`:s,R=l.statement?`${l.statement}
`:"",L=`${A} wants you to sign in with your Ethereum account:
${E}

${R}`;let Y=`URI: ${w}
Version: ${T}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(c&&(Y+=`
Expiration Time: ${c.toISOString()}`),g&&(Y+=`
Not Before: ${g.toISOString()}`),p&&(Y+=`
Request ID: ${p}`),m){let Z=`
Resources:`;for(const Q of m){if(!Q||typeof Q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Q}`);Z+=`
- ${Q}`}Y+=Z}return`${L}
${Y}`}class Ie extends Error{constructor({message:i,code:r,cause:s,name:c}){var d;super(i,{cause:s}),this.__isWebAuthnError=!0,this.name=(d=c??(s instanceof Error?s.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=r}}class Zs extends Ie{constructor(i,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:i}),this.name="WebAuthnUnknownError",this.originalError=r}}function Ub({error:l,options:i}){var r,s,c;const{publicKey:d}=i;if(!d)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(i.signal instanceof AbortSignal)return new Ie({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((r=d.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ie({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(i.mediation==="conditional"&&((s=d.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ie({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((c=d.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Ie({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new Ie({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new Ie({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return d.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Ie({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new Ie({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const f=window.location.hostname;if(Gm(f)){if(d.rp.id!==f)return new Ie({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new Ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Ie({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new Ie({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new Ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function kb({error:l,options:i}){const{publicKey:r}=i;if(!r)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(i.signal instanceof AbortSignal)return new Ie({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new Ie({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const s=window.location.hostname;if(Gm(s)){if(r.rpId!==s)return new Ie({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new Ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new Ie({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new Ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}class zb{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const i=new AbortController;return this.controller=i,i.signal}cancelCeremony(){if(this.controller){const i=new Error("Manually cancelling existing WebAuthn API call");i.name="AbortError",this.controller.abort(i),this.controller=void 0}}}const Db=new zb;function Mb(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:i,user:r,excludeCredentials:s}=l,c=fa(l,["challenge","user","excludeCredentials"]),d=ua(i).buffer,f=Object.assign(Object.assign({},r),{id:ua(r.id).buffer}),g=Object.assign(Object.assign({},c),{challenge:d,user:f});if(s&&s.length>0){g.excludeCredentials=new Array(s.length);for(let p=0;p<s.length;p++){const m=s[p];g.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:ua(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return g}function Nb(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:i,allowCredentials:r}=l,s=fa(l,["challenge","allowCredentials"]),c=ua(i).buffer,d=Object.assign(Object.assign({},s),{challenge:c});if(r&&r.length>0){d.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const g=r[f];d.allowCredentials[f]=Object.assign(Object.assign({},g),{id:ua(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function Bb(l){var i;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const r=l;return{id:l.id,rawId:l.id,response:{attestationObject:pi(new Uint8Array(l.response.attestationObject)),clientDataJSON:pi(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(i=r.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function qb(l){var i;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const r=l,s=l.getClientExtensionResults(),c=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:pi(new Uint8Array(c.authenticatorData)),clientDataJSON:pi(new Uint8Array(c.clientDataJSON)),signature:pi(new Uint8Array(c.signature)),userHandle:c.userHandle?pi(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(i=r.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function Gm(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function Vg(){var l,i;return!!(Ot()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator?.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.get)=="function")}async function Lb(l){try{const i=await navigator.credentials.create(l);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new Zs("Browser returned unexpected credential type",i)}:{data:null,error:new Zs("Empty credential response",i)}}catch(i){return{data:null,error:Ub({error:i,options:l})}}}async function Hb(l){try{const i=await navigator.credentials.get(l);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new Zs("Browser returned unexpected credential type",i)}:{data:null,error:new Zs("Empty credential response",i)}}catch(i){return{data:null,error:kb({error:i,options:l})}}}const $b={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Gb={userVerification:"preferred",hints:["security-key"]};function Is(...l){const i=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),r=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),s={};for(const c of l)if(c)for(const d in c){const f=c[d];if(f!==void 0)if(Array.isArray(f))s[d]=f;else if(r(f))s[d]=f;else if(i(f)){const g=s[d];i(g)?s[d]=Is(g,f):s[d]=Is(f)}else s[d]=f}return s}function Vb(l,i){return Is($b,l,i||{})}function Yb(l,i){return Is(Gb,l,i||{})}class Kb{constructor(i){this.client=i,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(i){return this.client.mfa.enroll(Object.assign(Object.assign({},i),{factorType:"webauthn"}))}async _challenge({factorId:i,webauthn:r,friendlyName:s,signal:c},d){try{const{data:f,error:g}=await this.client.mfa.challenge({factorId:i,webauthn:r});if(!f)return{data:null,error:g};const p=c??Db.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:m}=f.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${s}`),m.displayName||(m.displayName=m.name)}switch(f.webauthn.type){case"create":{const m=Vb(f.webauthn.credential_options.publicKey,d?.create),{data:b,error:w}=await Lb({publicKey:m,signal:p});return b?{data:{factorId:i,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const m=Yb(f.webauthn.credential_options.publicKey,d?.request),{data:b,error:w}=await Hb(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:m,signal:p}));return b?{data:{factorId:i,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(f){return ce(f)?{data:null,error:f}:{data:null,error:new mi("Unexpected error in challenge",f)}}}async _verify({challengeId:i,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:i,webauthn:s})}async _authenticate({factorId:i,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:c}},d){if(!r)return{data:null,error:new pr("rpId is required for WebAuthn authentication")};try{if(!Vg())return{data:null,error:new mi("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:i,webauthn:{rpId:r,rpOrigins:s},signal:c},{request:d});if(!f)return{data:null,error:g};const{webauthn:p}=f;return this._verify({factorId:i,challengeId:f.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:s,credential_response:p.credential_response}})}catch(f){return ce(f)?{data:null,error:f}:{data:null,error:new mi("Unexpected error in authenticate",f)}}}async _register({friendlyName:i,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:c},d){if(!r)return{data:null,error:new pr("rpId is required for WebAuthn registration")};try{if(!Vg())return{data:null,error:new mi("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:i});if(!f)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===i&&T.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:g};const{data:p,error:m}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:c},{create:d});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:s,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(f){return ce(f)?{data:null,error:f}:{data:null,error:new mi("Unexpected error in register",f)}}}}Ob();const Qb={url:Vv,storageKey:Yv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Kv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Yg(l,i,r){return await r()}const sa={};class yr{get jwks(){var i,r;return(r=(i=sa[this.storageKey])===null||i===void 0?void 0:i.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(i){sa[this.storageKey]=Object.assign(Object.assign({},sa[this.storageKey]),{jwks:i})}get jwks_cached_at(){var i,r;return(r=(i=sa[this.storageKey])===null||i===void 0?void 0:i.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(i){sa[this.storageKey]=Object.assign(Object.assign({},sa[this.storageKey]),{cachedAt:i})}constructor(i){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yr.nextInstanceID,yr.nextInstanceID+=1,this.instanceID>0&&Ot()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},Qb),i);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Eb({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Lm(c.fetch),this.lock=c.lock||Yg,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:Ot()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Ab:this.lock=Yg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Kb(this)},this.persistSession?(c.storage?this.storage=c.storage:qm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gg(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Gg(this.memoryStorage)),Ot()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}_debug(...i){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Mm}) ${new Date().toISOString()}`,...i),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var i;try{const r=rb(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),Ot()&&this.detectSessionInUrl&&s!=="none"){const{data:c,error:d}=await this._getSessionFromURL(r,s);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),Pv(d)){const p=(i=d.details)===null||i===void 0?void 0:i.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:g}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ce(r)?{error:r}:{error:new mi("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(i){var r,s,c;try{const d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=i?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(c=i?.options)===null||c===void 0?void 0:c.captchaToken}},xform:Vt}),{data:f,error:g}=d;if(g||!f)return{data:{user:null,session:null},error:g};const p=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(d){if(ce(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(i){var r,s,c;try{let d;if("email"in i){const{email:b,password:w,options:T}=i;let E=null,A=null;this.flowType==="pkce"&&([E,A]=await ia(this.storage,this.storageKey)),d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T?.emailRedirectTo,body:{email:b,password:w,data:(r=T?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:T?.captchaToken},code_challenge:E,code_challenge_method:A},xform:Vt})}else if("phone"in i){const{phone:b,password:w,options:T}=i;d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(s=T?.data)!==null&&s!==void 0?s:{},channel:(c=T?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:T?.captchaToken}},xform:Vt})}else throw new Ys("You must provide either an email or phone number and a password");const{data:f,error:g}=d;if(g||!f)return{data:{user:null,session:null},error:g};const p=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(d){if(ce(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(i){try{let r;if("email"in i){const{email:d,password:f,options:g}=i;r=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Hg})}else if("phone"in i){const{phone:d,password:f,options:g}=i;r=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Hg})}else throw new Ys("You must provide either an email or phone number and a password");const{data:s,error:c}=r;return c?{data:{user:null,session:null},error:c}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new na}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:c})}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(i){var r,s,c,d;return await this._handleProviderSignIn(i.provider,{redirectTo:(r=i.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=i.options)===null||s===void 0?void 0:s.scopes,queryParams:(c=i.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=i.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(i){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(i))}async signInWithWeb3(i){const{chain:r}=i;switch(r){case"ethereum":return await this.signInWithEthereum(i);case"solana":return await this.signInWithSolana(i);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(i){var r,s,c,d,f,g,p,m,b,w,T;let E,A;if("message"in i)E=i.message,A=i.signature;else{const{chain:R,wallet:L,statement:Y,options:Z}=i;let Q;if(Ot())if(typeof L=="object")Q=L;else{const ue=window;if("ethereum"in ue&&typeof ue.ethereum=="object"&&"request"in ue.ethereum&&typeof ue.ethereum.request=="function")Q=ue.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!Z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=L}const W=new URL((r=Z?.url)!==null&&r!==void 0?r:window.location.href),ae=await Q.request({method:"eth_requestAccounts"}).then(ue=>ue).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ae||ae.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const re=$m(ae[0]);let M=(s=Z?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!M){const ue=await Q.request({method:"eth_chainId"});M=jb(ue)}const I={domain:W.host,address:re,statement:Y,uri:W.href,version:"1",chainId:M,nonce:(c=Z?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(f=(d=Z?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=Z?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(p=Z?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=Z?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(b=Z?.signInWithEthereum)===null||b===void 0?void 0:b.resources};E=Cb(I),A=await Q.request({method:"personal_sign",params:[Rb(E),re]})}try{const{data:R,error:L}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:A},!((w=i.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(T=i.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Vt});if(L)throw L;return!R||!R.session||!R.user?{data:{user:null,session:null},error:new na}:(R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),{data:Object.assign({},R),error:L})}catch(R){if(ce(R))return{data:{user:null,session:null},error:R};throw R}}async signInWithSolana(i){var r,s,c,d,f,g,p,m,b,w,T,E;let A,R;if("message"in i)A=i.message,R=i.signature;else{const{chain:L,wallet:Y,statement:Z,options:Q}=i;let W;if(Ot())if(typeof Y=="object")W=Y;else{const re=window;if("solana"in re&&typeof re.solana=="object"&&("signIn"in re.solana&&typeof re.solana.signIn=="function"||"signMessage"in re.solana&&typeof re.solana.signMessage=="function"))W=re.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Y!="object"||!Q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=Y}const ae=new URL((r=Q?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in W&&W.signIn){const re=await W.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Q?.signInWithSolana),{version:"1",domain:ae.host,uri:ae.href}),Z?{statement:Z}:null));let M;if(Array.isArray(re)&&re[0]&&typeof re[0]=="object")M=re[0];else if(re&&typeof re=="object"&&"signedMessage"in re&&"signature"in re)M=re;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)A=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),R=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in W)||typeof W.signMessage!="function"||!("publicKey"in W)||typeof W!="object"||!W.publicKey||!("toBase58"in W.publicKey)||typeof W.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${ae.host} wants you to sign in with your Solana account:`,W.publicKey.toBase58(),...Z?["",Z,""]:[""],"Version: 1",`URI: ${ae.href}`,`Issued At: ${(c=(s=Q?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=Q?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${Q.signInWithSolana.notBefore}`]:[],...!((f=Q?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${Q.signInWithSolana.expirationTime}`]:[],...!((g=Q?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${Q.signInWithSolana.chainId}`]:[],...!((p=Q?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${Q.signInWithSolana.nonce}`]:[],...!((m=Q?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${Q.signInWithSolana.requestId}`]:[],...!((w=(b=Q?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...Q.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const re=await W.signMessage(new TextEncoder().encode(A),"utf8");if(!re||!(re instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=re}}try{const{data:L,error:Y}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:pi(R)},!((T=i.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(E=i.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Vt});if(Y)throw Y;return!L||!L.session||!L.user?{data:{user:null,session:null},error:new na}:(L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),{data:Object.assign({},L),error:Y})}catch(L){if(ce(L))return{data:{user:null,session:null},error:L};throw L}}async _exchangeCodeForSession(i){const r=await fi(this.storage,`${this.storageKey}-code-verifier`),[s,c]=(r??"").split("/");try{const{data:d,error:f}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:i,code_verifier:s},xform:Vt});if(await Gn(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new na}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:f})}catch(d){if(ce(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(i){try{const{options:r,provider:s,token:c,access_token:d,nonce:f}=i,g=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:c,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Vt}),{data:p,error:m}=g;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new na}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:m})}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(i){var r,s,c,d,f;try{if("email"in i){const{email:g,options:p}=i;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await ia(this.storage,this.storageKey));const{error:w}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=p?.data)!==null&&r!==void 0?r:{},create_user:(s=p?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:b},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in i){const{phone:g,options:p}=i,{data:m,error:b}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(c=p?.data)!==null&&c!==void 0?c:{},create_user:(d=p?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(f=p?.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:b}}throw new Ys("You must provide either an email or phone number.")}catch(g){if(ce(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(i){var r,s;try{let c,d;"options"in i&&(c=(r=i.options)===null||r===void 0?void 0:r.redirectTo,d=(s=i.options)===null||s===void 0?void 0:s.captchaToken);const{data:f,error:g}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},i),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:Vt});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,m=f.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(i.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(c){if(ce(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(i){var r,s,c;try{let d=null,f=null;return this.flowType==="pkce"&&([d,f]=await ia(this.storage,this.storageKey)),await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in i?{provider_id:i.providerId}:null),"domain"in i?{domain:i.domain}:null),{redirect_to:(s=(r=i.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((c=i?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:i.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:wb})}catch(d){if(ce(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async i=>{const{data:{session:r},error:s}=i;if(s)throw s;if(!r)throw new Vn;const{error:c}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:c}})}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}}async resend(i){try{const r=`${this.url}/resend`;if("email"in i){const{email:s,type:c,options:d}=i,{error:f}=await ge(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in i){const{phone:s,type:c,options:d}=i,{data:f,error:g}=await ge(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return{data:{user:null,session:null,messageId:f?.message_id},error:g}}throw new Ys("You must provide either an email or phone number and a type")}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(i,r){this._debug("#_acquireLock","begin",i);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,i,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(i){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await i(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let i=null;const r=await fi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?i=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!i)return{data:{session:null},error:null};const s=i.expires_at?i.expires_at*1e3-Date.now()<ju:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",i.expires_at),!s){if(this.userStorage){const f=await fi(this.userStorage,this.storageKey+"-user");f?.user?i.user=f.user:i.user=Uu()}if(this.storage.isServer&&i.user){let f=this.suppressGetSessionWarning;i=new Proxy(i,{get:(p,m,b)=>(!f&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,m,b))})}return{data:{session:i},error:null}}const{data:c,error:d}=await this._callRefreshToken(i.refresh_token);return d?{data:{session:null},error:d}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(i){return i?await this._getUser(i):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(i){try{return i?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:i,xform:Yn}):await this._useSession(async r=>{var s,c,d;const{data:f,error:g}=r;if(g)throw g;return!(!((s=f.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vn}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:Yn})})}catch(r){if(ce(r))return Iv(r)&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(i,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(i,r))}async _updateUser(i,r={}){try{return await this._useSession(async s=>{const{data:c,error:d}=s;if(d)throw d;if(!c.session)throw new Vn;const f=c.session;let g=null,p=null;this.flowType==="pkce"&&i.email!=null&&([g,p]=await ia(this.storage,this.storageKey));const{data:m,error:b}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},i),{code_challenge:g,code_challenge_method:p}),jwt:f.access_token,xform:Yn});if(b)throw b;return f.user=m.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async setSession(i){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(i))}async _setSession(i){try{if(!i.access_token||!i.refresh_token)throw new Vn;const r=Date.now()/1e3;let s=r,c=!0,d=null;const{payload:f}=Cu(i.access_token);if(f.exp&&(s=f.exp,c=s<=r),c){const{data:g,error:p}=await this._callRefreshToken(i.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!g)return{data:{user:null,session:null},error:null};d=g}else{const{data:g,error:p}=await this._getUser(i.access_token);if(p)throw p;d={access_token:i.access_token,refresh_token:i.refresh_token,user:g.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(r){if(ce(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(i){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(i))}async _refreshSession(i){try{return await this._useSession(async r=>{var s;if(!i){const{data:f,error:g}=r;if(g)throw g;i=(s=f.session)!==null&&s!==void 0?s:void 0}if(!i?.refresh_token)throw new Vn;const{data:c,error:d}=await this._callRefreshToken(i.refresh_token);return d?{data:{user:null,session:null},error:d}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(i,r){try{if(!Ot())throw new Ks("No browser detected.");if(i.error||i.error_description||i.error_code)throw new Ks(i.error_description||"Error in URL with unspecified error_description",{error:i.error||"unspecified_error",code:i.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new zg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ks("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!i.code)throw new zg("No code detected.");const{data:Z,error:Q}=await this._exchangeCodeForSession(i.code);if(Q)throw Q;const W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:Z.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:c,access_token:d,refresh_token:f,expires_in:g,expires_at:p,token_type:m}=i;if(!d||!g||!f||!m)throw new Ks("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(g);let T=b+w;p&&(T=parseInt(p));const E=T-b;E*1e3<=la&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${w}s`);const A=T-w;b-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,T,b):b-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,T,b);const{data:R,error:L}=await this._getUser(d);if(L)throw L;const Y={provider_token:s,provider_refresh_token:c,access_token:d,expires_in:w,expires_at:T,refresh_token:f,token_type:m,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Y,redirectType:i.type},error:null}}catch(s){if(ce(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(i){return!!(i.access_token||i.error_description)}async _isPKCECallback(i){const r=await fi(this.storage,`${this.storageKey}-code-verifier`);return!!(i.code&&r)}async signOut(i={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(i))}async _signOut({scope:i}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:c,error:d}=r;if(d)return{error:d};const f=(s=c.session)===null||s===void 0?void 0:s.access_token;if(f){const{error:g}=await this.admin.signOut(f,i);if(g&&!(Zv(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return i!=="others"&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(i){const r=ab(),s={id:r,callback:i,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(i){return await this._useSession(async r=>{var s,c;try{const{data:{session:d},error:f}=r;if(f)throw f;await((s=this.stateChangeEmitters.get(i))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",i,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(i))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",i,"error",d),console.error(d)}})}async resetPasswordForEmail(i,r={}){let s=null,c=null;this.flowType==="pkce"&&([s,c]=await ia(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:i,code_challenge:s,code_challenge_method:c,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(d){if(ce(d))return{data:null,error:d};throw d}}async getUserIdentities(){var i;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(i=r.user.identities)!==null&&i!==void 0?i:[]},error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async linkIdentity(i){return"token"in i?this.linkIdentityIdToken(i):this.linkIdentityOAuth(i)}async linkIdentityOAuth(i){var r;try{const{data:s,error:c}=await this._useSession(async d=>{var f,g,p,m,b;const{data:w,error:T}=d;if(T)throw T;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,i.provider,{redirectTo:(f=i.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=i.options)===null||g===void 0?void 0:g.scopes,queryParams:(p=i.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",E,{headers:this.headers,jwt:(b=(m=w.session)===null||m===void 0?void 0:m.access_token)!==null&&b!==void 0?b:void 0})});if(c)throw c;return Ot()&&!(!((r=i.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:i.provider,url:s?.url},error:null}}catch(s){if(ce(s))return{data:{provider:i.provider,url:null},error:s};throw s}}async linkIdentityIdToken(i){return await this._useSession(async r=>{var s;try{const{error:c,data:{session:d}}=r;if(c)throw c;const{options:f,provider:g,token:p,access_token:m,nonce:b}=i,w=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=d?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:g,id_token:p,access_token:m,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Vt}),{data:T,error:E}=w;return E?{data:{user:null,session:null},error:E}:!T||!T.session||!T.user?{data:{user:null,session:null},error:new na}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),{data:T,error:E})}catch(c){if(ce(c))return{data:{user:null,session:null},error:c};throw c}})}async unlinkIdentity(i){try{return await this._useSession(async r=>{var s,c;const{data:d,error:f}=r;if(f)throw f;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${i.identity_id}`,{headers:this.headers,jwt:(c=(s=d.session)===null||s===void 0?void 0:s.access_token)!==null&&c!==void 0?c:void 0})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _refreshAccessToken(i){const r=`#_refreshAccessToken(${i.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await ob(async c=>(c>0&&await lb(200*Math.pow(2,c-1)),this._debug(r,"refreshing attempt",c),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:i},headers:this.headers,xform:Vt})),(c,d)=>{const f=200*Math.pow(2,c);return d&&Ru(d)&&Date.now()+f-s<la})}catch(s){if(this._debug(r,"error",s),ce(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(i){return typeof i=="object"&&i!==null&&"access_token"in i&&"refresh_token"in i&&"expires_at"in i}async _handleProviderSignIn(i,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,i,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",i,"options",r,"url",s),Ot()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:i,url:s},error:null}}async _recoverAndRefresh(){var i,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const c=await fi(this.storage,this.storageKey);if(c&&this.userStorage){let f=await fi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await oa(this.userStorage,this.storageKey+"-user",f)),c.user=(i=f?.user)!==null&&i!==void 0?i:Uu()}else if(c&&!c.user&&!c.user){const f=await fi(this.storage,this.storageKey+"-user");f&&f?.user?(c.user=f.user,await Gn(this.storage,this.storageKey+"-user"),await oa(this.storage,this.storageKey,c)):c.user=Uu()}if(this._debug(s,"session from storage",c),!this._isValidSession(c)){this._debug(s,"session is not valid"),c!==null&&await this._removeSession();return}const d=((r=c.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ju;if(this._debug(s,`session has${d?"":" not"} expired with margin of ${ju}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),Ru(f)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(c.access_token);!g&&f?.user?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(s,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(s,"error",c),console.error(c);return}finally{this._debug(s,"end")}}async _callRefreshToken(i){var r,s;if(!i)throw new Vn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${i.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new Fs;const{data:d,error:f}=await this._refreshAccessToken(i);if(f)throw f;if(!d.session)throw new Vn;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const g={data:d.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(d){if(this._debug(c,"error",d),ce(d)){const f={data:null,error:d};return Ru(d)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(i,r,s=!0){const c=`#_notifyAllSubscribers(${i})`;this._debug(c,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:i,session:r});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(i,r)}catch(p){d.push(p)}});if(await Promise.all(f),d.length>0){for(let g=0;g<d.length;g+=1)console.error(d[g]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(i){this._debug("#_saveSession()",i),this.suppressGetSessionWarning=!0;const r=Object.assign({},i),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await oa(this.userStorage,this.storageKey+"-user",{user:r.user});const c=Object.assign({},r);delete c.user;const d=qg(c);await oa(this.storage,this.storageKey,d)}else{const c=qg(r);await oa(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await Gn(this.storage,this.storageKey),await Gn(this.storage,this.storageKey+"-code-verifier"),await Gn(this.storage,this.storageKey+"-user"),this.userStorage&&await Gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const i=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{i&&Ot()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",i)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const i=setInterval(()=>this._autoRefreshTokenTick(),la);this.autoRefreshTicker=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const i=this.autoRefreshTicker;this.autoRefreshTicker=null,i&&clearInterval(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const i=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((s.expires_at*1e3-i)/la);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${la}ms, refresh threshold is ${Vu} ticks`),c<=Vu&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(i){if(i.isAcquireTimeout||i instanceof Hm)this._debug("auto refresh token tick lock not available");else throw i}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ot()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(i){console.error("_handleVisibilityChange",i)}}async _onVisibilityChanged(i){const r=`#_onVisibilityChanged(${i})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),i||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(i,r,s){const c=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&c.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[d,f]=await ia(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(g.toString())}if(s?.queryParams){const d=new URLSearchParams(s.queryParams);c.push(d.toString())}return s?.skipBrowserRedirect&&c.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${i}?${c.join("&")}`}async _unenroll(i){try{return await this._useSession(async r=>{var s;const{data:c,error:d}=r;return d?{data:null,error:d}:await ge(this.fetch,"DELETE",`${this.url}/factors/${i.factorId}`,{headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _enroll(i){try{return await this._useSession(async r=>{var s,c;const{data:d,error:f}=r;if(f)return{data:null,error:f};const g=Object.assign({friendly_name:i.friendlyName,factor_type:i.factorType},i.factorType==="phone"?{phone:i.phone}:i.factorType==="totp"?{issuer:i.issuer}:{}),{data:p,error:m}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(s=d?.session)===null||s===void 0?void 0:s.access_token});return m?{data:null,error:m}:(i.factorType==="totp"&&p.type==="totp"&&(!((c=p?.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _verify(i){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:c,error:d}=r;if(d)return{data:null,error:d};const f=Object.assign({challenge_id:i.challengeId},"webauthn"in i?{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_response:i.webauthn.type==="create"?Bb(i.webauthn.credential_response):qb(i.webauthn.credential_response)})}:{code:i.code}),{data:g,error:p}=await ge(this.fetch,"POST",`${this.url}/factors/${i.factorId}/verify`,{body:f,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),{data:g,error:p})})}catch(r){if(ce(r))return{data:null,error:r};throw r}})}async _challenge(i){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:c,error:d}=r;if(d)return{data:null,error:d};const f=await ge(this.fetch,"POST",`${this.url}/factors/${i.factorId}/challenge`,{body:i,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Mb(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Nb(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ce(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(i){const{data:r,error:s}=await this._challenge({factorId:i.factorId});return s?{data:null,error:s}:await this._verify({factorId:i.factorId,challengeId:r.id,code:i.code})}async _listFactors(){var i;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const c={all:[],phone:[],totp:[],webauthn:[]};for(const d of(i=r?.factors)!==null&&i!==void 0?i:[])c.all.push(d),d.status==="verified"&&c[d.factor_type].push(d);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async i=>{var r,s;const{data:{session:c},error:d}=i;if(d)return{data:null,error:d};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Cu(c.access_token);let g=null;f.aal&&(g=f.aal);let p=g;((s=(r=c.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const b=f.amr||[];return{data:{currentLevel:g,nextLevel:p,currentAuthenticationMethods:b},error:null}}))}async fetchJwk(i,r={keys:[]}){let s=r.keys.find(g=>g.kid===i);if(s)return s;const c=Date.now();if(s=this.jwks.keys.find(g=>g.kid===i),s&&this.jwks_cached_at+Xv>c)return s;const{data:d,error:f}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,s=d.keys.find(g=>g.kid===i),!s)?null:s}async getClaims(i,r={}){try{let s=i;if(!s){const{data:E,error:A}=await this.getSession();if(A||!E.session)return{data:null,error:A};s=E.session.access_token}const{header:c,payload:d,signature:f,raw:{header:g,payload:p}}=Cu(s);r?.allowExpired||mb(d.exp);const m=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!m){const{error:E}=await this.getUser(s);if(E)throw E;return{data:{claims:d,header:c,signature:f},error:null}}const b=pb(c.alg),w=await crypto.subtle.importKey("jwk",m,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,f,nb(`${g}.${p}`)))throw new Qu("Invalid JWT signature");return{data:{claims:d,header:c,signature:f},error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}}yr.nextInstanceID=0;const Xb=yr;class Jb extends Xb{constructor(i){super(i)}}class Zb{constructor(i,r,s){var c,d,f;this.supabaseUrl=i,this.supabaseKey=r;const g=Gv(i);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const p=`sb-${g.hostname.split(".")[0]}-auth-token`,m={db:Dv,realtime:Nv,auth:Object.assign(Object.assign({},Mv),{storageKey:p}),global:zv},b=$v(s??{},m);this.storageKey=(c=b.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(d=b.global.headers)!==null&&d!==void 0?d:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(w,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=b.auth)!==null&&f!==void 0?f:{},this.headers,b.global.fetch),this.fetch=Lv(r,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new Vy(new URL("rest/v1",g).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new Cv(this.storageUrl.href,this.headers,this.fetch,s?.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new Dy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,r,s)}channel(i,r={config:{}}){return this.realtime.channel(i,r)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i,r;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:r,detectSessionInUrl:s,storage:c,userStorage:d,storageKey:f,flowType:g,lock:p,debug:m},b,w){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jb({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),b),storageKey:f,autoRefreshToken:i,persistSession:r,detectSessionInUrl:s,storage:c,userStorage:d,flowType:g,lock:p,debug:m,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new sv(this.realtimeUrl.href,Object.assign(Object.assign({},i),{params:Object.assign({apikey:this.supabaseKey},i?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s?.access_token)})}_handleTokenChanged(i,r,s){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Vm=(l,i,r)=>new Zb(l,i,r);function Ib(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const i=l.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}Ib()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ym="https://jgwwikvqvdfzxuboqgxr.supabase.co",Pb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impnd3dpa3ZxdmRmenh1Ym9xZ3hyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTgxMTgsImV4cCI6MjA3NzMzNDExOH0.XvjyWN0CdPVYKTuHK4-ukl4YUPf17n2XQOTEjFyLXKA",Fb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impnd3dpa3ZxdmRmenh1Ym9xZ3hyIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MTc1ODExOCwiZXhwIjoyMDc3MzM0MTE4fQ.jNjEB_mdNMI-ao7jFCRVd8ijkjxsj_oyu3LCpZNwW0M",J=Vm(Ym,Pb,{auth:{persistSession:!0,storageKey:"ttls-auth-storage",autoRefreshToken:!0}}),Wb=Vm(Ym,Fb,{auth:{persistSession:!1,storageKey:"ttls-service-storage"},global:{headers:{"x-client-role":"service"}}});function e_(){return _.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[_.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),_.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),_.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),_.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}function t_({onSignIn:l}){return _.jsx("div",{className:"min-h-screen bg-night-sky flex items-center justify-center",children:_.jsxs("div",{className:"bg-black/70 p-8 rounded-md text-center text-white",children:[_.jsx("h1",{className:"text-2xl mb-2",children:" TTLS"}),_.jsx("p",{className:"mb-4",children:"Join the Night Sky"}),_.jsxs("button",{onClick:l,className:"px-4 py-2 rounded-md bg-white text-gray-800 font-semibold flex items-center gap-2",children:[_.jsx(e_,{}),"Sign in with Google"]})]})})}function Kg({room:l,user:i,onTransferOwnership:r}){const[s,c]=q.useState(!1),[d,f]=q.useState([]),[g,p]=q.useState(!1),[m,b]=q.useState([]),[w,T]=q.useState(new Set),E=q.useRef(0),A=q.useRef(!1),R=q.useCallback(async()=>{if(l)try{const{data:M,error:I}=await J.from("room_audio_mutes").select("user_id").eq("room_id",l.id);if(I)throw I;const ue=new Set(M.map(ve=>ve.user_id));T(ue)}catch(M){console.error(" Error fetching muted users:",M)}},[l]),L=q.useCallback(async()=>{if(l)try{const{data:M,error:I}=await J.from("room_bans").select(`
        *,
        banned_user:user_positions!room_bans_banned_user_id_fkey (
          email
        ),
        banned_by:user_positions!room_bans_banned_by_user_id_fkey (
          email
        )
      `).eq("room_id",l.id).is("expires_at",null);if(I)throw I;b(M||[])}catch(M){console.error(" Error fetching banned users:",M)}},[l]),Y=q.useCallback(async(M=!1)=>{if(!l||!s)return;const I=Date.now();if(!M&&I-E.current<2e3&&!A.current){console.log(" Skipping fetch - too soon since last fetch");return}if(A.current){console.log(" Skipping fetch - already fetching");return}p(!0),A.current=!0,E.current=I;try{const{data:ue,error:ve}=await J.from("user_room_memberships").select(`
          user_id,
          user_positions!user_room_memberships_user_id_fkey (
            email,
            is_online
          )
        `).eq("room_id",l.id);if(ve)throw ve;console.log(" Room members fetched:",ue?.length||0,"members"),f(ue||[])}catch(ue){console.error(" Error fetching room members:",ue)}finally{p(!1),A.current=!1}},[l,s]),Z=async M=>{if(!(!l||!i))try{const I=!w.has(M);if(I?muteManager.muteUser(l.id,M):muteManager.unmuteUser(l.id,M),T(ue=>{const ve=new Set(ue);return I?ve.add(M):ve.delete(M),ve}),console.log(` ${I?"Muting":"Unmuting"} user:`,M),I){const{error:ue}=await J.from("room_audio_mutes").insert({room_id:l.id,user_id:M,muted_by_user_id:i.id});if(ue)throw console.error(" Error muting user in database:",ue),muteManager.unmuteUser(l.id,M),T(ve=>{const Te=new Set(ve);return Te.delete(M),Te}),ue}else{const{error:ue}=await J.from("room_audio_mutes").delete().eq("room_id",l.id).eq("user_id",M);if(ue)throw console.error(" Error unmuting user in database:",ue),muteManager.muteUser(l.id,M),T(ve=>{const Te=new Set(ve);return Te.add(M),Te}),ue}console.log(` User ${I?"muted":"unmuted"} successfully`)}catch(I){console.error(" Error toggling mute:",I),alert("Error: "+I.message)}},Q=async M=>{if(!(!l||!window.confirm(`SPINNING BACK KICK! 

Are you sure you want to BAN this user? They will be immediately removed and cannot rejoin.`)))try{console.log(" Banning user:",M,"from room:",l.id);const{error:I}=await J.from("user_room_memberships").delete().eq("user_id",M).eq("room_id",l.id);if(I)throw console.error(" Error kicking during ban:",I),I;const{error:ue}=await J.from("room_bans").insert({room_id:l.id,banned_user_id:M,banned_by_user_id:i.id,reason:"Spinning back kick by room owner"});if(ue)throw console.error(" Error adding ban:",ue),ue;console.log(" User banned successfully"),await Y(),await L(),alert(" SPINNING BACK KICK! User has been BANNED from this room!")}catch(I){console.error(" Error in spinning back kick:",I),alert("Error banning user: "+I.message)}},W=async M=>{if(!(!l||!window.confirm("Are you sure you want to kick this user from the room?")))try{const{data:I}=await J.from("user_positions").select("email").eq("user_id",M).single(),ue=I?.email,{error:ve}=await J.from("user_room_memberships").delete().eq("user_id",M).eq("room_id",l.id);if(ve)throw ve;console.log(" User kicked successfully"),M===i.id&&(console.log(" Immediate UI update: Kicked ourselves, clearing room"),typeof window.forceLeaveRoom=="function"&&window.forceLeaveRoom(l.id));const{data:Te}=await J.from("user_room_memberships").select("id").eq("room_id",l.id),Ee=Te?.length||0;await J.from("chat_rooms").update({current_slots:Ee}).eq("id",l.id),console.log(" Room slots updated to:",Ee)}catch(I){console.error(" Error kicking user:",I),alert("Error kicking user: "+I.message)}};q.useEffect(()=>{s&&(console.log(" RoomMembersPanel expanded, loading data..."),Date.now()-E.current>5e3?(Y(!0),L(),R()):console.log(" Using cached room members data"))},[s,l,Y,L,R]),q.useEffect(()=>{if(!l||!s)return;console.log(" Setting up REAL-TIME room membership subscription");const M=J.channel("room_members_updates_optimized").on("postgres_changes",{event:"*",schema:"public",table:"user_room_memberships",filter:`room_id=eq.${l.id}`},I=>{console.log(" RoomMembersPanel REAL-TIME EVENT:",I.eventType),setTimeout(()=>{Y(!0)},100)}).subscribe(I=>{console.log(" RoomMembersPanel Subscription Status:",I)});return()=>{console.log(" Cleaning up room membership subscription"),J.removeChannel(M)}},[l,s,Y]),q.useEffect(()=>{if(!l||!s)return;console.log(" Setting up mute status subscription");const M=J.channel("room_mute_changes_optimized").on("postgres_changes",{event:"*",schema:"public",table:"room_audio_mutes",filter:`room_id=eq.${l.id}`},I=>{console.log(" Mute status changed:",I.eventType),setTimeout(()=>{R()},100)}).subscribe();return()=>{J.removeChannel(M)}},[l,s,R]);const ae=i?.id===l?.owner_id,re=M=>M?.split("@")[0]||"Unknown";return s?_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>c(!1)}),_.jsxs("div",{style:{position:"absolute",top:"80px",right:"16px",width:"300px",background:"linear-gradient(to bottom, #0f172a 0%, #581c87 100%)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"12px",padding:"16px",zIndex:100,maxHeight:"400px",overflowY:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("h4",{style:{color:"white",margin:0,fontSize:"16px",fontWeight:"600"},children:"Room Members"}),_.jsx("span",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",color:"rgba(255,255,255,0.7)"},children:d.length})]}),_.jsx("button",{onClick:()=>c(!1),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",padding:"6px",fontSize:"14px",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),g?_.jsx("div",{style:{color:"rgba(255,255,255,0.6)",textAlign:"center",fontSize:"14px",padding:"20px"},children:"Loading members..."}):d.length===0?_.jsx("div",{style:{color:"rgba(255,255,255,0.6)",textAlign:"center",fontSize:"14px",padding:"20px"},children:"No members in this room"}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:d.map(M=>_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",color:"white",border:"1px solid rgba(255,255,255,0.1)"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",flex:1},children:[_.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:M.user_positions?.is_online?"#10B981":"#6B7280",flexShrink:0}}),_.jsxs("div",{style:{minWidth:0,flex:1},children:[_.jsxs("div",{style:{fontSize:"13px",fontWeight:M.user_id===l.owner_id?"600":"400",color:M.user_id===l.owner_id?"#F59E0B":"white"},children:[re(M.user_positions?.email),M.user_id===l.owner_id&&_.jsx("span",{style:{marginLeft:"6px",fontSize:"12px"},children:""})]}),_.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.5)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:M.user_positions?.email})]})]}),ae&&M.user_id!==i.id&&_.jsxs("div",{style:{display:"flex",gap:"6px",flexShrink:0},children:[_.jsx("button",{onClick:I=>{I.stopPropagation(),Z(M.user_id)},title:w.has(M.user_id)?"Unmute User":"Mute User",style:{background:w.has(M.user_id)?"rgba(59, 130, 246, 0.3)":"rgba(156, 163, 175, 0.1)",border:w.has(M.user_id)?"2px solid rgba(59, 130, 246, 0.6)":"1px solid rgba(156, 163, 175, 0.3)",borderRadius:"6px",color:w.has(M.user_id)?"#3B82F6":"#9CA3AF",cursor:"pointer",padding:"6px 8px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",transform:w.has(M.user_id)?"scale(1.1)":"scale(1)"},onMouseDown:I=>{I.currentTarget.style.transform="scale(0.95)"},onMouseUp:I=>{I.currentTarget.style.transform=w.has(M.user_id)?"scale(1.1)":"scale(1)"},children:w.has(M.user_id)?"":""}),_.jsx("button",{onClick:I=>{I.stopPropagation(),r(M.user_id)},title:"Transfer Ownership",style:{background:"rgba(245, 158, 11, 0.2)",border:"1px solid rgba(245, 158, 11, 0.4)",borderRadius:"6px",color:"#F59E0B",cursor:"pointer",padding:"6px 8px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),_.jsx("button",{onClick:I=>{I.stopPropagation(),W(M.user_id)},title:"Kick User",style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"6px",color:"#EF4444",cursor:"pointer",padding:"6px 8px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),_.jsx("button",{onClick:I=>{I.stopPropagation(),Q(M.user_id)},title:"Spinning Back Kick (Ban)",style:{background:"rgba(139, 69, 19, 0.3)",border:"1px solid rgba(139, 69, 19, 0.6)",borderRadius:"4px",color:"#8B4513",cursor:"pointer",padding:"4px 6px",fontSize:"10px",fontWeight:"bold"},children:""})]})]},M.user_id))}),ae&&_.jsx("div",{style:{marginTop:"16px",padding:"10px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"8px",color:"#F59E0B",fontSize:"12px",textAlign:"center"},children:" You are the room owner - You can mute, kick members or transfer ownership"})]})]}):_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginLeft:"auto"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255,255,255,0.1)",padding:"6px 12px",borderRadius:"20px",cursor:"pointer",border:"1px solid rgba(255,255,255,0.2)",transition:"all 0.2s"},onClick:()=>c(!0),children:[_.jsx("span",{style:{fontSize:"14px"},children:""}),_.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:l?.current_slots||0})]}),ae&&_.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.2)",border:"1px solid rgba(245, 158, 11, 0.4)",borderRadius:"20px",padding:"4px 10px",fontSize:"11px",color:"#F59E0B",display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("span",{children:""}),_.jsx("span",{children:"Owner"})]})]})}function n_({isMuted:l,isConnected:i,audioDevices:r,selectedDevice:s,participants:c,localVolume:d,onToggleMute:f,onDeviceChange:g}){return _.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",background:"rgba(0, 0, 0, 0.4)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",marginBottom:"12px"},children:[_.jsxs("div",{style:{position:"relative"},children:[_.jsxs("button",{onClick:f,style:{padding:"10px",borderRadius:"50%",border:"none",background:l?"linear-gradient(135deg, #EF4444, #DC2626)":"linear-gradient(135deg, #10B981, #059669)",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"44px",height:"44px",fontSize:"18px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",position:"relative"},title:l?"Unmute microphone":"Mute microphone",children:[l?"":"",!l&&d>10&&_.jsx("div",{style:{position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",border:`2px solid ${d>50?"#10B981":"#3B82F6"}`,borderRadius:"50%",opacity:d/100,animation:"pulse 2s infinite"}})]}),!l&&_.jsx("div",{style:{position:"absolute",bottom:"-8px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"2px"},children:[1,2,3].map(p=>_.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:d>p*25?"#10B981":"#6B7280",opacity:d>p*20?1:.3}},p))})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1},children:[_.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"white"},children:l?"Microphone muted":"Microphone active"}),_.jsx("div",{style:{fontSize:"12px",color:i?"#10B981":c.length>0?"#F59E0B":"#6B7280"},children:i?` Connected to ${c.length} participant${c.length!==1?"s":""}`:c.length>0?` ${c.length} participant${c.length!==1?"s":""} in room`:" Audio chat available"})]}),r.length>1&&_.jsx("select",{value:s,onChange:p=>g(p.target.value),style:{padding:"6px 10px",borderRadius:"6px",background:"rgba(0, 0, 0, 0.6)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",fontSize:"12px",minWidth:"120px"},children:r.map(p=>_.jsx("option",{value:p.deviceId,children:p.label||`Microphone ${r.indexOf(p)+1}`},p.deviceId))})]})}function i_({participants:l,localVolume:i,currentUser:r}){return l.length===0?null:_.jsxs("div",{style:{padding:"12px 16px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",marginBottom:"12px"},children:[_.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"white",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("span",{children:""}),_.jsxs("span",{children:["Active Speakers (",l.length,")"]})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 12px",background:"rgba(59, 130, 246, 0.2)",borderRadius:"6px",border:"1px solid rgba(59, 130, 246, 0.4)"},children:[_.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #3B82F6, #1D4ED8)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"white"},children:"You"}),_.jsx("div",{style:{flex:1,fontSize:"13px",color:"white"},children:r?.email?.split("@")[0]||"You"}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:i>20?"#10B981":"#6B7280"},children:[_.jsx("div",{style:{width:"4px",height:"12px",background:i>60?"#10B981":i>20?"#3B82F6":"#6B7280",borderRadius:"2px",transform:"scaleY(0.6)",opacity:i>0?1:.3}}),_.jsx("div",{style:{width:"4px",height:"16px",background:i>40?"#10B981":i>10?"#3B82F6":"#6B7280",borderRadius:"2px",transform:"scaleY(0.8)",opacity:i>0?1:.3}}),_.jsx("div",{style:{width:"4px",height:"20px",background:i>20?"#10B981":"#3B82F6",borderRadius:"2px",opacity:i>0?1:.3}})]}),_.jsxs("div",{style:{fontSize:"11px",color:i>20?"#10B981":"#6B7280",minWidth:"30px",textAlign:"right"},children:[Math.round(i),"%"]})]}),l.map(s=>_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[_.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #8B5CF6, #7C3AED)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:""}),_.jsx("div",{style:{flex:1,fontSize:"13px",color:"white"},children:s.email?.split("@")[0]||"User"}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:s.volume>20?"#10B981":"#6B7280"},children:[_.jsx("div",{style:{width:"4px",height:"12px",background:s.volume>60?"#10B981":s.volume>20?"#3B82F6":"#6B7280",borderRadius:"2px",transform:"scaleY(0.6)",opacity:s.volume>0?1:.3}}),_.jsx("div",{style:{width:"4px",height:"16px",background:s.volume>40?"#10B981":s.volume>10?"#3B82F6":"#6B7280",borderRadius:"2px",transform:"scaleY(0.8)",opacity:s.volume>0?1:.3}}),_.jsx("div",{style:{width:"4px",height:"20px",background:s.volume>20?"#10B981":"#3B82F6",borderRadius:"2px",opacity:s.volume>0?1:.3}})]}),_.jsxs("div",{style:{fontSize:"11px",color:s.volume>20?"#10B981":"#6B7280",minWidth:"30px",textAlign:"right"},children:[Math.round(s.volume),"%"]})]},s.user_id))]})]})}const st=[];for(let l=0;l<256;++l)st.push((l+256).toString(16).slice(1));function a_(l,i=0){return(st[l[i+0]]+st[l[i+1]]+st[l[i+2]]+st[l[i+3]]+"-"+st[l[i+4]]+st[l[i+5]]+"-"+st[l[i+6]]+st[l[i+7]]+"-"+st[l[i+8]]+st[l[i+9]]+"-"+st[l[i+10]]+st[l[i+11]]+st[l[i+12]]+st[l[i+13]]+st[l[i+14]]+st[l[i+15]]).toLowerCase()}let zu;const r_=new Uint8Array(16);function s_(){if(!zu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");zu=crypto.getRandomValues.bind(crypto)}return zu(r_)}const l_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qg={randomUUID:l_};function o_(l,i,r){l=l||{};const s=l.random??l.rng?.()??s_();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,a_(s)}function u_(l,i,r){return Qg.randomUUID&&!l?Qg.randomUUID():o_(l)}function c_(l,i){const[r,s]=q.useState(!0),[c,d]=q.useState(!1),[f,g]=q.useState([]),[p,m]=q.useState(null),[b,w]=q.useState([]),[T,E]=q.useState(0),A=q.useRef(null),R=q.useRef({}),L=q.useRef({}),Y=q.useRef(null),Z=q.useRef(null),Q=q.useRef(null),W={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"},{urls:"turn:turn.bistri.com:80",credential:"homeo",username:"homeo"}],iceTransportPolicy:"all",rtcpMuxPolicy:"require"},ae=q.useCallback(C=>{console.log(` Cleaning up peer connection for ${C}`);const K=R.current[C];K&&(K.close(),delete R.current[C]),delete L.current[C];const F=document.querySelector(`audio[data-user-id="${C}"]`);F&&F.remove(),L.current.volumeIntervals?.[C]&&(clearInterval(L.current.volumeIntervals[C]),delete L.current.volumeIntervals[C]),w(v=>v.filter(j=>j.user_id!==C))},[]),re=q.useCallback(async()=>{try{console.log(" Getting audio devices...");const K=(await navigator.mediaDevices.enumerateDevices()).filter(F=>F.kind==="audioinput");console.log(" Available audio devices:",K),g(K),K.length>0&&!p&&m(K[0].deviceId)}catch(C){console.error(" Error getting audio devices:",C)}},[p]),M=q.useCallback(async()=>{try{if(!i||!l)return console.log(" initializeAudio: No room or user"),null;console.log(" Initializing audio stream...");const C={audio:{deviceId:p?{exact:p}:void 0,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1};console.log(" Audio constraints:",C);const K=await navigator.mediaDevices.getUserMedia(C);return console.log(" Audio stream obtained:",K),console.log(" Audio tracks:",K.getAudioTracks()),A.current=K,I(K),K.getAudioTracks().forEach(F=>{F.enabled=!r,console.log(` Track ${F.id} enabled: ${F.enabled}`)}),console.log(" Audio stream initialized successfully"),K}catch(C){return console.error(" Error initializing audio:",C),alert("Could not access microphone. Please check permissions."),null}},[i,l,p,r]),I=C=>{try{console.log(" Setting up volume monitoring..."),Y.current=new(window.AudioContext||window.webkitAudioContext),Z.current=Y.current.createAnalyser(),Y.current.createMediaStreamSource(C).connect(Z.current),Z.current.fftSize=256,Q.current&&clearInterval(Q.current),Q.current=setInterval(()=>{if(!Z.current)return;const F=new Uint8Array(Z.current.frequencyBinCount);Z.current.getByteFrequencyData(F);let v=0;for(let H=0;H<F.length;H++)v+=F[H];const j=v/F.length,N=Math.min(100,j/128*100);E(N)},100),console.log(" Volume monitoring setup complete")}catch(K){console.error(" Error setting up volume monitoring:",K)}},ue=q.useCallback((C,K)=>{try{console.log(` Setting up audio element for user ${C}`);const F=document.querySelector(`audio[data-user-id="${C}"]`);F&&(F.remove(),console.log(` Removed existing audio element for ${C}`));const v=document.createElement("audio");return v.setAttribute("data-user-id",C),v.setAttribute("data-audio-id",u_()),v.srcObject=K,v.autoplay=!0,v.playsInline=!0,v.muted=!1,v.volume=1,v.addEventListener("loadedmetadata",()=>{console.log(` Audio metadata loaded for ${C}`)}),v.addEventListener("canplay",()=>{console.log(` Audio can play for ${C}`),v.play().catch(j=>{console.error(` Audio play failed for ${C}:`,j)})}),v.addEventListener("play",()=>{console.log(` Audio started playing for ${C}`)}),v.addEventListener("error",j=>{console.error(` Audio element error for ${C}:`,j)}),document.body.appendChild(v),setTimeout(()=>{v.play().catch(j=>{console.warn(` Initial play failed for ${C}, will retry:`,j)})},1e3),console.log(` Audio element created for user ${C}`),v}catch(F){return console.error(` Error setting up audio element for ${C}:`,F),null}},[]),ve=q.useCallback(()=>{Y.current&&Y.current.state==="suspended"&&Y.current.resume(),document.querySelectorAll("audio[data-user-id]").forEach(C=>{C.paused&&C.play().catch(K=>console.warn("Autoplay prevented:",K))})},[]);q.useEffect(()=>(document.addEventListener("click",ve),document.addEventListener("touchstart",ve),()=>{document.removeEventListener("click",ve),document.removeEventListener("touchstart",ve)}),[ve]);const Te=q.useCallback(C=>{console.log(` Creating peer connection for user: ${C}`);const K=new RTCPeerConnection(W);return A.current?(console.log(` Adding local stream to peer connection for ${C}`),A.current.getTracks().forEach(F=>{K.addTrack(F,A.current),console.log(` Added track ${F.kind} to peer connection`)})):console.log(" No local stream available for peer connection"),K.ontrack=F=>{console.log(` Received remote track from user ${C}:`,F);const v=F.streams[0];if(v){console.log(" Remote stream received:",v),console.log(" Remote audio tracks:",v.getAudioTracks());const j=v.getAudioTracks();if(j.length===0){console.error(` No audio tracks in remote stream for ${C}`);return}j.forEach(N=>{console.log(` Remote track ${N.id}:`,{enabled:N.enabled,muted:N.muted,readyState:N.readyState,kind:N.kind}),N.enabled=!0,console.log(` Forced remote track ${N.id} to enabled: true`)}),L.current[C]=v,w(N=>N.map(H=>H.user_id===C?{...H,audioStream:v,volume:0}:H)),ue(C,v),Ee(C,v)}else console.error(" No remote stream in track event")},K.onicecandidate=F=>{F.candidate?(console.log(` ICE candidate for ${C}:`,F.candidate),ne(C,"ice-candidate",F.candidate)):console.log(` ICE gathering complete for ${C}`)},K.onconnectionstatechange=()=>{switch(console.log(` Peer connection state for ${C}:`,K.connectionState),K.connectionState){case"connected":d(!0),console.log(` Connected to user ${C}`);break;case"disconnected":console.warn(` Disconnected from user ${C}`);break;case"failed":console.error(` Connection failed for user ${C}, attempting to restart...`),ae(C),setTimeout(()=>{i&&l&&(console.log(` Attempting to reconnect to ${C}`),ye([{user_id:C}]))},5e3);break;case"closed":console.log(` Connection closed for user ${C}`);break}},K.oniceconnectionstatechange=()=>{console.log(` ICE connection state for ${C}:`,K.iceConnectionState)},R.current[C]=K,console.log(` Peer connection created for user ${C}`),K},[]),Ee=(C,K)=>{try{console.log(` Setting up remote volume monitoring for ${C}`);const F=new(window.AudioContext||window.webkitAudioContext),v=F.createAnalyser();F.createMediaStreamSource(K).connect(v),v.fftSize=256;const H=setInterval(()=>{const P=new Uint8Array(v.frequencyBinCount);v.getByteFrequencyData(P);let te=0;for(let Me=0;Me<P.length;Me++)te+=P[Me];const fe=te/P.length,Ue=Math.min(100,fe/128*100);w(Me=>Me.map(It=>It.user_id===C?{...It,volume:Ue}:It))},100);L.current.volumeIntervals||(L.current.volumeIntervals={}),L.current.volumeIntervals[C]=H,console.log(` Remote volume monitoring setup for ${C}`)}catch(F){console.error(` Error setting up remote volume monitoring for ${C}:`,F)}},ne=q.useCallback(async(C,K,F)=>{if(!i||!l){console.log(" Cannot send signaling: No room or user");return}try{console.log(` Sending ${K} to user ${C}:`,F);const{error:v}=await J.from("webrtc_signaling").insert({room_id:i.id,from_user_id:l.id,to_user_id:C,signal_type:K,signal_data:F});v?console.error(" Error sending signaling message:",v):console.log(` Signaling message sent to ${C}`)}catch(v){console.error(" Error sending signaling message:",v)}},[i,l]),ee=q.useCallback(async C=>{if(C.to_user_id!==l.id){console.log(` Ignoring signaling message for other user: ${C.to_user_id}`);return}const{from_user_id:K,signal_type:F,signal_data:v}=C;console.log(` Handling ${F} from user ${K}:`,v);let j=R.current[K];try{switch(F){case"offer":console.log(` Processing offer from ${K}`),j||(j=Te(K)),await j.setRemoteDescription(new RTCSessionDescription(v)),console.log(` Remote description set for ${K}`);const N=await j.createAnswer();console.log(` Created answer for ${K}:`,N),await j.setLocalDescription(N),console.log(` Local description set for ${K}`),await ne(K,"answer",N),console.log(` Answer sent to ${K}`);break;case"answer":console.log(` Processing answer from ${K}`),j?(await j.setRemoteDescription(new RTCSessionDescription(v)),console.log(` Remote description set from answer for ${K}`)):console.error(` No peer connection for answer from ${K}`);break;case"ice-candidate":console.log(` Processing ICE candidate from ${K}`),j?(await j.addIceCandidate(new RTCIceCandidate(v)),console.log(` ICE candidate added for ${K}`)):console.error(` No peer connection for ICE candidate from ${K}`);break}}catch(N){console.error(` Error handling signaling message from ${K}:`,N)}},[l,Te,ne]),ye=q.useCallback(async C=>{console.log(" Connecting to participants:",C),A.current||(console.log(" No local stream, initializing audio..."),await M());for(const K of C){if(K.user_id===l.id){console.log(" Skipping self-connection");continue}if(R.current[K.user_id]){console.log(` Already connected to ${K.user_id}`);continue}console.log(` Creating offer for ${K.user_id}`);const F=Te(K.user_id),v=await F.createOffer();console.log(` Created offer for ${K.user_id}:`,v),await F.setLocalDescription(v),console.log(` Local description set for offer to ${K.user_id}`),await ne(K.user_id,"offer",v),console.log(` Offer sent to ${K.user_id}`)}},[l,M,Te,ne]),z=q.useCallback(async()=>{if(console.log(` Toggling mute: currently ${r}`),!A.current&&(console.log(" No local stream, initializing..."),!await M()))return;const C=!r;s(C),A.current.getAudioTracks().forEach(K=>{K.enabled=!C,console.log(` Track ${K.id} enabled: ${K.enabled}`)}),console.log(C?" Microphone muted":" Microphone unmuted")},[r,M]),X=q.useCallback(()=>{console.log(" Cleaning up all audio resources"),Object.keys(R.current).forEach(C=>{ae(C)}),A.current&&(A.current.getTracks().forEach(C=>{C.stop(),console.log(` Stopped local track: ${C.id}`)}),A.current=null),Q.current&&(clearInterval(Q.current),Q.current=null),Y.current&&(Y.current.close().catch(console.error),Y.current=null),document.querySelectorAll("audio[data-user-id]").forEach(C=>{C.remove(),console.log(` Removed audio element for user: ${C.getAttribute("data-user-id")}`)}),w([]),E(0),d(!1),console.log(" All audio resources cleaned up")},[ae]);return q.useEffect(()=>(console.log(" Audio chat hook initialized for room:",i?.id),re(),()=>{console.log(" Audio chat hook cleanup"),X()}),[re,X]),q.useEffect(()=>{i||(console.log(" Room cleared, cleaning up audio"),X(),s(!0))},[i,X]),{isMuted:r,isConnected:c,audioDevices:f,selectedDevice:p,participants:b,localVolume:T,toggleMute:z,setSelectedDevice:m,initializeAudio:M,cleanupAudio:X,connectToParticipants:ye,handleSignalingMessage:ee,forceMuteUser:q.useCallback(C=>{console.log(` Force mute: ${C}`),s(C),A.current&&A.current.getAudioTracks().forEach(K=>{K.enabled=!C})},[]),localStream:A.current}}class Xg extends gr.Component{constructor(i){super(i),this.state={hasError:!1,error:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,r){console.error("Audio Error:",i,r)}render(){return this.state.hasError?_.jsx("div",{style:{padding:"8px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"6px",color:"#EF4444",fontSize:"12px",textAlign:"center"},children:" Audio temporarily unavailable"}):this.props.children}}class d_{constructor(){this.mutedUsers=new Map,this.listeners=new Map}muteUser(i,r){this.mutedUsers.has(i)||this.mutedUsers.set(i,new Set),this.mutedUsers.get(i).add(r),this.notifyListeners(i,r,!0),console.log(` MuteManager: User ${r} muted in room ${i}`)}unmuteUser(i,r){this.mutedUsers.has(i)&&this.mutedUsers.get(i).delete(r),this.notifyListeners(i,r,!1),console.log(` MuteManager: User ${r} unmuted in room ${i}`)}isUserMuted(i,r){return this.mutedUsers.has(i)&&this.mutedUsers.get(i).has(r)}addListener(i,r){return this.listeners.has(i)||this.listeners.set(i,new Set),this.listeners.get(i).add(r),()=>{this.removeListener(i,r)}}removeListener(i,r){this.listeners.has(i)&&this.listeners.get(i).delete(r)}notifyListeners(i,r,s){this.listeners.has(i)&&this.listeners.get(i).forEach(c=>{try{c(r,s)}catch(d){console.error("Error in mute listener:",d)}})}clearRoom(i){this.mutedUsers.delete(i),this.listeners.delete(i)}}const ur=new d_;function f_({participants:l,localVolume:i,isConnected:r}){const s=Array.from(document.querySelectorAll("audio[data-user-id]"));return _.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",background:"rgba(0,0,0,0.8)",color:"white",padding:"10px",fontSize:"12px",zIndex:1e4,maxWidth:"300px",maxHeight:"400px",overflow:"auto"},children:[_.jsx("h4",{children:"Audio Debugger"}),_.jsxs("div",{children:["Connected: ",r?"":""]}),_.jsxs("div",{children:["Local Volume: ",Math.round(i),"%"]}),_.jsxs("div",{children:["Participants: ",l.length]}),_.jsxs("div",{children:["Audio Elements: ",s.length]}),s.map(c=>{const d=c.getAttribute("data-user-id"),f=l.find(g=>g.user_id===d);return _.jsxs("div",{style:{marginTop:"5px",border:"1px solid #444",padding:"5px"},children:[_.jsxs("div",{children:["User: ",d]}),_.jsxs("div",{children:["Volume: ",f?.volume||0,"%"]}),_.jsxs("div",{children:["Paused: ",c.paused?"":""]}),_.jsxs("div",{children:["Muted: ",c.muted?"":""]}),_.jsxs("div",{children:["ReadyState: ",c.readyState]}),_.jsx("button",{onClick:()=>c.play().catch(console.error),children:"Force Play"})]},c.getAttribute("data-audio-id"))})]})}function h_({user:l,room:i,onSendMessage:r=null}){const[s,c]=q.useState(""),[d,f]=q.useState([]),g=q.useRef(null),[p,m]=q.useState(i),{isMuted:b,isConnected:w,audioDevices:T,selectedDevice:E,participants:A,localVolume:R,toggleMute:L,setSelectedDevice:Y,cleanupAudio:Z,connectToParticipants:Q,handleSignalingMessage:W,forceMuteUser:ae}=c_(l,i),[re,M]=q.useState(!1);q.useEffect(()=>{if(!i||!l){M(!1);return}(async()=>{try{const{data:z,error:X}=await J.rpc("is_user_muted_in_room",{p_room_id:i.id,p_user_id:l.id});!X&&z&&(M(!0),ae(!0),ur.muteUser(i.id,l.id))}catch(z){console.error("Error checking initial mute status:",z)}})();const ee=ur.addListener(i.id,(z,X)=>{z===l.id&&(console.log(` IMMEDIATE: Mute status changed to ${X}`),M(X),ae(X))}),ye=J.channel("user_mute_status_backup").on("postgres_changes",{event:"*",schema:"public",table:"room_audio_mutes",filter:`room_id=eq.${i.id}`},z=>{if(z.new&&z.new.user_id===l.id||z.old&&z.old.user_id===l.id){const X=z.eventType==="INSERT";console.log(` Database sync: User ${X?"muted":"unmuted"}`),X?ur.muteUser(i.id,l.id):ur.unmuteUser(i.id,l.id)}}).subscribe();return()=>{ee(),J.removeChannel(ye)}},[i,l,ae]),q.useEffect(()=>()=>{i&&ur.clearRoom(i.id)},[i]),q.useEffect(()=>{const ne=ee=>{ee.detail&&ee.detail.userId===l.id&&ee.detail.roomId===i?.id&&(console.log(" GLOBAL: Immediate mute update received"),M(ee.detail.muted),ae(ee.detail.muted))};return window.addEventListener("userMuteStatusChanged",ne),()=>{window.removeEventListener("userMuteStatusChanged",ne)}},[l,i,ae]),q.useEffect(()=>{if(!i||!l)return;console.log(" Setting up WebRTC signaling subscription");const ne=J.channel("webrtc_signaling").on("postgres_changes",{event:"INSERT",schema:"public",table:"webrtc_signaling",filter:`room_id=eq.${i.id}`},ee=>{console.log(" WebRTC signaling message received:",ee.new),W(ee.new)}).subscribe(ee=>{console.log(" WebRTC signaling subscription status:",ee)});return()=>{J.removeChannel(ne)}},[i,l,W]),q.useEffect(()=>{if(!i||!l)return;(async()=>{try{const{data:ee,error:ye}=await J.from("user_room_memberships").select(`
            user_id,
            user_positions!user_room_memberships_user_id_fkey (
              email
            )
          `).eq("room_id",i.id);if(ye)throw ye;const z=ee.filter(X=>X.user_id!==l.id).map(X=>({user_id:X.user_id,email:X.user_positions?.email,volume:0}));console.log(" Connecting to room participants:",z),await Q(z)}catch(ee){console.error("Error connecting to room members:",ee)}})()},[i,l,Q]),q.useEffect(()=>{if(!i||!l)return;let ne=0;const ee=3,ye=()=>(console.log(" Setting up enhanced mute subscription"),J.channel("user_mute_status_enhanced").on("postgres_changes",{event:"*",schema:"public",table:"room_audio_mutes",filter:`room_id=eq.${i.id}`},C=>{if(console.log(" Enhanced mute event:",C),ne=0,C.new?.user_id===l.id||C.old?.user_id===l.id){const F=C.eventType==="INSERT"&&C.new?.user_id===l.id,v=C.eventType==="DELETE"&&C.old?.user_id===l.id;console.log(` Immediate action: ${F?"MUTED":v?"UNMUTED":"OTHER"}`),F?(M(!0),ae(!0)):v&&M(!1)}}).subscribe(C=>{console.log(" Enhanced mute subscription status:",C),C==="SUBSCRIBED"?(ne=0,console.log(" Mute subscription active")):C==="CHANNEL_ERROR"&&ne<ee&&(ne++,console.log(` Retrying mute subscription (${ne}/${ee})`),setTimeout(ye,1e3*ne))})),z=ye();return()=>{z&&J.removeChannel(z)}},[i,l,ae]),q.useEffect(()=>{m(i)},[i]),q.useEffect(()=>{p||(console.log(" Room is null, clearing room messages"),f([]),Z())},[p,Z]);const I=async()=>{if(i)try{console.log(" ChatPanel: Refreshing room data...");const{data:ne,error:ee}=await J.from("chat_rooms").select("*").eq("id",i.id).single();if(ee)throw ee;console.log(" ChatPanel: Room data refreshed:",ne),m(ne)}catch(ne){console.error(" ChatPanel: Error refreshing room data:",ne)}};q.useEffect(()=>{m(i)},[i]),q.useEffect(()=>{if(!i)return;console.log(" ChatPanel: Setting up membership changes subscription");const ne=J.channel("chatpanel_membership_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_room_memberships",filter:`room_id=eq.${i.id}`},ee=>{console.log(" ChatPanel: Membership changed for this room:",ee),I()}).subscribe(ee=>{console.log(" ChatPanel Membership Subscription Status:",ee)});return()=>{J.removeChannel(ne)}},[i]),q.useEffect(()=>{if(!i)return;console.log(" ChatPanel: Setting up room updates subscription");const ne=J.channel("chatpanel_room_updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_rooms",filter:`id=eq.${i.id}`},ee=>{console.log(" ChatPanel: Room updated:",ee.new),m(ye=>({...ye,...ee.new}))}).subscribe(ee=>{console.log(" ChatPanel Room Update Status:",ee)});return()=>{J.removeChannel(ne)}},[i]),q.useEffect(()=>{if(!i){console.log(" Room is null, clearing room messages"),f([]);return}(async()=>{try{console.log(" Fetching room messages for:",i.name);const{data:ye,error:z}=await J.from("user_room_memberships").select("joined_at").eq("user_id",l.id).eq("room_id",i.id).single();if(z){console.error(" Error fetching membership:",z);return}const X=ye.joined_at;console.log(" User joined room at:",X);const{data:C,error:K}=await J.from("room_messages").select("*").eq("room_id",i.id).gt("created_at",X).order("created_at",{ascending:!0});if(K)throw K;f(C||[]),console.log(" Room messages fetched (after join):",C?.length||0)}catch(ye){console.error("fetchRoomMessages error",ye)}})();const ee=J.channel("room_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"room_messages",filter:`room_id=eq.${i.id}`},ye=>{console.log(" New room message:",ye.new),f(z=>[...z,ye.new])}).subscribe();return()=>{J.removeChannel(ee)}},[i,l]),q.useEffect(()=>{g.current?.scrollIntoView({behavior:"smooth"})},[d]);const ue=async ne=>{ne.preventDefault(),!(!s.trim()||!i)&&(typeof r=="function"&&await r(s.trim()),c(""))},ve=ne=>new Date(ne).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Te=ne=>ne.split("@")[0],Ee=async ne=>{if(!(!i||!window.confirm("Are you sure you want to transfer room ownership? You will no longer be the owner.")))try{const{error:ee}=await J.from("chat_rooms").update({owner_id:ne}).eq("id",i.id);if(ee)throw ee;alert("Ownership transferred successfully!"),console.log(" Ownership transferred to:",ne),setTimeout(()=>{window.location.reload()},1e3)}catch(ee){console.error(" Error transferring ownership:",ee),alert("Error transferring ownership: "+ee.message)}};return i?_.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",background:"linear-gradient(to bottom, #0f172a 0%, #581c87 100%)",color:"white",fontFamily:"sans-serif"},children:[_.jsx(f_,{participants:A,localVolume:R,isConnected:w}),_.jsx(Kg,{room:i,user:l,onTransferOwnership:Ee}),_.jsxs("div",{style:{flexShrink:0,height:"100px",padding:"0 16px",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"linear-gradient(to right, rgba(76, 29, 149, 0.4), rgba(0, 0, 0, 0.6))",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsx("div",{style:{fontSize:"24px"},children:""}),_.jsxs("div",{children:[_.jsx("div",{style:{fontWeight:"600",fontSize:"18px"},children:i.name}),_.jsxs("div",{style:{fontSize:"12px",opacity:.6},children:["Room Chat  ",p?.current_slots||0," members  Created by ",Te(p?.creator_email||"Unknown")]})]})]}),_.jsx(Kg,{room:i,user:l,onTransferOwnership:Ee})]}),_.jsx(Xg,{children:p&&_.jsx(n_,{isMuted:b,isConnected:w,isForcedMuted:re,audioDevices:T,selectedDevice:E,participants:A,localVolume:R,onToggleMute:re?()=>{}:L,onDeviceChange:Y})}),_.jsx(Xg,{children:p&&A.length>0&&_.jsx(i_,{participants:A,localVolume:R,currentUser:l})}),_.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px",background:"linear-gradient(to bottom, rgba(15, 23, 42, 0.5), rgba(88, 28, 135, 0.3))"},children:[d.length===0&&_.jsxs("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.6)",marginTop:"32px"},children:[_.jsxs("div",{style:{fontSize:"18px",marginBottom:"8px"},children:[" Welcome to ",i.name,"!"]}),_.jsx("div",{style:{fontSize:"14px"},children:"Start the conversation..."})]}),_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:d.map(ne=>{if(ne.type!=="user")return _.jsx("div",{style:{textAlign:"center"},children:_.jsx("div",{style:{display:"inline-block",background:"rgba(55, 65, 81, 0.5)",border:"1px solid rgba(75, 85, 99, 0.3)",borderRadius:"9999px",padding:"8px 16px",maxWidth:"320px"},children:_.jsx("span",{style:{color:"rgba(209, 213, 219, 1)",fontSize:"14px",fontStyle:"italic"},children:ne.content})})},ne.id);const ee=ne.sender_email===l?.email,ye=Te(ne.sender_email);return _.jsx("div",{style:{display:"flex",justifyContent:ee?"flex-end":"flex-start"},children:_.jsxs("div",{style:{maxWidth:"80%",marginLeft:ee?"auto":"0"},children:[!ee&&_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px",paddingLeft:"12px"},children:[_.jsx("div",{style:{width:"8px",height:"8px",background:"#10B981",borderRadius:"50%",animation:"pulse 2s infinite"}}),_.jsx("span",{style:{fontSize:"12px",color:"#10B981",fontWeight:"500"},children:ye})]}),_.jsxs("div",{style:{position:"relative",padding:"12px 16px",borderRadius:"16px",background:ee?"linear-gradient(135deg, #3B82F6, #1D4ED8)":"#374151",borderTopRightRadius:ee?"4px":"16px",borderTopLeftRadius:ee?"16px":"4px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[_.jsx("div",{style:{color:"white",fontSize:"14px",lineHeight:"1.5",wordBreak:"break-word"},children:ne.content}),_.jsx("div",{style:{fontSize:"11px",marginTop:"8px",color:ee?"rgba(219, 234, 254, 1)":"rgba(156, 163, 175, 1)",textAlign:"right"},children:ve(ne.created_at)})]}),ee&&_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px",paddingRight:"12px",justifyContent:"flex-end"},children:[_.jsx("span",{style:{fontSize:"12px",color:"#93C5FD",fontWeight:"500"},children:"You"}),_.jsx("div",{style:{width:"8px",height:"8px",background:"#60A5FA",borderRadius:"50%"}})]})]})},ne.id)})}),_.jsx("div",{ref:g})]}),_.jsx("div",{style:{flexShrink:0,minHeight:"80px",borderTop:"1px solid rgba(255,255,255,0.1)",background:"linear-gradient(to right, rgba(0, 0, 0, 0.6), rgba(76, 29, 149, 0.4))"},children:_.jsxs("form",{onSubmit:ue,style:{height:"100%",padding:"16px",display:"flex",alignItems:"center",gap:"12px",width:"100%"},children:[_.jsx("input",{value:s,onChange:ne=>c(ne.target.value),placeholder:i?`Message in ${i.name}...`:"Join a room to chat...",disabled:!i,style:{flex:1,padding:"12px 16px",borderRadius:"12px",background:"rgba(0, 0, 0, 0.4)",color:"white",border:"1px solid rgba(255,255,255,0.1)",outline:"none",opacity:i?1:.6}}),_.jsx("button",{type:"submit",disabled:!s.trim()||!i,style:{padding:"12px 24px",background:!s.trim()||!i?"linear-gradient(135deg, #4B5563, #374151)":"linear-gradient(135deg, #3B82F6, #7C3AED)",color:"white",fontWeight:"600",borderRadius:"12px",border:"none",cursor:!s.trim()||!i?"not-allowed":"pointer",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",transition:"all 0.2s",opacity:!s.trim()||!i?.5:1},children:"Send"})]})}),_.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
          }
        `}),_.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
          }
        `})]}):_.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",background:"linear-gradient(to bottom, #0f172a 0%, #581c87 100%)",color:"white",alignItems:"center",justifyContent:"center",fontFamily:"sans-serif"},children:[_.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),_.jsx("div",{style:{fontSize:"18px",marginBottom:"8px"},children:"Welcome to Star Chat"}),_.jsx("div",{style:{fontSize:"14px",color:"rgba(255,255,255,0.6)"},children:"Join a room to start chatting"})]})}function g_({user:l,friends:i,privateMessages:r,onSendPrivateMessage:s,onMarkMessagesAsRead:c}){const[d,f]=q.useState(!1),[g,p]=q.useState(null),[m,b]=q.useState({}),[w,T]=q.useState(new Set),[E,A]=q.useState(!1),R=q.useRef({}),L=q.useRef({}),Y=q.useRef(null),Z=q.useRef({}),Q=gr.useMemo(()=>{const v=new Set;return i.filter(j=>v.has(j.friend_id)?!1:(v.add(j.friend_id),!0))},[i]),W=q.useCallback(v=>(r[v]||[]).filter(N=>N.receiver_id===l.id&&!N.is_read),[l.id,r]),ae=q.useCallback(async v=>{const j=W(v);if(j.length>0&&!w.has(v)){console.log(` Marking ${j.length} messages as read for friend ${v}`),T(N=>new Set([...N,v]));try{await c(v),console.log(` Successfully marked messages as read for ${v}`)}catch(N){console.error(" Failed to mark messages as read:",N)}finally{setTimeout(()=>{T(N=>{const H=new Set(N);return H.delete(v),H})},1e3)}}},[W,c,w]),re=q.useCallback(v=>{E||A(!0),Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{A(!1)},1e3)},[E]),M=q.useCallback(v=>{if(!g||g!==v)return;const j=L.current[v],N=R.current[v];if(!j||!N||E)return;const P=j.scrollHeight-j.scrollTop-j.clientHeight<=100,te=r[v]?.length||0,fe=Z.current[v]||0,Ue=te>fe;(P||Ue)&&setTimeout(()=>{N.scrollIntoView({behavior:"smooth",block:"nearest"})},100),Z.current[v]=te},[g,E,r]);q.useEffect(()=>{g&&d&&ae(g)},[g,d,ae]),q.useEffect(()=>{if(d&&g){const v=setTimeout(()=>{ae(g)},100);return()=>clearTimeout(v)}},[d,g,ae]),q.useEffect(()=>{g&&M(g)},[r,g,M]),q.useEffect(()=>{g&&(A(!1),Z.current[g]=r[g]?.length||0)},[g,r]),q.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current)},[]);const I=q.useCallback(v=>{v===g&&d&&ae(v)},[g,d,ae]),ue=q.useCallback(v=>{v===g&&d&&ae(v)},[g,d,ae]),ve=q.useCallback(v=>{const j=R.current[v];j&&(A(!1),j.scrollIntoView({behavior:"smooth"}))},[]),Te=v=>new Date(v).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Ee=v=>v.split("@")[0],ne=v=>{const j=m[v]||"";j.trim()&&(s(v,j.trim()),b(N=>({...N,[v]:""})),A(!1))},ee=(v,j)=>{b(N=>({...N,[v]:j}))},ye=(v,j)=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),ne(v))},z=v=>{p(v),d||f(!0),A(!1)},X=(v,j)=>{if(j.stopPropagation(),g===v){const N=Q.filter(H=>H.friend_id!==v);N.length>0?p(N[0].friend_id):(p(null),f(!1))}},C=v=>W(v).length,K=gr.useMemo(()=>Q.reduce((v,j)=>v+C(j.friend_id),0),[Q,W]),F=v=>{const j=L.current[v];return j?!(j.scrollHeight-j.scrollTop-j.clientHeight<=200):!1};return _.jsxs(_.Fragment,{children:[_.jsxs("button",{onClick:()=>f(!d),style:{position:"fixed",bottom:"20px",left:"20px",zIndex:1e3,background:"linear-gradient(135deg, #3B82F6, #7C3AED)",color:"white",border:"none",borderRadius:"50px",padding:"12px 20px",fontWeight:"bold",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[_.jsxs("span",{children:[" Friends (",Q.length,")"]}),K>0&&_.jsx("div",{style:{background:"#EF4444",color:"white",borderRadius:"50%",width:"20px",height:"20px",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"4px"},children:K})]}),d&&_.jsxs("div",{style:{position:"fixed",bottom:"80px",left:"20px",width:"400px",height:"500px",background:"linear-gradient(to bottom, #0f172a 0%, #581c87 100%)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",zIndex:1e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[_.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"Private Chats"}),_.jsx("button",{onClick:()=>f(!1),style:{background:"none",border:"none",color:"white",fontSize:"18px",cursor:"pointer"},children:""})]}),_.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[_.jsx("div",{style:{width:"150px",borderRight:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.2)",overflowY:"auto"},children:Q.map(v=>_.jsxs("div",{onClick:()=>z(v.friend_id),style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid rgba(255,255,255,0.05)",background:g===v.friend_id?"rgba(59, 130, 246, 0.3)":"transparent",display:"flex",alignItems:"center",gap:"8px",position:"relative"},children:[_.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:v.is_online?"#10B981":"#6B7280"}}),_.jsx("div",{style:{flex:1,fontSize:"12px"},children:Ee(v.friend_email)}),C(v.friend_id)>0&&_.jsx("div",{style:{background:"#EF4444",color:"white",borderRadius:"50%",width:"16px",height:"16px",fontSize:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:C(v.friend_id)}),w.has(v.friend_id)&&_.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#3B82F6",animation:"pulse 1s infinite"}})]},v.friend_id))}),_.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",position:"relative"},children:g?_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.2)",fontSize:"14px",fontWeight:"bold"},children:_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsxs("span",{children:[Ee(Q.find(v=>v.friend_id===g)?.friend_email||"Friend"),w.has(g)&&_.jsx("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#3B82F6"},children:"(Marking as read...)"})]}),_.jsx("button",{onClick:v=>X(g,v),style:{background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"14px"},children:""})]})}),_.jsxs("div",{ref:v=>L.current[g]=v,style:{flex:1,overflowY:"auto",padding:"16px",background:"linear-gradient(to bottom, rgba(15, 23, 42, 0.5), rgba(88, 28, 135, 0.3))",cursor:"pointer"},onClick:()=>ue(g),onScroll:()=>re(g),children:[(r[g]||[]).map(v=>{const j=v.sender_id===l.id;return _.jsx("div",{style:{display:"flex",justifyContent:j?"flex-end":"flex-start",marginBottom:"12px"},children:_.jsxs("div",{style:{maxWidth:"80%",padding:"8px 12px",borderRadius:"12px",background:j?"#3B82F6":"#374151",borderTopRightRadius:j?"4px":"12px",borderTopLeftRadius:j?"12px":"4px"},children:[_.jsx("div",{style:{fontSize:"13px",lineHeight:"1.4"},children:v.content}),_.jsxs("div",{style:{fontSize:"10px",marginTop:"4px",color:j?"rgba(219, 234, 254, 1)":"rgba(156, 163, 175, 1)",textAlign:"right",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"4px"},children:[Te(v.created_at),j&&_.jsx("span",{style:{fontSize:"8px",opacity:v.is_read?1:.5},children:v.is_read?"":""})]})]})},v.id)}),_.jsx("div",{ref:v=>R.current[g]=v})]}),F(g)&&_.jsx("button",{onClick:()=>ve(g),style:{position:"absolute",bottom:"70px",right:"20px",background:"rgba(59, 130, 246, 0.9)",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:100},title:"Scroll to bottom",children:""}),_.jsx("div",{style:{padding:"12px",borderTop:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.3)"},children:_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsx("input",{value:m[g]||"",onChange:v=>ee(g,v.target.value),onKeyPress:v=>ye(g,v),onFocus:()=>I(g),placeholder:"Type a private message...",style:{flex:1,padding:"8px 12px",borderRadius:"20px",background:"rgba(0,0,0,0.4)",color:"white",border:"1px solid rgba(255,255,255,0.2)",outline:"none",fontSize:"13px"}}),_.jsx("button",{onClick:()=>ne(g),disabled:!m[g]?.trim(),style:{padding:"8px 16px",background:m[g]?.trim()?"linear-gradient(135deg, #3B82F6, #7C3AED)":"#4B5563",color:"white",border:"none",borderRadius:"20px",cursor:m[g]?.trim()?"pointer":"not-allowed",fontSize:"13px"},children:"Send"})]})})]}):_.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.6)",fontSize:"14px"},children:"Select a friend to start chatting"})})]})]}),_.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
          }
        `})]})}function m_({user:l,onCreateRoom:i,onClose:r}){const[s,c]=q.useState(""),[d,f]=q.useState(""),[g,p]=q.useState(10),[m,b]=q.useState(!1),w=async T=>{if(T.preventDefault(),!(!s.trim()||m)){b(!0);try{console.log(" Creating room with data:",{name:s.trim(),description:d.trim(),maxSlots:g});const{error:E}=await J.from("user_room_memberships").delete().eq("user_id",l.id);E?console.error(" Error leaving current room:",E):console.log(" Left current room before creating new one");const{data:A,error:R}=await J.from("chat_rooms").insert({name:s.trim(),description:d.trim(),owner_id:l.id,max_slots:g,current_slots:1,is_public:!0}).select().single();if(R){console.error(" Room creation error:",R),alert("Error creating room: "+R.message);return}console.log(" Room created successfully:",A);const{error:L}=await J.from("user_room_memberships").insert({user_id:l.id,room_id:A.id});L?console.error(" Room join error:",L):console.log(" Room creator auto-joined room"),typeof i=="function"&&i(A),alert(`Room "${s}" created successfully! `),r()}catch(E){console.error(" Room creation exception:",E),alert("Error creating room: "+E.message)}finally{b(!1)}}};return _.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:_.jsxs("div",{style:{background:"linear-gradient(to bottom, #0f172a 0%, #581c87 100%)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"12px",padding:"24px",width:"400px",maxWidth:"90vw",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[_.jsx("h2",{style:{color:"white",marginBottom:"20px",textAlign:"center",fontSize:"20px"},children:"Create New Room"}),_.jsxs("form",{onSubmit:w,children:[_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsx("label",{style:{display:"block",color:"white",marginBottom:"8px",fontSize:"14px"},children:"Room Name *"}),_.jsx("input",{type:"text",value:s,onChange:T=>c(T.target.value),placeholder:"Enter room name",required:!0,disabled:m,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"rgba(0,0,0,0.4)",color:"white",border:"1px solid rgba(255,255,255,0.2)",outline:"none",opacity:m?.6:1}})]}),_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsx("label",{style:{display:"block",color:"white",marginBottom:"8px",fontSize:"14px"},children:"Description (Optional)"}),_.jsx("textarea",{value:d,onChange:T=>f(T.target.value),placeholder:"Room description",rows:"3",disabled:m,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"rgba(0,0,0,0.4)",color:"white",border:"1px solid rgba(255,255,255,0.2)",outline:"none",resize:"vertical",opacity:m?.6:1}})]}),_.jsxs("div",{style:{marginBottom:"24px"},children:[_.jsxs("label",{style:{display:"block",color:"white",marginBottom:"8px",fontSize:"14px"},children:["Max Slots: ",g]}),_.jsx("input",{type:"range",min:"2",max:"20",value:g,onChange:T=>p(parseInt(T.target.value)),disabled:m,style:{width:"100%",height:"6px",borderRadius:"3px",background:"rgba(255,255,255,0.2)",outline:"none",opacity:m?.6:1}}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"rgba(255,255,255,0.6)",fontSize:"12px",marginTop:"4px"},children:[_.jsx("span",{children:"2"}),_.jsx("span",{children:"20"})]})]}),_.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[_.jsx("button",{type:"button",onClick:r,disabled:m,style:{padding:"10px 20px",background:"rgba(255,255,255,0.1)",color:"white",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",cursor:m?"not-allowed":"pointer",opacity:m?.6:1},children:"Cancel"}),_.jsx("button",{type:"submit",disabled:!s.trim()||m,style:{padding:"10px 20px",background:!s.trim()||m?"rgba(59, 130, 246, 0.5)":"linear-gradient(135deg, #3B82F6, #7C3AED)",color:"white",border:"none",borderRadius:"8px",cursor:!s.trim()||m?"not-allowed":"pointer"},children:m?"Creating...":"Create Room"})]})]})]})})}function p_({user:l}){const[i,r]=q.useState([]),[s,c]=q.useState(!0),[d,f]=q.useState(null),[g,p]=q.useState(null),[m,b]=q.useState(!0),w=async()=>{try{console.log(" Fetching rooms with creator info...");const{data:A,error:R}=await J.from("chat_rooms").select(`
        *,
        user_positions!chat_rooms_owner_id_fkey (
          email
        )
      `).eq("is_public",!0).order("created_at",{ascending:!1});if(R)throw R;console.log(" Rooms fetched with creator info:",A),r(A||[])}catch(A){console.error(" fetchRooms error",A)}finally{c(!1)}},T=async()=>{if(l)try{console.log(" Fetching current user room...");const{data:A,error:R}=await J.from("user_room_memberships").select("room_id").eq("user_id",l.id);if(R){console.error(" Error fetching user rooms:",R);return}console.log(" User room memberships:",A),A&&A.length>0?(p(A[0].room_id),console.log(" Current user room set to:",A[0].room_id)):(p(null),console.log(" User is not in any room"))}catch(A){console.error(" fetchCurrentUserRoom error:",A)}finally{b(!1)}},E=async A=>{if(l){f(A);try{console.log(" Joining room:",A);const{error:R}=await J.from("user_room_memberships").delete().eq("user_id",l.id);R&&console.error(" Error leaving current room:",R);const{error:L}=await J.from("user_room_memberships").insert({user_id:l.id,room_id:A});if(L){console.error(" Error joining room:",L),alert("Error joining room: "+L.message);return}else console.log(" Successfully joined room"),p(A),console.log(" Current user room updated to:",A);const{data:Y,error:Z}=await J.from("user_room_memberships").select("id").eq("room_id",A);if(Z)console.error(" Error counting members:",Z);else{const Q=Y?.length||0;console.log(" Room has",Q,"members");const{error:W}=await J.from("chat_rooms").update({current_slots:Q}).eq("id",A);W?(console.error(" Error updating current_slots:",W),console.log(" Update error details:",W)):console.log(" current_slots updated to:",Q)}await w()}catch(R){console.error(" Join room exception:",R),alert("Error joining room: "+R.message)}finally{f(null)}}};return q.useEffect(()=>{if(!l)return;const A=J.channel("room_list_updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_rooms"},R=>{console.log(" RoomListPanel: Room updated in real-time:",R.new),typeof onRoomUpdate=="function"&&onRoomUpdate()}).subscribe(R=>{console.log(" RoomListPanel: Real-time subscription status:",R)});return()=>{J.removeChannel(A)}},[l]),q.useEffect(()=>{w(),T();const A=J.channel("room_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_rooms"},R=>{console.log(" New room created:",R.new),r(L=>[R.new,...L])}).on("postgres_changes",{event:"DELETE",schema:"public",table:"chat_rooms"},R=>{console.log(" Room deleted:",R.old),r(L=>L.filter(Y=>Y.id!==R.old.id))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_rooms"},R=>{console.log(" RoomListPanel: Room updated (slots changed):",R.new.current_slots),r(L=>L.map(Y=>Y.id===R.new.id?{...Y,...R.new}:Y))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"user_room_memberships",filter:`user_id=eq.${l?.id}`},async R=>{console.log(" User joined a room"),p(R.new.room_id),await w()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"user_room_memberships",filter:`user_id=eq.${l?.id}`},async R=>{console.log(" User left a room"),p(null),await w()}).subscribe(R=>{console.log(" Room subscription status:",R)});return()=>{J.removeChannel(A)}},[l]),_.jsxs("div",{style:{position:"fixed",top:"80px",right:"420px",width:"300px",maxHeight:"400px",background:"linear-gradient(to bottom, #0f172a 0%, #581c87 100%)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",zIndex:999,overflowY:"auto"},children:[_.jsxs("h3",{style:{color:"white",marginBottom:"16px",textAlign:"center",fontSize:"16px"},children:["Available Rooms (",i.length,")"]}),g&&_.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.4)",borderRadius:"8px",padding:"8px 12px",marginBottom:"12px",color:"#10B981",fontSize:"12px",textAlign:"center"},children:[" You are in: ",i.find(A=>A.id===g)?.name||"a room"]}),!g&&!m&&_.jsx("div",{style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",borderRadius:"8px",padding:"8px 12px",marginBottom:"12px",color:"#3B82F6",fontSize:"12px",textAlign:"center"},children:" You are not in any room"}),s?_.jsx("div",{style:{color:"white",textAlign:"center"},children:"Loading rooms..."}):i.length===0?_.jsx("div",{style:{color:"rgba(255,255,255,0.6)",textAlign:"center",fontSize:"14px",padding:"20px"},children:"No rooms available yet"}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.map(A=>{const R=g===A.id,L=A.current_slots>=A.max_slots,Y=d===A.id;return console.log(` Room ${A.name}:`,{roomId:A.id,currentUserRoom:g,isUserInThisRoom:R,currentSlots:A.current_slots,maxSlots:A.max_slots,isRoomFull:L}),_.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"12px",color:"white"},children:[_.jsx("div",{style:{fontWeight:"bold",fontSize:"14px",marginBottom:"4px"},children:A.name}),_.jsx("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.7)",marginBottom:"4px"},children:A.description||"No description"}),_.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.5)",marginBottom:"8px"},children:["Created by: ",A.user_positions?.email||"Unknown"]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"11px"},children:[_.jsxs("span",{style:{color:"rgba(255,255,255,0.5)"},children:["Slots: ",A.current_slots,"/",A.max_slots]}),_.jsx("button",{onClick:()=>E(A.id),disabled:Y||L||R,style:{padding:"4px 12px",background:R?"rgba(16, 185, 129, 0.5)":L?"rgba(107, 114, 128, 0.5)":Y?"rgba(59, 130, 246, 0.5)":"linear-gradient(135deg, #3B82F6, #7C3AED)",color:"white",border:"none",borderRadius:"6px",fontSize:"11px",cursor:Y||L||R?"not-allowed":"pointer"},children:R?"Joined ":Y?"Joining...":L?"Full":"Join"})]})]},A.id)})})]})}const y_=q.memo(()=>{const l=()=>{window.open("https://buymeacoffee.com/nessm","_blank","noopener,noreferrer")};return _.jsxs("button",{onClick:l,className:"group relative flex items-center gap-2 bg-gradient-to-br from-amber-400 via-orange-500 to-red-500 hover:from-amber-500 hover:via-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-2xl font-bold transition-all duration-300 shadow-2xl hover:shadow-amber-500/25 hover:scale-105 border-0 cursor-pointer overflow-hidden",children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),_.jsx("span",{className:"text-lg",children:""}),_.jsx("span",{className:"relative z-10 bg-gradient-to-b from-white to-amber-100 bg-clip-text text-transparent",children:"Buy me a coffee"}),_.jsx("div",{className:"absolute inset-0 rounded-2xl border-2 border-amber-300/50 animate-pulse group-hover:animate-none"})]})}),v_=q.memo(({user:l,onSignOut:i,onTwinkle:r})=>_.jsxs("header",{className:"absolute top-6 left-6 right-6 flex justify-between items-center z-30",children:[_.jsx("div",{className:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 backdrop-blur-lg border border-white/10 rounded-2xl px-6 py-3 shadow-2xl",children:_.jsx("div",{className:"text-white font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent",children:l.email})}),_.jsxs("div",{className:"flex gap-4 items-center",children:[_.jsx(y_,{}),_.jsxs("button",{onClick:r,className:"group relative flex items-center gap-2 bg-gradient-to-br from-yellow-400 via-amber-500 to-orange-500 hover:from-yellow-500 hover:via-amber-600 hover:to-orange-600 text-gray-900 px-6 py-3 rounded-2xl font-bold transition-all duration-300 shadow-2xl hover:shadow-yellow-400/30 hover:scale-105 border-0 cursor-pointer overflow-hidden",children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-yellow-200/40 to-transparent -skew-x-12 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),_.jsx("span",{className:"text-lg",children:""}),_.jsx("span",{className:"relative z-10",children:"Twinkle"})]}),_.jsxs("button",{onClick:i,className:"group relative flex items-center gap-2 bg-gradient-to-br from-rose-500 via-red-500 to-pink-600 hover:from-rose-600 hover:via-red-600 hover:to-pink-700 text-white px-6 py-3 rounded-2xl font-bold transition-all duration-300 shadow-2xl hover:shadow-rose-500/25 hover:scale-105 border-0 cursor-pointer overflow-hidden",children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),_.jsx("span",{className:"text-lg",children:""}),_.jsx("span",{className:"relative z-10",children:"Sign Out"})]})]})]})),b_=q.memo(({userData:l,allUsers:i=[],isCurrentUser:r,onFollow:s,recentFriendships:c=[],isFollowing:d=!1})=>{const[f,g]=q.useState({x:l.current_x??l.initial_x??Math.random(),y:l.current_y??l.initial_y??Math.random()}),[p,m]=q.useState(l.luminosity??.8),[b,w]=q.useState(!!l.is_twinkle),T=q.useRef([]);q.useEffect(()=>{if(l.current_x==null||l.current_y==null)return;const Y=500,Z=f.x,Q=f.y,W=l.current_x-Z,ae=l.current_y-Q,re=performance.now();let M;const I=ue=>{const ve=Math.min((ue-re)/Y,1),Te=1-Math.pow(1-ve,3),Ee=Z+W*Te,ne=Q+ae*Te;g({x:Ee,y:ne}),T.current=[{x:Ee,y:ne},...T.current].slice(0,25),ve<1&&(M=requestAnimationFrame(I))};return M=requestAnimationFrame(I),()=>cancelAnimationFrame(M)},[l.current_x,l.current_y]),q.useEffect(()=>{m(l.luminosity??.8),w(!!l.is_twinkle)},[l.luminosity,l.is_twinkle]);const E=q.useMemo(()=>l.is_online?r?"#ffe97a":"#ffffff":"#ff6b6b",[l.is_online,r]),A=q.useMemo(()=>r?18:12,[r]),R=q.useMemo(()=>c.find(Y=>Y.user1===l.user_id&&i.find(Z=>Z.user_id===Y.user2)||Y.user2===l.user_id&&i.find(Z=>Z.user_id===Y.user1)),[c,l.user_id,i]),L=q.useMemo(()=>R?i.find(Y=>Y.user_id===R.user1||Y.user_id===R.user2):null,[R,i]);return _.jsxs(_.Fragment,{children:[_.jsx("style",{children:`
        @keyframes twinklePulse {
          0%, 100% { transform: scale(1); opacity: 1; text-shadow: 0 0 8px ${E}, 0 0 16px ${E}; }
          50% { transform: scale(1.2); opacity: 0.7; text-shadow: 0 0 16px ${E}, 0 0 32px ${E}; }
        }
        @keyframes slowGlow {
          0%, 100% { text-shadow: 0 0 6px ${E}, 0 0 12px ${E}; }
          50% { text-shadow: 0 0 14px ${E}, 0 0 28px ${E}; }
        }
      `}),L&&_.jsx("svg",{style:{position:"absolute",width:"100%",height:"100%",left:0,top:0,pointerEvents:"none",zIndex:50},children:_.jsx("line",{x1:`${f.x*100}%`,y1:`${f.y*100}%`,x2:`${L.current_x*100}%`,y2:`${L.current_y*100}%`,stroke:"cyan",strokeWidth:"3",strokeOpacity:"0.8",filter:"drop-shadow(0 0 6px cyan)"})}),_.jsxs("div",{style:{position:"absolute",left:`${f.x*100}%`,top:`${f.y*100}%`,transform:"translate(-50%, -50%)",opacity:p,zIndex:100},children:[_.jsx("div",{style:{fontSize:`${A}px`,color:E,textShadow:`0 0 8px ${E}, 0 0 20px ${E}`,animation:b?"twinklePulse 0.4s ease-in-out infinite":"slowGlow 3s ease-in-out infinite",pointerEvents:"none"},children:""}),!r&&_.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-1 flex flex-col items-center gap-1",style:{pointerEvents:"auto"},children:!r&&!d&&_.jsx("button",{onClick:()=>s?.(l.user_id),className:"px-2 py-1 bg-blue-600 text-xs rounded hover:bg-blue-500",children:"Follow"})})]})]})});function __({user:l,users:i=[],setUsers:r,followingList:s=[],onSignOut:c,onTwinkle:d,messages:f=[],onSendMessage:g=null,handleFollow:p,recentFriendships:m=[],friends:b=[],privateMessages:w={},onSendPrivateMessage:T,onMarkMessagesAsRead:E,currentUserRoom:A=null,rooms:R=[],onJoinRoom:L,supabase:Y,fetchRooms:Z}){const[Q,W]=q.useState(!1),[ae,re]=q.useState(!1);return _.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 384px",height:"100vh",width:"100vw",overflow:"hidden"},className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[_.jsxs("div",{style:{position:"relative",overflow:"hidden",paddingTop:"34px"},className:"flex-1",children:[_.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-blue-500/10 via-transparent to-transparent"}),_.jsx(v_,{user:l,onSignOut:c,onTwinkle:d}),i.map(M=>_.jsx(b_,{userData:M,allUsers:i,isCurrentUser:(M.email||"").toLowerCase()===(l.email||"").toLowerCase(),onFollow:I=>p(I),recentFriendships:m,isFollowing:s.includes(M.user_id)},M.id||M.email)),_.jsx(g_,{user:l,friends:b,privateMessages:w,onSendPrivateMessage:T,onMarkMessagesAsRead:E}),_.jsxs("button",{style:{position:"fixed",bottom:"20px",right:"420px",zIndex:1e3,background:"linear-gradient(135deg, #8B5CF6, #7C3AED)",color:"white",border:"none",borderRadius:"50px",padding:"12px 20px",fontWeight:"bold",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},onClick:()=>W(!0),children:[_.jsx("span",{children:""}),_.jsx("span",{children:"Create Room"})]}),_.jsxs("button",{style:{position:"fixed",bottom:"80px",right:"420px",zIndex:1e3,background:"linear-gradient(135deg, #10B981, #059669)",color:"white",border:"none",borderRadius:"50px",padding:"12px 20px",fontWeight:"bold",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},onClick:()=>re(!ae),children:[_.jsx("span",{children:""}),_.jsx("span",{children:"Show Rooms"})]}),Q&&_.jsx(m_,{user:l,onClose:()=>W(!1),onCreateRoom:M=>{console.log(" Room created:",M),re(!0)}}),ae&&_.jsx(p_,{user:l,rooms:R,currentUserRoom:A,onJoinRoom:L,onRefresh:()=>{typeof Z=="function"&&Z()}},`roomlist-${A||"no-room"}`),A&&_.jsxs("div",{style:{position:"fixed",top:"80px",left:"20px",background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.4)",borderRadius:"8px",padding:"8px 12px",color:"#10B981",fontSize:"12px",zIndex:999},children:[" You are in: ",R.find(M=>M.id===A)?.name||"a room"]})]}),_.jsx("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},className:"bg-black/60 border-l border-white/10",children:_.jsx(h_,{user:l,room:A?R.find(M=>M.id===A):null,onSendMessage:async M=>{if(!(!l||!A||!M.trim())){console.log(" Sending room message to:",A);try{await Y.from("room_messages").insert({room_id:A,sender_id:l.id,sender_email:l.email,content:M.trim(),type:"user",created_at:new Date().toISOString()})}catch(I){console.error("Error sending room message:",I)}}}},`chatpanel-${A||"no-room"}`)})]})}const w_=({message:l="Loading..."})=>_.jsx("div",{className:"min-h-screen flex items-center justify-center text-white",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-white mb-4"}),_.jsx("div",{children:l})]})});function S_(){const[l,i]=q.useState(null),[r,s]=q.useState(!0),c=q.useRef(!1),d=q.useRef(!1),f=async(m,b="info")=>{try{await J.from("chat_messages").insert({sender_email:"system",sender_id:"00000000-0000-0000-0000-000000000000",content:m,type:b,created_at:new Date().toISOString()})}catch(w){console.error("Error sending system message:",w)}};return{user:l,setUser:i,loading:r,setLoading:s,isSigningOutRef:c,hasSentJoinMessageRef:d,markUserOnline:async(m,b)=>{try{const w=(m.email||"").toLowerCase(),{error:T}=await J.rpc("get_or_create_user_position",{p_user_id:m.id,p_email:w});if(T)throw T;b&&await b(),d.current||(await f(`${m.email} joined the chat`,"join"),d.current=!0)}catch(w){console.error("markUserOnline error",w)}},markUserOfflineViaService:async(m,b)=>{try{await Wb.rpc("mark_user_offline_by_email",{user_email:m}),b&&await b()}catch(w){console.error("markUserOfflineViaService error",w)}},sendSystemMessage:f}}const Km={TIMING:{USER_MOVEMENT_INTERVAL:3e3},CHANNELS:{USER_POSITIONS:"user_positions_changes"}};function x_(l){const[i,r]=q.useState([]),[s,c]=q.useState([]),d=q.useCallback(async()=>{try{const{data:g,error:p}=await J.from("user_positions").select("*");if(p)throw p;r(g||[])}catch(g){console.error("fetchAllUsers error",g)}},[]),f=q.useCallback(async()=>{if(l)try{const{data:g,error:p}=await J.from("user_follows").select("followee_id").eq("follower_id",l.id);if(p)throw p;c(g.map(m=>m.followee_id))}catch(g){console.error("fetchFollowingList error:",g)}},[l]);return q.useEffect(()=>{d(),l&&f()},[l,d,f]),q.useEffect(()=>{const g=J.channel(Km.CHANNELS.USER_POSITIONS).on("postgres_changes",{event:"*",schema:"public",table:"user_positions"},p=>{console.log(" Real-time user update received:",p);const m=p.new;m&&r(b=>{const w=(m.email||"").toLowerCase(),T=b.findIndex(E=>(E.email||"").toLowerCase()===w);if(T>=0){const E=[...b];return E[T]={...E[T],...m},E}else return[...b,m]})}).subscribe(p=>console.log("Realtime status:",p));return()=>{J.removeChannel(g)}},[]),q.useEffect(()=>{const g=()=>{document.visibilityState==="visible"&&(document.querySelector("[data-room-members-panel]")||(console.log(" Tab became visible, refreshing users..."),d()))};return document.addEventListener("visibilitychange",g),()=>{document.removeEventListener("visibilitychange",g)}},[d]),{users:i,setUsers:r,followingList:s,setFollowingList:c,fetchAllUsers:d,fetchFollowingList:f}}function E_(l){const[i,r]=q.useState([]),[s,c]=q.useState({});return q.useEffect(()=>{if(!l)return;const g=J.channel("chat_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},p=>{const m=p.new,b=new Date(m.created_at),w=new Date(Date.now()-300*1e3);b>w&&r(T=>[...T,m])}).subscribe();return()=>{J.removeChannel(g)}},[l]),q.useEffect(()=>{if(!l)return;const g=J.channel("private_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"private_messages"},async p=>{const m=p.new;if(m.receiver_id===l.id||m.sender_id===l.id){const b=m.sender_id===l.id?m.receiver_id:m.sender_id;c(w=>({...w,[b]:[...w[b]||[],m]}))}}).subscribe();return()=>{J.removeChannel(g)}},[l]),q.useEffect(()=>{if(!l)return;const g=setInterval(async()=>{try{const p=new Date(Date.now()-36e5).toISOString();await J.from("chat_messages").delete().lt("created_at",p)}catch(p){console.error("Error cleaning old messages:",p)}},300*1e3);return()=>clearInterval(g)},[l]),{messages:i,setMessages:r,privateMessages:s,setPrivateMessages:c,handleSendMessage:async g=>{if(!(!l||!g.trim()))try{await J.from("chat_messages").insert({sender_email:l.email,sender_id:l.id,content:g.trim(),type:"user",created_at:new Date().toISOString()})}catch(p){console.error("Error sending message:",p)}},handleSendPrivateMessage:async(g,p)=>{if(!(!l||!p.trim()))try{await J.from("private_messages").insert({sender_id:l.id,receiver_id:g,content:p.trim(),created_at:new Date().toISOString()})}catch(m){console.error("Error sending private message:",m)}}}}function T_(l,i,r){const[s,c]=q.useState([]),[d,f]=q.useState([]);q.useEffect(()=>{l&&g()},[l]),q.useEffect(()=>{const m=J.channel("friendship_events_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"friendship_events"},b=>{const{user1:w,user2:T}=b.new,E=Date.now();f(A=>[...A,{user1:w,user2:T,timestamp:E}]),setTimeout(()=>{f(A=>A.filter(R=>R.timestamp!==E))},5e3),g()}).subscribe(b=>console.log("Realtime friendship event status:",b));return()=>{J.removeChannel(m)}},[]);async function g(){if(l){console.log(" fetchFriends called for user:",l.id,l.email);try{const{data:m,error:b}=await J.rpc("get_mutual_friends",{user_uuid:l.id});if(b)throw console.error(" fetchFriends RPC error:",b),b;console.log(" fetchFriends result:",{user:l.id,friendsCount:m?.length||0,friends:m}),c(m||[]),m&&m.length>0?m.forEach(w=>{console.log(" Fetching private messages for friend:",w.friend_id),p(w.friend_id)}):console.log(" No friends found for user")}catch(m){console.error("fetchFriends error:",m)}}}async function p(m){if(l)try{const{data:b,error:w}=await J.from("private_messages").select("*").or(`and(sender_id.eq.${l.id},receiver_id.eq.${m}),and(sender_id.eq.${m},receiver_id.eq.${l.id})`).order("created_at",{ascending:!0});if(w)throw w;r(T=>({...T,[m]:b||[]}))}catch(b){console.error("fetchPrivateMessages error:",b)}}return{friends:s,setFriends:c,recentFriendships:d,fetchFriends:g,fetchPrivateMessages:p}}function A_(l,i){const r=q.useRef(null);return q.useCallback((...c)=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{l(...c)},i)},[l,i])}function O_(l){const[i,r]=q.useState([]),[s,c]=q.useState(null),d=A_(async()=>{console.log(" Debounced room fetch"),await g()},500);q.useEffect(()=>{if(!l)return;const m=J.channel("user_room_memberships_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_room_memberships",filter:`user_id=eq.${l.id}`},b=>{if(console.log(" User room membership REAL-TIME EVENT:",{event:b.eventType,room_id:b.new?.room_id||b.old?.room_id,user_id:b.new?.user_id||b.old?.user_id}),b.eventType==="INSERT")c(b.new.room_id),console.log(" User joined room:",b.new.room_id);else if(b.eventType==="DELETE"){const w=b.old.room_id;c(null),console.log(" User was KICKED from room:",w),typeof window.clearRoomMessages=="function"&&window.clearRoomMessages(w)}g()}).subscribe(b=>{console.log(" Room membership subscription status:",b)});return()=>{console.log(" Cleaning up room membership subscription"),J.removeChannel(m)}},[l]),q.useEffect(()=>{if(!l)return;console.log(" Setting up ALL room membership changes subscription");const m=J.channel("all_room_memberships_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_room_memberships"},b=>{console.log(" ANY user room membership changed:",b),d()}).subscribe(b=>{console.log(" All room memberships subscription status:",b)});return()=>{J.removeChannel(m)}},[l,d]),q.useEffect(()=>{if(!l)return;console.log(" Setting up room updates subscription");const m=J.channel("room_updates_changes").on("postgres_changes",{event:"*",schema:"public",table:"chat_rooms"},b=>{console.log(" Room data changed:",b),g()}).subscribe(b=>{console.log(" Room updates subscription status:",b)});return()=>{J.removeChannel(m)}},[l]);const f=async(m=l)=>{const b=m||l;if(!b)return console.log(" fetchCurrentUserRoom: No user provided"),c(null),null;try{console.log(" fetchCurrentUserRoom: Fetching for user:",b.id,b.email);const{data:w,error:T}=await J.from("user_room_memberships").select("room_id").eq("user_id",b.id);if(T)return console.error(" Error fetching user rooms:",T),c(null),null;if(console.log(" User room memberships found:",w),w&&w.length>0){const E=w[0].room_id;return c(E),console.log(" Current user room set to:",E),E}else return c(null),console.log(" User is not in any room"),null}catch(w){return console.error(" fetchCurrentUserRoom error:",w),c(null),null}},g=async()=>{try{console.log(" Fetching rooms with real-time data...");const{data:m,error:b}=await J.from("chat_rooms").select("*").eq("is_public",!0).order("created_at",{ascending:!1});if(b)throw b;console.log(" Basic rooms fetched:",m?.length||0,"rooms");const w=await Promise.all(m.map(async T=>{try{const{data:E}=await J.from("user_positions").select("email").eq("user_id",T.owner_id).single();return{...T,creator_email:E?.email||"Unknown"}}catch(E){return console.error(` Error fetching creator for room ${T.name}:`,E),{...T,creator_email:"Unknown"}}}));return console.log(" Rooms with creators:",w),r(w),w}catch(m){return console.error(" fetchRooms error",m),[]}};return{rooms:i,setRooms:r,currentUserRoom:s,setCurrentUserRoom:c,fetchRooms:g,fetchCurrentUserRoom:f,updateRoomSlots:async m=>{if(!m){console.log(" updateRoomSlots: No roomId provided");return}try{console.log(` updateRoomSlots: Starting for room ${m}`);const{data:b,error:w}=await J.from("user_room_memberships").select("id, user_id").eq("room_id",m);if(w){console.error(" updateRoomSlots: Error counting members:",w);return}const T=b?.length||0;console.log(` updateRoomSlots: Room ${m} has ${T} members`);const{error:E}=await J.from("chat_rooms").update({current_slots:T}).eq("id",m);E?console.error(" updateRoomSlots: Error updating database:",E):console.log(` updateRoomSlots: Successfully updated room ${m} to ${T} slots`)}catch(b){console.error(" updateRoomSlots: Unexpected error:",b)}}}}const j_={async updateUserPosition(l,i,r){try{const{error:s}=await J.rpc("update_user_position",{p_email:l,p_x:i,p_y:r});s&&console.warn("update_user_position error",s)}catch(s){console.warn("update_user_position exception",s)}},async sendRoomMessage(l,i,r,s){try{await J.from("room_messages").insert({room_id:l,sender_id:i,sender_email:r,content:s.trim(),type:"user",created_at:new Date().toISOString()})}catch(c){console.error("Error sending room message:",c)}},async followUser(l,i){try{const{error:r}=await J.rpc("follow_user",{p_follower:l,p_followee:i});return{error:r}}catch(r){return{error:r}}}};function R_(l,i){const r=q.useRef({});q.useEffect(()=>{if(!l)return;const s=(l.email||"").toLowerCase();r.current[s]||(r.current[s]={dx:(Math.random()-.5)*.01,dy:(Math.random()-.5)*.01});const c=setInterval(()=>{i(d=>d.map(f=>{if((f.email||"").toLowerCase()!==s||!f.is_online)return f;let g=(f.current_x??f.initial_x??.5)+r.current[s].dx,p=(f.current_y??f.initial_y??.5)+r.current[s].dy;return g>1&&(g=0),g<0&&(g=1),p>1&&(p=0),p<0&&(p=1),j_.updateUserPosition(s,g,p),{...f,current_x:g,current_y:p}}))},Km.TIMING.USER_MOVEMENT_INTERVAL);return()=>clearInterval(c)},[l,i])}function C_(){q.useRef({});const{user:l,setUser:i,loading:r,setLoading:s,isSigningOutRef:c,hasSentJoinMessageRef:d,markUserOnline:f,markUserOfflineViaService:g,sendSystemMessage:p}=S_(),{users:m,setUsers:b,followingList:w,setFollowingList:T,fetchAllUsers:E,fetchFollowingList:A}=x_(l),{messages:R,setMessages:L,privateMessages:Y,setPrivateMessages:Z,handleSendMessage:Q,handleSendPrivateMessage:W}=E_(l),{friends:ae,setFriends:re,recentFriendships:M,fetchFriends:I,fetchPrivateMessages:ue}=T_(l,Y,Z),{rooms:ve,setRooms:Te,currentUserRoom:Ee,setCurrentUserRoom:ne,fetchRooms:ee,fetchCurrentUserRoom:ye,updateRoomSlots:z}=O_(l);R_(l,b),q.useEffect(()=>{(async()=>{const{data:H}=await J.auth.getSession();H?.session?.user&&(i(H.session.user),await f(H.session.user,E)),s(!1)})();const{data:N}=J.auth.onAuthStateChange(async(H,P)=>{console.log(" Auth change:",H),H==="SIGNED_IN"&&P?.user?(console.log(" Setting user state:",P.user.email),i(P.user),f(P.user,E).catch(te=>console.error(te)),setTimeout(async()=>{console.log(" Loading user data after sign in..."),console.log(" Current user state:",l?.email);try{await new Promise(Ue=>setTimeout(Ue,100)),console.log(" Step 1: Fetching current user room...");const te=await ye(P.user);console.log(" Step 2: Fetching rooms...");const fe=await ee();console.log(" Step 3: Fetching friends..."),await I(),console.log(" All user data loaded after sign in"),console.log(" Final room state:",{currentUserRoom:te,roomsCount:fe.length,userEmail:l?.email})}catch(te){console.error(" Error loading user data:",te)}},100)):H==="SIGNED_OUT"&&(console.log(" User signed out, clearing all states"),i(null),b([]),L([]),Z({}),re([]),T([]),Te([]),ne(null))});return()=>N.subscription.unsubscribe()},[]),q.useEffect(()=>{E(),l&&I()},[l]),q.useEffect(()=>{l||(d.current=!1)},[l]),q.useEffect(()=>{const N=()=>{document.visibilityState==="visible"&&l&&(async()=>{try{const H=(l.email||"").toLowerCase();await J.from("user_positions").update({last_seen:new Date().toISOString()}).eq("email",H)}catch(H){console.error("Error updating last_seen:",H)}})()};return document.addEventListener("visibilitychange",N),()=>{document.removeEventListener("visibilitychange",N)}},[l]);const X=async N=>{if(l)try{console.log(" joinRoom: Starting process for room:",N),console.log(" joinRoom: Current user:",l.id,l.email);const{data:H,error:P}=await J.from("user_room_memberships").select("room_id").eq("user_id",l.id);if(P)throw console.error(" joinRoom: Error fetching current memberships:",P),P;const te=H&&H.length>0?H[0].room_id:null;if(console.log(" joinRoom: User currently in room:",te),te){console.log(" joinRoom: Leaving old room:",te);const{error:Ue}=await J.from("user_room_memberships").delete().eq("user_id",l.id).eq("room_id",te);if(Ue)throw console.error(" joinRoom: Error leaving old room:",Ue),Ue;console.log(" joinRoom: Successfully left old room"),console.log(" joinRoom: Updating slots for old room:",te),await z(te)}console.log(" joinRoom: Joining new room:",N);const{error:fe}=await J.from("user_room_memberships").insert({user_id:l.id,room_id:N});if(fe){console.error(" joinRoom: Error joining new room:",fe),alert("Error joining room: "+fe.message);return}console.log(" joinRoom: Successfully joined new room"),console.log(" joinRoom: Updating slots for new room:",N),await z(N),console.log(" joinRoom: Refreshing room data..."),await ee(),await ye(),console.log(" joinRoom: Process completed successfully")}catch(H){console.error(" joinRoom: Unexpected error:",H),alert("Error joining room: "+H.message)}};async function C(){if(!l)return;const N=(l.email||"").toLowerCase();b(H=>H.map(P=>(P.email||"").toLowerCase()===N?{...P,is_twinkle:!0,luminosity:1.5}:P));try{await J.from("user_positions").update({is_twinkle:!0,luminosity:1.5,last_seen:new Date().toISOString()}).eq("email",N)}catch(H){console.error("Error setting twinkle true:",H)}setTimeout(async()=>{b(H=>H.map(P=>(P.email||"").toLowerCase()===N?{...P,is_twinkle:!1,luminosity:.8}:P));try{await J.from("user_positions").update({is_twinkle:!1,luminosity:.8,last_seen:new Date().toISOString()}).eq("email",N)}catch(H){console.error("Error reverting twinkle:",H)}},3e3)}async function K(N){if(l)try{console.log(" Attempting to follow user:",N);const{error:H}=await J.rpc("follow_user",{p_follower:l.id,p_followee:N});if(H){console.error(" Supabase RPC follow_user error",H),await F(N);return}console.log(" follow_user executed successfully");const{data:P,error:te}=await J.rpc("check_friendship",{p_user1:l.id,p_user2:N});te?console.error(" check_friendship error",te):P===!0&&(console.log(" Friendship formed! Creating friendship event"),await J.from("friendship_events").insert({user1:l.id,user2:N}),I()),await A()}catch(H){console.error(" handleFollow error",H)}}async function F(N){try{console.log(" Trying direct follow insert for:",N);const{error:H}=await J.from("user_follows").insert({follower_id:l.id,followee_id:N}).select();H?console.error(" Direct follow insert error:",H):(console.log(" Direct follow insert successful"),await A())}catch(H){console.error(" followUserDirectly error:",H)}}async function v(){if(!l)return;const N=(l.email||"").toLowerCase();if(!c.current){if(c.current=!0,Ee){console.log(" Leaving room before sign out:",Ee);try{const{error:H}=await J.from("user_room_memberships").delete().eq("user_id",l.id);if(H)console.error(" Error leaving room on sign out:",H);else{console.log(" Successfully left room on sign out");const{data:P,error:te}=await J.from("user_room_memberships").select("id").eq("room_id",Ee);if(te)console.error(" Error counting room members on sign out:",te);else{const fe=P?.length||0;console.log(" Room member count after sign out:",fe);const{error:Ue}=await J.from("chat_rooms").update({current_slots:fe}).eq("id",Ee);Ue?console.error(" Error updating room slots on sign out:",Ue):console.log(" Room slots updated on sign out to:",fe)}}}catch(H){console.error(" Error during room leave on sign out:",H)}}await p(`${l.email} left the chat`,"leave"),b(H=>H.map(P=>(P.email||"").toLowerCase()===N?{...P,is_online:!1,luminosity:.1}:P));try{await g(N,E);try{await J.removeAllChannels()}catch(P){console.warn("removeAllChannels failed",P)}const{error:H}=await J.auth.signOut();H&&console.warn("auth.signOut error",H),i(null),b(P=>P.map(te=>(te.email||"").toLowerCase()===N?{...te,is_online:!1,luminosity:.1}:te))}catch(H){console.error("handleSignOut failed",H)}finally{c.current=!1}}}const j=async N=>{if(l)try{const{data:H,error:P}=await J.from("private_messages").update({is_read:!0}).eq("receiver_id",l.id).eq("sender_id",N).eq("is_read",!1).select();if(P)throw P;console.log(` Marked ${H?.length||0} messages as read for friend ${N}`),await ue(N)}catch(H){console.error("Error marking messages as read:",H)}};return r?_.jsx(w_,{message:"Connecting to the starry sky..."}):l?_.jsxs("div",{className:"fixed inset-0 w-screen h-screen overflow-hidden",children:[_.jsx("div",{children:"B"}),_.jsx(__,{user:l,users:m,setUsers:b,followingList:w,onSignOut:v,onTwinkle:C,messages:R,onSendMessage:Q,handleFollow:K,recentFriendships:M,friends:ae,privateMessages:Y,onSendPrivateMessage:W,onMarkMessagesAsRead:j,currentUserRoom:Ee,rooms:ve,onJoinRoom:X,supabase:J,fetchRooms:ee})]}):_.jsx(t_,{onSignIn:()=>J.auth.signInWithOAuth({provider:"google"})})}class U_ extends gr.Component{constructor(i){super(i),this.state={hasError:!1,error:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,r){console.error("Error caught by boundary:",i,r)}render(){return this.state.hasError?_.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"white",background:"#1a202c"},children:[_.jsx("h2",{children:"Something went wrong"}),_.jsx("p",{children:"Please refresh the page and try again."}),_.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",background:"#3182ce",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Refresh Page"}),_.jsx("details",{style:{marginTop:"20px",color:"#a0aec0"},children:this.state.error?.toString()})]}):this.props.children}}Ay.createRoot(document.getElementById("root")).render(_.jsx(gr.StrictMode,{children:_.jsx(U_,{children:_.jsx(C_,{})})}));
